(self.webpackChunkD2ArmorPicker=self.webpackChunkD2ArmorPicker||[]).push([[179],{4682:(rt,z,p)=>{"use strict";p.d(z,{F:()=>M});var D=p(5861),t=p(7975);function M($){const tt=new t.ZP("d2armorpicker-v2");return tt.version(19).stores({manifestArmor:"id++, hash, isExotic",inventoryArmor:"id++, itemInstanceId, isExotic, hash, name, masterworked, clazz, slot"}).upgrade(function(){var N=(0,D.Z)(function*(T){yield $()});return function(T){return N.apply(this,arguments)}}()),tt}},6471:(rt,z,p)=>{"use strict";p.d(z,{y:()=>D});var D=(()=>{return(t=D||(D={}))[t.ArmorSlotNone=0]="ArmorSlotNone",t[t.ArmorSlotHelmet=1]="ArmorSlotHelmet",t[t.ArmorSlotGauntlet=2]="ArmorSlotGauntlet",t[t.ArmorSlotChest=3]="ArmorSlotChest",t[t.ArmorSlotLegs=4]="ArmorSlotLegs",t[t.ArmorSlotClass=5]="ArmorSlotClass",D;var t})()},4517:(rt,z,p)=>{"use strict";p.d(z,{N:()=>D});var D=(()=>{return(t=D||(D={}))[t.None=-1]="None",t[t.Titan=0]="Titan",t[t.Hunter=1]="Hunter",t[t.Warlock=2]="Warlock",D;var t})()},8333:(rt,z,p)=>{"use strict";p.d(z,{O:()=>D});var D=(()=>{return(t=D||(D={}))[t.CombatStyleMod=0]="CombatStyleMod",t[t.Stasis=1]="Stasis",t[t.Void=2]="Void",t[t.Solar=3]="Solar",t[t.Arc=4]="Arc",t[t.Strand=5]="Strand",t[t.RetrofitMods=6]="RetrofitMods",D;var t})()},4661:(rt,z,p)=>{"use strict";p.d(z,{V:()=>c});var D=p(4859),t=p(9549),M=p(4385),$=p(3238),tt=p(7314),N=p(4144),T=p(455),Ct=p(2143),vt=p(3546),G=p(266),Ot=p(3162),Et=p(7392),Q=p(6308),R=p(8739),w=p(3683),J=p(3217),Pt=p(811),Rt=p(6338),qt=p(7084),Jt=p(5412),ut=p(7009),Lt=p(1572),Yt=p(3848),ht=p(7331),At=p(3267),s=p(4006),lt=p(9814),v=p(4650);let c=(()=>{class pt{}return pt.\u0275fac=function(Wt){return new(Wt||pt)},pt.\u0275mod=v.oAB({type:pt}),pt.\u0275inj=v.cJS({imports:[D.ot,t.lN,M.LD,$.Ng,tt.KP,N.c,T.rP,Ct.p0,vt.QW,G.AV,Ot.Cv,Et.Ps,Q.JX,R.TU,w.g0,J.Tx,Pt.vV,Rt.ie,qt.To,Jt.Is,ut.ZX,Lt.Cq,Yt.Nh,ht.Hi,At.SJ,s.UX,s.u5,lt.o9,lt.o9,s.UX,s.u5,D.ot,t.lN,M.LD,$.Ng,tt.KP,N.c,T.rP,Ct.p0,vt.QW,G.AV,Ot.Cv,Et.Ps,Q.JX,R.TU,w.g0,J.Tx,Pt.vV,Rt.ie,qt.To,Jt.Is,ut.ZX,Lt.Cq,Yt.Nh,ht.Hi,At.SJ]}),pt})()},3877:(rt,z,p)=>{"use strict";var D=p(1481),t=p(4650);const M_apiKey="9415df8eff46408aa9c0d51e4d69b94f",M_featureFlags_enableModslotLimitation=!1,M_featureFlags_enableZeroWaste=!1;var $=p(5829),tt=p(3683),N=p(6630),T=p(5861),Ct=p(6831),vt=p(529);let G=(()=>{class n{constructor(e,o){this.http=e,this.router=o,this._logoutEvent=new Ct.t(1),this.logoutEvent=this._logoutEvent.asObservable()}get refreshTokenExpired(){return this.refreshTokenExpiringAt<Date.now()}autoRegenerateTokens(){var e=this;return(0,T.Z)(function*(){return console.log("autoRegenerateTokens",{token:e.refreshToken,datenow:Date.now(),refreshTokenExpiringAt:e.refreshTokenExpiringAt,lastRefresh:e.lastRefresh,"Date.now() > (this.lastRefresh + timing)":Date.now()>e.lastRefresh+18e5}),!(e.refreshToken&&Date.now()<e.refreshTokenExpiringAt&&Date.now()>e.lastRefresh+18e5)||(yield e.generateTokens(!0))})()}getCurrentMembershipData(){var e=this;return(0,T.Z)(function*(){const o=JSON.parse(localStorage.getItem("auth-membershipInfo")||"null");if(null==o){const a=e.getCurrentMembershipData();return localStorage.setItem("auth-membershipInfo",JSON.stringify(a)),a}return o})()}generateTokens(e=!1){var o=this;return(0,T.Z)(function*(){console.info("Generate auth tokens","refresh based on refresh_token:",e);let u=`grant_type=authorization_code&code=${o.authCode}&client_id=37252&client_secret=KnVcJPWr7C5y0loOfBoKSyQ-vWXR0JICrgb1aJLsLgg`;return e&&(u=`grant_type=refresh_token&refresh_token=${o.refreshToken}&client_id=37252&client_secret=KnVcJPWr7C5y0loOfBoKSyQ-vWXR0JICrgb1aJLsLgg`),yield o.http.post("https://www.bungie.net/Platform/App/OAuth/Token/",u,{headers:{"Content-Type":"application/x-www-form-urlencoded","X-API-Key":M_apiKey}}).toPromise().then(x=>(console.log("generateTokens",x),o.accessToken=x.access_token,o.refreshToken=x.refresh_token,o.refreshTokenExpiringAt=Date.now()+1e3*x.refresh_expires_in-1e4,o.lastRefresh=Date.now(),!0)).catch(function(){var x=(0,T.Z)(function*(h){return console.log({err:h}),yield o.logout(),!1});return function(h){return x.apply(this,arguments)}}())})()}isAuthenticated(){return!!this.accessToken}get authCode(){return localStorage.getItem("code")}set authCode(e){e?(console.info("Setting new auth code"),localStorage.setItem("code",""+e)):(console.info("Clearing auth code"),localStorage.removeItem("code"))}get accessToken(){return localStorage.getItem("accessToken")}set accessToken(e){e?(console.info("Setting new access token"),localStorage.setItem("accessToken",""+e)):(console.info("Clearing access token"),localStorage.removeItem("accessToken"))}get refreshToken(){return localStorage.getItem("refreshToken")}set refreshToken(e){e?(console.info("Setting new refresh token"),localStorage.setItem("refreshToken",""+e)):(console.info("Clearing refresh token"),localStorage.removeItem("refreshToken"))}get refreshTokenExpiringAt(){let e=localStorage.getItem("refreshTokenExpiringAt")||"0";return e?Number.parseInt(e):0}set refreshTokenExpiringAt(e){e?(console.info("Setting new refresh token"),localStorage.setItem("refreshTokenExpiringAt",""+e)):(console.info("Clearing refresh token"),localStorage.removeItem("refreshTokenExpiringAt"))}get lastRefresh(){let e=localStorage.getItem("lastRefresh")||"0";return e?Number.parseInt(e):0}set lastRefresh(e){e?localStorage.setItem("lastRefresh",e.toString()):localStorage.removeItem("lastRefresh")}clearManifestInfo(){localStorage.removeItem("LastArmorUpdate"),localStorage.removeItem("LastManifestUpdate")}clearLoginInfo(){this.lastRefresh=null,this.refreshTokenExpiringAt=null,this.authCode=null,this.accessToken=null,this.refreshToken=null,localStorage.removeItem("auth-membershipInfo")}logout(){var e=this;return(0,T.Z)(function*(){try{e._logoutEvent.next(null),e.clearManifestInfo(),e.clearLoginInfo()}finally{yield e.router.navigate(["login"])}})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(vt.eN),t.LFG(N.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ot=(()=>{class n{constructor(e,o,a){this.activatedRoute=e,this.router=o,this.loginService=a}ngOnInit(){var e=this;this.activatedRoute.queryParams.subscribe(function(){var o=(0,T.Z)(function*(a){let r=a.code;window.location.search.indexOf("?code=")>-1&&(r=window.location.search.substr(6)),console.info({code:r}),r&&(e.loginService.authCode=r,console.info("Generate tokens with the new code"),yield e.loginService.generateTokens(),console.info("Now navigate to /"),yield e.router.navigate(["/"]))});return function(a){return o.apply(this,arguments)}}())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(N.gz),t.Y36(N.F0),t.Y36(G))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-handle-bungie-login"]],decls:0,vars:0,template:function(e,o){}}),n})(),Et=(()=>{class n{constructor(){this.title="D2ArmorPicker",console.log("PRODUCTION?",true)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[["color","accent",1,"bungie-day",2,"display","none"],[1,"header-spacer"],["fxHide.xs","","src","../assets/bungie-game2give.png","alt","donordrive",1,"donordrive"],["href","https://bungiefoundation.donordrive.com/participant/16280","target","_blank","title","Awesome guardians support the Bungie Game2Give every year!"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-toolbar",0),t._UZ(1,"span",1)(2,"img",2),t.TgZ(3,"a",3),t._uU(4," Support us at the Bungie Game2Give 2022 \u2764 "),t.qZA(),t._UZ(5,"span",1),t.qZA(),t._UZ(6,"app-handle-bungie-login")(7,"router-outlet"))},dependencies:[$.b8,tt.Ye,N.lC,Ot],styles:[".bungie-day[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;position:relative;max-width:100vw;word-break:break-all}.bungie-day[_ngcontent-%COMP%]   img.donordrive[_ngcontent-%COMP%]{height:30px;margin-left:2px;margin-right:2px}.bungie-day[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .bungie-day[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#fff}.bungie-day[_ngcontent-%COMP%]   .header-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),n})();var Q=p(1576),R=p(4859),w=p(3546),J=p(7084);let Pt=(()=>{class n{constructor(){}ngOnInit(){}startLogin(){window.location.href="https://www.bungie.net/en/OAuth/Authorize?client_id=37252&response_type=code&reauth=true"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:76,vars:0,consts:[["mat-card-avatar","",1,"example-header-image"],["href","https://ko-fi.com/mijago","target","_blank"],["href","https://github.com/Mijago/D2ArmorPicker","target","_blank"],["color","primary","mat-raised-button","",3,"click"],[1,"mat-elevation-z11"],["src","assets/info/statselection.png",1,"image-example"],["src","assets/resultOverviewWithFlex.png",1,"image-example"],["src","assets/info/whattodonow.png",1,"image-example"],["src","assets/info/armorClustering.png",1,"image-example"],["fxLayoutGap","10px","fxLayout","row",1,"armor-image-container"],["src","assets/info/cluster-example/img.png"],["src","assets/info/cluster-example/img_1.png"],["src","assets/info/cluster-example/img_2.png"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-header"),t._UZ(2,"div",0),t.TgZ(3,"mat-card-title"),t._uU(4,"Destiny 2 Armor Picker"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6,"A simple armor min-max tool by Mijago."),t.qZA()(),t.TgZ(7,"mat-card-content")(8,"p"),t._uU(9," This tool allows you to select the optimal armor from your inventory and vault to satisfy your stat needs. It also tells you which stat mods you have to use! "),t._UZ(10,"br")(11,"br"),t._uU(12," You have to log in to enable this tool to grab your armor from the API."),t._UZ(13,"br"),t._uU(14," If you like my tools and want to support me, head to "),t.TgZ(15,"a",1),t._uU(16,"ko-fi.com"),t.qZA(),t._uU(17," and buy me a coffee! \u2764 "),t._UZ(18,"br"),t._uU(19," If you found a bug or have a feature request, please open an issue "),t.TgZ(20,"a",2),t._uU(21,"in the Github Repository"),t.qZA(),t._uU(22,"! "),t.qZA(),t.TgZ(23,"p"),t._uU(24," D2ArmorPicker uses the Bungie.net api and it's OAuth authorization. You log in on an official Bungie.net page and D2ArmorPicker receives a temporary login token from Bungie. That means it does not receive your credentials. "),t.qZA()(),t.TgZ(25,"mat-card-actions")(26,"button",3),t.NdJ("click",function(){return o.startLogin()}),t._uU(27,"Login"),t.qZA()()(),t.TgZ(28,"mat-card")(29,"mat-card-title"),t._uU(30," Examples "),t.qZA(),t.TgZ(31,"mat-card-subtitle"),t._uU(32,"Some examples to show what D2ArmorPicker can do."),t.qZA(),t.TgZ(33,"mat-card-content")(34,"mat-accordion")(35,"mat-expansion-panel",4)(36,"mat-expansion-panel-header")(37,"mat-panel-title"),t._uU(38," Stat Selection "),t.qZA(),t.TgZ(39,"mat-panel-description"),t._uU(40," The heart of this tool. "),t.qZA()(),t.TgZ(41,"p"),t._uU(42," First, you are able to select the stats you want. The tool will automatically parse all your armor (including your vault and your postmaster), and then show you which stat selections are even possible with your current gear. The tool also shows you all possible loadouts with three or four stats at 100! "),t._UZ(43,"img",5)(44,"br")(45,"br"),t._uU(46," There are also additional settings. You can add stasis fragments and negative and positive stat mods to your builds. Also, you can select 0-waste builds (so only flat numbers). D2ArmorPicker will also add stat mods to reduce wasted stats wherever possible! "),t.qZA()(),t.TgZ(47,"mat-expansion-panel",4)(48,"mat-expansion-panel-header")(49,"mat-panel-title"),t._uU(50," Result Display "),t.qZA(),t.TgZ(51,"mat-panel-description"),t._uU(52," What you will get from this tool. "),t.qZA()(),t.TgZ(53,"p"),t._uU(54," D2ArmorPicker will show you a table with many results. You can sort and filter it, and then you click on one row to see which items are needed for your desired stats. "),t._UZ(55,"img",6)(56,"br")(57,"br"),t._uU(58," The page will also give you a detailed description of what you have to do in order to get to your desired build. The following screenshot shows one of the more detailed descriptions: "),t._UZ(59,"img",7),t.qZA()(),t.TgZ(60,"mat-expansion-panel",4)(61,"mat-expansion-panel-header")(62,"mat-panel-title"),t._uU(63," Armor Clustering "),t.qZA(),t.TgZ(64,"mat-panel-description"),t._uU(65," For the time when your vault is overflowing. "),t.qZA()(),t.TgZ(66,"div"),t._uU(67," Since version 2.0.14, D2ArmorPicker has an armor clustering feature. This means that it takes all your armor and groups it in 25 groups, where all items in one group has very similar stats. This can help you to clear out your vault, especially from duplicated armor rolls. "),t._UZ(68,"img",8)(69,"br")(70,"br"),t._uU(71," Take Cluster 1, for example. I copy the DIM-Query, enter it into DIM and see the following results: "),t.TgZ(72,"div",9),t._UZ(73,"img",10)(74,"img",11)(75,"img",12),t.qZA()()()()()())},dependencies:[Q.xw,Q.SQ,R.lW,w.a8,w.dk,w.dn,w.n5,w.$j,w.hq,w.kc,J.pp,J.ib,J.yz,J.yK,J.u4],styles:["mat-card[_ngcontent-%COMP%]{max-width:600px;margin-bottom:4px;margin-left:auto;margin-right:auto}button[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px}a[_ngcontent-%COMP%]{color:#99afe3}a[_ngcontent-%COMP%]:visited{color:#7294dc}.example-header-image[_ngcontent-%COMP%]{background-image:url(superGreatLogo.5307f2494314b5e1.png);background-size:cover}.image-example[_ngcontent-%COMP%]{max-width:100%}.armor-image-container[_ngcontent-%COMP%]{overflow:auto}.armor-image-container[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-height:300px}"]}),n})();var Rt=p(8746);let qt=(()=>{class n{constructor(e,o){this.auth=e,this.router=o}canActivate(e,o){return!!this.auth.isAuthenticated()||(this.router.navigate(["login"]),!1)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(G),t.LFG(N.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jt=(()=>{class n{constructor(e,o){this.auth=e,this.router=o}canActivate(e,o){return!this.auth.isAuthenticated()||(this.router.navigate(["/"]),!1)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(G),t.LFG(N.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ut=p(2289),Lt=p(4850),Yt=p(5154),ht=p(591);let At=(()=>{class n{constructor(){this.__status={calculatingResults:!1,calculatingPermutations:!1,updatingResultsTable:!1,updatingInventory:!1,updatingManifest:!1},this._status=new ht.X(this.__status),this.status=this._status.asObservable()}getStatus(){return this.__status}modifyStatus(e){e(this.__status),console.log("modifyStatus",this.__status),this._status.next(this.__status)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var s=p(4517),lt=p(13),v=(()=>{return(n=v||(v={}))[n.NONE=0]="NONE",n[n.MINOR_MOBILITY=1]="MINOR_MOBILITY",n[n.MAJOR_MOBILITY=2]="MAJOR_MOBILITY",n[n.ARTIFICE_MOBILITY=3]="ARTIFICE_MOBILITY",n[n.MINOR_RESILIENCE=4]="MINOR_RESILIENCE",n[n.MAJOR_RESILIENCE=5]="MAJOR_RESILIENCE",n[n.ARTIFICE_RESILIENCE=6]="ARTIFICE_RESILIENCE",n[n.MINOR_RECOVERY=7]="MINOR_RECOVERY",n[n.MAJOR_RECOVERY=8]="MAJOR_RECOVERY",n[n.ARTIFICE_RECOVERY=9]="ARTIFICE_RECOVERY",n[n.MINOR_DISCIPLINE=10]="MINOR_DISCIPLINE",n[n.MAJOR_DISCIPLINE=11]="MAJOR_DISCIPLINE",n[n.ARTIFICE_DISCIPLINE=12]="ARTIFICE_DISCIPLINE",n[n.MINOR_INTELLECT=13]="MINOR_INTELLECT",n[n.MAJOR_INTELLECT=14]="MAJOR_INTELLECT",n[n.ARTIFICE_INTELLECT=15]="ARTIFICE_INTELLECT",n[n.MINOR_STRENGTH=16]="MINOR_STRENGTH",n[n.MAJOR_STRENGTH=17]="MAJOR_STRENGTH",n[n.ARTIFICE_STRENGTH=18]="ARTIFICE_STRENGTH",v;var n})(),c=(()=>{return(n=c||(c={}))[n.Mobility=0]="Mobility",n[n.Resilience=1]="Resilience",n[n.Recovery=2]="Recovery",n[n.Discipline=3]="Discipline",n[n.Intellect=4]="Intellect",n[n.Strength=5]="Strength",c;var n})();const pt={[v.NONE]:[c.Strength,0,0,0],[v.MINOR_MOBILITY]:[c.Mobility,5,1,204137529],[v.MAJOR_MOBILITY]:[c.Mobility,10,3,3961599962],[v.ARTIFICE_MOBILITY]:[c.Mobility,3,0,0],[v.MINOR_RESILIENCE]:[c.Resilience,5,2,3682186345],[v.MAJOR_RESILIENCE]:[c.Resilience,10,4,2850583378],[v.ARTIFICE_RESILIENCE]:[c.Resilience,3,0,0],[v.MINOR_RECOVERY]:[c.Recovery,5,2,555005975],[v.MAJOR_RECOVERY]:[c.Recovery,10,4,2645858828],[v.ARTIFICE_RECOVERY]:[c.Recovery,3,0,0],[v.MINOR_DISCIPLINE]:[c.Discipline,5,1,2623485440],[v.MAJOR_DISCIPLINE]:[c.Discipline,10,3,4048838440],[v.ARTIFICE_DISCIPLINE]:[c.Discipline,3,0,0],[v.MINOR_INTELLECT]:[c.Intellect,5,2,1227870362],[v.MAJOR_INTELLECT]:[c.Intellect,10,4,3355995799],[v.ARTIFICE_INTELLECT]:[c.Intellect,3,0,0],[v.MINOR_STRENGTH]:[c.Strength,5,1,3699676109],[v.MAJOR_STRENGTH]:[c.Strength,10,3,3253038666],[v.ARTIFICE_STRENGTH]:[c.Strength,3,0,0]},Zt={[c.Mobility]:"Mobility",[c.Resilience]:"Resilience",[c.Recovery]:"Recovery",[c.Discipline]:"Discipline",[c.Intellect]:"Intellect",[c.Strength]:"Strength"},Wt={[c.Mobility]:"https://www.bungie.net/common/destiny2_content/icons/e26e0e93a9daf4fdd21bf64eb9246340.png",[c.Resilience]:"https://www.bungie.net/common/destiny2_content/icons/202ecc1c6febeb6b97dafc856e863140.png",[c.Recovery]:"https://www.bungie.net/common/destiny2_content/icons/128eee4ee7fc127851ab32eac6ca91cf.png",[c.Discipline]:"https://www.bungie.net/common/destiny2_content/icons/ca62128071dc254fe75891211b98b237.png",[c.Intellect]:"https://www.bungie.net/common/destiny2_content/icons/59732534ce7060dba681d1ba84c055a6.png",[c.Strength]:"https://www.bungie.net/common/destiny2_content/icons/c7eefc8abbaa586eeab79e962a79d6ad.png"};var xt=(()=>{return(n=xt||(xt={}))[n.ClassAbilityRegenerationStat=10]="ClassAbilityRegenerationStat",xt;var n})(),_=(()=>{return(n=_||(_={}))[n.None=0]="None",n[n.SlotNightmare=1]="SlotNightmare",n[n.SlotArtifice=2]="SlotArtifice",n[n.SlotLastWish=3]="SlotLastWish",n[n.SlotGardenOfSalvation=4]="SlotGardenOfSalvation",n[n.SlotDeepStoneCrypt=5]="SlotDeepStoneCrypt",n[n.SlotVaultOfGlass=6]="SlotVaultOfGlass",n[n.PerkIronBanner=7]="PerkIronBanner",n[n.PerkUniformedOfficer=8]="PerkUniformedOfficer",n[n.SlotVowOfTheDisciple=9]="SlotVowOfTheDisciple",n[n.SlotKingsFall=10]="SlotKingsFall",n[n.PerkPlunderersTrappings=11]="PerkPlunderersTrappings",n[n.SeraphSensorArray=12]="SeraphSensorArray",n[n.COUNT=13]="COUNT",_;var n})();const oe={[_.None]:"None",[_.SlotNightmare]:"Nightmare Hunt Modslot",[_.SlotArtifice]:"Artifice Modslot",[_.SlotLastWish]:"Last Wish Modslot",[_.SlotGardenOfSalvation]:"Garden of Salvation Modslot",[_.SlotDeepStoneCrypt]:"Deep Stone Crypt Modslot",[_.SlotVaultOfGlass]:"Vault of Glass Modslot",[_.SlotVowOfTheDisciple]:"Vow of the Disciple Modslot",[_.PerkIronBanner]:"Iron Banner Perk",[_.PerkUniformedOfficer]:"Uniformed Officer",[_.SlotKingsFall]:"King's Fall Modslot",[_.PerkPlunderersTrappings]:"Plunderer's Trappings",[_.SeraphSensorArray]:"Seraph Sensor Array",[_.COUNT]:""},ie={[_.None]:"https://www.bungie.net/img/misc/missing_icon_d2.png",[_.SlotNightmare]:"https://www.bungie.net/common/destiny2_content/icons/94fe19fb98ae33e79921e3a8aa07800f.jpg",[_.SlotArtifice]:"https://bungie.net/common/destiny2_content/icons/74aeb2f3d7bc16a31a6924822f850184.png",[_.SlotLastWish]:"https://bungie.net/common/destiny2_content/icons/c70116144be386def9e675d76dacfe64.png",[_.SlotGardenOfSalvation]:"https://www.bungie.net/common/destiny2_content/icons/94fe19fb98ae33e79921e3a8aa07800f.jpg",[_.SlotDeepStoneCrypt]:"https://bungie.net/common/destiny2_content/icons/3c14e3c3a747a7487c76f38602b9e2fe.png",[_.SlotVaultOfGlass]:"https://bungie.net/common/destiny2_content/icons/9603e0d01826d7ab97ce1b1bf3eb3c96.png",[_.SlotVowOfTheDisciple]:"https://www.bungie.net//common/destiny2_content/icons/1f66fa02b19f40e6ce5d8336c7ed5a00.png",[_.PerkIronBanner]:"https://bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_fe57052d7cf971f7502daa75a2ca2437.png",[_.PerkUniformedOfficer]:"https://bungie.net/common/destiny2_content/icons/b39b83dd5ea3d9144e4e63f103af8b46.png",[_.SlotKingsFall]:"https://www.bungie.net/common/destiny2_content/icons/bc809878e0c2ed8fd32feb62aaae690c.png",[_.PerkPlunderersTrappings]:"https://www.bungie.net/common/destiny2_content/icons/d7ad8979dab2f4544e2cfb66f262f7d1.png",[_.SeraphSensorArray]:"https://www.bungie.net/common/destiny2_content/icons/d7ad8979dab2f4544e2cfb66f262f7d1.png",[_.COUNT]:""},Se={[_.None]:"",[_.SlotNightmare]:"modslot:nightmare",[_.SlotArtifice]:'perkname:"artifice armor"',[_.SlotLastWish]:"modslot:lastwish",[_.SlotGardenOfSalvation]:"modslot:gardenofsalvation",[_.SlotDeepStoneCrypt]:"modslot:deepstonecrypt",[_.SlotVaultOfGlass]:"modslot:vaultofglass",[_.SlotVowOfTheDisciple]:"source:vow",[_.PerkIronBanner]:'perkname:"iron lord\'s pride"',[_.PerkUniformedOfficer]:'perkname:"Uniformed Officer"',[_.SlotKingsFall]:"modslot:kingsfall",[_.PerkPlunderersTrappings]:'perkname:"plunderer\'s trappings"',[_.SeraphSensorArray]:'perkname:"seraph sensor array"',[_.COUNT]:""},ae={0:"Any",1:"Arc",2:"Solar",3:"Void",6:"Stasis",4:"Ghost",5:"Subclass"},re={0:"",1:"https://www.bungie.net/common/destiny2_content/icons/DestinyEnergyTypeDefinition_092d066688b879c807c3b460afdd61e6.png",2:"https://www.bungie.net/common/destiny2_content/icons/DestinyEnergyTypeDefinition_2a1773e10968f2d088b97c22b22bba9e.png",3:"https://www.bungie.net/common/destiny2_content/icons/DestinyEnergyTypeDefinition_ceb2f6197dccf3958bb31cc783eb97a0.png",6:"https://www.bungie.net/common/destiny2_content/icons/DestinyEnergyTypeDefinition_530c4c3e7981dc2aefd24fd3293482bf.png",4:"",5:""};var C=p(6471),f=p(8333);function le(n){return{[c.Mobility]:{fixed:!1,value:n},[c.Resilience]:{fixed:!1,value:n},[c.Recovery]:{fixed:!1,value:n},[c.Discipline]:{fixed:!1,value:n},[c.Intellect]:{fixed:!1,value:n},[c.Strength]:{fixed:!1,value:n}}}class Ft{constructor(){this.characterClass=s.N.Titan,this.addConstent1Resilience=!1,this.assumeEveryLegendaryIsArtifice=!1,this.disabledItems=[],this.minimumStatTiers={[c.Mobility]:{fixed:!1,value:0},[c.Resilience]:{fixed:!1,value:0},[c.Recovery]:{fixed:!1,value:0},[c.Discipline]:{fixed:!1,value:0},[c.Intellect]:{fixed:!1,value:0},[c.Strength]:{fixed:!1,value:0}},this.maximumStatMods=5,this.maximumModSlots={[C.y.ArmorSlotHelmet]:{fixed:!1,value:5},[C.y.ArmorSlotGauntlet]:{fixed:!1,value:5},[C.y.ArmorSlotChest]:{fixed:!1,value:5},[C.y.ArmorSlotLegs]:{fixed:!1,value:5},[C.y.ArmorSlotClass]:{fixed:!1,value:5},[C.y.ArmorSlotNone]:{fixed:!1,value:5}},this.putArtificeMods=!0,this.useFotlArmor=!0,this.allowBlueArmorPieces=!0,this.ignoreSunsetArmor=!1,this.assumeLegendariesMasterworked=!0,this.assumeExoticsMasterworked=!0,this.assumeClassItemMasterworked=!0,this.onlyUseMasterworkedItems=!1,this.limitParsedResults=!0,this.tryLimitWastedStats=!1,this.onlyShowResultsWithNoWastedStats=!1,this.showWastedStatsColumn=!1,this.showPotentialTierColumn=!1,this.selectedModElement=f.O.Stasis,this.enabledMods=[],this.selectedExotics=[],this.armorPerks={[C.y.ArmorSlotHelmet]:{fixed:!0,value:_.None},[C.y.ArmorSlotGauntlet]:{fixed:!0,value:_.None},[C.y.ArmorSlotChest]:{fixed:!0,value:_.None},[C.y.ArmorSlotLegs]:{fixed:!0,value:_.None},[C.y.ArmorSlotClass]:{fixed:!0,value:_.None},[C.y.ArmorSlotNone]:{fixed:!0,value:_.None}}}static buildEmptyConfiguration(){return{enabledMods:[],disabledItems:[],addConstent1Resilience:!1,assumeEveryLegendaryIsArtifice:!1,putArtificeMods:!0,useFotlArmor:!1,maximumStatMods:5,onlyUseMasterworkedItems:!1,ignoreSunsetArmor:!1,allowBlueArmorPieces:!0,assumeLegendariesMasterworked:!0,assumeExoticsMasterworked:!0,assumeClassItemMasterworked:!0,limitParsedResults:!0,tryLimitWastedStats:!0,onlyShowResultsWithNoWastedStats:!1,showWastedStatsColumn:!1,showPotentialTierColumn:!1,characterClass:s.N.Titan,selectedModElement:f.O.Stasis,selectedExotics:[],maximumModSlots:{[C.y.ArmorSlotHelmet]:{fixed:!1,value:5},[C.y.ArmorSlotGauntlet]:{fixed:!1,value:5},[C.y.ArmorSlotChest]:{fixed:!1,value:5},[C.y.ArmorSlotLegs]:{fixed:!1,value:5},[C.y.ArmorSlotClass]:{fixed:!1,value:5},[C.y.ArmorSlotNone]:{fixed:!1,value:5}},armorPerks:{[C.y.ArmorSlotHelmet]:{fixed:!0,value:_.None},[C.y.ArmorSlotGauntlet]:{fixed:!0,value:_.None},[C.y.ArmorSlotChest]:{fixed:!0,value:_.None},[C.y.ArmorSlotLegs]:{fixed:!0,value:_.None},[C.y.ArmorSlotClass]:{fixed:!0,value:_.None},[C.y.ArmorSlotNone]:{fixed:!0,value:_.None}},minimumStatTiers:le(0)}}}var ce=p(4682);let ct=(()=>{class n{constructor(e){var o=this;this.auth=e,this.db=(0,ce.F)((0,T.Z)(function*(){yield o.auth.clearManifestInfo()})),this.manifestArmor=this.db.table("manifestArmor"),this.inventoryArmor=this.db.table("inventoryArmor"),this.auth.logoutEvent.subscribe(function(){var a=(0,T.Z)(function*(r){yield o.clearDatabase()});return function(r){return a.apply(this,arguments)}}())}initialize(){var e=this;this.db=(0,ce.F)((0,T.Z)(function*(){yield e.auth.clearManifestInfo()})),this.manifestArmor=this.db.table("manifestArmor"),this.inventoryArmor=this.db.table("inventoryArmor")}clearDatabase(){var e=this;return(0,T.Z)(function*(){localStorage.removeItem("LastManifestUpdate"),localStorage.removeItem("LastArmorUpdate"),yield e.inventoryArmor.clear()})()}resetDatabase(e=!0){var o=this;return(0,T.Z)(function*(){localStorage.removeItem("LastManifestUpdate"),localStorage.removeItem("last-manifest-revision"),localStorage.removeItem("last-manifest-db-name"),localStorage.removeItem("LastArmorUpdate"),localStorage.removeItem("last-armor-db-name"),yield o.db.delete(),e&&o.initialize()})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(G))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var mt=p(9598),g=(()=>{return(n=g||(g={}))[n.WhisperOfDurance=1e3]="WhisperOfDurance",n[n.WhisperOfChains=1001]="WhisperOfChains",n[n.WhisperOfConduction=1002]="WhisperOfConduction",n[n.WhisperOfShards=1003]="WhisperOfShards",n[n.WhisperOfHedrons=1100]="WhisperOfHedrons",n[n.WhisperOfBonds=1101]="WhisperOfBonds",n[n.WhisperOfHunger=1102]="WhisperOfHunger",n[n.WhisperOfFractures=1103]="WhisperOfFractures",n[n.EchoOfExpulsion=1200]="EchoOfExpulsion",n[n.EchoOfProvision=1201]="EchoOfProvision",n[n.EchoOfPersistence=1202]="EchoOfPersistence",n[n.EchoOfLeeching=1203]="EchoOfLeeching",n[n.EchoOfDomineering=1204]="EchoOfDomineering",n[n.EchoOfDilation=1205]="EchoOfDilation",n[n.EchoOfUndermining=1206]="EchoOfUndermining",n[n.EchoOfInstability=1207]="EchoOfInstability",n[n.EchoOfHarvest=1208]="EchoOfHarvest",n[n.EchoOfObscurity=1209]="EchoOfObscurity",n[n.EchoOfStarvation=1210]="EchoOfStarvation",n[n.EchoOfVigilance=1211]="EchoOfVigilance",n[n.EmberOfBenelovence=1300]="EmberOfBenelovence",n[n.EmberOfBeams=1301]="EmberOfBeams",n[n.EmberOfEmpyrean=1302]="EmberOfEmpyrean",n[n.EmberOfCombustion=1303]="EmberOfCombustion",n[n.EmberOfChar=1304]="EmberOfChar",n[n.EmberOfTempering=1305]="EmberOfTempering",n[n.EmberOfEruption=1306]="EmberOfEruption",n[n.EmberOfWonder=1307]="EmberOfWonder",n[n.EmberOfSearing=1308]="EmberOfSearing",n[n.EmberOfTorches=1309]="EmberOfTorches",n[n.EmberOfMercy=1310]="EmberOfMercy",n[n.SparkOfBrilliance=1400]="SparkOfBrilliance",n[n.SparkOfFeedback=1401]="SparkOfFeedback",n[n.SparkOfDischarge=1402]="SparkOfDischarge",n[n.SparkOfFocus=1403]="SparkOfFocus",n[n.SparkOfVolts=1404]="SparkOfVolts",n[n.SparkOfResistance=1405]="SparkOfResistance",n[n.SparkOfShock=1406]="SparkOfShock",n[n.ThreadOfFury=1600]="ThreadOfFury",n[n.ThreadOfAscent=1601]="ThreadOfAscent",n[n.ThreadOfFinality=1602]="ThreadOfFinality",n[n.ThreadOfWarding=1603]="ThreadOfWarding",n[n.ThreadOfTransmutation=1604]="ThreadOfTransmutation",n[n.ThreadOfEvolution=1605]="ThreadOfEvolution",n[n.ThreadOfBinding=1606]="ThreadOfBinding",n[n.ThreadOfGeneration=1607]="ThreadOfGeneration",n[n.ThreadOfContinuity=1608]="ThreadOfContinuity",g;var n})();const gt={[g.WhisperOfDurance]:{id:g.WhisperOfDurance,name:"Whisper Of Durance",description:"Slow from your abilities lasts longer. For those abilities that linger, their duration will also increase.",type:f.O.Stasis,bonus:[{stat:c.Strength,value:10}],cost:1,requiredArmorAffinity:0,hash:3469412969},[g.WhisperOfChains]:{id:g.WhisperOfChains,name:"Whisper Of Chains",description:"While you are near frozen targets or a friendly Stasis crystal, you take reduced damage from targets.",type:f.O.Stasis,bonus:[{stat:c.Recovery,value:10}],cost:1,requiredArmorAffinity:0,hash:537774540},[g.WhisperOfShards]:{id:g.WhisperOfShards,name:"Whisper Of Shards",description:"Shattering a Stasis crystal temporarily boosts your grenade recharge rate. Shattering additional Stasis crystals increases the duration of this benefit.",type:f.O.Stasis,bonus:[{stat:c.Resilience,value:10}],cost:1,requiredArmorAffinity:0,hash:3469412975},[g.WhisperOfConduction]:{id:g.WhisperOfConduction,name:"Whisper Of Conduction",description:"Nearby Stasis shards track to your position.",type:f.O.Stasis,bonus:[{stat:c.Resilience,value:10},{stat:c.Intellect,value:10}],cost:1,requiredArmorAffinity:0,hash:2483898429},[g.WhisperOfBonds]:{id:g.WhisperOfBonds,name:"Whisper of Bonds",description:"Defeating frozen targets grants you Super energy.",type:f.O.Stasis,bonus:[{stat:c.Discipline,value:-10},{stat:c.Intellect,value:-10}],cost:1,requiredArmorAffinity:0,hash:3469412974},[g.WhisperOfHedrons]:{id:g.WhisperOfHedrons,name:"Whisper of Hedrons",description:"Dramatically increases weapon stability, weapon aim assist, Mobility, Resilience, and Recovery after freezing a target with Stasis.",type:f.O.Stasis,bonus:[{stat:c.Strength,value:-10}],cost:1,requiredArmorAffinity:0,hash:3469412970},[g.WhisperOfFractures]:{id:g.WhisperOfFractures,name:"Whisper of Fractures",description:"Your melee energy recharges faster when you are near two or more targets.",type:f.O.Stasis,bonus:[{stat:c.Discipline,value:-10}],cost:1,requiredArmorAffinity:0,hash:537774542},[g.WhisperOfHunger]:{id:g.WhisperOfHunger,name:"Whisper of Hunger",description:"Increases the melee energy gained from picking up Stasis shards.",type:f.O.Stasis,bonus:[{stat:c.Mobility,value:-10},{stat:c.Recovery,value:-10}],cost:1,requiredArmorAffinity:0,hash:2483898431},[g.EchoOfExpulsion]:{id:g.EchoOfExpulsion,name:"Echo of Expulsion",description:"Void ability final blows cause targets to explode.",type:f.O.Void,bonus:[{stat:c.Intellect,value:10}],cost:1,requiredArmorAffinity:0,hash:2272984665},[g.EchoOfProvision]:{id:g.EchoOfProvision,name:"Echo of Provision",description:"Damaging targets with grenades grants melee energy.",type:f.O.Void,bonus:[{stat:c.Strength,value:-10}],cost:1,requiredArmorAffinity:0,hash:2272984664},[g.EchoOfPersistence]:{id:g.EchoOfPersistence,name:"Echo of Persistence",description:"Void buffs applied to you (Invisibility, Overshield, and Devour) have increased duration.",type:f.O.Void,bonus:[{stat:xt.ClassAbilityRegenerationStat,value:-10}],cost:1,requiredArmorAffinity:0,hash:2272984671},[g.EchoOfLeeching]:{id:g.EchoOfLeeching,name:"Echo of Leeching",description:"Melee final blows start health regeneration for you and nearby allies.",type:f.O.Void,bonus:[{stat:c.Resilience,value:10}],cost:1,requiredArmorAffinity:0,hash:2272984670},[g.EchoOfDomineering]:{id:g.EchoOfDomineering,name:"Echo of Domineering",description:"After suppressing a target, you gain greatly increased Mobility for a short duration and your equipped weapon is reloaded from reserves.",type:f.O.Void,bonus:[{stat:c.Discipline,value:10}],cost:1,requiredArmorAffinity:0,hash:2272984657},[g.EchoOfDilation]:{id:g.EchoOfDilation,name:"Echo of Dilation",description:"While crouched, you sneak faster and gain enhanced radar resolution.",type:f.O.Void,bonus:[{stat:c.Mobility,value:10},{stat:c.Intellect,value:10}],cost:1,requiredArmorAffinity:0,hash:2272984656},[g.EchoOfUndermining]:{id:g.EchoOfUndermining,name:"Echo of Undermining",description:"Your Void grenades weaken targets.",type:f.O.Void,bonus:[{stat:c.Discipline,value:-20}],cost:1,requiredArmorAffinity:0,hash:2272984668},[g.EchoOfInstability]:{id:g.EchoOfInstability,name:"Echo of Instability",description:"Defeating targets with grenades grants Volatile Rounds to your Void weapons.",type:f.O.Void,bonus:[{stat:c.Strength,value:10}],cost:1,requiredArmorAffinity:0,hash:2661180600},[g.EchoOfObscurity]:{id:g.EchoOfObscurity,name:"Echo of Obscurity",description:"Finisher final blows grant Invisibility.",type:f.O.Void,bonus:[{stat:c.Recovery,value:10}],cost:1,requiredArmorAffinity:0,hash:2661180602},[g.EchoOfHarvest]:{id:g.EchoOfHarvest,name:"Echo of Harvest",description:"Defeating weakened targets with precision final blows will create an Orb of Power.",type:f.O.Void,bonus:[{stat:c.Intellect,value:-10}],cost:1,requiredArmorAffinity:0,hash:2661180601},[g.EchoOfStarvation]:{id:g.EchoOfStarvation,name:"Echo of Starvation",description:"Picking up an Orb of Power grants Devour.",type:f.O.Void,bonus:[{stat:c.Recovery,value:-10}],cost:1,requiredArmorAffinity:0,hash:2661180603},[g.EchoOfVigilance]:{id:g.EchoOfVigilance,name:"Echo of Vigilance",description:"Defeating a target while your shields are depleted grants you a temporary Void overshield.",type:f.O.Void,bonus:[{stat:c.Recovery,value:-10}],cost:1,requiredArmorAffinity:0,hash:3854948621},[g.EmberOfBenelovence]:{id:g.EmberOfBenelovence,name:"Ember of Benelovence",description:"Applying restoration, cure, or radiant to allies grants increased grenade, melee, and class ability regeneration for a short duration.",type:f.O.Solar,bonus:[{stat:c.Discipline,value:-10}],cost:1,requiredArmorAffinity:0,hash:362132292},[g.EmberOfBeams]:{id:g.EmberOfBeams,name:"Ember of Beams",description:"Your Solar Super projectiles have stronger target acquisition.",type:f.O.Solar,bonus:[{stat:c.Intellect,value:10}],cost:1,requiredArmorAffinity:0,hash:362132295},[g.EmberOfEmpyrean]:{id:g.EmberOfEmpyrean,name:"Ember of Empyrean",description:"Solar weapon or ability final blows extend the duration of restoration and radiant effects applied to you.",type:f.O.Solar,bonus:[{stat:c.Resilience,value:-10}],cost:1,requiredArmorAffinity:0,hash:362132294},[g.EmberOfCombustion]:{id:g.EmberOfCombustion,name:"Ember of Combustion",description:"Final blows with your Solar Super cause targets to ignite.",type:f.O.Solar,bonus:[{stat:c.Strength,value:10}],cost:1,requiredArmorAffinity:0,hash:362132289},[g.EmberOfChar]:{id:g.EmberOfChar,name:"Ember of Char",description:"Your Solar ignitions spread scorch to affected targets.",type:f.O.Solar,bonus:[{stat:c.Discipline,value:10}],cost:1,requiredArmorAffinity:0,hash:362132291},[g.EmberOfTempering]:{id:g.EmberOfTempering,name:"Ember of Tempering",description:"Solar weapon final blows grant you and your allies increased recovery for a short duration. Stacks 3 times.\nWhile Ember of Tempering is active, your weapons have increased airborne effectiveness.",type:f.O.Solar,bonus:[{stat:c.Recovery,value:-10}],cost:1,requiredArmorAffinity:0,hash:362132290},[g.EmberOfEruption]:{id:g.EmberOfEruption,name:"Ember of Eruption",description:"Your Solar ignitions have increased area of effect.",type:f.O.Solar,bonus:[{stat:c.Strength,value:10}],cost:1,requiredArmorAffinity:0,hash:1051276348},[g.EmberOfWonder]:{id:g.EmberOfWonder,name:"Ember of Wonder",description:"Rapidly defeating multiple targets with Solar ignitions generates an Orb of Power.",type:f.O.Solar,bonus:[{stat:c.Resilience,value:10}],cost:1,requiredArmorAffinity:0,hash:1051276350},[g.EmberOfSearing]:{id:g.EmberOfSearing,name:"Ember of Searing",description:"Defeating scorched targets grants melee energy.",type:f.O.Solar,bonus:[{stat:c.Recovery,value:10}],cost:1,requiredArmorAffinity:0,hash:1051276351},[g.EmberOfTorches]:{id:g.EmberOfTorches,name:"Ember of Torches",description:"Powered melee attacks against combatants make you and nearby allies radiant.",type:f.O.Solar,bonus:[{stat:c.Discipline,value:-10}],cost:1,requiredArmorAffinity:0,hash:362132288},[g.EmberOfMercy]:{id:g.EmberOfMercy,name:"Ember of Mercy",description:"When you revive an ally, you and other nearby allies gain restoration. Picking up a Firesprite grants restoration.",type:f.O.Solar,bonus:[{stat:c.Resilience,value:10}],cost:1,requiredArmorAffinity:0,hash:4180586737},[g.SparkOfBrilliance]:{id:g.SparkOfBrilliance,name:"Spark of Brilliance",description:"Defeating a blinded target with precision damage creates a blinding explosion.",type:f.O.Arc,bonus:[{stat:c.Intellect,value:10}],cost:1,requiredArmorAffinity:0,hash:3277705905},[g.SparkOfFeedback]:{id:g.SparkOfFeedback,name:"Spark of Feedback",description:"Taking melee damage briefly increases your outgoing melee damage.",type:f.O.Arc,bonus:[{stat:c.Resilience,value:10}],cost:1,requiredArmorAffinity:0,hash:3277705907},[g.SparkOfDischarge]:{id:g.SparkOfDischarge,name:"Spark of Discharge",description:"Arc weapon final blows have a chance to create an Ionic Trace.",type:f.O.Arc,bonus:[{stat:c.Strength,value:-10}],cost:1,requiredArmorAffinity:0,hash:1727069362},[g.SparkOfFocus]:{id:g.SparkOfFocus,name:"Spark of Focus",description:"After sprinting for a short time, your class ability regeneration is increased.",type:f.O.Arc,bonus:[{stat:xt.ClassAbilityRegenerationStat,value:-10}],cost:1,requiredArmorAffinity:0,hash:1727069360},[g.SparkOfVolts]:{id:g.SparkOfVolts,name:"Spark of Volts",description:"Finishers make you amplified.",type:f.O.Arc,bonus:[{stat:c.Recovery,value:10}],cost:1,requiredArmorAffinity:0,hash:3277705904},[g.SparkOfResistance]:{id:g.SparkOfResistance,name:"Spark of Resistance",description:"While surrounded by combatants, you are more resistant to incoming damage.",type:f.O.Arc,bonus:[{stat:c.Strength,value:10}],cost:1,requiredArmorAffinity:0,hash:1727069366},[g.SparkOfShock]:{id:g.SparkOfShock,name:"Spark of Shock",description:"Your Arc grenades jolt targets.",type:f.O.Arc,bonus:[{stat:c.Discipline,value:-10}],cost:1,requiredArmorAffinity:0,hash:1727069364},[g.ThreadOfFury]:{id:g.ThreadOfFury,name:"Thread of Fury",description:"Damaging targets with a Tangle grants melee energy.",type:f.O.Strand,bonus:[{stat:c.Strength,value:-10}],cost:1,requiredArmorAffinity:0,hash:4208512219},[g.ThreadOfAscent]:{id:g.ThreadOfAscent,name:"Thread of Ascent",description:"Activating your grenade ability reloads your equipped weapon and grants bonus airborne effectiveness and handling for a short duration",type:f.O.Strand,bonus:[{stat:c.Mobility,value:10}],cost:1,requiredArmorAffinity:0,hash:4208512216},[g.ThreadOfFinality]:{id:g.ThreadOfFinality,name:"Thread of Finality",description:"Finisher final blows create Threadlings.",type:f.O.Strand,bonus:[{stat:c.Recovery,value:10}],cost:1,requiredArmorAffinity:0,hash:4208512217},[g.ThreadOfWarding]:{id:g.ThreadOfWarding,name:"Thread of Warding",description:"Picking up an Orb of Power grants Woven Mail.",type:f.O.Strand,bonus:[{stat:c.Resilience,value:-10}],cost:1,requiredArmorAffinity:0,hash:4208512222},[g.ThreadOfTransmutation]:{id:g.ThreadOfTransmutation,name:"Thread of Transmutation",description:"While you have Woven Mail, weapon final blows create a Tangle",type:f.O.Strand,bonus:[{stat:c.Strength,value:10}],cost:1,requiredArmorAffinity:0,hash:4208512221},[g.ThreadOfEvolution]:{id:g.ThreadOfEvolution,name:"Thread of Evolution",description:"Threadlings travel farther and deal additional damage.",type:f.O.Strand,bonus:[{stat:c.Intellect,value:10}],cost:1,requiredArmorAffinity:0,hash:4208512211},[g.ThreadOfBinding]:{id:g.ThreadOfBinding,name:"Thread of Binding",description:"Super final blows emit a suspending burst from the target.",type:f.O.Strand,bonus:[{stat:c.Resilience,value:10}],cost:1,requiredArmorAffinity:0,hash:3192552688},[g.ThreadOfGeneration]:{id:g.ThreadOfGeneration,name:"Thread of Generation",description:"Dealing damage generates grenade energy.",type:f.O.Strand,bonus:[{stat:c.Discipline,value:-10}],cost:1,requiredArmorAffinity:0,hash:3192552691},[g.ThreadOfContinuity]:{id:g.ThreadOfContinuity,name:"Thread of Continuity",description:"Suspend, unravel, and sever effects applied to targets have increased duration.",type:f.O.Strand,bonus:[{stat:c.Strength,value:10}],cost:1,requiredArmorAffinity:0,hash:3192552690}},Gt={outputEncoding:"Base64"},me={inputEncoding:"Base64",outputEncoding:"String"};let j=(()=>{class n{constructor(){this.__configuration=this.loadCurrentConfiguration(),this._configuration=new ht.X(this.__configuration),this.configuration=this._configuration.asObservable(),this._storedConfigurations=new ht.X(this.listSavedConfigurations()),this.storedConfigurations=this._storedConfigurations.asObservable()}get readonlyConfigurationSnapshot(){return Object.assign(this.__configuration,{})}modifyConfiguration(e){e(this.__configuration),this.saveCurrentConfiguration(this.__configuration)}saveConfiguration(e,o){let a=this.listSavedConfigurations(),r=this.listSavedConfigurations().map((d,u)=>[d,u]).filter(d=>d[0].name==e)[0];r&&a.splice(r[1],1),a.push({configuration:o,name:e,version:"2.3.0"}),a=a.sort((d,u)=>d.name<u.name?-1:d.name>u.name?1:0);const l=mt.compress(JSON.stringify(a),Gt);localStorage.setItem("storedConfigurations",l),this._storedConfigurations.next(a)}doesSavedConfigurationExist(e){return this.listSavedConfigurations().filter(o=>o.name==e).length>0}loadSavedConfiguration(e){let o=this.listSavedConfigurations().filter(a=>a.name==e)[0];return!!o&&(this.saveCurrentConfiguration(o.configuration),!0)}checkAndFixOldSavedConfigurations(e){if(e.configuration=Object.assign(Ft.buildEmptyConfiguration(),e.configuration),e.configuration.hasOwnProperty("minimumStatTier")){let o=e.configuration.minimumStatTier;e.configuration.minimumStatTiers[c.Mobility].value=o[c.Mobility],e.configuration.minimumStatTiers[c.Resilience].value=o[c.Resilience],e.configuration.minimumStatTiers[c.Recovery].value=o[c.Recovery],e.configuration.minimumStatTiers[c.Discipline].value=o[c.Discipline],e.configuration.minimumStatTiers[c.Intellect].value=o[c.Intellect],e.configuration.minimumStatTiers[c.Strength].value=o[c.Strength],delete e.configuration.minimumStatTier}if(e.configuration.hasOwnProperty("selectedExoticHash")&&(e.configuration.selectedExotics=[e.configuration.selectedExoticHash],delete e.configuration.selectedExoticHash),e.configuration.hasOwnProperty("maximumStatMods")){for(let a=e.configuration.maximumStatMods;a<5;a++)e.configuration.maximumModSlots[1+a].value=0;delete e.configuration.maximumStatMods}e.configuration.enabledMods=e.configuration.enabledMods.filter(o=>!!gt[o]),e.configuration.limitParsedResults=!0}listSavedConfigurations(){let e;try{e=localStorage.getItem("storedConfigurations")||"[]","["!=e.substr(0,1)&&(e=mt.decompress(e,me))}catch{e=[]}let o=JSON.parse(e)||[];return o=o.sort((a,r)=>a.name<r.name?-1:a.name>r.name?1:0),o.forEach(a=>this.checkAndFixOldSavedConfigurations(a)),o}deleteStoredConfiguration(e){let o=this.listSavedConfigurations(),a=this.listSavedConfigurations().map((r,l)=>[r,l]).filter(r=>r[0].name==e)[0];a&&o.splice(a[1],1),localStorage.setItem("storedConfigurations",mt.compress(JSON.stringify(o),Gt)),this._storedConfigurations.next(o)}saveCurrentConfigurationToName(e){this.saveConfiguration(e,this.__configuration)}saveCurrentConfiguration(e){console.debug("write configuration",e),this.__configuration=Object.assign(Ft.buildEmptyConfiguration(),e),this.__configuration.enabledMods=[].concat(this.__configuration.enabledMods),this.__configuration.minimumStatTiers=Object.assign({},this.__configuration.minimumStatTiers);const o=mt.compress(JSON.stringify(this.__configuration),Gt);localStorage.setItem("currentConfig",o),this._configuration.next(Object.assign({},this.__configuration))}loadCurrentConfiguration(){let e;try{e=localStorage.getItem("currentConfig")||"{}","{"!=e.substr(0,1)&&(e=mt.decompress(e,me))}catch{e={}}var o={name:"dummy",version:"1",configuration:JSON.parse(e)};return this.checkAndFixOldSavedConfigurations(o),o.configuration}getCurrentConfigBase64Compressed(){let e=localStorage.getItem("currentConfig")||"{}";return"{"==e.substr(0,1)&&(e=mt.compress(e,{outputEncoding:"Base64"})),e}getAllStoredConfigurationsBase64Compressed(){let e=localStorage.getItem("storedConfigurations")||"[]";return"["==e.substr(0,1)&&(e=mt.compress(e,{outputEncoding:"Base64"})),e}getStoredConfigurationBase64Compressed(e){let o=this.listSavedConfigurations().filter(a=>a.name==e)[0];return o?mt.compress(JSON.stringify(o),{outputEncoding:"Base64"}):""}resetCurrentConfiguration(){this.saveCurrentConfiguration(Ft.buildEmptyConfiguration())}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var et=p(8012),Ie=p(1016),ke=p(9891);let Qt=(()=>{class n{constructor(e,o,a,r){var l=this;this.authService=e,this.http=o,this.db=a,this.config=r,this.config_assumeEveryLegendaryIsArtifice=!1,this.config.configuration.subscribe(function(){var d=(0,T.Z)(function*(u){l.config_assumeEveryLegendaryIsArtifice=u.assumeEveryLegendaryIsArtifice});return function(u){return d.apply(this,arguments)}}())}$httpWithoutKey(e){var o=this;return(0,T.Z)(function*(){return o.http.get(e.url,{params:e.params}).toPromise()})()}$httpPost(e){var o=this;return(0,T.Z)(function*(){return o.http.post(e.url,e.body,{params:e.params,headers:{"X-API-Key":M_apiKey,Authorization:"Bearer "+o.authService.accessToken}}).toPromise().catch(function(){var a=(0,T.Z)(function*(r){console.error(r)});return function(r){return a.apply(this,arguments)}}())})()}$http(e){var o=this;return(0,T.Z)(function*(){return o.http.get(e.url,{params:e.params,headers:{"X-API-Key":M_apiKey,Authorization:"Bearer "+o.authService.accessToken}}).toPromise().catch(function(){var a=(0,T.Z)(function*(r){console.error(r),"SystemDisabled"==r.error?.ErrorStatus&&(console.info("System is disabled. Revoking auth, must re-login"),yield o.authService.logout()),"Internal Server Error"!=r.ErrorStatus&&console.info("API-Error")});return function(r){return a.apply(this,arguments)}}())})()}getCharacters(){var e=this;return(0,T.Z)(function*(){let o=yield e.getMembershipDataForCurrentUser();if(!o)return yield e.authService.logout(),[];const a=yield(0,et.Ai)(r=>e.$http(r),{components:[200],membershipType:o.membershipType,destinyMembershipId:o.membershipId});return Object.values(a?.Response.characters.data||{}).map(r=>({characterId:r.characterId,clazz:r.classType,emblemUrl:r.emblemBackgroundPath,lastPlayed:Date.parse(r.dateLastPlayed)}))||[]})()}transferItem(e,o,a=!1){var r=this;return(0,T.Z)(function*(){let l=yield r.getMembershipDataForCurrentUser();if(!l)return yield r.authService.logout(),!1;let d=yield(0,et.rV)(x=>r.$http(x),{membershipType:l.membershipType,destinyMembershipId:l.membershipId,itemInstanceId:e,components:[307]}),u=!1;if(!d)return!1;if(d.Response.characterId!=o){2!=d.Response.item.data?.location&&(yield r.moveItemToVault(d.Response.item.data?.itemInstanceId||""),d=yield(0,et.rV)(h=>r.$http(h),{membershipType:l.membershipType,destinyMembershipId:l.membershipId,itemInstanceId:e,components:[307]}));const x={characterId:o,membershipType:3,itemId:d?.Response.item.data?.itemInstanceId||"",itemReferenceHash:d?.Response.item.data?.itemHash||0,stackSize:1,transferToVault:!1};u=!!(yield(0,et.ux)(h=>r.$httpPost(h),x))}if(a){let x={characterId:o,membershipType:3,stackSize:1,itemId:d?.Response.item.data?.itemInstanceId||"",itemReferenceHash:d?.Response.item.data?.itemHash||0};u=!!(yield(0,et.DH)(h=>r.$httpPost(h),x))}return u})()}moveItemToVault(e){var o=this;return(0,T.Z)(function*(){console.info("moveItemToVault",e);let a=yield o.getMembershipDataForCurrentUser();if(!a)return void(yield o.authService.logout());const r=yield(0,et.rV)(d=>o.$http(d),{membershipType:a.membershipType,destinyMembershipId:a.membershipId,itemInstanceId:e,components:[307]}),l={characterId:r?.Response.characterId||"",membershipType:3,itemId:r?.Response.item.data?.itemInstanceId||"",itemReferenceHash:r?.Response.item.data?.itemHash||0,stackSize:1,transferToVault:!0};yield(0,et.ux)(d=>o.$httpPost(d),l)})()}getMembershipDataForCurrentUser(){var e=this;return(0,T.Z)(function*(){var o=JSON.parse(localStorage.getItem("auth-membershipInfo")||"null"),a=JSON.parse(localStorage.getItem("auth-membershipInfo-date")||"0");if(o&&Date.now()-a<864e5)return console.log("getMembershipDataForCurrentUser -> loading cached! "),o;console.info("BungieApiService","getMembershipDataForCurrentUser");let l=(yield(0,ke.Rm)(u=>e.$http(u)))?.Response.destinyMemberships;console.info("Memberships:",l),l=l.filter(u=>0==u.crossSaveOverride||u.crossSaveOverride==u.membershipType),console.info("Filtered Memberships:",l);let d=null;if(1==l?.length)d=l?.[0];else{let u=0,x=0;for(let h in l){const A=l?.[h],I=yield(0,et.Ai)(q=>e.$http(q),{components:[100],membershipType:A.membershipType,destinyMembershipId:A.membershipId});if(I&&I.Response?.profile.data?.dateLastPlayed){let q=Date.parse(I.Response?.profile.data?.dateLastPlayed);q>x&&(x=q,u=h)}}console.info("getMembershipDataForCurrentUser","Selected membership data for the last logged in membership."),d=l?.[u]}return localStorage.setItem("auth-membershipInfo",JSON.stringify(d)),localStorage.setItem("auth-membershipInfo-date",JSON.stringify(Date.now())),d})()}updateArmorItems(e=!1){var o=this;return(0,T.Z)(function*(){if(!e&&localStorage.getItem("LastArmorUpdate")&&localStorage.getItem("last-armor-db-name")==o.db.inventoryArmor.db.name&&Date.now()-Number.parseInt(localStorage.getItem("LastArmorUpdate")||"0")<18e5)return;let a=yield o.getMembershipDataForCurrentUser();if(!a)return void(yield o.authService.logout());console.info("BungieApiService","getProfile");let r=yield(0,et.Ai)(y=>o.$http(y),{components:[205,201,103,102,304,300,302,305,308],membershipType:a.membershipType,destinyMembershipId:a.membershipId}),l=r.Response.profileInventory.data?.items||[];for(let y in r.Response.characterEquipment.data)l=l.concat(r.Response.characterEquipment.data[y].items);for(let y in r.Response.characterInventories.data)l=l.concat(r.Response.characterInventories.data[y].items);var d=l.filter(y=>[3853748946,4257549984,4257549985].indexOf(y.itemHash)>-1).reduce((y,at)=>(at.itemHash.toString()in y||(y[at.itemHash]=0),y[at.itemHash]+=at.quantity,y),{});let u=r.Response.profileCurrencies.data?.items.filter(y=>3159615086==y.itemHash)||[];d[3159615086]=u.length>0?u[0].quantity:0;let x=r.Response.profileCurrencies.data?.items.filter(y=>1022552290==y.itemHash)||[];d[1022552290]=x.length>0?x[0].quantity:0,localStorage.setItem("stored-materials",JSON.stringify(d));let h=Array.from(new Set(l.map(y=>y.itemHash))),A=yield o.db.manifestArmor.toArray();const I=A.filter(y=>h.indexOf(y.hash)>-1),q=A.filter(y=>19==y.itemType);let E=Object.fromEntries(I.map(y=>[y.hash,y])),W=Object.fromEntries(q.map(y=>[y.hash,y])),k=l.filter(y=>!!y.itemInstanceId).filter(y=>!!((r.Response.itemComponents.stats.data||{})[y.itemInstanceId||""]?.stats||{})[392767087]).filter(y=>!!((r.Response.itemComponents.instances.data||{})[y.itemInstanceId||""]||{}).energy).map(y=>{let It=(r.Response.itemComponents.instances.data||{})[y.itemInstanceId||""]||{},H=Object.assign({itemInstanceId:y.itemInstanceId||"",masterworked:!!It.energy&&10==It.energy.energyCapacity,energyLevel:It.energy?It.energy.energyCapacity:0,mobility:0,resilience:0,recovery:0,discipline:0,intellect:0,strength:0},E[y.itemHash]);H.id=void 0,(2545426109==y.itemHash||199733460==y.itemHash||3224066584==y.itemHash)&&(H.slot=C.y.ArmorSlotHelmet);var st={2996146975:0,392767087:0,1943323491:0,1735777505:0,144602215:0,4244567218:0};if(E[y.itemHash]&&E[y.itemHash].investmentStats)for(let bt of E[y.itemHash].investmentStats)bt.statTypeHash in st&&(st[bt.statTypeHash]+=bt.value);if(H.slot!=C.y.ArmorSlotClass){const bt=r.Response.itemComponents.sockets.data||{};if(y.itemInstanceId&&y.itemInstanceId in bt){const Ut=bt[y.itemInstanceId||""].sockets;var we=[Ut[6].plugHash,Ut[7].plugHash,Ut[8].plugHash,Ut[9].plugHash];H.statPlugHashes=we;var lc=we.map(kt=>W[kt||""]).filter(kt=>null!=kt);for(let kt of lc)for(let Nt of kt.investmentStats)Nt.statTypeHash in st&&(st[Nt.statTypeHash]+=Nt.value)}else console.error("Sockets data does not contain the correct item instance ID",y.itemInstanceId,r.Response.itemComponents.sockets.data)}return H.mobility=st[2996146975],H.resilience=st[392767087],H.recovery=st[1943323491],H.discipline=st[1735777505],H.intellect=st[144602215],H.strength=st[4244567218],H.perk==_.SlotArtifice&&((((r.Response.itemComponents.perks.data||{})[y.itemInstanceId||""]||{}).perks||[]).filter(Nt=>229248542==Nt.perkHash).length>0||(H.perk=_.None)),!H.isExotic&&o.config_assumeEveryLegendaryIsArtifice&&(H.perk=_.SlotArtifice),H})||[];return k=k.filter(y=>!y.statPlugHashes||null!=y.statPlugHashes[0]),yield o.db.inventoryArmor.clear(),yield o.db.inventoryArmor.bulkAdd(k),localStorage.setItem("LastArmorUpdate",Date.now().toString()),localStorage.setItem("last-armor-db-name",o.db.inventoryArmor.db.name),k})()}getArmorPerk(e){return(e.sockets?.socketEntries.filter(o=>1259==o.reusablePlugSetHash)||[]).length>0?_.SlotArtifice:(e.sockets?.socketEntries.filter(o=>1728096240==o.singleInitialItemHash)||[]).length>0?_.SlotKingsFall:(e.sockets?.socketEntries.filter(o=>1679876242==o.singleInitialItemHash)||[]).length>0?_.SlotLastWish:(e.sockets?.socketEntries.filter(o=>3738398030==o.singleInitialItemHash)||[]).length>0?_.SlotVaultOfGlass:(e.sockets?.socketEntries.filter(o=>706611068==o.singleInitialItemHash)||[]).length>0?_.SlotGardenOfSalvation:(e.sockets?.socketEntries.filter(o=>4055462131==o.singleInitialItemHash)||[]).length>0?_.SlotDeepStoneCrypt:(e.sockets?.socketEntries.filter(o=>2447143568==o.singleInitialItemHash)||[]).length>0?_.SlotVowOfTheDisciple:(e.sockets?.socketEntries.filter(o=>1180997867==o.singleInitialItemHash)||[]).length>0?_.SlotNightmare:(e.sockets?.socketEntries.filter(o=>2472875850==o.singleInitialItemHash)||[]).length>0?_.PerkIronBanner:(e.sockets?.socketEntries.filter(o=>2392155347==o.singleInitialItemHash)||[]).length>0?_.PerkUniformedOfficer:(e.sockets?.socketEntries.filter(o=>400659041==o.singleInitialItemHash)||[]).length>0?_.PerkPlunderersTrappings:(e.sockets?.socketEntries.filter(o=>3525583702==o.singleInitialItemHash)||[]).length>0?_.SeraphSensorArray:_.None}updateManifest(e=!1){var o=this;return(0,T.Z)(function*(){var a=null;if(!e&&localStorage.getItem("LastManifestUpdate")&&localStorage.getItem("last-manifest-revision")&&"e51a294"==localStorage.getItem("last-manifest-revision")){if(Date.now()-Number.parseInt(localStorage.getItem("LastManifestUpdate")||"0")>9e5){const u=(a=yield(0,et.KN)(x=>o.$http(x))).Response.version;if(localStorage.getItem("last-manifest-version")==u)return void console.debug("bungieApiService - updateManifest","Abort updateManifest due to fitting ManifestVersion")}if(localStorage.getItem("last-manifest-db-name")==o.db.manifestArmor.db.name&&Date.now()-Number.parseInt(localStorage.getItem("LastManifestUpdate")||"0")<864e5)return void console.debug("bungieApiService - updateManifest","Abort updateManifest due to fitting Date")}null==a&&(a=yield(0,et.KN)(u=>o.$http(u)));const r=a.Response.version,l=yield(0,Ie.xG)(u=>o.$httpWithoutKey(u),{destinyManifest:a.Response,tableNames:["DestinyInventoryItemDefinition"],language:"en"});console.log("manifestTables.DestinyInventoryItemDefinition",l.DestinyInventoryItemDefinition);let d=Object.entries(l.DestinyInventoryItemDefinition).filter(([u,x])=>19==x.itemType||2==x.itemType||3448274439==x.inventory?.bucketTypeHash||3551918588==x.inventory?.bucketTypeHash||14239492==x.inventory?.bucketTypeHash||20886954==x.inventory?.bucketTypeHash).map(([u,x])=>{let h=C.y.ArmorSlotNone;(x.itemCategoryHashes?.indexOf(45)||-1)>-1&&(h=C.y.ArmorSlotHelmet),(x.itemCategoryHashes?.indexOf(46)||-1)>-1&&(h=C.y.ArmorSlotGauntlet),(x.itemCategoryHashes?.indexOf(47)||-1)>-1&&(h=C.y.ArmorSlotChest),(x.itemCategoryHashes?.indexOf(48)||-1)>-1&&(h=C.y.ArmorSlotLegs),(x.itemCategoryHashes?.indexOf(49)||-1)>-1&&(h=C.y.ArmorSlotClass);const A=(x.sockets?.socketEntries.filter(k=>2512726577==k.socketTypeHash||1108765570==k.socketTypeHash||959256494==k.socketTypeHash||2512726577==k.socketTypeHash||3219375296==k.socketTypeHash||968742181==k.socketTypeHash).length||[])>0,I="Exotic"==x.inventory?.tierTypeName?1:0;let q=null;I&&(q=(x.sockets?.socketEntries.filter(y=>965959289==y.socketTypeHash).map(y=>y.singleInitialItemHash)||[])[0]);var E=[1862490585,1862490584,1862490584,1862490583,2471437758],W=x.quality?.versions.filter(k=>E.includes(k.powerCapHash)).length==x.quality?.versions.length;return{hash:x.hash,icon:x.displayProperties.icon,watermarkIcon:(x.quality?.displayVersionWatermarkIcons||[null])[0],name:x.displayProperties.name,description:x.displayProperties.description,clazz:x.classType,armor2:A,slot:h,isExotic:I,isSunset:W,rarity:x.inventory?.tierType,exoticPerkHash:q,itemType:x.itemType,itemSubType:x.itemSubType,investmentStats:x.investmentStats,perk:o.getArmorPerk(x)}});return yield o.db.manifestArmor.clear(),yield o.db.manifestArmor.bulkPut(d),localStorage.setItem("LastManifestUpdate",Date.now().toString()),localStorage.setItem("last-manifest-db-name",o.db.manifestArmor.db.name),localStorage.setItem("last-manifest-revision","e51a294"),localStorage.setItem("last-manifest-version",r),l})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(G),t.LFG(vt.eN),t.LFG(ct),t.LFG(j))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n{constructor(e,o,a,r,l,d){var u=this;this.db=e,this.config=o,this.status=a,this.api=r,this.auth=l,this.router=d,this.allArmorResults=[],this.currentClass=s.N.None,this._config=Ft.buildEmptyConfiguration(),this.updatingResults=!1,this.refreshing=!1,this.exoticsForClass=[],this._inventory=new Ct.t(1),this.inventory=this._inventory.asObservable(),this._manifest=new Ct.t(1),this.manifest=this._manifest.asObservable(),this._armorResults=new ht.X({results:this.allArmorResults}),this.armorResults=this._armorResults.asObservable();let x=!1,h=!1;d.events.pipe((0,lt.b)(5)).subscribe(function(){var A=(0,T.Z)(function*(I){!u.auth.refreshTokenExpired&&(yield u.auth.autoRegenerateTokens())?!l.isAuthenticated()||I instanceof N.m2&&(u.clearResults(),console.debug("Trigger refreshAll due to router.events"),yield u.refreshAll(!x),x=!0):yield u.auth.logout()});return function(I){return A.apply(this,arguments)}}()),o.configuration.pipe((0,lt.b)(500)).subscribe(function(){var A=(0,T.Z)(function*(I){!u.auth.refreshTokenExpired&&(yield u.auth.autoRegenerateTokens())?!l.isAuthenticated()||(u._config=I,h=!0,console.debug("Trigger refreshAll due to config change"),yield u.refreshAll(!x),x=!0,h=!1):yield u.auth.logout()});return function(I){return A.apply(this,arguments)}}())}clearResults(){this.allArmorResults=[],this._armorResults.next({results:this.allArmorResults,totalResults:0,totalTime:0,itemCount:0,maximumPossibleTiers:[0,0,0,0,0,0],statCombo3x100:[],statCombo4x100:[]})}shouldCalculateResults(){return console.log("this.router.url",this.router.url),"/"==this.router.url}refreshAll(e=!1,o=!1){var a=this;return(0,T.Z)(function*(){if(!a.refreshing){console.debug("Execute refreshAll");try{a.refreshing=!0;let r=yield a.updateManifest(o);(yield a.updateInventoryItems(r||e))&&a._inventory.next(null),a.shouldCalculateResults()&&a.updateResults()}finally{a.refreshing=!1}}})()}updateResults(e=3){if(this.clearResults(),this.updatingResults)console.warn("Called updateResults, but aborting, as it is already running.");else try{console.time("updateResults with WebWorker"),this.updatingResults=!0,this.status.modifyStatus(h=>h.calculatingResults=!0);let o=0,a=[],r=0,l=[],d=new Set,u=new Set;const x=Date.now();for(let h=0;h<e;h++){const A=new Worker(p.tu(new URL(p.p+p.u(336),p.b)));A.onmessage=({data:I})=>{if(a.push(I.results),1==I.done){o++,r+=I.stats.permutationCount,l.push(I.runtime.maximumPossibleTiers);for(let q of I.runtime.statCombo3x100)d.add(q);for(let q of I.runtime.statCombo4x100)u.add(q)}if(1==I.done&&o==e){this.status.modifyStatus(E=>E.calculatingResults=!1),this.updatingResults=!1;let q=[];for(let E of a)q.push(...E);this._armorResults.next({results:q,totalResults:r,itemCount:I.stats.itemCount,totalTime:Date.now()-x,maximumPossibleTiers:l.reduce((E,W)=>{for(let k=0;k<6;k++)E[k]<W[k]&&(E[k]=W[k]);return E},[0,0,0,0,0,0]).map(E=>Math.floor(Math.min(100,E)/10)),statCombo3x100:Array.from(d).map(E=>{let W=[];for(let k=0;k<6;k++)(E&1<<k)>0&&W.push(k);return W})||[],statCombo4x100:Array.from(u).map(E=>{let W=[];for(let k=0;k<6;k++)(E&1<<k)>0&&W.push(k);return W},[])||[]}),console.timeEnd("updateResults with WebWorker"),A.terminate()}else 1==I.done&&o!=e&&A.terminate()},A.onerror=I=>{console.error("ERROR IN WEBWORKER, TERMINATING WEBWORKER",I),A.terminate()},A.postMessage({currentClass:this.currentClass,config:this._config,threadSplit:{count:e,current:h}})}}finally{}}getItemCountForClass(e,o){var a=this;return(0,T.Z)(function*(){let r=yield a.db.inventoryArmor.where("clazz").equals(e).toArray();return o&&(r=r.filter(l=>l.slot==o)),r.length})()}getExoticsForClass(e,o){var a=this;return(0,T.Z)(function*(){let r=yield a.db.inventoryArmor.where("isExotic").equals(1).toArray();r=r.filter(d=>d.clazz==e&&d.armor2&&(!o||d.slot==o));let l=yield a.db.manifestArmor.where("isExotic").equals(1).toArray();return l=l.filter(d=>d.clazz==e&&d.armor2&&(!o||d.slot==o)),a.exoticsForClass=l,l.map(d=>({item:d,inInventory:r.filter(u=>u.hash==d.hash).length>0}))})()}updateManifest(e=!1){var o=this;return(0,T.Z)(function*(){if(o.status.getStatus().updatingManifest)return console.error("Already updating the manifest - abort"),!1;console.debug("updateManifest","Set s.updatingManifest = true"),o.status.modifyStatus(r=>r.updatingManifest=!0),console.debug("updateManifest","Call this.api.updateManifest(force) with force="+e);let a=yield o.api.updateManifest(e);return console.debug("updateManifest","Result is ",a),a&&o._manifest.next(null),console.debug("updateManifest","Set s.updatingManifest = false"),o.status.modifyStatus(r=>r.updatingManifest=!1),!!a})()}updateInventoryItems(e=!1,o=0){var a=this;return(0,T.Z)(function*(){console.debug("updateManifest","Set s.updatingInventory = true"),a.status.modifyStatus(r=>r.updatingInventory=!0);try{let r=yield a.api.updateArmorItems(e);return console.debug("updateManifest","Result is ",r),console.debug("updateManifest","Set s.updatingInventory = false"),a.status.modifyStatus(l=>l.updatingInventory=!1),!!r}catch(r){return o>3?(alert("You encountered a strange error with the inventory update. Please log out and log in again. If that does not fix it, please message Mijago."),!1):(a.status.modifyStatus(l=>l.updatingInventory=!1),console.error(r),console.warn("Automatically re-fetching manifest"),yield a.updateManifest(!0),yield a.updateInventoryItems(!0,o++))}})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ct),t.LFG(j),t.LFG(At),t.LFG(Qt),t.LFG(G),t.LFG(N.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=(()=>{return(n=m||(m={}))[n.ADD=0]="ADD",n[n.REMOVE=1]="REMOVE",n[n.MODIFIED=2]="MODIFIED",m;var n})();const de=[{version:"2.3.0",date:"March 14, 2023",entries:[{type:m.ADD,text:"Automatically adds artifice mods to your armor. This replaces minor and major mods where possible.",issues:[]},{type:m.ADD,text:"Added the amount of used artifice mods to the result table overview (next to the mods). They are not calculated into the 'mod cost' column.",issues:[]},{type:m.ADD,text:"Added new fragments, including Strand.",issues:[]},{type:m.MODIFIED,text:"Adapted modslot cost of Resilience and Recovery mods.",issues:[]},{type:m.MODIFIED,text:"Introduced more modules for asynchronous loading. This is more a speed improvement than a feature.",issues:[]},{type:m.MODIFIED,text:"Reduced the maximum limit of reported results from 50,000 to 30,000. Note that D2AP still calculates every result, it just does not report them. This is a major speedup, and you usually should not even realize the change.",issues:[]},{type:m.MODIFIED,text:"Increased the visual contrast of major mods in the results table. This means it is now easier to distinguish major from minor mods.",issues:[]},{type:m.REMOVE,text:"Removed the elemental affinity completely.",issues:[]},{type:m.REMOVE,text:"DISABLED the 'Zero Waste' feature. It will be re-enabled in the future.",issues:[]},{type:m.REMOVE,text:"DISABLED the 'Modslot Limitation' feature. It will be re-enabled in the future.",issues:[]}]},{version:"2.2.16",date:"December 7, 2022",entries:[{type:m.ADD,text:"Added Ember of Torches (with -10 Discipline).",issues:[]},{type:m.ADD,text:"Added Retrofit mods (mobility and resilience).",issues:[]},{type:m.ADD,text:"Added armor perk 'Seraph Sensor Array' to the dropdown.",issues:[]},{type:m.ADD,text:"Added a Game2Give message. Let's support the little lights together!",issues:[]},{type:m.MODIFIED,text:"Fixed artifice modslot.",issues:[]},{type:m.MODIFIED,text:"Membership data is cached longer to make things faster and to ease the Bungie API.",issues:[]}]},{version:"2.2.15",date:"October 18, 2022",entries:[{type:m.ADD,text:"Added FOTL masks.",issues:[]}]},{version:"2.2.13",date:"September 23, 2022",entries:[{type:m.ADD,text:"Added an advanced setting to replace the 'Tiers' column with a 'Max Tiers' column. This is adds the amount of open modslots to the column, but ignores mod limitations at the moment. A T32 build without mods will now show T37.",issues:[]}]},{version:"2.2.12",date:"September 11, 2022",entries:[{type:m.MODIFIED,text:"Changed the layout to force the settings (left) and results (right) to be next to each other. This means that the page is more mobile approachable. This is also the first step to a more flexible layout.",issues:[]}]},{version:"2.2.11",date:"September 10, 2022",entries:[{type:m.ADD,text:"Added a display for your owned upgrade materials in the character overview.",issues:[]},{type:m.ADD,text:"Added a notification to warn you when you create a modslot limitation that yields no results. Note that this will not (yet) show invalid combinations over all armor, just for the given slot you selected it in.",issues:[]},{type:m.MODIFIED,text:"Reduced size of exotic icons so that the left side will not grow on Titan class.",issues:[]},{type:m.MODIFIED,text:"The 'Performance Optimization' settings will now always re-enable after a reload to prevent your browser being stuck in a crash-loop. (This is for you, iOS Safari users)",issues:[]},{type:m.MODIFIED,text:"Changed wording of the 'Performance Optimization' setting to prevent people from using it incorrectly.",issues:[]}]},{version:"2.2.10",date:"September 2, 2022",entries:[{type:m.MODIFIED,text:"Updated Artifice Modslot Hash after the most recent hotfix.",issues:[]}]},{version:"2.2.9",date:"September 1, 2022",entries:[{type:m.MODIFIED,text:"Tooltips do now not obstruct the clicks of stats. This fixes the iOS stat selection issue.",issues:[]}]},{version:"2.2.8c",date:"August 24, 2022",entries:[{type:m.MODIFIED,text:"The manifest is now (again) automatically updated on version changes. This fixes your artifice problems at the beginning of a new season.",issues:[]},{type:m.MODIFIED,text:"Added subclass hashes for Arc. This means that it now transfers to DIM.",issues:[]}]},{version:"2.2.8b",date:"August 24, 2022",entries:[{type:m.MODIFIED,text:"Fixed Artifice modslots. You might need to wait a bit, alternatively delete the database (Account section) or re-log.",issues:[]}]},{version:"2.2.8a",date:"August 23, 2022",entries:[{type:m.MODIFIED,text:"Updated grenade and melee cooldowns for arc.",issues:[]}]},{version:"2.2.8",date:"August 23, 2022",entries:[{type:m.ADD,text:"Added Arc 3.0 fragments.",issues:[]},{type:m.MODIFIED,text:"Fixed tooltip issues on iOS devices.",issues:[]},{type:m.MODIFIED,text:"Fixed an infinite loading issue.",issues:[]}]},{version:"2.2.7",date:"June 25, 2022",entries:[{type:m.ADD,text:"Added a link to my Discord bot Crayon.",issues:[]},{type:m.MODIFIED,text:"Fixed an issue where a large number of stored configurations would drastically slow down the app.",issues:[]}]},{version:"2.2.6",date:"June 8, 2022",entries:[{type:m.MODIFIED,text:"Fixed an issue where the elemental selection would not give the correct results under very specific conditions.",issues:[]}]},{version:"2.2.5",date:"June 7, 2022",entries:[{type:m.ADD,text:"Added all of the new ability cooldowns.",issues:[]},{type:m.MODIFIED,text:"Completely reworked the ability cooldown tooltips. They now show the difference to the currently selected tier.",issues:[]}]},{version:"2.2.4",date:"June 3, 2022",entries:[{type:m.MODIFIED,text:"Fixed the export to DIM. Thanks to bhollis for the fix!",issues:[]},{type:m.MODIFIED,text:"The manifest now automatically updates when Bungie updated it too, except just after a fixed timespan.",issues:[]}]},{version:"2.2.3",date:"May 24, 2022",entries:[{type:m.ADD,text:"Added Solar 3.0",issues:[]},{type:m.MODIFIED,text:"Adapted artifice armor to the new Season.",issues:[]}]},{version:"2.2.2",date:"Mar 9, 2022",entries:[{type:m.ADD,text:"See what mods do by hovering over their name.",issues:["D2AP-41"]},{type:m.ADD,text:"Added Vow of the Disciple armor.",issues:["D2AP-35"]},{type:m.ADD,text:"Added 'Uniformed Officer' armor.",issues:["D2AP-35"]},{type:m.MODIFIED,text:"Fixed Scatter grenades being Tier 3 (were T4 before).",issues:["D2AP-39"]},{type:m.MODIFIED,text:"Changed the color of the login button.",issues:["D2AP-37"]},{type:m.MODIFIED,text:"When a selected character class does not exist, the tool will now select the first available class as default."}]},{version:"2.2.1",date:"Feb 22, 2022",entries:[{type:m.ADD,text:"Added a switch to select between Stasis and Void 3.0 fragments. Stasis is enabled per default to ensure backwards compatibility of saved configurations.",issues:["D2AP-10"]},{type:m.ADD,text:"Added a debug section to the (new) account settings page. The account settings page does not do much yet, I just wanted to deploy the debug functions.",issues:["D2AP-23"]},{type:m.MODIFIED,text:"Modified super cooldowns for Witch Queen."},{type:m.MODIFIED,text:"Added a minor text to the exotic overview that explains that exotics not in the inventory are shown in grayscale. You can also no longer select those.",issues:["D2AP-17"]},{type:m.MODIFIED,text:"Minor changes in how the database behaves on logout. It now deletes the inventory when you log out, but still keeps the manifest.",issues:["D2AP-27"]},{type:m.MODIFIED,text:"Users are now logged out when the Bungie.Net API is down.",issues:["D2AP-34"]},{type:m.MODIFIED,text:"Fixed Charge Harvester and Echo of Persistence incorrectly reducing Discipline instead of recovery when used on a Warlock."}]},{version:"2.2.0",date:"Feb 09, 2022",entries:[{type:m.ADD,text:"Added the ability to select armor perks and 5th slots. Just like the elements you can optionally enforce it to be on a certain slot. Useful if you want to build Iron Banner armor or utilize artifice modslots."},{type:m.ADD,text:"Added the ability to limit the available points on each armor item for stat mods. This allows you to limit the kind of stat mods that are usable. You can now say 'do not use major intellect mods'."},{type:m.ADD,text:"Added the ability to lock stat tiers. Previously you could only set 'Use Tier 3 or higher', now you can optionally set 'Enforce Tier 3'. This is useful for example if you want to enforce T3 mobility on a Titan."},{type:m.ADD,text:"Added a summary of important configuration choices to the result header to improve readability."},{type:m.ADD,text:"Added a button to open the DIM Loadout Builder with the current settings."},{type:m.ADD,text:"Added an option that forces the correct element on non-masterworked armor pieces. This is per default enabled."},{type:m.ADD,text:"Added cooldowns for class abilities (Dodge, Barricade, Rift)."},{type:m.ADD,text:"Added visual indicators for minor and major mods in the overview table. The whole visualization is also more compact now."},{type:m.ADD,text:"Added visual cursor indicator to every clickable input, e.g. in the exotic, element and perk/mod selection."},{type:m.ADD,text:"Added a (very basic) item tooltip."},{type:m.ADD,text:"Show the required material cost for each item. Note that this ignores your class item."},{type:m.ADD,text:"Added a stat summary table to the stat detail view. This allows you to easily share a stat distribution with others."},{type:m.ADD,text:"Added 'Clear this section' button to each configuration section."},{type:m.ADD,text:"Added support for your class items. You won't see a lot of this, except when you use the slot and element limitation in specific ways."},{type:m.ADD,text:"Detailed information is now in expandable containers to improve readability."},{type:m.ADD,text:"Show the seasonal icon for every item too."},{type:m.ADD,text:"Added info text to the table headers."},{type:m.ADD,text:"The character selection now shows the existing characters - and their emblems too!"},{type:m.ADD,text:"Added Discord and another Ko-Fi link. You can find them in the character selection."},{type:m.ADD,text:"Added a changelog popup right at the start of the page. It only appears when a new update occured. You can always trigger it by clicking the current version number."},{type:m.ADD,text:"Now utilizes three webworkers instead of one. The process is simple, but generally speeds up the results by a huge margin."},{type:m.ADD,text:"Added an Armor Investigation tab for data scientists."},{type:m.ADD,text:"Added a sidenav for smaller devices and reworked the top menubar."},{type:m.ADD,text:"The detailed result table now shows the perk of an selected item, if it has one. This also applies to class items, if necessary."},{type:m.ADD,text:"Hovering over exotics in the exotic selection now displays their perk description."},{type:m.ADD,text:"Added an advanced setting to disable white, green and blue armor."},{type:m.ADD,text:"Added an advanced setting to ignore sunset armor."},{type:m.MODIFIED,text:"Changed the word 'Permutation' to 'Combination' wherever it has been used."},{type:m.MODIFIED,text:"Clicking on a setting that is already set does not re-trigger the calculation now. For example, selecting T3 recovery when it is already at T3 now does nothing."},{type:m.MODIFIED,text:"The default for all stats is now tier 0 instead of tier 1, to make it consistent with the clear buttons."},{type:m.MODIFIED,text:"The default setting for 'ignore non masterworked elements' is now 'off'."},{type:m.MODIFIED,text:"The 'time required' number now measures the time from before the webworkers are spawned until all webworkers are done. Previously it only monitored the time required INSIDE the webworker, so it may show slower times."},{type:m.MODIFIED,text:"Fixed the width of the 'Exotic' header in the results table. This means that it is now farther away from the 'Mobility' column."},{type:m.MODIFIED,text:"Completely reworked the elemental affinity selection. Per default it is now not fixed to a certain armor slot, but using a toggle button you can simply do so again."},{type:m.MODIFIED,text:"The results header now screams at you in bright red letters when no results are found."},{type:m.MODIFIED,text:"The alternating rows of the results details table have now a lighter color to make it easier to read."},{type:m.MODIFIED,text:"Fixed ability cooldowns for melee and grenade at tier 7 and tier 8."},{type:m.MODIFIED,text:"Cooldowns now are shown in MM:SS instead of plain seconds."},{type:m.MODIFIED,text:"Completely rewrote the core logic of D2ArmorPicker for the changes mentioned above."},{type:m.MODIFIED,text:"Exotics you do not have in your vault or inventory are now greyed out."},{type:m.MODIFIED,text:"Fixed an issue where exotics were not shown at your first login."},{type:m.MODIFIED,text:"Changed the color of important buttons so that they are easier to read."},{type:m.MODIFIED,text:"The icons of items in the results are now loaded asynchronous from their hashes. This saves a lot of memory, as I do not have to send two icon URLs for each item - for each result. I will further improve this in a later version."},{type:m.MODIFIED,text:"Maximum table output is now limited to 50 results (instead of 200). It still defaults to 20.}"},{type:m.MODIFIED,text:"Completely reworked the visuals of the changelog. It is now more pleasing to the eye."}]},{version:"2.1.4",date:"Dec 29, 2021",entries:[{type:m.MODIFIED,text:"Item stats are now built from their plugs and InvestmentStats (in case of some exotics). This fixes potentially invalid item stats when you use mods like Powerful Friends or Protective Light. A big thanks to u/deangaudet for reminding me that the API also reports the plugs of an item."},{type:m.MODIFIED,text:"Only save necessary item types of the manifest (namely mods and armor). Also, save twhe investmentStats now."},{type:m.MODIFIED,text:"Sped up the item update step."}]},{version:"2.1.3",date:"Dec 16, 2021",entries:[{type:m.MODIFIED,text:"Added new stat cooldowns"}]},{version:"2.1.2",date:"Dec 1, 2021",entries:[{type:m.MODIFIED,text:"The changelog is now in a scrollable box."},{type:m.MODIFIED,text:"Changed buymeacoffee to a ko-fi link. This way we can keep the PayPal support!"}]},{version:"2.1.1",date:"Nov 3, 2021",entries:[{type:m.REMOVE,text:"Removed the HALLOWEEN SPECIAL feature. Maybe something like this will return some day?"},{type:m.ADD,text:"Added tooltip to the item icons in the detailed overview to show the name of the item."},{type:m.MODIFIED,text:"Fixed an issue where the list of exotics did not load at the first login."},{type:m.MODIFIED,text:"Saved configurations now contain the current software version for future reference."},{type:m.MODIFIED,text:"Minor code quality improvements"}]},{version:"2.1.0 (major)",date:"Oct 29, 2021",entries:[{type:m.REMOVE,text:"Completely removed V1 of the tool. If you had any problems with V2, you had over three months to report them."},{type:m.ADD,text:"The stat selection now displays which stat tiers are added by stat mods (PF/RL) or stasis fragments in the configuration."},{type:m.ADD,text:"You can now export (and import) individual configurations as well as all stored configurations at once."},{type:m.ADD,text:"Added a navigation bar to the title bar. On smaller screens it is replaced by two buttons in the character selection."},{type:m.ADD,text:"Added more details to the last step of the 'What to do now?' section. It now lists the fragments and mods you selected."},{type:m.MODIFIED,text:"Optimized code and reduced overall page size."}]},{version:"2.0.16",date:"Oct 26, 2021",entries:[{type:m.MODIFIED,text:"Completely rewrote the core logic in order to fix the memory issues. The tool will now no longer crash when you have many armor items, but it's slightly slower than the previous approach. I tested it with 600 items - it works and does not crash, but takes up to a minute. Make sure to never get that much armor and to lock an exotic right away."},{type:m.MODIFIED,text:"The rewrite also fixed the issue where the tool did not work in Safari, or more generally, on Mac and iPhone."},{type:m.MODIFIED,text:"The rewrite also fixed an issue where items could not be found when an result update was triggered while the inventory was updated."}]},{version:"2.0.15",date:"Oct 24, 2021",entries:[{type:m.MODIFIED,text:"Updated the visual display of the cluster page. It displays the stats in a better way now."},{type:m.MODIFIED,text:"Fixed an issue with login, where you were automatically logged in again and could not switch accounts."}]},{version:"2.0.14",date:"Oct 21, 2021",entries:[{type:m.MODIFIED,text:"Updated URLs to the mobility, resilience and recovery images, as Bungie decided to change their URLs in today's hotfix."}]},{version:"2.0.13",date:"Oct 20, 2021",entries:[{type:m.ADD,text:"Added a chart to the armor clustering page, showing each clusters average stats."},{type:m.MODIFIED,text:"Stats over 100 are now seen as wasted."}]},{version:"2.0.12",date:"Oct 18, 2021",entries:[{type:m.ADD,text:"Added an experimental armor clustering feature."}]},{version:"2.0.11",date:"Oct 13, 2021",entries:[{type:m.ADD,text:"HALLOWEEN SPECIAL! Added (temporary) filter for halloween masks! This will be removed after the event."},{type:m.MODIFIED,text:"Fix: Clear the results if you switch character and no possible permutations can be found."}]},{version:"2.0.10",date:"Oct 10, 2021",entries:[{type:m.ADD,text:"Added 'Equip Items' button to the detailed item overview."}]},{version:"2.0.9",date:"Oct 6, 2021",entries:[{type:m.ADD,text:"Added a detailed description of the steps required to build a selected result."},{type:m.ADD,text:"Added a button to disable all four armor pieces at once."},{type:m.MODIFIED,text:"Fixed an issue where the permutations were not updated after 'Ignore armor elemental affinities on masterworked armor' was changed."}]},{version:"2.0.8",date:"Oct 5, 2021",entries:[{type:m.ADD,text:"Added this changelog to the help page."},{type:m.ADD,text:"Added 'Move to Inventory' button (beta)."},{type:m.ADD,text:"Split up 'Assume items are masterworked' into three settings: Class Items, Legendaries, Exotics"},{type:m.MODIFIED,text:"'Try to optimize wasted stats' is now active per default."},{type:m.MODIFIED,text:"Introduced an item buffer in the results component to further reduce memory usage."}]}];let ue=(()=>{class n{constructor(e){this.changelog=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-changelog-dialog"]],decls:9,vars:2,consts:[["mat-dialog-title","",1,"title"],[1,"mat-typography"],["align","end"],["cdkFocusInitial","","color","primary","mat-raised-button","",3,"mat-dialog-close"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div"),t._uU(4," Hi! There has been a new version of D2ArmorPicker! The following list shows all the relevant changes. Note that you can always look at the changelogs in the Help tab. "),t.qZA(),t._UZ(5,"app-changelog-list"),t.qZA(),t.TgZ(6,"mat-dialog-actions",2)(7,"button",3),t._uU(8,"Thanks, I saw it!"),t.qZA()()),2&e&&(t.xp6(1),t.hij("D2ArmorPicker Changelog for Version ",o.changelog.changelogData[0].version,""),t.xp6(6),t.Q6J("mat-dialog-close",!0))},styles:[".title[_ngcontent-%COMP%]{text-decoration:underline;-webkit-text-decoration-color:#0059ff;text-decoration-color:#0059ff}"]}),n})();var K=p(5412);let Bt=(()=>{class n{constructor(e){this.dialog=e}setChangelogSeenFlag(){return localStorage.setItem("last-changelog-version",this.changelogData[0].version)}get lastViewedChangelog(){return localStorage.getItem("last-changelog-version")}get mustShowChangelog(){return this.changelogData[0].version!==this.lastViewedChangelog}get changelogData(){return de}openChangelogDialog(){this.dialog.open(ue).afterClosed().subscribe(o=>{this.setChangelogSeenFlag()})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(K.uw))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var b=p(6895),L=p(266),Oe=p(3162),ot=p(7392),wt=p(6338),pe=p(3848),Me=p(3267);let St=(()=>{class n{constructor(e,o){this.templateRef=e,this.vcRef=o,this.context={$implicit:null,ngVar:null},this.hasView=!1}set ngVar(e){this.context.$implicit=this.context.ngVar=e,this.hasView||(this.vcRef.createEmbeddedView(this.templateRef,this.context),this.hasView=!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc),t.Y36(t.s_b))},n.\u0275dir=t.lG2({type:n,selectors:[["","ngVar",""]],inputs:{ngVar:"ngVar"}}),n})(),De=(()=>{class n{constructor(e){this.changelog=e}ngAfterViewInit(){this.changelog.mustShowChangelog&&this.changelog.openChangelogDialog()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-changelog-dialog-controller"]],decls:0,vars:0,template:function(e,o){},encapsulation:2}),n})();function Ue(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"a",29),t.NdJ("click",function(){t.CHM(e),t.oxw();const a=t.MAs(1);return t.KtG(a.toggle())}),t._uU(1),t.qZA()}if(2&n){const e=i.$implicit,o=i.index,a=t.oxw();t.ekj("active",a.activeLinkIndex==o),t.Q6J("routerLink",e.link),t.xp6(1),t.hij(" ",e.name," ")}}function Ne(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e),t.oxw();const a=t.MAs(1);return t.KtG(a.toggle())}),t.TgZ(1,"mat-icon",3),t._uU(2,"menu"),t.qZA()()}}function Ee(n,i){if(1&n&&(t.TgZ(0,"a",31),t._uU(1),t.qZA()),2&n){const e=i.$implicit,o=i.index,a=t.oxw();t.Q6J("active",a.activeLinkIndex==o)("routerLink",e.link),t.xp6(1),t.hij(" ",e.name," ")}}function Pe(n,i){1&n&&t._UZ(0,"mat-progress-bar",33)}function Re(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Pe,1,0,"mat-progress-bar",32),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e.updatingResultsTable||e.calculatingResults||e.calculatingPermutations||e.updatingInventory||e.updatingManifest)}}function qe(n,i){1&n&&(t.TgZ(0,"mat-card",35),t._uU(1,"Updating the cached manifest. Please wait. "),t._UZ(2,"br"),t._uU(3,"If this takes too long, please logout and login again."),t.qZA())}function Je(n,i){1&n&&(t.TgZ(0,"mat-card",35),t._uU(1,"Updating the cached inventory. Please wait."),t.qZA())}function Le(n,i){1&n&&(t.TgZ(0,"mat-card",35),t._uU(1,"Updating armor combinations. Please wait."),t.qZA())}function Ye(n,i){1&n&&(t.TgZ(0,"mat-card",35),t._uU(1,"Updating possible results. Please wait."),t.qZA())}function Fe(n,i){1&n&&(t.TgZ(0,"mat-card",35),t._uU(1,"Updating result table. Please wait."),t.qZA())}function Qe(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,qe,4,0,"mat-card",34),t.YNc(2,Je,2,0,"mat-card",34),t.YNc(3,Le,2,0,"mat-card",34),t.YNc(4,Ye,2,0,"mat-card",34),t.YNc(5,Fe,2,0,"mat-card",34),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e.updatingManifest),t.xp6(1),t.Q6J("ngIf",e.updatingInventory),t.xp6(1),t.Q6J("ngIf",e.calculatingPermutations),t.xp6(1),t.Q6J("ngIf",e.calculatingResults),t.xp6(1),t.Q6J("ngIf",e.updatingResultsTable)}}let Be=(()=>{class n{constructor(e,o,a,r,l,d){this.status=e,this.breakpointObserver=o,this.inv=a,this.auth=r,this.router=l,this.changelog=d,this.version="2.3.0",this.activeLinkIndex=0,this.navLinks=[{link:"/",name:"Home"},{link:"/cluster",name:"Clustering"},{link:"/help",name:"Help"},{link:"/investigate",name:"Armor Investigation"},{link:"/account",name:"Account"}],this.isHandset$=this.breakpointObserver.observe([ut.u3.Handset,ut.u3.Small,ut.u3.XSmall]).pipe((0,Lt.U)(u=>u.matches),(0,Yt.d)())}ngOnInit(){this.activeLinkIndex=this.navLinks.indexOf(this.navLinks.find(e=>e.link===this.router.url)),this.router.events.subscribe(e=>{e instanceof N.m2&&(this.activeLinkIndex=this.navLinks.indexOf(this.navLinks.find(o=>o.link===this.router.url)))})}refreshAll(e){var o=this;return(0,T.Z)(function*(){console.debug("Trigger refreshAll due to button press"),yield o.inv.refreshAll(e)})()}logout(){this.auth.logout()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(At),t.Y36(ut.Yg),t.Y36(nt),t.Y36(G),t.Y36(N.F0),t.Y36(Bt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-app-v2-core"]],decls:59,vars:16,consts:[["fixedInViewport","","mode","over",1,"sidenav",3,"opened"],["drawer",""],["aria-label","Toggle sidenav","mat-stroked-button","","type","button",3,"click"],["aria-label","Side nav toggle icon"],["mat-list-item","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["href","https://ko-fi.com/mijago","mat-list-item",""],["color","primary","mat-raised-button","","matTooltip","You like my work? This leads you to ko-fi.com, where you can easily support me!","target","_blank"],["inline",""],["mat-list-item","",3,"click"],["mat-raised-button",""],["id","header","role","heading"],["aria-label","Toggle sidenav","mat-icon-button","","type","button",3,"click",4,"ngIf"],["href","https://twitter.com/MijagoCoding/","matTooltip","Birb App","target","_blank"],["alt","Me on twitter","src","assets/logo-twitter.png",1,"logo-twitter"],["href","https://ko-fi.com/mijago","matTooltip","If you like my work, you can always buy me a coffee!","target","_blank"],["alt","Ko-Fi","src","assets/logo-kofi.png",1,"logo-twitter"],["href","http://discord.d2armorpicker.com/","matTooltip","Visit me at the development & support discord.","target","_blank"],["alt","Discord","src","assets/logo-discord.png",1,"logo-twitter"],[1,"header-spacer"],["fxHide.lt-md","true","fxShow","true"],["id","navbar","mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink",4,"ngFor","ngForOf"],["id","buttonContainer"],["fxShow","false","fxShow.gt-md","true","matTooltip","Click to show the changelog dialog.",1,"changelogText"],[3,"click"],["color","accent","fxHide.lt-md","true","fxShow","true","href","https://ko-fi.com/mijago","mat-stroked-button","","matTooltip","You like my work? This leads you to ko-fi.com, where you can easily support me!","target","_blank"],["aria-label","Refresh","mat-icon-button","","matTooltip","Reload all items from the API.",1,"example-icon",3,"click"],["aria-label","Logout","color","warn","mat-icon-button","","matTooltip","Logout",1,"example-icon",3,"click"],[4,"ngVar"],["mat-list-item","",3,"routerLink","click"],["aria-label","Toggle sidenav","mat-icon-button","","type","button",3,"click"],["mat-tab-link","",3,"active","routerLink"],["id","loading","mode","indeterminate",4,"ngIf"],["id","loading","mode","indeterminate"],["class","info",4,"ngIf"],[1,"info"]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"mat-sidenav",0,1),t.ALo(2,"async"),t.TgZ(3,"mat-toolbar")(4,"button",2),t.NdJ("click",function(){t.CHM(a);const l=t.MAs(1);return t.KtG(l.toggle())}),t.TgZ(5,"mat-icon",3),t._uU(6,"menu"),t.qZA(),t._uU(7," Close Menu "),t.qZA()(),t._UZ(8,"hr"),t.TgZ(9,"mat-nav-list"),t.YNc(10,Ue,2,4,"a",4),t._UZ(11,"hr"),t.TgZ(12,"a",5)(13,"a",6)(14,"mat-icon",7),t._uU(15,"attach_money"),t.qZA(),t._uU(16," Buy me a coffee! "),t.qZA()(),t.TgZ(17,"a",8),t.NdJ("click",function(){return o.changelog.openChangelogDialog()}),t.TgZ(18,"a",9),t._uU(19," Open changelog "),t.qZA()(),t._UZ(20,"hr"),t.qZA()(),t.TgZ(21,"mat-toolbar",10),t.YNc(22,Ne,3,0,"button",11),t.ALo(23,"async"),t.TgZ(24,"span"),t._uU(25,"D2ArmorPicker "),t.TgZ(26,"small"),t._uU(27," by Mijago"),t.qZA(),t.TgZ(28,"a",12),t._UZ(29,"img",13),t.qZA(),t.TgZ(30,"a",14),t._UZ(31,"img",15),t.qZA(),t.TgZ(32,"a",16),t._UZ(33,"img",17),t.qZA()(),t._UZ(34,"span",18),t.TgZ(35,"div",19)(36,"nav",20),t.YNc(37,Ee,2,3,"a",21),t.qZA()(),t._UZ(38,"span",18),t.TgZ(39,"div",22)(40,"span",23)(41,"a",24),t.NdJ("click",function(){return o.changelog.openChangelogDialog()}),t._uU(42),t.qZA()(),t.TgZ(43,"a",25)(44,"mat-icon",7),t._uU(45,"attach_money"),t.qZA(),t._uU(46," Buy me a coffee! "),t.qZA(),t.TgZ(47,"button",26),t.NdJ("click",function(){return o.refreshAll(!0)}),t.TgZ(48,"mat-icon"),t._uU(49,"refresh"),t.qZA()(),t.TgZ(50,"button",27),t.NdJ("click",function(){return o.logout()}),t.TgZ(51,"mat-icon"),t._uU(52,"logout"),t.qZA()()()(),t._UZ(53,"router-outlet"),t.YNc(54,Re,2,1,"span",28),t.ALo(55,"async"),t.YNc(56,Qe,6,5,"span",28),t.ALo(57,"async"),t._UZ(58,"app-changelog-dialog-controller")}2&e&&(t.Q6J("opened",!1),t.uIk("role",t.lcZ(2,8,o.isHandset$)?"dialog":"navigation"),t.xp6(10),t.Q6J("ngForOf",o.navLinks),t.xp6(12),t.Q6J("ngIf",t.lcZ(23,10,o.isHandset$)),t.xp6(15),t.Q6J("ngForOf",o.navLinks),t.xp6(5),t.hij("v",o.version,"\xa0"),t.xp6(12),t.Q6J("ngVar",t.lcZ(55,12,o.status.status)),t.xp6(2),t.Q6J("ngVar",t.lcZ(57,14,o.status.status)))},dependencies:[b.sg,b.O5,$.b8,R.lW,R.zs,w.a8,L.gM,Oe.pW,ot.Hw,tt.Ye,wt.Hk,wt.Tg,pe.BU,pe.Nj,Me.JX,N.lC,N.yS,St,De,b.Ov],styles:[".loading[_ngcontent-%COMP%]{cursor:progress}.info[_ngcontent-%COMP%]{z-index:1000;position:fixed;width:200px;left:50%;top:50px;transform:translate(-50%);border:antiquewhite 1px solid}.sidenav-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100%;z-index:20}.sidenav[_ngcontent-%COMP%]{width:200px;position:fixed;top:0;left:0;height:100%;z-index:20}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.sidenav[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#ffffff12;color:#b8c4dc}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}#header[_ngcontent-%COMP%]{position:relative;height:42px;margin-bottom:5px}#header[_ngcontent-%COMP%]   .header-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.changelogText[_ngcontent-%COMP%]{cursor:pointer}#loading[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;z-index:1000}.d2ap-router-link[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]     .mat-tab-link{min-width:75px;opacity:1}"]}),n})();var S=p(2143),ge=p(8739),Kt=p(6308),Y=p(7340),it=p(8929),F=p(7625);function Ve(n,i){1&n&&(t.ynx(0),t._uU(1," Click on a row to expand it and to see the list of the items required for this build."),t._UZ(2,"br"),t.BQk())}function He(n,i){1&n&&(t.ynx(0),t.TgZ(1,"div",53),t._UZ(2,"img",54),t._uU(3,"\xa0 "),t.qZA(),t.TgZ(4,"span",55)(5,"b"),t._uU(6,"No combinations found."),t.qZA()(),t._uU(7," You should loosen your settings a bit. "),t.BQk())}function je(n,i){if(1&n&&(t.TgZ(0,"mat-icon",56,57),t.ALo(2,"number"),t._uU(3,"report_problem "),t.qZA()),2&n){const e=t.oxw();t.MGl("matTooltip","Note: To speed up the whole process, only ",t.lcZ(2,1,e.parsedResults)," results are listed in this table.\n                        If you need more entries, disable the limitation in the advanced settings.")}}function We(n,i){if(1&n&&(t.TgZ(0,"mat-icon",56,57),t.ALo(2,"number"),t._uU(3,"report_problem "),t.qZA()),2&n){const e=t.oxw();t.MGl("matTooltip","Note: To prevent Out-Of-Memory crashes, only ",t.lcZ(2,1,e.parsedResults)," results are listed in this table.\n                                You should narrow down your settings a bit.")}}function ze(n,i){1&n&&(t.TgZ(0,"mat-chip",58,57),t._uU(2,"No Exotic "),t.qZA())}function Ge(n,i){1&n&&(t.TgZ(0,"mat-chip",59,57),t._uU(2,"Exotic "),t.qZA())}function Ke(n,i){1&n&&(t.TgZ(0,"mat-chip",60,57),t._uU(2," Multiple Exotics "),t.qZA())}function Xe(n,i){1&n&&(t.TgZ(0,"mat-chip",61,57),t._uU(2,"No stat mods "),t.qZA())}function $e(n,i){1&n&&(t.TgZ(0,"mat-chip",62,57),t._uU(2,"Reduce wasted stats "),t.qZA())}function tn(n,i){1&n&&(t.TgZ(0,"mat-chip",63,57),t._uU(2,"Stat Mod Limitation "),t.qZA())}function en(n,i){1&n&&(t.TgZ(0,"mat-chip",64,57),t._uU(2," Armor Perk or Slot "),t.qZA())}function nn(n,i){1&n&&(t.TgZ(0,"mat-chip",65,57),t._uU(2,"Zero Waste "),t.qZA())}function on(n,i){1&n&&(t.TgZ(0,"mat-chip",66,57)(2,"mat-icon",67),t._uU(3,"report_problem"),t.qZA(),t._uU(4," \xa0Assume everything is artifice\xa0 "),t.TgZ(5,"mat-icon",67),t._uU(6,"report_problem"),t.qZA()())}function an(n,i){1&n&&(t.TgZ(0,"mat-chip",68,57),t._uU(2," Masterworked Only "),t.qZA())}function rn(n,i){1&n&&(t.TgZ(0,"mat-chip",69,57),t._uU(2," Masterwork Assumption "),t.qZA())}function sn(n,i){1&n&&(t.TgZ(0,"th",70),t._uU(1,"Mobility "),t.qZA())}function ln(n,i){if(1&n&&(t.TgZ(0,"td",71),t._uU(1),t._UZ(2,"img",72),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.hij("",e.stats[o.ArmorStat.Mobility]," ")}}function cn(n,i){1&n&&(t.TgZ(0,"th",73),t._uU(1," Resilience "),t.qZA())}function mn(n,i){if(1&n&&(t.TgZ(0,"td",71),t._uU(1),t._UZ(2,"img",74),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.hij("",e.stats[o.ArmorStat.Resilience]," ")}}function dn(n,i){1&n&&(t.TgZ(0,"th",75),t._uU(1," Recovery "),t.qZA())}function un(n,i){if(1&n&&(t.TgZ(0,"td",71),t._uU(1),t._UZ(2,"img",76),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.hij("",e.stats[o.ArmorStat.Recovery]," ")}}function pn(n,i){1&n&&(t.TgZ(0,"th",77),t._uU(1," Discipline "),t.qZA())}function gn(n,i){if(1&n&&(t.TgZ(0,"td",71),t._uU(1),t._UZ(2,"img",78),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.hij("",e.stats[o.ArmorStat.Discipline]," ")}}function _n(n,i){1&n&&(t.TgZ(0,"th",79),t._uU(1," Intellect "),t.qZA())}function fn(n,i){if(1&n&&(t.TgZ(0,"td",71),t._uU(1),t._UZ(2,"img",80),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.hij("",e.stats[o.ArmorStat.Intellect]," ")}}function hn(n,i){1&n&&(t.TgZ(0,"th",81),t._uU(1,"Strength "),t.qZA())}function xn(n,i){if(1&n&&(t.TgZ(0,"td",71),t._uU(1),t._UZ(2,"img",82),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.hij("",e.stats[o.ArmorStat.Strength]," ")}}function Tn(n,i){1&n&&(t.TgZ(0,"th",83),t._uU(1," Used Mods "),t.qZA())}function yn(n,i){if(1&n&&(t.TgZ(0,"td",84),t._UZ(1,"app-table-mod-display",85),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("mods",e.mods)("artifice",e.artifice)}}function bn(n,i){1&n&&(t.TgZ(0,"th",86),t._uU(1," Exotic"),t.qZA())}function Cn(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"img",89,57)(3,"img",90),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.s9C("matTooltip",e.name),t.MGl("src","https://bungie.net/",e.icon,"",t.LSH),t.xp6(2),t.MGl("src","https://bungie.net/",e.watermark,"",t.LSH)}}function vn(n,i){1&n&&t._UZ(0,"img",91)}function An(n,i){if(1&n&&(t.TgZ(0,"td",84),t.YNc(1,Cn,4,3,"ng-container",87),t.YNc(2,vn,1,0,"img",88),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngForOf",e.exotic),t.xp6(1),t.Q6J("ngIf",0==e.exotic.length)}}function Zn(n,i){1&n&&t._UZ(0,"th",86)}function wn(n,i){1&n&&(t.TgZ(0,"mat-icon",95),t._uU(1," expand_more "),t.qZA())}function Sn(n,i){1&n&&(t.TgZ(0,"mat-icon",96),t._uU(1," expand_less "),t.qZA())}function In(n,i){1&n&&(t.TgZ(0,"mat-icon",97,57),t._uU(2," report_problem "),t.qZA())}function kn(n,i){if(1&n&&(t.TgZ(0,"td",84),t.YNc(1,wn,2,0,"mat-icon",92),t.YNc(2,Sn,2,0,"mat-icon",93),t.YNc(3,In,3,0,"mat-icon",94),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.expandedElement!==e),t.xp6(1),t.Q6J("ngIf",o.expandedElement===e),t.xp6(1),t.Q6J("ngIf",o.checkIfAnyItemsMayBeInvalid(e))}}function On(n,i){1&n&&(t.TgZ(0,"th",98),t._uU(1,"Tiers "),t.qZA())}function Mn(n,i){if(1&n&&(t.TgZ(0,"td",84),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.tiers," ")}}function Dn(n,i){1&n&&(t.TgZ(0,"th",99),t._uU(1,"Max Tiers "),t.qZA())}function Un(n,i){if(1&n&&(t.TgZ(0,"td",84),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.tiers+(5-e.modCount)," ")}}function Nn(n,i){1&n&&(t.TgZ(0,"th",100),t._uU(1,"Wasted "),t.qZA())}function En(n,i){if(1&n&&(t.TgZ(0,"td",84),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.waste," ")}}function Pn(n,i){if(1&n&&(t.TgZ(0,"td",84)(1,"div",101),t._UZ(2,"app-expanded-result-content",102),t.qZA()()),2&n){const e=i.$implicit,o=t.oxw();t.uIk("colspan",o.shownColumns.length),t.xp6(1),t.Q6J("@detailExpand",e==o.expandedElement?"expanded":"collapsed"),t.xp6(1),t.Q6J("element",e)}}function Rn(n,i){1&n&&t._UZ(0,"tr",103)}function qn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr",104),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.expandedElement=l.expandedElement===r?null:r)}),t.qZA()}if(2&n){const e=i.$implicit,o=t.oxw();t.ekj("example-expanded-row",o.expandedElement===e)}}function Jn(n,i){1&n&&t._UZ(0,"tr",105)}const Ln=function(){return["expandedDetail"]},Yn=function(){return[10,20,50]};var Tt=(()=>{return(n=Tt||(Tt={}))[n.TRANSFER_NONE=0]="TRANSFER_NONE",n[n.WAITING_FOR_TRANSFER=1]="WAITING_FOR_TRANSFER",n[n.TRANSFERRING=2]="TRANSFERRING",n[n.TRANSFERRED=3]="TRANSFERRED",n[n.ERROR_DURING_TRANSFER=4]="ERROR_DURING_TRANSFER",Tt;var n})();let _e=(()=>{class n{constructor(e,o,a,r,l){this.inventory=e,this.db=o,this.bungieApi=a,this.config=r,this.status=l,this.ArmorStat=c,this.StatModifier=v,this._results=[],this._config_assumeLegendariesMasterworked=!1,this._config_assumeExoticsMasterworked=!1,this._config_assumeClassItemMasterworked=!1,this._config_enabledMods=[],this._config_limitParsedResults=!1,this._config_maximumStatMods=5,this._config_selectedExotics=[],this._config_tryLimitWastedStats=!1,this._config_onlyUseMasterworkedItems=!1,this._config_onlyShowResultsWithNoWastedStats=!1,this._config_assumeEveryLegendaryIsArtifice=!1,this._config_modslotLimitation=[],this._config_armorPerkLimitation=[],this.tableDataSource=new S.by,this.paginator=null,this.sort=null,this.expandedElement=null,this.shownColumns=["exotic","mobility","resilience","recovery","discipline","intellect","strength","tiers","mods","dropdown"],this.selectedClass=s.N.None,this.totalTime=0,this.itemCount=0,this.totalResults=0,this.parsedResults=0,this.ngUnsubscribe=new it.xQ}ngOnInit(){var e=this;this.config.configuration.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(o=>{this.selectedClass=o.characterClass,this._config_assumeLegendariesMasterworked=o.assumeLegendariesMasterworked,this._config_assumeExoticsMasterworked=o.assumeExoticsMasterworked,this._config_assumeClassItemMasterworked=o.assumeClassItemMasterworked,this._config_tryLimitWastedStats=o.tryLimitWastedStats,this._config_enabledMods=o.enabledMods||[],this._config_limitParsedResults=o.limitParsedResults,this._config_maximumStatMods=o.maximumStatMods,this._config_onlyUseMasterworkedItems=o.onlyUseMasterworkedItems,this._config_onlyShowResultsWithNoWastedStats=o.onlyShowResultsWithNoWastedStats,this._config_assumeEveryLegendaryIsArtifice=o.assumeEveryLegendaryIsArtifice,this._config_selectedExotics=o.selectedExotics,this._config_armorPerkLimitation=Object.entries(o.armorPerks).filter(r=>r[1].value!=_.None).map(r=>r[1]),this._config_modslotLimitation=Object.entries(o.maximumModSlots).filter(r=>r[1].value<5).map(r=>r[1]);let a=["exotic","mobility","resilience","recovery","discipline","intellect","strength",o.showPotentialTierColumn?"potential_tiers":"tiers","mods"];o.showWastedStatsColumn&&a.push("waste"),a.push("dropdown"),this.shownColumns=a}),this.inventory.armorResults.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(function(){var o=(0,T.Z)(function*(a){e._results=a.results,e.itemCount=a.itemCount,e.totalTime=a.totalTime,e.totalResults=a.totalResults,e.parsedResults=e._results.length,e.status.modifyStatus(r=>r.updatingResultsTable=!0),yield e.updateData(),e.status.modifyStatus(r=>r.updatingResultsTable=!1)});return function(a){return o.apply(this,arguments)}}()),this.tableDataSource.paginator=this.paginator,this.tableDataSource.sort=this.sort,this.tableDataSource.sortingDataAccessor=(o,a)=>{switch(a){case"Mobility":return o.stats[c.Mobility];case"Resilience":return o.stats[c.Resilience];case"Recovery":return o.stats[c.Recovery];case"Discipline":return o.stats[c.Discipline];case"Intellect":return o.stats[c.Intellect];case"Strength":return o.stats[c.Strength];case"Tiers":return o.tiers;case"Max Tiers":return 10*(o.tiers+(5-o.modCount));case"Waste":return o.waste;case"Mods":return 100*o.modCount+o.modCost}return 0}}updateData(){var e=this;return(0,T.Z)(function*(){console.time("Update Table Data"),e.tableDataSource.paginator=e.paginator,e.tableDataSource.sort=e.sort,e.tableDataSource.data=e._results,console.timeEnd("Update Table Data")})()}checkIfAnyItemsMayBeInvalid(e){return(e?.items.filter(o=>o.filter(a=>a.mayBeBugged).length>0).length||0)>0}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(nt),t.Y36(ct),t.Y36(Qt),t.Y36(j),t.Y36(At))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-results"]],viewQuery:function(e,o){if(1&e&&(t.Gf(ge.NW,5),t.Gf(Kt.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first),t.iGM(a=t.CRH())&&(o.sort=a.first)}},decls:89,vars:31,consts:[["id","card-results"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,"config-summary-box"],["appearance","outline","fxFlex","",1,"info-box"],["matInput","","readonly","",3,"value"],["class","report-problem-icon","matSuffix","",3,"matTooltip",4,"ngIf"],["appearance","outline","disabled","",1,"config-summary-box"],["matInput","","readonly","","value","\xa0",1,"hidden-input"],["aria-label","Configuration Summary"],["disableRipple","","matTooltip","This setting enforces that all exotics are ignored.",4,"ngIf"],["disableRipple","","matTooltip","This setting enforces that only one specific exotic is used.",4,"ngIf"],["disableRipple","","matTooltip","The tool will try to fulfill your settings for all the selected exotics. If you select exotics in different slots then it will search for legendary items to allow hotswapping with the same stats.",4,"ngIf"],["disableRipple","","matTooltip","You enforced that no stat mods are used.",4,"ngIf"],["disableRipple","","matTooltip","The tool will add minor stat mods to reduce wasted stats.",4,"ngIf"],["disableRipple","","matTooltip","This setting limits available stat mod types, like major Intellect or Recovery.",4,"ngIf"],["disableRipple","","matTooltip","This setting enforces an specific armor perk or modslot for a specific armor slot.",4,"ngIf"],["disableRipple","","matTooltip","This setting means that only builds with no wasted stats are shown.","selected","",4,"ngIf"],["disableRipple","","matTooltip","EVERY legendary is assumed to be artifice.","selected","","color","warn",4,"ngIf"],["disableRipple","","matTooltip","This setting means that only armor pieces are used that are already masterworked.","selected","",4,"ngIf"],["disableRipple","","matTooltip","Some masterwork assumptions are in place. This means that you may have to masterwork items. Look at your advanced settings to see which ones are activated.",4,"ngIf"],[1,"hint-text"],["aria-hidden","false","inline",""],["mat-table","","matSort","","matSortActive","Mods","matSortDirection","asc","multiTemplateDataRows","",1,"result-table",3,"dataSource"],["matColumnDef","mobility"],["mat-header-cell","","mat-sort-header","Mobility","matTooltip","The mobility of this armor combination.",4,"matHeaderCellDef"],["class","statColumn","mat-cell","",4,"matCellDef"],["matColumnDef","resilience"],["mat-header-cell","","mat-sort-header","Resilience","matTooltip","The resilience of this armor combination.",4,"matHeaderCellDef"],["matColumnDef","recovery"],["mat-header-cell","","mat-sort-header","Recovery","matTooltip","The recovery of this armor combination.",4,"matHeaderCellDef"],["matColumnDef","discipline"],["mat-header-cell","","mat-sort-header","Discipline","matTooltip","The discipline of this armor combination.",4,"matHeaderCellDef"],["matColumnDef","intellect"],["mat-header-cell","","mat-sort-header","Intellect","matTooltip","The intellect of this armor combination.",4,"matHeaderCellDef"],["matColumnDef","strength"],["mat-header-cell","","mat-sort-header","Strength","matTooltip","The strength of this armor combination.",4,"matHeaderCellDef"],["matColumnDef","mods"],["mat-header-cell","","mat-sort-header","Mods","matTooltip","The amount of mods required for each combination. Sorting after this takes the mod cost into account.",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","exotic"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","dropdown"],["matColumnDef","tiers"],["mat-header-cell","","mat-sort-header","Tiers","matTooltip","The amount of Tiers in this build. A tier is each successful 10-step of any stat.",4,"matHeaderCellDef"],["matColumnDef","potential_tiers"],["mat-header-cell","","mat-sort-header","Max Tiers","matTooltip","The potential reachable stat tiers with all N stat mods used. As of now, this does NOT take mod filters into consideration.",4,"matHeaderCellDef"],["matColumnDef","waste"],["mat-header-cell","","mat-sort-header","Waste","matTooltip","How many points are wasted. Any stat not ending in 0 adds to this value.",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["class","example-element-row","mat-row","",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["class","example-detail-row","mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of periodic elements","pageSize","20","showFirstLastButtons","",3,"pageSizeOptions"],[1,"no-found-sadcat-container"],["src","assets/status/emoji/sadcat.png",1,"no-found-sadcat"],[1,"warning-none-found"],["matSuffix","",1,"report-problem-icon",3,"matTooltip"],["tooltip","matTooltip"],["disableRipple","","matTooltip","This setting enforces that all exotics are ignored."],["disableRipple","","matTooltip","This setting enforces that only one specific exotic is used."],["disableRipple","","matTooltip","The tool will try to fulfill your settings for all the selected exotics. If you select exotics in different slots then it will search for legendary items to allow hotswapping with the same stats."],["disableRipple","","matTooltip","You enforced that no stat mods are used."],["disableRipple","","matTooltip","The tool will add minor stat mods to reduce wasted stats."],["disableRipple","","matTooltip","This setting limits available stat mod types, like major Intellect or Recovery."],["disableRipple","","matTooltip","This setting enforces an specific armor perk or modslot for a specific armor slot."],["disableRipple","","matTooltip","This setting means that only builds with no wasted stats are shown.","selected",""],["disableRipple","","matTooltip","EVERY legendary is assumed to be artifice.","selected","","color","warn"],["inline","",2,"height","100%"],["disableRipple","","matTooltip","This setting means that only armor pieces are used that are already masterworked.","selected",""],["disableRipple","","matTooltip","Some masterwork assumptions are in place. This means that you may have to masterwork items. Look at your advanced settings to see which ones are activated."],["mat-header-cell","","mat-sort-header","Mobility","matTooltip","The mobility of this armor combination."],["mat-cell","",1,"statColumn"],["alt","Mobility","src","https://www.bungie.net/common/destiny2_content/icons/e26e0e93a9daf4fdd21bf64eb9246340.png",1,"statIcon"],["mat-header-cell","","mat-sort-header","Resilience","matTooltip","The resilience of this armor combination."],["alt","Resilience","src","https://www.bungie.net/common/destiny2_content/icons/202ecc1c6febeb6b97dafc856e863140.png",1,"statIcon"],["mat-header-cell","","mat-sort-header","Recovery","matTooltip","The recovery of this armor combination."],["alt","Recovery","src","https://www.bungie.net/common/destiny2_content/icons/128eee4ee7fc127851ab32eac6ca91cf.png",1,"statIcon"],["mat-header-cell","","mat-sort-header","Discipline","matTooltip","The discipline of this armor combination."],["alt","Discipline","src","https://www.bungie.net/common/destiny2_content/icons/ca62128071dc254fe75891211b98b237.png",1,"statIcon"],["mat-header-cell","","mat-sort-header","Intellect","matTooltip","The intellect of this armor combination."],["alt","Intellect","src","https://www.bungie.net/common/destiny2_content/icons/59732534ce7060dba681d1ba84c055a6.png",1,"statIcon"],["mat-header-cell","","mat-sort-header","Strength","matTooltip","The strength of this armor combination."],["alt","Strength","src","https://www.bungie.net/common/destiny2_content/icons/c7eefc8abbaa586eeab79e962a79d6ad.png",1,"statIcon"],["mat-header-cell","","mat-sort-header","Mods","matTooltip","The amount of mods required for each combination. Sorting after this takes the mod cost into account."],["mat-cell",""],[1,"modPreview",3,"mods","artifice"],["mat-header-cell",""],[4,"ngFor","ngForOf"],["class","itemIcon","src","https://www.bungie.net/common/destiny2_content/icons/b4d05ef69d0c3227a7d4f7f35bbc2848.png",4,"ngIf"],[1,"itemIcon",3,"matTooltip","src"],[1,"itemIconWatermark",3,"src"],["src","https://www.bungie.net/common/destiny2_content/icons/b4d05ef69d0c3227a7d4f7f35bbc2848.png",1,"itemIcon"],["matTooltip","Click to show details for this build.",4,"ngIf"],["matTooltip","Click to hide details for this build.",4,"ngIf"],["aria-hidden","false","aria-label","Error","class","report-problem-icon","inline","","matTooltip","The stats of this build may be incorrect. Make sure that you remove every positive or negative stat modifier from the marked items.",4,"ngIf"],["matTooltip","Click to show details for this build."],["matTooltip","Click to hide details for this build."],["aria-hidden","false","aria-label","Error","inline","","matTooltip","The stats of this build may be incorrect. Make sure that you remove every positive or negative stat modifier from the marked items.",1,"report-problem-icon"],["mat-header-cell","","mat-sort-header","Tiers","matTooltip","The amount of Tiers in this build. A tier is each successful 10-step of any stat."],["mat-header-cell","","mat-sort-header","Max Tiers","matTooltip","The potential reachable stat tiers with all N stat mods used. As of now, this does NOT take mod filters into consideration."],["mat-header-cell","","mat-sort-header","Waste","matTooltip","How many points are wasted. Any stat not ending in 0 adds to this value."],[1,"example-element-detail"],[3,"element"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title"),t._uU(2,"Results"),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t.YNc(4,Ve,3,0,"ng-container",1),t.YNc(5,He,8,0,"ng-container",1),t.qZA(),t.TgZ(6,"mat-card-content")(7,"div")(8,"div",2)(9,"mat-form-field",3)(10,"mat-label"),t._uU(11,"Items Used"),t.qZA(),t._UZ(12,"input",4),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"mat-form-field",3)(15,"mat-label"),t._uU(16,"Combinations generated"),t.qZA(),t._UZ(17,"input",4),t.ALo(18,"number"),t.YNc(19,je,4,3,"mat-icon",5),t.YNc(20,We,4,3,"mat-icon",5),t.qZA(),t.TgZ(21,"mat-form-field",3)(22,"mat-label"),t._uU(23,"Time required"),t.qZA(),t._UZ(24,"input",4),t.ALo(25,"number"),t.qZA()(),t.TgZ(26,"mat-form-field",6)(27,"mat-label"),t._uU(28,"Summary of important configuration choices"),t.qZA(),t._UZ(29,"input",7),t.TgZ(30,"mat-chip-list",8),t.YNc(31,ze,3,0,"mat-chip",9),t.YNc(32,Ge,3,0,"mat-chip",10),t.YNc(33,Ke,3,0,"mat-chip",11),t.YNc(34,Xe,3,0,"mat-chip",12),t.YNc(35,$e,3,0,"mat-chip",13),t.YNc(36,tn,3,0,"mat-chip",14),t.YNc(37,en,3,0,"mat-chip",15),t.YNc(38,nn,3,0,"mat-chip",16),t.YNc(39,on,7,0,"mat-chip",17),t.YNc(40,an,3,0,"mat-chip",18),t.YNc(41,rn,3,0,"mat-chip",19),t.qZA()(),t.TgZ(42,"div",20)(43,"mat-icon",21),t._uU(44,"info"),t.qZA(),t._uU(45," Note that you can change the sort column and order of the table by clicking on the headers. "),t.qZA(),t.TgZ(46,"table",22),t.ynx(47,23),t.YNc(48,sn,2,0,"th",24),t.YNc(49,ln,3,1,"td",25),t.BQk(),t.ynx(50,26),t.YNc(51,cn,2,0,"th",27),t.YNc(52,mn,3,1,"td",25),t.BQk(),t.ynx(53,28),t.YNc(54,dn,2,0,"th",29),t.YNc(55,un,3,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,pn,2,0,"th",31),t.YNc(58,gn,3,1,"td",25),t.BQk(),t.ynx(59,32),t.YNc(60,_n,2,0,"th",33),t.YNc(61,fn,3,1,"td",25),t.BQk(),t.ynx(62,34),t.YNc(63,hn,2,0,"th",35),t.YNc(64,xn,3,1,"td",25),t.BQk(),t.ynx(65,36),t.YNc(66,Tn,2,0,"th",37),t.YNc(67,yn,2,2,"td",38),t.BQk(),t.ynx(68,39),t.YNc(69,bn,2,0,"th",40),t.YNc(70,An,3,2,"td",38),t.BQk(),t.ynx(71,41),t.YNc(72,Zn,1,0,"th",40),t.YNc(73,kn,4,3,"td",38),t.BQk(),t.ynx(74,42),t.YNc(75,On,2,0,"th",43),t.YNc(76,Mn,2,1,"td",38),t.BQk(),t.ynx(77,44),t.YNc(78,Dn,2,0,"th",45),t.YNc(79,Un,2,1,"td",38),t.BQk(),t.ynx(80,46),t.YNc(81,Nn,2,0,"th",47),t.YNc(82,En,2,1,"td",38),t.BQk(),t.ynx(83,48),t.YNc(84,Pn,3,3,"td",38),t.BQk(),t.YNc(85,Rn,1,0,"tr",49),t.YNc(86,qn,1,2,"tr",50),t.YNc(87,Jn,1,0,"tr",51),t.qZA(),t._UZ(88,"mat-paginator",52),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",o.totalResults>0),t.xp6(1),t.Q6J("ngIf",0==o.totalResults),t.xp6(7),t.s9C("value",t.lcZ(13,23,o.itemCount)),t.xp6(5),t.s9C("value",t.lcZ(18,25,o.totalResults)),t.xp6(2),t.Q6J("ngIf",o.parsedResults!=o.totalResults&&5e4==o.parsedResults),t.xp6(1),t.Q6J("ngIf",o.parsedResults!=o.totalResults&&1e6==o.parsedResults),t.xp6(4),t.MGl("value","",t.lcZ(25,27,o.totalTime),"ms"),t.xp6(7),t.Q6J("ngIf",o._config_selectedExotics.indexOf(-1)>-1),t.xp6(1),t.Q6J("ngIf",1==o._config_selectedExotics.length&&-1==o._config_selectedExotics.indexOf(-1)),t.xp6(1),t.Q6J("ngIf",o._config_selectedExotics.length>1&&-1==o._config_selectedExotics.indexOf(-1)),t.xp6(1),t.Q6J("ngIf",0==o._config_maximumStatMods),t.xp6(1),t.Q6J("ngIf",o._config_tryLimitWastedStats),t.xp6(1),t.Q6J("ngIf",o._config_modslotLimitation.length>0),t.xp6(1),t.Q6J("ngIf",o._config_armorPerkLimitation.length>0),t.xp6(1),t.Q6J("ngIf",o._config_onlyShowResultsWithNoWastedStats),t.xp6(1),t.Q6J("ngIf",o._config_assumeEveryLegendaryIsArtifice),t.xp6(1),t.Q6J("ngIf",o._config_onlyUseMasterworkedItems),t.xp6(1),t.Q6J("ngIf",!o._config_onlyUseMasterworkedItems&&(o._config_assumeLegendariesMasterworked||o._config_assumeExoticsMasterworked||o._config_assumeClassItemMasterworked)),t.xp6(5),t.Q6J("dataSource",o.tableDataSource),t.xp6(39),t.Q6J("matHeaderRowDef",o.shownColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.shownColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(29,Ln)),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(30,Yn)))},styles:["#card-results[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;white-space:normal;width:-moz-fit-content;width:fit-content;margin-left:3px}.statColumn[_ngcontent-%COMP%]{position:relative}.statIcon[_ngcontent-%COMP%]{position:absolute;height:22px;margin-left:2px;top:11px}.itemIcon[_ngcontent-%COMP%]{width:32px;height:32px;margin-right:3px}.itemIconWatermark[_ngcontent-%COMP%]{width:32px;height:32px;margin-right:3px;margin-left:-35px;pointer-events:none}tr.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}tr.example-detail-row[_ngcontent-%COMP%]{height:0!important}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.report-problem-icon[_ngcontent-%COMP%]{color:#f08080}.hint-text[_ngcontent-%COMP%]{font-size:small;color:#d5d5d5}[_nghost-%COMP%]     .info-box .mat-form-field-wrapper{padding-bottom:5px!important;cursor:default}.hidden-input[_ngcontent-%COMP%]{display:none}.config-summary-box[_ngcontent-%COMP%]{width:100%}.result-table[_ngcontent-%COMP%]   tr.example-element-row[_ngcontent-%COMP%]{cursor:pointer}.mat-row[_ngcontent-%COMP%]:nth-child(4n+3){background-color:#7474741a}.warning-none-found[_ngcontent-%COMP%]{color:red}.no-found-sadcat-container[_ngcontent-%COMP%]{width:20px;position:relative;display:inline-block}.no-found-sadcat[_ngcontent-%COMP%]{position:absolute;width:18px;top:-1px}.cdk-column-exotic[_ngcontent-%COMP%]{min-width:45px}.cdk-column-waste[_ngcontent-%COMP%]{padding-left:5px}"],data:{animation:[(0,Y.X$)("detailExpand",[(0,Y.SB)("collapsed, void",(0,Y.oB)({height:"0px"})),(0,Y.SB)("expanded",(0,Y.oB)({height:"*"})),(0,Y.eR)("expanded <=> collapsed",(0,Y.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)")),(0,Y.eR)("expanded <=> void",(0,Y.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),n})();const Fn={2:{shards:1,glimmer:500,core:0,prism:0,ascshard:0},3:{shards:1,glimmer:500,core:0,prism:0,ascshard:0},4:{shards:2,glimmer:500,core:0,prism:0,ascshard:0},5:{shards:2,glimmer:1e3,core:0,prism:0,ascshard:0},6:{shards:3,glimmer:1e3,core:1,prism:0,ascshard:0},7:{shards:3,glimmer:2500,core:2,prism:0,ascshard:0},8:{shards:4,glimmer:3e3,core:0,prism:1,ascshard:0},9:{shards:4,glimmer:3e3,core:0,prism:2,ascshard:0},10:{shards:5,glimmer:4e3,core:0,prism:0,ascshard:1}},Qn={2:{shards:1,glimmer:500,core:0,prism:0,ascshard:0},3:{shards:2,glimmer:1e3,core:0,prism:0,ascshard:0},4:{shards:2,glimmer:1e3,core:0,prism:0,ascshard:0},5:{shards:3,glimmer:2500,core:0,prism:0,ascshard:0},6:{shards:3,glimmer:3e3,core:2,prism:0,ascshard:0},7:{shards:4,glimmer:3e3,core:3,prism:0,ascshard:0},8:{shards:4,glimmer:4e3,core:0,prism:2,ascshard:0},9:{shards:5,glimmer:4e3,core:0,prism:3,ascshard:0},10:{shards:6,glimmer:5e3,core:0,prism:0,ascshard:3}};var Xt=p(7009),Bn=p(1572),Mt=p(4425),Vt=p(4080);function Vn(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e)}}function Hn(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e+2)}}function jn(n,i){if(1&n&&(t.TgZ(0,"div",7),t._uU(1,"\xa0"),t.qZA()),2&n){const e=t.oxw(2);t.Udp("width",e.getWidth(2))}}function Wn(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,Vn,2,1,"span",3),t.YNc(5,Hn,2,1,"span",3),t.qZA(),t.TgZ(6,"td")(7,"div",4)(8,"div",5),t._uU(9,"\xa0"),t.qZA(),t.YNc(10,jn,2,2,"div",6),t.qZA()()()),2&n){const e=i.$implicit,o=i.index,a=t.oxw();t.xp6(2),t.Oqu(a.getArmorStatName(o)),t.xp6(2),t.Q6J("ngIf",!(null!=a.armor&&a.armor.masterworked)),t.xp6(1),t.Q6J("ngIf",null==a.armor?null:a.armor.masterworked),t.xp6(3),t.Udp("width",a.getWidth(e)),t.xp6(2),t.Q6J("ngIf",null==a.armor?null:a.armor.masterworked)}}let zn=(()=>{class n{constructor(){}getArmorStatName(e){return Zt[e]}getWidth(e){return Math.min(100,e/32*100)+"%"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-armor-tooltip-component"]],inputs:{armor:["itemTooltip","armor"]},decls:10,vars:2,consts:[[1,"tooltip-container"],["colspan","3"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"stat-display"],[1,"stat-display-bar"],["class","stat-display-bar masterwork",3,"width",4,"ngIf"],[1,"stat-display-bar","masterwork"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"div",0)(2,"table")(3,"tr")(4,"td",1),t._uU(5),t.qZA()(),t.TgZ(6,"tr")(7,"td"),t._uU(8,"Current stats:"),t.qZA()(),t.YNc(9,Wn,11,6,"tr",2),t.qZA()()()),2&e&&(t.xp6(5),t.Oqu(null==o.armor?null:o.armor.name),t.xp6(4),t.Q6J("ngForOf",null==o.armor?null:o.armor.stats))},dependencies:[b.sg,b.O5],styles:[".tooltip-container[_ngcontent-%COMP%]{border:1px solid gray;padding:1px 5px 4px;background:linear-gradient(#484848 0px,#2c2c2c 100%)}.stat-display[_ngcontent-%COMP%]{width:70px;height:20px;background-color:#2c2c2c}.stat-display-bar[_ngcontent-%COMP%]{height:100%;background-color:#a1a1a1;float:left}.masterwork[_ngcontent-%COMP%]{background-color:#eedb9e}"]}),n})();var _t=p(8184);let Gn=(()=>{class n{constructor(e,o,a){this._overlay=e,this._overlayPositionBuilder=o,this._elementRef=a,this.showToolTip=!0}ngOnInit(){if(!this.showToolTip)return;const e=this._overlayPositionBuilder.flexibleConnectedTo(this._elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:5},{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-5}]);this._overlayRef=this._overlay.create({positionStrategy:e}),this._overlayRef.addPanelClass("overlay-no-pointer-event")}show(){this._overlayRef&&!this._overlayRef.hasAttached()&&(this._overlayRef.attach(new Vt.C5(zn)).instance.armor=this.armor)}hide(){this.closeToolTip()}ngOnDestroy(){this.closeToolTip()}closeToolTip(){this._overlayRef&&this._overlayRef.detach()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_t.aV),t.Y36(_t.wJ),t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n,selectors:[["","itemTooltip",""]],hostBindings:function(e,o){1&e&&t.NdJ("mouseenter",function(){return o.show()})("mouseleave",function(){return o.hide()})},inputs:{showToolTip:"showToolTip",armor:["itemTooltip","armor"],contentTemplate:"contentTemplate"}}),n})(),fe=(()=>{class n{constructor(e){this.db=e,this.itemLookup=new Map}getItemCached(e){var o=this;return(0,T.Z)(function*(){if(o.itemLookup.has(e))return o.itemLookup.get(e)||void 0;const a=yield o.db.manifestArmor.where("hash").equals(e).first();return o.itemLookup.set(e,a),a})()}getExoticPerkDescription(e){var o=this;return(0,T.Z)(function*(){return e.exoticPerkHash?(yield o.getItemCached(e.exoticPerkHash))??null:null})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ct))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Kn(n,i){if(1&n&&t._UZ(0,"img",5,6),2&n){const e=t.oxw(2);t.MGl("src","https://bungie.net/",e.item.icon,"",t.LSH),t.s9C("matTooltip",e.item.name)}}function Xn(n,i){if(1&n&&t._UZ(0,"img",7),2&n){const e=t.oxw(2);t.MGl("src","https://bungie.net/",e.item.watermarkIcon,"",t.LSH)}}function $n(n,i){1&n&&t._UZ(0,"div",8)}function to(n,i){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,Kn,2,2,"img",2),t.YNc(2,Xn,1,1,"img",3),t.YNc(3,$n,1,0,"div",4),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.item.icon),t.xp6(1),t.Q6J("ngIf",e.item.watermarkIcon),t.xp6(1),t.Q6J("ngIf",e.masterworked)}}let eo=(()=>{class n{constructor(e){this.iconService=e,this.itemHash=0,this.masterworked=!1,this.item=void 0}ngAfterViewInit(){var e=this;return(0,T.Z)(function*(){e.item=yield e.iconService.getItemCached(e.itemHash)})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(fe))},n.\u0275cmp=t.Xpm({type:n,selectors:[["item-icon"]],inputs:{itemHash:"itemHash",masterworked:"masterworked"},decls:1,vars:1,consts:[["class","item-icon-container",4,"ngIf"],[1,"item-icon-container"],["class","item-icon",3,"src","matTooltip",4,"ngIf"],["class","item-icon-overlay",3,"src",4,"ngIf"],["class","item-icon-masterwork-overlay",4,"ngIf"],[1,"item-icon",3,"src","matTooltip"],["tooltip","matTooltip"],[1,"item-icon-overlay",3,"src"],[1,"item-icon-masterwork-overlay"]],template:function(e,o){1&e&&t.YNc(0,to,4,3,"div",0),2&e&&t.Q6J("ngIf",o.item)},dependencies:[b.O5,L.gM],styles:["[_nghost-%COMP%]{height:22px;width:22px;display:block}.item-icon-masterwork-overlay[_ngcontent-%COMP%]{pointer-events:none;box-sizing:border-box;top:-1px;left:-1px;border-width:0;height:24px;width:24px;position:absolute;background-repeat:no-repeat;background-position:center;background-size:22px 22px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAJgklEQVR4AWI8t87oBYCd8rBuGAZi6N1JUQbIrJkiY6bM4EoE1EHvqb+WHsPvG5AJU522JQ/znpY03GzJ3YTovcvcVFcO5WbU8eH/OZ8R91B241c6wEzowJUUZnqlXMiZufrJSs1XUjNBUb6OcvUFF8190fzkGxS2J0ChGPQZDnYAQObJWHbNlCvZIXKxqvHN8KBp22SubByb9EKFGM2hzgyNa47vUzvKvnUToHPOINMFHG6Oo6hb6lhmMump4wROtxSMee8yjC6YI9jOnBYcGn5TZnTdBMB7d0+HB52AeKEb5QL2hQKx8RLk5IkE6eymz9CJFPJIQKxdWZKO5M1u+gw9kPvVJUjqyAt5Z98OMBAI4igO9x97koAAnSY6YHSaAB2nAiyswTbMq+/HAiHv0+4k3Ww1pOvnOvYews1Ow2rGnldEAAAIAAABACAAAAQAgAAAEAAAAgAgPwACAEAAAKiyAfJ7AXALEgAAAuAU5BMgAADki9j/BQCAlkN459OlNu6v0/V43vsAocOvq9kh1n/LX35h+B6EU9DI8fuVh/D48WMRWv742Qgtf/xshBY+fm1cMQgtefwdI5ffA/a9+frC68ox9M3enehIkvJAAC5D9vs/8F+Z/HugkfXJrOfec6QSJBi6O8IO2znX1zdZro39if/K0B8ftp2Hxxfa/vcu6DO8P5x/AaDrvwj4/uDPJDtjP09+ntDze9L+i4DRSEqwtgoQZ9rL3r9Ye/51L+Pw9tF6YuHFPJ/uWBDk2eXZvfb8YyMAwHvg673Z7AvmSF4POeSHmtDnb0xAD3qzN5gLfHsHIOvhktBJ4vOXJqABvJcZnqs5z54R7FF5ODaRiOkIGcXX+OZG7PqJnh6Ev3uOI52Z7tdRUCbdB6AFXHCDcZ3kkf2fGwEN+HGe+3xcE5yBB3umIvk5JnVIggDtnx/1u27XD5CajhBt8tqj9gMahDSan+7C629sxx6DiGmTcxOF304AwOud/SuABnTsZtNABWfaygUynjR3Ld+/GokZp4TO/JsJsEON1uN7OTEPaO9nVFHhHXizTdcN8Fl6BlER5gHk6lghYV8Tgd31DeCPL2icmhISYGsS9P7R9AErAT9JwlWCnuyFsmRuEQurKcBuqyBB72WkXtfmTCD7Au4a4/H7yYAl0N9VY0eERBqRr+Ov51yqCkTEYuuqjL4A+D4p1nvazLzOncHLt1dByhIwqpsHDzcShpIEkM4HZ5+zDEtoRLoKAgrwvwF41/WuAeg+z/1hDzk6VyGPkYW8aLfwarEwr0RJCDr/LUm4+42N8WX6z76Am3R9RoIkGGDvRN7i677TupIhqVZI7vmzPnr+1xLgwT6Bek6QtOE89rMmAGk6d8PhaG9ghSOgeLaAW1FFmYz9viLitcgBCFAgQ2dJ6dcEyLvcKxMuH2za3wW7AeOpqh/k6raz9l49XOIlQozX6pNwNCDnfde6Ckfb2SdeSejLUCXp+L3SPyAlj9FghVVHWV2etlVQ482MNfBHzwe4igSAj7T+4VnmtfdvwBJ5dxoXay/6hrc5gqrnyQCzX5H3fHYVhNd35eOrIWD4zDjZG2ntSmt8CpKTzCAnSEmp6Y7TDthyE9vbjhz7OOYAODg3THqfwEmMIJ29f1TaDwkX+8ckTCf8JAl6EjBviFo70m7v0vtTdD72EqzNgjwIgCJBr+aMRoTzbQMxzBlHIoY5JFCrA9xIZedIZLzZiwScpe1ij/vLyDu8b9p5IH2/V/4hfg+SGIUHr7oSAVhIwgbwIALpgYgLcvokvLU9gfsmgv+37117brJ90PrlHKAtWY24OWLO5/WORGWYAyJeQy8fjceHoOYz5gkTLeAPgL7YU57mHzRBQwA2Cff+5L3s1e9kn8Cuy1hAf9D/EN5YYySVKyQo4tyNSog6XucApWOZeA+Vz6UMNaXotLEiCZsgY4M9KVc/9lmBffwNHSonyQp1H/kpknDEiFeM/U2UybWRmcuEe5IcSPgAqOuQB2b3OiKBMrLumzy33dzy86HG84Z0KCtp/wL4kc7NfFdEDIucK9em8eskRl3q4bUAYc6YXalZJue6/LwkoClD9cYsP5G8d5pkT/U+Cfdd5gpI4jn2EL87eEQiID5tboPq9e+rBLvOA47D/doGj6+lKJpiQC+88WDP33h8JMADL36naIUYJYocsO+NGLOIAJJEjJnWhx7fyM0obAXLta7hmjxfp3dB5IF3AvRJwL3tzG3cjKJ8PkncBPgBocPyNXYEHAkI/md8CFA+eu8/jMiOVc1lpQRBEq38rKTNN/khkJHJXtjE8TW8T50fJO6RxvXaOSBer1j594Rjf5HfNyMSCCFoR43HBtKsirSFSCXILrh/G1p0vRdVSX4vdJvEkZYK+EVu4W0qtluCYtvGHq89MQImAApsLUHniBC0cbjXuclXcvR+o2Dq9ThXzhl3AtCcoabnHPBRdL1vCEwR30hQRAw985hwAZR1IyVcJ3o8p97HqSnE0xz1zpszAfgvSKm634e5tf9HVfaOGNcTJwLiUye2BJrnSk5OEiVZ3unv/7o/zvLT/sGshRy8i4hdyVtvk6mlaNoz4f6/dGvJkRqKgVXuDyuWLLkSZ+CiXIQVZ2CF0h0XbblkRU+hESIjq+yqZ2emJtKbZNK54vlfUBRAgl1A0BUuiyAvmdo/ff/x7QsZF5PsYY2uKw20EKA1NLpuzaNnBmddSCIZqrxIz2ydiEpprucWzrk8WzrZAGQQ5LyL4hJCqhCQ+zOVLFP5Cslzrc88KeGk0LWam1mSprc196WeH8mY/QZcngWxZ3/Y9fhsiiRjcpCzdKjhHSTHqDnCdatee/wFzF40+ph85GP9Ht7969BGjXlj0nBjbkoZJBPAbv+WB2sqWitvZXLrkrGprgluPsf5HvBr+/l1CpD4+8F/4NdnIreI64MMgFf0PUrhDRE3FjLuYLy4y9184Z1eY73w6rr7e2bNu4gvBE9fim7ftEOZkJ5I7TfkY1M+oHyiMF/R9YbcNzW3QfuLk/leIzXWLM/cgcp19FzCemU6cIz/MB9890UWjBGadM7N9QMtlCqqJiFwOjUhdaDQXQCdEwNOpzhYwMpBDrfcFpEXIsjiGJw+9jqidHo7O3+3QVO7+QpIf7ji9cbst7ogrVf8UXTDBslUgkxCCSilwjFdSAkBkSo1EcjSIBXWWvsN9SxF5ebWH3woEIS629sLNhsPabYekYTY/VR0znB/jBdcErKAavL8+A1ICXvgoqroDgAAAABJRU5ErkJggg==)}.item-icon-container[_ngcontent-%COMP%]{position:relative;transition:opacity .2s,transform .2s;width:100%}.item-icon-overlay[_ngcontent-%COMP%], .item-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;pointer-events:none}"]}),n})();function no(n,i){if(1&n&&t._UZ(0,"img",5),2&n){const e=t.oxw(2);t.s9C("src",e.url,t.LSH)}}function oo(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"img",2,3),t.YNc(3,no,1,1,"img",4),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",e.name),t.xp6(2),t.Q6J("ngIf",e.customIconMods.indexOf(e.perk)>-1)}}function io(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"img",6,3),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",e.name),t.s9C("src",e.url,t.LSH)}}let $t=(()=>{class n{constructor(){this.ArmorPerkOrSlot=_,this.customIconMods=[_.SlotKingsFall,_.SlotArtifice,_.SlotVowOfTheDisciple],this.perk=_.None}ngOnInit(){}get name(){return oe[this.perk]}get url(){return ie[this.perk]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-armor-perk-icon"]],inputs:{perk:"perk"},decls:3,vars:2,consts:[[1,"overlay-icon-container"],[4,"ngIf"],["src","https://bungie.net/common/destiny2_content/icons/b4d05ef69d0c3227a7d4f7f35bbc2848.png",1,"element-icon",3,"matTooltip"],["tooltip","matTooltip"],["class","overlay-icon",3,"src",4,"ngIf"],[1,"overlay-icon",3,"src"],[1,"element-icon",3,"matTooltip","src"]],template:function(e,o){1&e&&(t.TgZ(0,"span",0),t.YNc(1,oo,4,2,"ng-container",1),t.YNc(2,io,3,2,"ng-container",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.customIconMods.indexOf(o.perk)>-1),t.xp6(1),t.Q6J("ngIf",-1==o.customIconMods.indexOf(o.perk)))},dependencies:[b.O5,L.gM],styles:[".element-icon[_ngcontent-%COMP%]{height:100%;width:100%}.element-icon.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default;pointer-events:none}.overlay-icon-container[_ngcontent-%COMP%]{position:relative}.overlay-icon-container[_ngcontent-%COMP%]   .overlay-icon[_ngcontent-%COMP%]{width:66%;position:absolute;left:17%;top:17%;pointer-events:none}[_nghost-%COMP%]{display:inline-flex;height:30px;width:30px}"]}),n})(),he=(()=>{class n{transform(e,o=null){return e.filter(a=>null==o||a==o).length}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"count",type:n,pure:!0}),n})();function ao(n,i){1&n&&(t.TgZ(0,"mat-toolbar",24),t._uU(1," Warning: The stats of one or more items used for this build may be invalid."),t._UZ(2,"br"),t._uU(3," Please remove all negative/positive stat modifiers from the marked items. "),t.qZA())}function ro(n,i){if(1&n&&(t.TgZ(0,"u",34,35),t._uU(2),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.name)}}function so(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.name)}}function lo(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"td",36)(2,"span",37),t._uU(3),t.qZA()(),t.TgZ(4,"td",36)(5,"span",37),t._uU(6),t.qZA()(),t.TgZ(7,"td",36)(8,"span",37),t._uU(9),t.qZA()(),t.TgZ(10,"td",36)(11,"span",37),t._uU(12),t.qZA()(),t.TgZ(13,"td",36)(14,"span",37),t._uU(15),t.qZA()(),t.TgZ(16,"td",36)(17,"span",37),t._uU(18),t.qZA()(),t.BQk()),2&n){const e=i.ngVar,o=t.oxw().$implicit,a=t.oxw(2);t.xp6(2),t.ekj("text-mw",o.masterworked),t.xp6(1),t.Oqu(o.stats[a.ArmorStat.Mobility]+e),t.xp6(2),t.ekj("text-mw",o.masterworked),t.xp6(1),t.Oqu(o.stats[a.ArmorStat.Resilience]+e),t.xp6(2),t.ekj("text-mw",o.masterworked),t.xp6(1),t.Oqu(o.stats[a.ArmorStat.Recovery]+e),t.xp6(2),t.ekj("text-mw",o.masterworked),t.xp6(1),t.Oqu(o.stats[a.ArmorStat.Discipline]+e),t.xp6(2),t.ekj("text-mw",o.masterworked),t.xp6(1),t.Oqu(o.stats[a.ArmorStat.Intellect]+e),t.xp6(2),t.ekj("text-mw",o.masterworked),t.xp6(1),t.Oqu(o.stats[a.ArmorStat.Strength]+e)}}function co(n,i){1&n&&(t.TgZ(0,"td",27),t._UZ(1,"mat-progress-spinner",38),t.qZA())}function mo(n,i){1&n&&(t.TgZ(0,"td")(1,"mat-icon",39,35),t._uU(3," check_circle_outline "),t.qZA()())}function uo(n,i){1&n&&(t.TgZ(0,"td")(1,"mat-icon",40,35),t._uU(3," error_outline "),t.qZA()())}function po(n,i){1&n&&(t.TgZ(0,"td")(1,"mat-icon",41,35),t._uU(3," report_problem "),t.qZA()())}function go(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t.YNc(2,ro,3,1,"u",26),t.YNc(3,so,2,1,"span",3),t.qZA(),t.YNc(4,lo,19,18,"ng-container",8),t.TgZ(5,"td",27)(6,"div",28),t._UZ(7,"item-icon",29),t.qZA()(),t.TgZ(8,"td",27)(9,"div",30),t._UZ(10,"app-armor-perk-icon",31),t.qZA()(),t.TgZ(11,"td",27)(12,"button",32),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.disableItem(r.itemInstanceId))}),t.TgZ(13,"mat-icon"),t._uU(14,"block"),t.qZA()()(),t.YNc(15,co,2,0,"td",33),t.YNc(16,mo,4,0,"td",3),t.YNc(17,uo,4,0,"td",3),t.YNc(18,po,4,0,"td",3),t.qZA()}if(2&n){const e=i.$implicit,o=t.oxw().$implicit,a=t.oxw();t.ekj("highlight-row",o[0].slot%2==0),t.xp6(2),t.Q6J("ngIf",e.masterworked),t.xp6(1),t.Q6J("ngIf",!e.masterworked),t.xp6(1),t.Q6J("ngVar",e.masterworked||!e.exotic&&a.config_assumeLegendariesMasterworked||e.exotic&&a.config_assumeExoticsMasterworked?2:0),t.xp6(2),t.Q6J("itemTooltip",e),t.xp6(1),t.Q6J("itemHash",e.hash)("masterworked",e.masterworked),t.xp6(3),t.Q6J("perk",e.perk||0),t.xp6(5),t.Q6J("ngIf",1==e.transferState||2==e.transferState),t.xp6(1),t.Q6J("ngIf",3==e.transferState),t.xp6(1),t.Q6J("ngIf",4==e.transferState),t.xp6(1),t.Q6J("ngIf",e.mayBeBugged)}}function _o(n,i){if(1&n&&(t.ynx(0),t.YNc(1,go,19,13,"tr",25),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function fo(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",42,35),t._uU(3,"Any Class Item"),t.qZA(),t.TgZ(4,"td",43),t._uU(5),t.qZA(),t.TgZ(6,"td",43),t._uU(7),t.qZA(),t.TgZ(8,"td",43),t._uU(9),t.qZA(),t.TgZ(10,"td",43),t._uU(11),t.qZA(),t.TgZ(12,"td",43),t._uU(13),t.qZA(),t.TgZ(14,"td",43),t._uU(15),t.qZA(),t._UZ(16,"td"),t.TgZ(17,"td")(18,"div",30),t._UZ(19,"app-armor-perk-icon",31),t.qZA()(),t.TgZ(20,"td")(21,"button",44),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.disableAllItems())}),t.TgZ(22,"mat-icon"),t._uU(23,"block"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Oqu(2),t.xp6(2),t.Oqu(2),t.xp6(2),t.Oqu(2),t.xp6(2),t.Oqu(2),t.xp6(2),t.Oqu(2),t.xp6(2),t.Oqu(2),t.xp6(4),t.Q6J("perk",(null==e.element||null==e.element.classItem?null:e.element.classItem.perk)||0)}}function ho(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2,"Any Class Item"),t.qZA(),t.TgZ(3,"td",45),t._uU(4,"You chose to use non-masterworked class items."),t.qZA(),t._UZ(5,"td")(6,"td"),t.TgZ(7,"td")(8,"button",44),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.disableAllItems())}),t.TgZ(9,"mat-icon"),t._uU(10,"block"),t.qZA()()()()}}function xo(n,i){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t._UZ(2,"img",47),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw();t.xp6(1),t.hij(" ",e[o.ArmorStat.Mobility]," ")}}function To(n,i){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t._UZ(2,"img",48),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw();t.xp6(1),t.hij(" ",e[o.ArmorStat.Resilience]," ")}}function yo(n,i){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t._UZ(2,"img",49),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw();t.xp6(1),t.hij(" ",e[o.ArmorStat.Recovery]," ")}}function bo(n,i){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t._UZ(2,"img",50),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw();t.xp6(1),t.hij(" ",e[o.ArmorStat.Discipline]," ")}}function Co(n,i){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t._UZ(2,"img",51),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw();t.xp6(1),t.hij(" ",e[o.ArmorStat.Intellect]," ")}}function vo(n,i){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t._UZ(2,"img",52),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw();t.xp6(1),t.hij(" ",e[o.ArmorStat.Strength]," ")}}function Ao(n,i){if(1&n&&(t.TgZ(0,"tr",46)(1,"td"),t._uU(2,"Total (armor)"),t.qZA(),t.YNc(3,xo,3,1,"td",3),t.YNc(4,To,3,1,"td",3),t.YNc(5,yo,3,1,"td",3),t.YNc(6,bo,3,1,"td",3),t.YNc(7,Co,3,1,"td",3),t.YNc(8,vo,3,1,"td",3),t.qZA()),2&n){const e=i.ngVar;t.xp6(3),t.Q6J("ngIf",!!e),t.xp6(1),t.Q6J("ngIf",!!e),t.xp6(1),t.Q6J("ngIf",!!e),t.xp6(1),t.Q6J("ngIf",!!e),t.xp6(1),t.Q6J("ngIf",!!e),t.xp6(1),t.Q6J("ngIf",!!e)}}function Zo(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function wo(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Zo,2,0,"span",3),t._uU(2),t.qZA()),2&n){const e=t.oxw();t.Tol(e.configValues[e.ArmorStat.Mobility]>0?"positive":"negative"),t.xp6(1),t.Q6J("ngIf",e.configValues[e.ArmorStat.Mobility]>0),t.xp6(1),t.hij("",e.configValues[e.ArmorStat.Mobility]," ")}}function So(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function Io(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,So,2,0,"span",3),t._uU(2),t.qZA()),2&n){const e=t.oxw();t.Tol(e.configValues[e.ArmorStat.Resilience]>0?"positive":"negative"),t.xp6(1),t.Q6J("ngIf",e.configValues[e.ArmorStat.Resilience]>0),t.xp6(1),t.hij("",e.configValues[e.ArmorStat.Resilience]," ")}}function ko(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function Oo(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,ko,2,0,"span",3),t._uU(2),t.qZA()),2&n){const e=t.oxw();t.Tol(e.configValues[e.ArmorStat.Recovery]>0?"positive":"negative"),t.xp6(1),t.Q6J("ngIf",e.configValues[e.ArmorStat.Recovery]>0),t.xp6(1),t.hij("",e.configValues[e.ArmorStat.Recovery]," ")}}function Mo(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function Do(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Mo,2,0,"span",3),t._uU(2),t.qZA()),2&n){const e=t.oxw();t.Tol(e.configValues[e.ArmorStat.Discipline]>0?"positive":"negative"),t.xp6(1),t.Q6J("ngIf",e.configValues[e.ArmorStat.Discipline]>0),t.xp6(1),t.hij("",e.configValues[e.ArmorStat.Discipline]," ")}}function Uo(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function No(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Uo,2,0,"span",3),t._uU(2),t.qZA()),2&n){const e=t.oxw();t.Tol(e.configValues[e.ArmorStat.Intellect]>0?"positive":"negative"),t.xp6(1),t.Q6J("ngIf",e.configValues[e.ArmorStat.Intellect]>0),t.xp6(1),t.hij("",e.configValues[e.ArmorStat.Intellect]," ")}}function Eo(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function Po(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Eo,2,0,"span",3),t._uU(2),t.qZA()),2&n){const e=t.oxw();t.Tol(e.configValues[e.ArmorStat.Strength]>0?"positive":"negative"),t.xp6(1),t.Q6J("ngIf",e.configValues[e.ArmorStat.Strength]>0),t.xp6(1),t.hij("",e.configValues[e.ArmorStat.Strength]," ")}}function Ro(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd75")}}function qo(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,Ro,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function Jo(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd75")}}function Lo(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,Jo,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function Yo(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd75")}}function Fo(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,Yo,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function Qo(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd75")}}function Bo(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,Qo,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function Vo(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd75")}}function Ho(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,Vo,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function jo(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd75")}}function Wo(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,jo,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function zo(n,i){if(1&n&&(t.TgZ(0,"tr",53)(1,"td"),t._uU(2,"Minor Mods"),t.qZA(),t.YNc(3,qo,2,1,"td",8),t.ALo(4,"count"),t.YNc(5,Lo,2,1,"td",8),t.ALo(6,"count"),t.YNc(7,Fo,2,1,"td",8),t.ALo(8,"count"),t.YNc(9,Bo,2,1,"td",8),t.ALo(10,"count"),t.YNc(11,Ho,2,1,"td",8),t.ALo(12,"count"),t.YNc(13,Wo,2,1,"td",8),t.ALo(14,"count"),t.qZA()),2&n){const e=i.ngVar,o=t.oxw();t.xp6(3),t.Q6J("ngVar",t.xi3(4,6,e,o.StatModifier.MINOR_MOBILITY)),t.xp6(2),t.Q6J("ngVar",t.xi3(6,9,e,o.StatModifier.MINOR_RESILIENCE)),t.xp6(2),t.Q6J("ngVar",t.xi3(8,12,e,o.StatModifier.MINOR_RECOVERY)),t.xp6(2),t.Q6J("ngVar",t.xi3(10,15,e,o.StatModifier.MINOR_DISCIPLINE)),t.xp6(2),t.Q6J("ngVar",t.xi3(12,18,e,o.StatModifier.MINOR_INTELLECT)),t.xp6(2),t.Q6J("ngVar",t.xi3(14,21,e,o.StatModifier.MINOR_STRENGTH))}}function Go(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd710")}}function Ko(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,Go,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function Xo(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd710")}}function $o(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,Xo,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function ti(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd710")}}function ei(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,ti,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function ni(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd710")}}function oi(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,ni,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function ii(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd710")}}function ai(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,ii,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function ri(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd710")}}function si(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,ri,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function li(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Major Mods"),t.qZA(),t.YNc(3,Ko,2,1,"td",8),t.ALo(4,"count"),t.YNc(5,$o,2,1,"td",8),t.ALo(6,"count"),t.YNc(7,ei,2,1,"td",8),t.ALo(8,"count"),t.YNc(9,oi,2,1,"td",8),t.ALo(10,"count"),t.YNc(11,ai,2,1,"td",8),t.ALo(12,"count"),t.YNc(13,si,2,1,"td",8),t.ALo(14,"count"),t.qZA()),2&n){const e=i.ngVar,o=t.oxw();t.xp6(3),t.Q6J("ngVar",t.xi3(4,6,e,o.StatModifier.MAJOR_MOBILITY)),t.xp6(2),t.Q6J("ngVar",t.xi3(6,9,e,o.StatModifier.MAJOR_RESILIENCE)),t.xp6(2),t.Q6J("ngVar",t.xi3(8,12,e,o.StatModifier.MAJOR_RECOVERY)),t.xp6(2),t.Q6J("ngVar",t.xi3(10,15,e,o.StatModifier.MAJOR_DISCIPLINE)),t.xp6(2),t.Q6J("ngVar",t.xi3(12,18,e,o.StatModifier.MAJOR_INTELLECT)),t.xp6(2),t.Q6J("ngVar",t.xi3(14,21,e,o.StatModifier.MAJOR_STRENGTH))}}function ci(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd73")}}function mi(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,ci,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function di(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd73")}}function ui(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,di,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function pi(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd73")}}function gi(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,pi,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function _i(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd73")}}function fi(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,_i,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function hi(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd73")}}function xi(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,hi,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function Ti(n,i){if(1&n&&(t.TgZ(0,"span",55),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("",e,"\xd73")}}function yi(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,Ti,2,1,"span",54),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function bi(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3,"Artifice Mods"),t.qZA(),t.YNc(4,mi,2,1,"td",8),t.ALo(5,"count"),t.YNc(6,ui,2,1,"td",8),t.ALo(7,"count"),t.YNc(8,gi,2,1,"td",8),t.ALo(9,"count"),t.YNc(10,fi,2,1,"td",8),t.ALo(11,"count"),t.YNc(12,xi,2,1,"td",8),t.ALo(13,"count"),t.YNc(14,yi,2,1,"td",8),t.ALo(15,"count"),t.qZA(),t.BQk()),2&n){const e=i.ngVar,o=t.oxw();t.xp6(4),t.Q6J("ngVar",t.xi3(5,6,e,o.StatModifier.ARTIFICE_MOBILITY)),t.xp6(2),t.Q6J("ngVar",t.xi3(7,9,e,o.StatModifier.ARTIFICE_RESILIENCE)),t.xp6(2),t.Q6J("ngVar",t.xi3(9,12,e,o.StatModifier.ARTIFICE_RECOVERY)),t.xp6(2),t.Q6J("ngVar",t.xi3(11,15,e,o.StatModifier.ARTIFICE_DISCIPLINE)),t.xp6(2),t.Q6J("ngVar",t.xi3(13,18,e,o.StatModifier.ARTIFICE_INTELLECT)),t.xp6(2),t.Q6J("ngVar",t.xi3(15,21,e,o.StatModifier.ARTIFICE_STRENGTH))}}function Ci(n,i){if(1&n&&(t.TgZ(0,"tr",56)(1,"td"),t._uU(2,"Total"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t._UZ(5,"img",47),t.qZA(),t.TgZ(6,"td"),t._uU(7),t._UZ(8,"img",48),t.qZA(),t.TgZ(9,"td"),t._uU(10),t._UZ(11,"img",49),t.qZA(),t.TgZ(12,"td"),t._uU(13),t._UZ(14,"img",50),t.qZA(),t.TgZ(15,"td"),t._uU(16),t._UZ(17,"img",51),t.qZA(),t.TgZ(18,"td"),t._uU(19),t._UZ(20,"img",52),t.qZA()()),2&n){const e=i.ngVar,o=t.oxw();t.xp6(4),t.hij(" ",e[o.ArmorStat.Mobility]," "),t.xp6(3),t.hij(" ",e[o.ArmorStat.Resilience]," "),t.xp6(3),t.hij(" ",e[o.ArmorStat.Recovery]," "),t.xp6(3),t.hij(" ",e[o.ArmorStat.Discipline]," "),t.xp6(3),t.hij(" ",e[o.ArmorStat.Intellect]," "),t.xp6(3),t.hij(" ",e[o.ArmorStat.Strength]," ")}}function vi(n,i){if(1&n&&(t.TgZ(0,"span",64),t._UZ(1,"img",65),t._uU(2),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.glimmer)," ")}}function Ai(n,i){if(1&n&&(t.TgZ(0,"span",66),t._UZ(1,"img",67),t._uU(2),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(2),t.hij(" ",e.shards," ")}}function Zi(n,i){if(1&n&&(t.TgZ(0,"span",68),t._UZ(1,"img",69),t._uU(2),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(2),t.hij(" ",e.core," ")}}function wi(n,i){if(1&n&&(t.TgZ(0,"span",70),t._UZ(1,"img",71),t._uU(2),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(2),t.hij(" ",e.prism," ")}}function Si(n,i){if(1&n&&(t.TgZ(0,"span",72),t._UZ(1,"img",73),t._uU(2),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(2),t.hij(" ",e.ascshard," ")}}function Ii(n,i){if(1&n&&(t.TgZ(0,"div",58),t._uU(1," Total material cost: "),t.YNc(2,vi,4,3,"span",59),t.YNc(3,Ai,3,1,"span",60),t.YNc(4,Zi,3,1,"span",61),t.YNc(5,wi,3,1,"span",62),t.YNc(6,Si,3,1,"span",63),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(2),t.Q6J("ngIf",e.glimmer>0),t.xp6(1),t.Q6J("ngIf",e.shards>0),t.xp6(1),t.Q6J("ngIf",e.core>0),t.xp6(1),t.Q6J("ngIf",e.prism>0),t.xp6(1),t.Q6J("ngIf",e.ascshard>0)}}function ki(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Ii,7,5,"div",57),t.BQk()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e.total>0)}}function Oi(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",74),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openSnackBar("Copied the DIM search query to your clipboard."))}),t._uU(2," Copy DIM query to clipboard "),t.qZA(),t.BQk()}if(2&n){const e=i.ngVar;t.xp6(1),t.Q6J("cdkCopyToClipboard",e)}}function Mi(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1," and use a masterworked class item"),t.qZA())}function Di(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Ui(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1," Masterwork these items: "),t.TgZ(2,"ul"),t.YNc(3,Di,2,1,"li",2),t.qZA()()),2&n){const e=t.oxw().ngVar;t.xp6(3),t.Q6J("ngForOf",e)}}function Ni(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Ui,4,1,"li",3),t.BQk()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e.length>0)}}function Ei(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3).ngVar;t.xp6(1),t.hij("",e," minor")}}function Pi(n,i){1&n&&(t.ynx(0),t._uU(1," and"),t.BQk())}function Ri(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(1),t.hij(" ",e," major ")}}function qi(n,i){1&n&&(t.ynx(0),t._uU(1,"s"),t.BQk())}function Ji(n,i){if(1&n&&(t.TgZ(0,"li",55),t.YNc(1,Ei,2,1,"span",3),t.YNc(2,Pi,2,0,"ng-container",3),t.YNc(3,Ri,2,1,"span",3),t._uU(4," Mobility Mod"),t.YNc(5,qi,2,0,"ng-container",3),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o>0),t.xp6(1),t.Q6J("ngIf",o>0&&e>0),t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(2),t.Q6J("ngIf",o+e>1)}}function Li(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Ji,6,4,"li",54),t.BQk()),2&n){const e=i.ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o+e>0)}}function Yi(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Li,2,1,"ng-container",8),t.ALo(2,"count"),t.BQk()),2&n){const e=t.oxw().ngVar,o=t.oxw(2);t.xp6(1),t.Q6J("ngVar",t.xi3(2,1,e,o.StatModifier.MAJOR_MOBILITY))}}function Fi(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3).ngVar;t.xp6(1),t.hij("",e," minor")}}function Qi(n,i){1&n&&(t.ynx(0),t._uU(1," and"),t.BQk())}function Bi(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(1),t.hij(" ",e," major ")}}function Vi(n,i){1&n&&(t.ynx(0),t._uU(1,"s"),t.BQk())}function Hi(n,i){if(1&n&&(t.TgZ(0,"li",55),t.YNc(1,Fi,2,1,"span",3),t.YNc(2,Qi,2,0,"ng-container",3),t.YNc(3,Bi,2,1,"span",3),t._uU(4," Resilience Mod"),t.YNc(5,Vi,2,0,"ng-container",3),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o>0),t.xp6(1),t.Q6J("ngIf",o>0&&e>0),t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(2),t.Q6J("ngIf",o+e>1)}}function ji(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Hi,6,4,"li",54),t.BQk()),2&n){const e=i.ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o+e>0)}}function Wi(n,i){if(1&n&&(t.ynx(0),t.YNc(1,ji,2,1,"ng-container",8),t.ALo(2,"count"),t.BQk()),2&n){const e=t.oxw().ngVar,o=t.oxw(2);t.xp6(1),t.Q6J("ngVar",t.xi3(2,1,e,o.StatModifier.MAJOR_RESILIENCE))}}function zi(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3).ngVar;t.xp6(1),t.hij("",e," minor")}}function Gi(n,i){1&n&&(t.ynx(0),t._uU(1," and"),t.BQk())}function Ki(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(1),t.hij(" ",e," major ")}}function Xi(n,i){1&n&&(t.ynx(0),t._uU(1,"s"),t.BQk())}function $i(n,i){if(1&n&&(t.TgZ(0,"li",55),t.YNc(1,zi,2,1,"span",3),t.YNc(2,Gi,2,0,"ng-container",3),t.YNc(3,Ki,2,1,"span",3),t._uU(4," Recovery Mod"),t.YNc(5,Xi,2,0,"ng-container",3),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o>0),t.xp6(1),t.Q6J("ngIf",o>0&&e>0),t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(2),t.Q6J("ngIf",o+e>1)}}function ta(n,i){if(1&n&&(t.ynx(0),t.YNc(1,$i,6,4,"li",54),t.BQk()),2&n){const e=i.ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o+e>0)}}function ea(n,i){if(1&n&&(t.ynx(0),t.YNc(1,ta,2,1,"ng-container",8),t.ALo(2,"count"),t.BQk()),2&n){const e=t.oxw().ngVar,o=t.oxw(2);t.xp6(1),t.Q6J("ngVar",t.xi3(2,1,e,o.StatModifier.MAJOR_RECOVERY))}}function na(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3).ngVar;t.xp6(1),t.hij("",e," minor")}}function oa(n,i){1&n&&(t.ynx(0),t._uU(1," and"),t.BQk())}function ia(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(1),t.hij(" ",e," major ")}}function aa(n,i){1&n&&(t.ynx(0),t._uU(1,"s"),t.BQk())}function ra(n,i){if(1&n&&(t.TgZ(0,"li",55),t.YNc(1,na,2,1,"span",3),t.YNc(2,oa,2,0,"ng-container",3),t.YNc(3,ia,2,1,"span",3),t._uU(4," Discipline Mod"),t.YNc(5,aa,2,0,"ng-container",3),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o>0),t.xp6(1),t.Q6J("ngIf",o>0&&e>0),t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(2),t.Q6J("ngIf",o+e>1)}}function sa(n,i){if(1&n&&(t.ynx(0),t.YNc(1,ra,6,4,"li",54),t.BQk()),2&n){const e=i.ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o+e>0)}}function la(n,i){if(1&n&&(t.ynx(0),t.YNc(1,sa,2,1,"ng-container",8),t.ALo(2,"count"),t.BQk()),2&n){const e=t.oxw().ngVar,o=t.oxw(2);t.xp6(1),t.Q6J("ngVar",t.xi3(2,1,e,o.StatModifier.MAJOR_DISCIPLINE))}}function ca(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3).ngVar;t.xp6(1),t.hij("",e," minor")}}function ma(n,i){1&n&&(t.ynx(0),t._uU(1," and"),t.BQk())}function da(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(1),t.hij(" ",e," major ")}}function ua(n,i){1&n&&(t.ynx(0),t._uU(1,"s"),t.BQk())}function pa(n,i){if(1&n&&(t.TgZ(0,"li",55),t.YNc(1,ca,2,1,"span",3),t.YNc(2,ma,2,0,"ng-container",3),t.YNc(3,da,2,1,"span",3),t._uU(4," Intellect Mod"),t.YNc(5,ua,2,0,"ng-container",3),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o>0),t.xp6(1),t.Q6J("ngIf",o>0&&e>0),t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(2),t.Q6J("ngIf",o+e>1)}}function ga(n,i){if(1&n&&(t.ynx(0),t.YNc(1,pa,6,4,"li",54),t.BQk()),2&n){const e=i.ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o+e>0)}}function _a(n,i){if(1&n&&(t.ynx(0),t.YNc(1,ga,2,1,"ng-container",8),t.ALo(2,"count"),t.BQk()),2&n){const e=t.oxw().ngVar,o=t.oxw(2);t.xp6(1),t.Q6J("ngVar",t.xi3(2,1,e,o.StatModifier.MAJOR_INTELLECT))}}function fa(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3).ngVar;t.xp6(1),t.hij("",e," minor")}}function ha(n,i){1&n&&(t.ynx(0),t._uU(1," and"),t.BQk())}function xa(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(1),t.hij(" ",e," major ")}}function Ta(n,i){1&n&&(t.ynx(0),t._uU(1,"s"),t.BQk())}function ya(n,i){if(1&n&&(t.TgZ(0,"li",55),t.YNc(1,fa,2,1,"span",3),t.YNc(2,ha,2,0,"ng-container",3),t.YNc(3,xa,2,1,"span",3),t._uU(4," Strength Mod"),t.YNc(5,Ta,2,0,"ng-container",3),t.qZA()),2&n){const e=t.oxw().ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o>0),t.xp6(1),t.Q6J("ngIf",o>0&&e>0),t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(2),t.Q6J("ngIf",o+e>1)}}function ba(n,i){if(1&n&&(t.ynx(0),t.YNc(1,ya,6,4,"li",54),t.BQk()),2&n){const e=i.ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngIf",o+e>0)}}function Ca(n,i){if(1&n&&(t.ynx(0),t.YNc(1,ba,2,1,"ng-container",8),t.ALo(2,"count"),t.BQk()),2&n){const e=t.oxw().ngVar,o=t.oxw(2);t.xp6(1),t.Q6J("ngVar",t.xi3(2,1,e,o.StatModifier.MAJOR_STRENGTH))}}function va(n,i){if(1&n&&(t.TgZ(0,"ul"),t.YNc(1,Yi,3,4,"ng-container",8),t.ALo(2,"count"),t.YNc(3,Wi,3,4,"ng-container",8),t.ALo(4,"count"),t.YNc(5,ea,3,4,"ng-container",8),t.ALo(6,"count"),t.YNc(7,la,3,4,"ng-container",8),t.ALo(8,"count"),t.YNc(9,_a,3,4,"ng-container",8),t.ALo(10,"count"),t.YNc(11,Ca,3,4,"ng-container",8),t.ALo(12,"count"),t.qZA()),2&n){const e=i.ngVar,o=t.oxw(2);t.xp6(1),t.Q6J("ngVar",t.xi3(2,6,e,o.StatModifier.MINOR_MOBILITY)),t.xp6(2),t.Q6J("ngVar",t.xi3(4,9,e,o.StatModifier.MINOR_RESILIENCE)),t.xp6(2),t.Q6J("ngVar",t.xi3(6,12,e,o.StatModifier.MINOR_RECOVERY)),t.xp6(2),t.Q6J("ngVar",t.xi3(8,15,e,o.StatModifier.MINOR_DISCIPLINE)),t.xp6(2),t.Q6J("ngVar",t.xi3(10,18,e,o.StatModifier.MINOR_INTELLECT)),t.xp6(2),t.Q6J("ngVar",t.xi3(12,21,e,o.StatModifier.MINOR_STRENGTH))}}function Aa(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1,"Equip the following stat mods: "),t.YNc(2,va,13,24,"ul",8),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngVar",null==e.element?null:e.element.mods)}}function Za(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1," Arc "),t.qZA())}function wa(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1," Solar "),t.qZA())}function Sa(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1," Void "),t.qZA())}function Ia(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1," Stasis "),t.qZA())}function ka(n,i){if(1&n&&t._UZ(0,"img",76,35),2&n){const e=t.oxw(3).ngVar,o=t.oxw(3);t.MGl("matTooltip","",o.getAffinityName(e.requiredArmorAffinity)," affinity"),t.Q6J("src",o.getAffinityUrl(e.requiredArmorAffinity),t.LSH)}}function Oa(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,Za,2,0,"span",3),t.YNc(3,wa,2,0,"span",3),t.YNc(4,Sa,2,0,"span",3),t.YNc(5,Ia,2,0,"span",3),t.YNc(6,ka,2,2,"img",75),t._uU(7," ) "),t.qZA()),2&n){const e=t.oxw(2).ngVar;t.xp6(1),t.hij(" ( ",e.cost," "),t.xp6(1),t.Q6J("ngIf",1==e.requiredArmorAffinity),t.xp6(1),t.Q6J("ngIf",2==e.requiredArmorAffinity),t.xp6(1),t.Q6J("ngIf",3==e.requiredArmorAffinity),t.xp6(1),t.Q6J("ngIf",6==e.requiredArmorAffinity),t.xp6(1),t.Q6J("ngIf",0!=e.requiredArmorAffinity)}}function Ma(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.YNc(2,Oa,8,6,"span",3),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij(" Equip the mod ",e.name," "),t.xp6(1),t.Q6J("ngIf",0!=e.requiredArmorAffinity)}}function Da(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Ma,3,2,"li",3),t.BQk()),2&n){const e=i.ngVar,o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.type==o.ModifierType.CombatStyleMod)}}function Ua(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Da,2,1,"ng-container",8),t.BQk()),2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngVar",o.ModInformation[e])}}function Na(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij(" Equip the stasis fragment ",e.name," ")}}function Ea(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Na,2,1,"li",3),t.BQk()),2&n){const e=i.ngVar,o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.type==o.ModifierType.Stasis)}}function Pa(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Ea,2,1,"ng-container",8),t.BQk()),2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngVar",o.ModInformation[e])}}function Ra(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1," Equip any mods and fragments that you enabled in the configuration: "),t.TgZ(2,"ul"),t.YNc(3,Ua,2,1,"ng-container",2),t.YNc(4,Pa,2,1,"ng-container",2),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.config_enabledMods),t.xp6(1),t.Q6J("ngForOf",e.config_enabledMods)}}function qa(n,i){if(1&n&&t._UZ(0,"div",80),2&n){const e=t.oxw().$implicit;t.Tol(e)}}function Ja(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,qa,1,2,"div",79),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",!!e)}}function La(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"img",77),t.qZA(),t.YNc(5,Ja,2,1,"td",2),t.TgZ(6,"td",78),t._uU(7),t.qZA()()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.Oqu(o.ArmorStatNames[e]),t.xp6(2),t.s9C("alt",o.ArmorStatNames[e]),t.s9C("src",o.ArmorStatIconUrls[e],t.LSH),t.xp6(1),t.Q6J("ngForOf",o.getColumnForStat(e)),t.xp6(2),t.Oqu(o.getTiersForStat(e))}}function Ya(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Exotic:"),t.qZA(),t.TgZ(3,"td",81),t._uU(4),t.qZA(),t.TgZ(5,"td",82)(6,"div",83),t._UZ(7,"img",84)(8,"img",85),t.qZA()()()),2&n){const e=t.oxw().ngVar;t.xp6(4),t.Oqu(e[0].name),t.xp6(3),t.MGl("src","https://bungie.net/",e[0].icon,"",t.LSH),t.xp6(1),t.MGl("src","https://bungie.net/",e[0].watermark,"",t.LSH)}}function Fa(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Ya,9,3,"tr",3),t.BQk()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e[0])}}let Qa=(()=>{class n{constructor(e,o,a){this.config=e,this._snackBar=o,this.bungieApi=a,this.armorStatIds=[0,1,2,3,4,5],this.ModifierType=f.O,this.ModInformation=gt,this.ArmorStatNames=Zt,this.ArmorStatIconUrls=Wt,this.ArmorStat=c,this.StatModifier=v,this.config_characterClass=0,this.config_assumeLegendariesMasterworked=!1,this.config_assumeExoticsMasterworked=!1,this.config_assumeClassItemMasterworked=!1,this.config_enabledMods=[],this.DIMUrl="",this.configValues=[0,0,0,0,0,0],this.element=null,this.ngUnsubscribe=new it.xQ}buildItemIdString(e){let o=e?.items.flat().map(r=>`id:'${r.itemInstanceId}'`).join(" or "),a=["is:classitem"];return e?.classItem.perk!=_.None&&e?.classItem.perk!=_.COUNT&&a.push(Se[e?.classItem.perk||0]),a.length>1&&(o+=` or (${a.join(" ")})`),o}openSnackBar(e){this._snackBar.open(e,"",{duration:2500,politeness:"polite"})}ngOnInit(){this.config.configuration.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(e=>{this.config_characterClass=e.characterClass,this.config_assumeLegendariesMasterworked=e.assumeLegendariesMasterworked,this.config_assumeExoticsMasterworked=e.assumeExoticsMasterworked,this.config_assumeClassItemMasterworked=e.assumeClassItemMasterworked,this.config_enabledMods=e.enabledMods,this.configValues=e.enabledMods.reduce((o,a)=>o.concat(gt[a].bonus),[]).reduce((o,a)=>(a.stat==xt.ClassAbilityRegenerationStat?o[[1,0,2][e.characterClass]]+=a.value:o[a.stat]+=a.value,o),[0,0,0,0,0,0]),this.DIMUrl=this.generateDIMLink(e)})}disableAllItems(){this.config.modifyConfiguration(e=>{for(let o of this.element?.items.flat())e.disabledItems.push(o.itemInstanceId)})}disableItem(e){this.config.modifyConfiguration(o=>{o.disabledItems.push(e)})}get mayAnyItemBeBugged(){return(this.element?.items.flat().filter(e=>e.mayBeBugged).length||0)>0}getCharacterId(){var e=this;return(0,T.Z)(function*(){let o=yield e.bungieApi.getCharacters();return o=o.filter(a=>a.clazz==e.config_characterClass),0==o.length?(e.openSnackBar("Error: Could not find a character to move the items to."),null):o[0].characterId})()}moveItems(e=!1){var o=this;return(0,T.Z)(function*(){for(let d of(o.element?.items||[]).flat())d.transferState=Tt.WAITING_FOR_TRANSFER;let a=yield o.getCharacterId();if(!a)return;let r=!0,l=(o.element?.items||[]).flat().sort(d=>d.exotic?1:-1);for(let d of l){d.transferState=Tt.TRANSFERRING;let u=yield o.bungieApi.transferItem(d.itemInstanceId,a,e);d.transferState=u?Tt.TRANSFERRED:Tt.ERROR_DURING_TRANSFER,u||(r=!1)}o.openSnackBar(r?"Success! Moved all the items.":"Some of the items could not be moved. Make sure that there is enough space in the specific slot. This tool will not move items out of your inventory.")})()}getItemsThatMustBeMasterworked(){return this.element?.items.flat().filter(e=>!(e.masterworked||e.exotic&&!this.config_assumeExoticsMasterworked||!e.exotic&&!this.config_assumeLegendariesMasterworked))}calculateRequiredMasterworkCost(){let e={shards:0,glimmer:0,core:0,prism:0,ascshard:0,total:0},o=this.element?.items.flat()||[];o=o.filter(a=>a.energyLevel<10&&(a.exotic&&this.config_assumeExoticsMasterworked||!a.exotic&&this.config_assumeLegendariesMasterworked));for(let a of o){let r=a.exotic?Qn:Fn;for(let l=a.energyLevel;l<10;l++)for(let d in r[l+1])e[d]+=r[l+1][d],e.total++}return e}generateDIMLink(e){const o=[],a=[];for(let h of this.config_enabledMods){const A=gt[h];A.type===f.O.CombatStyleMod?o.push(A.hash):a.push(A.hash)}for(let h of this.element?.mods||[])o.push(pt[h][3]);var r={statConstraints:[{statHash:2996146975,minTier:e.minimumStatTiers[c.Mobility].value,maxTier:e.minimumStatTiers[c.Mobility].fixed?e.minimumStatTiers[c.Mobility].value:10},{statHash:392767087,minTier:e.minimumStatTiers[c.Resilience].value,maxTier:e.minimumStatTiers[c.Resilience].fixed?e.minimumStatTiers[c.Resilience].value:10},{statHash:1943323491,minTier:e.minimumStatTiers[c.Recovery].value,maxTier:e.minimumStatTiers[c.Recovery].fixed?e.minimumStatTiers[c.Recovery].value:10},{statHash:1735777505,minTier:e.minimumStatTiers[c.Discipline].value,maxTier:e.minimumStatTiers[c.Recovery].fixed?e.minimumStatTiers[c.Recovery].value:10},{statHash:144602215,minTier:e.minimumStatTiers[c.Intellect].value,maxTier:e.minimumStatTiers[c.Intellect].fixed?e.minimumStatTiers[c.Intellect].value:10},{statHash:4244567218,minTier:e.minimumStatTiers[c.Strength].value,maxTier:e.minimumStatTiers[c.Strength].fixed?e.minimumStatTiers[c.Strength].value:10}],mods:o,assumeArmorMasterwork:e.assumeLegendariesMasterworked?e.assumeExoticsMasterworked?3:2:1};if(1==e.selectedExotics.length)r.exoticArmorHash=e.selectedExotics[0];else{var l=this.element?.exotic;if(l&&1==l.length){var d=l[0].hash;d&&(r.exoticArmorHash=parseInt(d,10))}}const u={id:"d2ap",name:"D2ArmorPicker Loadout",classType:e.characterClass,parameters:r,equipped:(this.element?.items||[]).map(([h])=>({id:h.itemInstanceId,hash:h.hash})),unequipped:[],clearSpace:!1};if(a.length){const h=a.reduce((q,E,W)=>(q[W+7]=E,q),{}),I={[s.N.Hunter]:{[f.O.Stasis]:873720784,[f.O.Void]:2453351420,[f.O.Solar]:2240888816,[f.O.Arc]:2328211300,[f.O.Strand]:3785442599},[s.N.Titan]:{[f.O.Stasis]:613647804,[f.O.Void]:2842471112,[f.O.Solar]:2550323932,[f.O.Arc]:2932390016,[f.O.Strand]:242419885},[s.N.Warlock]:{[f.O.Stasis]:3291545503,[f.O.Void]:2849050827,[f.O.Solar]:3941205951,[f.O.Arc]:3168997075,[f.O.Strand]:4204413574}}[e.characterClass]?.[e.selectedModElement];I&&u.equipped.push({id:"12345",hash:I,socketOverrides:h})}return"https://app.destinyitemmanager.com/loadouts?loadout="+encodeURIComponent(JSON.stringify(u))}goToDIM(){window.open(this.DIMUrl,"blank")}getTiersForStat(e){return Math.floor((this.element?.stats[e]||0)/10)}getColumnForStat(e){var o=Math.floor(this.configValues[e]/10);let a=[],r=0,l=Math.ceil((5*(this.element?.mods.filter(u=>u==1+2*e)||[]).length+10*(this.element?.mods.filter(u=>u==2+2*e)||[]).length)/10);var d=this.getTiersForStat(e)-o-l;for(let u=0;u<d;u++)a.push("normal"+(++r>10?" over100":""));for(let u=0;u<l;u++)a.push("mod"+(++r>10?" over100":""));for(let u=0;u<o;u++)a.push("config"+(++r>10?" over100":""));for(;r++<10;)a.push("");return a}getRequiredMasterworkBonus(){return 2*(this.element?.items.filter(e=>!e[0].masterworked&&!e[0].exotic&&this.config_assumeLegendariesMasterworked||e[0].exotic&&this.config_assumeExoticsMasterworked)||[]).length}getAffinityName(e){return ae[e]}getAffinityUrl(e){return re[e]}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j),t.Y36(Xt.ux),t.Y36(Qt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-expanded-result-content"]],inputs:{element:"element"},decls:124,vars:26,consts:[["class","invalid-item-box mat-elevation-z4","color","warn",4,"ngIf"],[1,"specificStatTable"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","result-total-gear result-total highlight-row",4,"ngVar"],[1,"result-config"],[3,"class",4,"ngIf"],["class","highlight-row",4,"ngVar"],[4,"ngVar"],["class","result-total-all result-total highlight-row",4,"ngVar"],[1,"buttonContainer"],["color","primary","mat-raised-button","","matTooltip","Use this button to open this build as a DIM Loadout.",3,"click"],["mat-stroked-button","","matTooltip","Click this button to move Items to your inventory. Make sure that you have enough space in your inventory. This tool will not move any items out of your inventory.",3,"click"],["mat-stroked-button","","matTooltip","Click this button to equip the Items. Make sure that you have enough space in your inventory. This tool will not move any items out of your inventory.",3,"click"],[1,"mat-elevation-z6"],[1,"stat-preview"],["colspan","2"],[1,"tier-column"],[1,"legend"],[1,"energy-bar","normal"],["colspan","3"],[1,"energy-bar","mod"],["colspan","4"],[1,"energy-bar","config"],["color","warn",1,"invalid-item-box","mat-elevation-z4"],[3,"highlight-row",4,"ngFor","ngForOf"],["class","item-name-mw","matTooltip","This item is already masterworked.",4,"ngIf"],[1,"icon-column"],[1,"item-icon-container",3,"itemTooltip"],[1,"item-icon",3,"itemHash","masterworked"],[2,"position","relative","width","25px"],[3,"perk"],["mat-icon-button","","matTooltip","Disable this item from the results. It will not be used to generate results anymore, but you can always undo this.",1,"item-info-menu-btn",3,"click"],["class","icon-column",4,"ngIf"],["matTooltip","This item is already masterworked.",1,"item-name-mw"],["tooltip","matTooltip"],[1,"item-stat-container"],[1,"item-stat-value"],["color","primary","diameter","22","mode","indeterminate",1,"item-loading-spinner"],["aria-hidden","false","aria-label","Success","inline","","matTooltip","Item successfully moved to inventory.",1,"item-moved-icon"],["aria-hidden","false","aria-label","Error","inline","","matTooltip","This item could not be moved. Make sure that there is enough space on your character. This tool will not move items out of your inventory.",1,"report-problem-icon"],["aria-hidden","false","aria-label","Error","inline","","matTooltip","The stats of this item may be incorrect. Make sure that you remove every positive or negative stat modifier from this item.",1,"report-problem-icon"],["matTooltip","Class item should be masterworked.",1,"item-name-mw"],[1,"text-mw"],["mat-icon-button","","matTooltip","Disable all four items above from the results. They will not be used to generate results anymore, but you can always undo this.",1,"item-info-menu-btn","report-problem-icon",3,"click"],["colspan","6",1,"text-centered"],[1,"result-total-gear","result-total","highlight-row"],["alt","Mobility","src","https://www.bungie.net/common/destiny2_content/icons/e26e0e93a9daf4fdd21bf64eb9246340.png",1,"statIcon"],["alt","Resilience","src","https://www.bungie.net/common/destiny2_content/icons/202ecc1c6febeb6b97dafc856e863140.png",1,"statIcon"],["alt","Recovery","src","https://www.bungie.net/common/destiny2_content/icons/128eee4ee7fc127851ab32eac6ca91cf.png",1,"statIcon"],["alt","Discipline","src","https://www.bungie.net/common/destiny2_content/icons/ca62128071dc254fe75891211b98b237.png",1,"statIcon"],["alt","Intellect","src","https://www.bungie.net/common/destiny2_content/icons/59732534ce7060dba681d1ba84c055a6.png",1,"statIcon"],["alt","Strength","src","https://www.bungie.net/common/destiny2_content/icons/c7eefc8abbaa586eeab79e962a79d6ad.png",1,"statIcon"],[1,"highlight-row"],["class","positive",4,"ngIf"],[1,"positive"],[1,"result-total-all","result-total","highlight-row"],["style","margin-top: 10px;",4,"ngIf"],[2,"margin-top","10px"],["class","currency-icon-container","matTooltip","Glimmer",4,"ngIf"],["class","currency-icon-container","matTooltip","Legendary Shards",4,"ngIf"],["class","currency-icon-container","matTooltip","Enhancement Cores",4,"ngIf"],["class","currency-icon-container","matTooltip","Enhancement Prism",4,"ngIf"],["class","currency-icon-container","matTooltip","Ascendant Shard",4,"ngIf"],["matTooltip","Glimmer",1,"currency-icon-container"],["alt","Glimmer","src","https://bungie.net/common/destiny2_content/icons/36dd52a3005cb28f7f68448f1ab76c1e.png",1,"currency-icon"],["matTooltip","Legendary Shards",1,"currency-icon-container"],["alt","Legendary Shards","src","https://bungie.net/common/destiny2_content/icons/1ff4a008cb851794ccb588e4eb3918a1.png",1,"currency-icon"],["matTooltip","Enhancement Cores",1,"currency-icon-container"],["alt","Enhancement Cores","src","https://bungie.net/common/destiny2_content/icons/259c571eb7f9f85e56be657f371e303f.jpg",1,"currency-icon"],["matTooltip","Enhancement Prism",1,"currency-icon-container"],["alt","Enhancement Prism","src","https://bungie.net/common/destiny2_content/icons/0397d34d04b687484f73665bb714227b.jpg",1,"currency-icon"],["matTooltip","Ascendant Shard",1,"currency-icon-container"],["alt","Ascendant Shard","src","https://bungie.net/common/destiny2_content/icons/2bd6547fa8f170d8868c8ab24b9fe84a.jpg",1,"currency-icon"],["color","primary","mat-raised-button","","matTooltip","Use this button to copy a DIM search query to your clip board. It allows you to search the given items in DIM.",3,"cdkCopyToClipboard","click"],["class","element-icon-mini",3,"src","matTooltip",4,"ngIf"],[1,"element-icon-mini",3,"src","matTooltip"],[2,"height","18px",3,"alt","src"],[1,"sum-tiers"],["class","energy-bar",3,"class",4,"ngIf"],[1,"energy-bar"],["colspan","10"],["colspan","1"],[1,"item-icon-container"],[1,"item-icon",3,"src"],[1,"item-icon-overlay",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.YNc(1,ao,4,0,"mat-toolbar",0),t._uU(2," This table shows you the expected stats of any item: "),t.TgZ(3,"table",1)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Name"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Mobility"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Resilience"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Recovery"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Discipline"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Intellect"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Strength"),t.qZA(),t._UZ(20,"th")(21,"th"),t.qZA()(),t.YNc(22,_o,2,1,"ng-container",2),t.YNc(23,fo,24,7,"tr",3),t.YNc(24,ho,11,0,"tr",3),t.YNc(25,Ao,9,6,"tr",4),t.TgZ(26,"tr",5)(27,"td"),t._uU(28,"Configuration"),t.qZA(),t.TgZ(29,"td"),t.YNc(30,wo,3,4,"span",6),t.qZA(),t.TgZ(31,"td"),t.YNc(32,Io,3,4,"span",6),t.qZA(),t.TgZ(33,"td"),t.YNc(34,Oo,3,4,"span",6),t.qZA(),t.TgZ(35,"td"),t.YNc(36,Do,3,4,"span",6),t.qZA(),t.TgZ(37,"td"),t.YNc(38,No,3,4,"span",6),t.qZA(),t.TgZ(39,"td"),t.YNc(40,Po,3,4,"span",6),t.qZA()(),t.YNc(41,zo,15,24,"tr",7),t.YNc(42,li,15,24,"tr",8),t.YNc(43,bi,16,24,"ng-container",8),t.YNc(44,Ci,21,6,"tr",9),t.qZA()(),t.YNc(45,ki,2,1,"ng-container",8),t.TgZ(46,"div",10),t.YNc(47,Oi,3,1,"ng-container",8),t.TgZ(48,"button",11),t.NdJ("click",function(){return o.goToDIM()}),t._uU(49," Open Loadout in DIM "),t.qZA(),t._UZ(50,"br"),t.TgZ(51,"small"),t._uU(52,"The following two buttons may not work for some at the moment:"),t.qZA(),t._UZ(53,"br"),t.TgZ(54,"button",12),t.NdJ("click",function(){return o.moveItems()}),t._uU(55," Move items to inventory (beta) "),t.qZA(),t.TgZ(56,"button",13),t.NdJ("click",function(){return o.moveItems(!0)}),t._uU(57," Equip Items (beta) "),t.qZA()(),t.TgZ(58,"mat-accordion")(59,"mat-expansion-panel",14)(60,"mat-expansion-panel-header")(61,"mat-panel-title"),t._uU(62," What to do now? "),t.qZA(),t.TgZ(63,"mat-panel-description"),t._uU(64," Detailed Instructions of to get your loadout ready. "),t.qZA()(),t.TgZ(65,"div")(66,"ol")(67,"li"),t._uU(68," Move all related items into your inventory "),t.YNc(69,Mi,2,0,"span",3),t._uU(70,". "),t.qZA(),t.YNc(71,Ni,2,1,"ng-container",8),t.YNc(72,Aa,3,1,"li",3),t.ALo(73,"count"),t.YNc(74,Ra,5,2,"li",3),t.qZA()()(),t.TgZ(75,"mat-expansion-panel",14)(76,"mat-expansion-panel-header")(77,"mat-panel-title"),t._uU(78," Stat overview "),t.qZA(),t.TgZ(79,"mat-panel-description"),t._uU(80," Shows a summary of all the stats and where they come from. "),t.qZA()(),t.TgZ(81,"table",15)(82,"tr")(83,"td",16),t._uU(84,"Stat"),t.qZA(),t.TgZ(85,"td",17),t._uU(86,"1"),t.qZA(),t.TgZ(87,"td",17),t._uU(88,"2"),t.qZA(),t.TgZ(89,"td",17),t._uU(90,"3"),t.qZA(),t.TgZ(91,"td",17),t._uU(92,"4"),t.qZA(),t.TgZ(93,"td",17),t._uU(94,"5"),t.qZA(),t.TgZ(95,"td",17),t._uU(96,"6"),t.qZA(),t.TgZ(97,"td",17),t._uU(98,"7"),t.qZA(),t.TgZ(99,"td",17),t._uU(100,"8"),t.qZA(),t.TgZ(101,"td",17),t._uU(102,"9"),t.qZA(),t.TgZ(103,"td",17),t._uU(104,"10"),t.qZA(),t.TgZ(105,"td"),t._uU(106,"Tiers"),t.qZA()(),t.YNc(107,La,8,5,"tr",2),t.TgZ(108,"tr",18)(109,"td",16),t._uU(110,"Armor"),t.qZA(),t.TgZ(111,"td"),t._UZ(112,"div",19),t.qZA(),t.TgZ(113,"td",20),t._uU(114,"Stat Mod"),t.qZA(),t.TgZ(115,"td"),t._UZ(116,"div",21),t.qZA(),t.TgZ(117,"td",22),t._uU(118,"Stasis & Mods"),t.qZA(),t.TgZ(119,"td"),t._UZ(120,"div",23),t.qZA()(),t.YNc(121,Fa,2,1,"ng-container",8),t.qZA()()(),t._UZ(122,"br")(123,"br")),2&e&&(t.xp6(1),t.Q6J("ngIf",o.mayAnyItemBeBugged),t.xp6(21),t.Q6J("ngForOf",null==o.element?null:o.element.items),t.xp6(1),t.Q6J("ngIf",o.config_assumeClassItemMasterworked),t.xp6(1),t.Q6J("ngIf",!o.config_assumeClassItemMasterworked),t.xp6(1),t.Q6J("ngVar",null==o.element?null:o.element.statsNoMods),t.xp6(5),t.Q6J("ngIf",0!=o.configValues[o.ArmorStat.Mobility]),t.xp6(2),t.Q6J("ngIf",0!=o.configValues[o.ArmorStat.Resilience]),t.xp6(2),t.Q6J("ngIf",0!=o.configValues[o.ArmorStat.Recovery]),t.xp6(2),t.Q6J("ngIf",0!=o.configValues[o.ArmorStat.Discipline]),t.xp6(2),t.Q6J("ngIf",0!=o.configValues[o.ArmorStat.Intellect]),t.xp6(2),t.Q6J("ngIf",0!=o.configValues[o.ArmorStat.Strength]),t.xp6(1),t.Q6J("ngVar",null==o.element?null:o.element.mods),t.xp6(1),t.Q6J("ngVar",null==o.element?null:o.element.mods),t.xp6(1),t.Q6J("ngVar",null==o.element?null:o.element.artifice),t.xp6(1),t.Q6J("ngVar",null==o.element?null:o.element.stats),t.xp6(1),t.Q6J("ngVar",o.calculateRequiredMasterworkCost()),t.xp6(2),t.Q6J("ngVar",o.buildItemIdString(o.element)),t.xp6(22),t.Q6J("ngIf",o.config_assumeClassItemMasterworked),t.xp6(2),t.Q6J("ngVar",o.getItemsThatMustBeMasterworked()),t.xp6(1),t.Q6J("ngIf",(null==o.element?null:o.element.mods).length>0&&t.xi3(73,23,null==o.element?null:o.element.mods,o.StatModifier.NONE)<5),t.xp6(2),t.Q6J("ngIf",o.config_enabledMods.length>0),t.xp6(33),t.Q6J("ngForOf",o.armorStatIds),t.xp6(14),t.Q6J("ngVar",null==o.element?null:o.element.exotic))},dependencies:[b.sg,b.O5,R.lW,L.gM,ot.Hw,tt.Ye,J.pp,J.ib,J.yz,J.yK,J.u4,Bn.Ou,Mt.i3,St,Gn,eo,$t,b.JJ,he],styles:[".element-icon[_ngcontent-%COMP%]{width:22px}.element-icon-mini[_ngcontent-%COMP%]{height:12px}.item-loading-spinner[_ngcontent-%COMP%]{width:22px;height:22px;margin-bottom:6px}.item-icon[_ngcontent-%COMP%]{width:22px}.item-icon-overlay[_ngcontent-%COMP%]{width:22px;margin-left:-22px}.item-icon-container[_ngcontent-%COMP%]{position:relative;contain:layout paint style;box-sizing:border-box;width:var(--item-size);transition:opacity .2s,transform .2s;margin-top:-4px}.item-icon-masterwork-overlay[_ngcontent-%COMP%]{pointer-events:none;box-sizing:border-box;top:-1px;left:-1px;border-width:0;height:24px;width:24px;position:absolute;background-repeat:no-repeat;background-position:center;background-size:22px 22px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAJgklEQVR4AWI8t87oBYCd8rBuGAZi6N1JUQbIrJkiY6bM4EoE1EHvqb+WHsPvG5AJU522JQ/znpY03GzJ3YTovcvcVFcO5WbU8eH/OZ8R91B241c6wEzowJUUZnqlXMiZufrJSs1XUjNBUb6OcvUFF8190fzkGxS2J0ChGPQZDnYAQObJWHbNlCvZIXKxqvHN8KBp22SubByb9EKFGM2hzgyNa47vUzvKvnUToHPOINMFHG6Oo6hb6lhmMump4wROtxSMee8yjC6YI9jOnBYcGn5TZnTdBMB7d0+HB52AeKEb5QL2hQKx8RLk5IkE6eymz9CJFPJIQKxdWZKO5M1u+gw9kPvVJUjqyAt5Z98OMBAI4igO9x97koAAnSY6YHSaAB2nAiyswTbMq+/HAiHv0+4k3Ww1pOvnOvYews1Ow2rGnldEAAAIAAABACAAAAQAgAAAEAAAAgAgPwACAEAAAKiyAfJ7AXALEgAAAuAU5BMgAADki9j/BQCAlkN459OlNu6v0/V43vsAocOvq9kh1n/LX35h+B6EU9DI8fuVh/D48WMRWv742Qgtf/xshBY+fm1cMQgtefwdI5ffA/a9+frC68ox9M3enehIkvJAAC5D9vs/8F+Z/HugkfXJrOfec6QSJBi6O8IO2znX1zdZro39if/K0B8ftp2Hxxfa/vcu6DO8P5x/AaDrvwj4/uDPJDtjP09+ntDze9L+i4DRSEqwtgoQZ9rL3r9Ye/51L+Pw9tF6YuHFPJ/uWBDk2eXZvfb8YyMAwHvg673Z7AvmSF4POeSHmtDnb0xAD3qzN5gLfHsHIOvhktBJ4vOXJqABvJcZnqs5z54R7FF5ODaRiOkIGcXX+OZG7PqJnh6Ev3uOI52Z7tdRUCbdB6AFXHCDcZ3kkf2fGwEN+HGe+3xcE5yBB3umIvk5JnVIggDtnx/1u27XD5CajhBt8tqj9gMahDSan+7C629sxx6DiGmTcxOF304AwOud/SuABnTsZtNABWfaygUynjR3Ld+/GokZp4TO/JsJsEON1uN7OTEPaO9nVFHhHXizTdcN8Fl6BlER5gHk6lghYV8Tgd31DeCPL2icmhISYGsS9P7R9AErAT9JwlWCnuyFsmRuEQurKcBuqyBB72WkXtfmTCD7Au4a4/H7yYAl0N9VY0eERBqRr+Ov51yqCkTEYuuqjL4A+D4p1nvazLzOncHLt1dByhIwqpsHDzcShpIEkM4HZ5+zDEtoRLoKAgrwvwF41/WuAeg+z/1hDzk6VyGPkYW8aLfwarEwr0RJCDr/LUm4+42N8WX6z76Am3R9RoIkGGDvRN7i677TupIhqVZI7vmzPnr+1xLgwT6Bek6QtOE89rMmAGk6d8PhaG9ghSOgeLaAW1FFmYz9viLitcgBCFAgQ2dJ6dcEyLvcKxMuH2za3wW7AeOpqh/k6raz9l49XOIlQozX6pNwNCDnfde6Ckfb2SdeSejLUCXp+L3SPyAlj9FghVVHWV2etlVQ482MNfBHzwe4igSAj7T+4VnmtfdvwBJ5dxoXay/6hrc5gqrnyQCzX5H3fHYVhNd35eOrIWD4zDjZG2ntSmt8CpKTzCAnSEmp6Y7TDthyE9vbjhz7OOYAODg3THqfwEmMIJ29f1TaDwkX+8ckTCf8JAl6EjBviFo70m7v0vtTdD72EqzNgjwIgCJBr+aMRoTzbQMxzBlHIoY5JFCrA9xIZedIZLzZiwScpe1ij/vLyDu8b9p5IH2/V/4hfg+SGIUHr7oSAVhIwgbwIALpgYgLcvokvLU9gfsmgv+37117brJ90PrlHKAtWY24OWLO5/WORGWYAyJeQy8fjceHoOYz5gkTLeAPgL7YU57mHzRBQwA2Cff+5L3s1e9kn8Cuy1hAf9D/EN5YYySVKyQo4tyNSog6XucApWOZeA+Vz6UMNaXotLEiCZsgY4M9KVc/9lmBffwNHSonyQp1H/kpknDEiFeM/U2UybWRmcuEe5IcSPgAqOuQB2b3OiKBMrLumzy33dzy86HG84Z0KCtp/wL4kc7NfFdEDIucK9em8eskRl3q4bUAYc6YXalZJue6/LwkoClD9cYsP5G8d5pkT/U+Cfdd5gpI4jn2EL87eEQiID5tboPq9e+rBLvOA47D/doGj6+lKJpiQC+88WDP33h8JMADL36naIUYJYocsO+NGLOIAJJEjJnWhx7fyM0obAXLta7hmjxfp3dB5IF3AvRJwL3tzG3cjKJ8PkncBPgBocPyNXYEHAkI/md8CFA+eu8/jMiOVc1lpQRBEq38rKTNN/khkJHJXtjE8TW8T50fJO6RxvXaOSBer1j594Rjf5HfNyMSCCFoR43HBtKsirSFSCXILrh/G1p0vRdVSX4vdJvEkZYK+EVu4W0qtluCYtvGHq89MQImAApsLUHniBC0cbjXuclXcvR+o2Dq9ThXzhl3AtCcoabnHPBRdL1vCEwR30hQRAw985hwAZR1IyVcJ3o8p97HqSnE0xz1zpszAfgvSKm634e5tf9HVfaOGNcTJwLiUye2BJrnSk5OEiVZ3unv/7o/zvLT/sGshRy8i4hdyVtvk6mlaNoz4f6/dGvJkRqKgVXuDyuWLLkSZ+CiXIQVZ2CF0h0XbblkRU+hESIjq+yqZ2emJtKbZNK54vlfUBRAgl1A0BUuiyAvmdo/ff/x7QsZF5PsYY2uKw20EKA1NLpuzaNnBmddSCIZqrxIz2ydiEpprucWzrk8WzrZAGQQ5LyL4hJCqhCQ+zOVLFP5Cslzrc88KeGk0LWam1mSprc196WeH8mY/QZcngWxZ3/Y9fhsiiRjcpCzdKjhHSTHqDnCdatee/wFzF40+ph85GP9Ht7969BGjXlj0nBjbkoZJBPAbv+WB2sqWitvZXLrkrGprgluPsf5HvBr+/l1CpD4+8F/4NdnIreI64MMgFf0PUrhDRE3FjLuYLy4y9184Z1eY73w6rr7e2bNu4gvBE9fim7ftEOZkJ5I7TfkY1M+oHyiMF/R9YbcNzW3QfuLk/leIzXWLM/cgcp19FzCemU6cIz/MB9890UWjBGadM7N9QMtlCqqJiFwOjUhdaDQXQCdEwNOpzhYwMpBDrfcFpEXIsjiGJw+9jqidHo7O3+3QVO7+QpIf7ji9cbst7ogrVf8UXTDBslUgkxCCSilwjFdSAkBkSo1EcjSIBXWWvsN9SxF5ebWH3woEIS629sLNhsPabYekYTY/VR0znB/jBdcErKAavL8+A1ICXvgoqroDgAAAABJRU5ErkJggg==)}.negative[_ngcontent-%COMP%]{color:#f08080}.positive[_ngcontent-%COMP%]{color:#6495ed}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:not(:last-child)   td[_ngcontent-%COMP%]{border-bottom:rgba(240,248,255,.08) solid .5px}.result-total-gear[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:aliceblue solid 1px!important}.result-total-all[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .result-total-gear[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-top:aliceblue double}.buttonContainer[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.buttonContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-of-type){margin-right:6px;margin-bottom:3px}.result-total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{position:relative;padding-right:14px}.statIcon[_ngcontent-%COMP%]{position:absolute;height:14px;margin-left:2px;top:3px}.item-info-menu-btn[_ngcontent-%COMP%]{height:22px!important;width:22px!important;line-height:22px!important;top:-4px;left:-4px}.item-info-menu-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px}.item-moved-icon[_ngcontent-%COMP%]{color:#7fffd4}.report-problem-icon[_ngcontent-%COMP%]{color:#f08080}.invalid-item-box[_ngcontent-%COMP%]{text-align:center;margin-right:auto;margin-left:auto;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;font-size:15px;line-height:20px}.text-centered[_ngcontent-%COMP%]{text-align:center!important}.specificStatTable[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 0}.highlight-row[_ngcontent-%COMP%]{background-color:#6e6e6e21}tr.legend[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:3px}.tier-column[_ngcontent-%COMP%]{min-width:27px}.energy-bar[_ngcontent-%COMP%]{width:25px;height:10px;border:white solid 2px;position:relative}.energy-bar.normal[_ngcontent-%COMP%]{background-color:#fff}.energy-bar.mod[_ngcontent-%COMP%]{background-color:gray;border:white ridge 2px}.energy-bar.config[_ngcontent-%COMP%]{background-color:#a3b1c2;border:white ridge 2px}.energy-bar.over100[_ngcontent-%COMP%]{border-color:#ff5e5e;width:10px}.item-stat-container[_ngcontent-%COMP%]{position:relative}.item-stat-bonus[_ngcontent-%COMP%]{position:absolute;right:20px;font-size:x-small}.item-name-mw[_ngcontent-%COMP%]{text-decoration:underline;-webkit-text-decoration-color:#ffbc00;text-decoration-color:#ffbc00}.text-mw[_ngcontent-%COMP%], .item-stat-bonus[_ngcontent-%COMP%]{color:#ffd86a}app-armor-perk-icon[_ngcontent-%COMP%]{width:23px;height:23px;position:absolute;top:-14px;left:0}td.sum-tiers[_ngcontent-%COMP%]{text-align:center!important;border-left:#6e6e6e solid 1px}.currency-icon[_ngcontent-%COMP%]{width:16px;position:absolute;left:0}.currency-icon-container[_ngcontent-%COMP%]{position:relative;padding-left:19px;padding-right:10px}.icon-column[_ngcontent-%COMP%]{padding-left:4px}"]}),n})();var xe=p(3238),Ba=p(8729);function Va(n,i){1&n&&(t.TgZ(0,"mat-icon",6),t._uU(1,"add_circle_outline "),t.qZA())}function Ha(n,i){1&n&&(t.TgZ(0,"mat-icon",7),t._uU(1,"remove_circle_outline "),t.qZA())}function ja(n,i){1&n&&(t.TgZ(0,"mat-icon",8),t._uU(1,"change_history "),t.qZA())}function Wa(n,i){if(1&n&&(t.TgZ(0,"mat-list-item"),t.YNc(1,Va,2,0,"mat-icon",2),t.YNc(2,Ha,2,0,"mat-icon",3),t.YNc(3,ja,2,0,"mat-icon",4),t.TgZ(4,"div",5)(5,"p"),t._uU(6),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",0==e.type),t.xp6(1),t.Q6J("ngIf",1==e.type),t.xp6(1),t.Q6J("ngIf",2==e.type),t.xp6(3),t.Oqu(e.text)}}function za(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1),t._uU(2),t.qZA(),t.YNc(3,Wa,7,4,"mat-list-item",0),t.TgZ(4,"mat-list-item"),t._UZ(5,"br")(6,"mat-divider"),t.qZA(),t.BQk()),2&n){const e=i.$implicit;t.xp6(2),t.AsE("",e.version,", released on ",e.date,""),t.xp6(1),t.Q6J("ngForOf",e.entries)}}let Te=(()=>{class n{constructor(e){this.changelog=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-changelog-list"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["mat-subheader","",1,"title"],["mat-list-icon","","matTooltip","A new function has been added.",4,"ngIf"],["mat-list-icon","","matTooltip","A function has been removed.",4,"ngIf"],["mat-list-icon","","matTooltip","Something has been modified.",4,"ngIf"],["mat-line","",1,"e"],["mat-list-icon","","matTooltip","A new function has been added."],["mat-list-icon","","matTooltip","A function has been removed."],["mat-list-icon","","matTooltip","Something has been modified."]],template:function(e,o){1&e&&(t.TgZ(0,"mat-list"),t.YNc(1,za,7,3,"ng-container",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.changelog.changelogData))},dependencies:[b.sg,b.O5,L.gM,ot.Hw,wt.i$,wt.Tg,xe.X2,wt.Nh,wt.gs,Ba.d],styles:["[_nghost-%COMP%]     .mat-line{word-wrap:break-word!important;white-space:pre-wrap!important}[_nghost-%COMP%]     .mat-list .mat-list-item{height:initial!important}.title[_ngcontent-%COMP%]{text-decoration:underline;font-size:20px}.e[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:first-child{padding-top:12px}"]}),n})();function Ga(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e)}}let Ka=(()=>{class n{constructor(){this.knownIssues=["When you click buttons on the page too fast are able to select an invalid state with no results. Just undo your changed settings. And be patient - the calculation is an expensive task.","Sometimes duplicate results are given. This happens when the inventory got updated twice (Race Condition). Only reported once, and not really a problem."],this.changelog=de}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-help-page"]],decls:116,vars:1,consts:[["id","help-container"],["color","primary","fxShow","false","fxShow.lt-md","true","mat-raised-button","","routerLink","/",1,"returnbutton"],["href","https://twitter.com/MijagoCoding/","target","_blank","matTooltip","Birb App"],["alt","Me on twitter","src","assets/logo-twitter.png",1,"logo-twitter"],["href","https://ko-fi.com/mijago","target","_blank","matTooltip","If you like my work, you can always buy me a coffee!"],["alt","Ko-Fi","src","assets/logo-kofi.png",1,"logo-twitter"],["href","http://discord.d2armorpicker.com/","target","_blank","matTooltip","Visit me at the development & support discord."],["alt","Discord","src","assets/logo-discord.png",1,"logo-twitter"],["href","https://github.com/Mijago/D2-Gear-Calculator","target","_blank"],["href","https://mijago.github.io/D2GearCalculator/","target","_blank"],["href","https://twitter.com/MijagoCoding/","target","_blank"],["href","https://ko-fi.com/mijago","target","_blank"],[1,"preview-image-container"],["alt","Preview of the results table","src","assets/armor-images/preview_result_details.png",1,"preview-image"],["fxLayout","row","id","armor-image-container"],["src","assets/armor-images/kabrs_battlecage.png"],["src","assets/armor-images/lightkin_gauntlets.png"],["src","assets/armor-images/phobos_warden_helm.png"],["src","assets/armor-images/wild_hunt_vest.png"],[4,"ngFor","ngForOf"],[1,"changelog-table-container"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t._uU(2," Return to D2ArmorPicker "),t.qZA(),t.TgZ(3,"mat-card")(4,"mat-card-title")(5,"span"),t._uU(6,"About D2ArmorPicker "),t.TgZ(7,"small"),t._uU(8," by Mijago"),t.qZA(),t.TgZ(9,"a",2),t._UZ(10,"img",3),t.qZA(),t.TgZ(11,"a",4),t._UZ(12,"img",5),t.qZA(),t.TgZ(13,"a",6),t._UZ(14,"img",7),t.qZA()()(),t.TgZ(15,"mat-card-content"),t._uU(16," D2ArmorPicker (or short D2AP) is a small web-app to quickly find armor that fits your desired stat requirements. It uses the armor in your vault, inventory and postmaster, calculates every possible variation and shows only those that fulfill the given requirements. "),t._UZ(17,"br")(18,"br"),t._uU(19," As I raided a lot and I mainly play meme builds, I wanted to be able to switch exotics and have decent stats without being a burden on my team. That's why I developed the "),t.TgZ(20,"a",8),t._uU(21,"first version of this tool"),t.qZA(),t._uU(22," in Python. After a few days I started to translate this tool "),t.TgZ(23,"a",9),t._uU(24,"into a webpage"),t.qZA(),t._uU(25,". My friends liked it, but it didn't have API access. Thus I created the first version of D2ArmorPicker, and after people started using and liking it, I started to completely rewrite it - that's Version\xa02! "),t._UZ(26,"br")(27,"br"),t._uU(28," I keep updating and improving this tool, but beware that it takes a bit, as I work on it on my spare time. Feel free to follow me on Twitter "),t.TgZ(29,"a",10),t._UZ(30,"img",3),t.qZA(),t._uU(31,", I occasionally post updates there. If you like my tools and want to support me, head to "),t.TgZ(32,"a",11),t._uU(33,"ko-fi.com"),t.qZA(),t._uU(34," and buy me a coffee! \u2764 "),t.qZA()(),t.TgZ(35,"mat-card")(36,"mat-card-title"),t._uU(37," How do I use D2ArmorPicker? "),t.qZA(),t.TgZ(38,"mat-card-content"),t._uU(39," Follow these few steps: "),t.TgZ(40,"ol")(41,"li"),t._uU(42,"Login. You already did this!"),t.qZA(),t.TgZ(43,"li"),t._uU(44," [Optional] Pick an exotic you want to use. The tool will only display results for this exotic. You can always undo this. "),t.qZA(),t.TgZ(45,"li"),t._uU(46," [Optional] Select additional mods/fragments that give a bonus (or penalty). These are important if you want certain stat combinations even if you have penalties on your gear. "),t.qZA(),t.TgZ(47,"li"),t._uU(48," Select the stat distribution you seek. This is the heart of D2ArmorPicker. You just click 100 recovery and it will display you builds that have 100 recovery. "),t.TgZ(49,"i"),t._uU(50,"Note that it automatically adds stat mods if necessary."),t.qZA()(),t.TgZ(51,"li"),t._uU(52," Now look to the result table. On a normal desktop it should be on the right, on smaller devices it might move below the configuration. The table lists multiple results and you can sort it by your requirements."),t._UZ(53,"br"),t.TgZ(54,"b"),t._uU(55,"Click"),t.qZA(),t._uU(56," on an entry to open look the detailed view: "),t.TgZ(57,"div",12),t._UZ(58,"img",13),t.qZA(),t._uU(59," The example above shows a build that utilizes Dunemarchers and a zero-waste-build. To achieve it, I have to move all the items in my inventory and equip them. After this, I "),t.TgZ(60,"i"),t._uU(61,"masterwork"),t.qZA(),t._uU(62," them and "),t.TgZ(63,"i"),t._uU(64,"add the mods"),t.qZA(),t._uU(65," as the table displays them: "),t.TgZ(66,"ul")(67,"li")(68,"b"),t._uU(69,"Discipline:"),t.qZA(),t._uU(70," One major mod, one minor mod;"),t.qZA(),t.TgZ(71,"li")(72,"b"),t._uU(73,"Intellect:"),t.qZA(),t._uU(74," One major mod, one minor mod;"),t.qZA(),t.TgZ(75,"li")(76,"b"),t._uU(77,"Strength:"),t.qZA(),t._uU(78," One major mod;"),t.qZA(),t.TgZ(79,"li"),t._uU(80,"I also add Powerful Friends and Radiant Light, as I chose them in the configuration."),t.qZA()()()()()(),t.TgZ(81,"mat-card")(82,"mat-card-title"),t._uU(83," Where can I grind high stat armor? "),t.qZA(),t.TgZ(84,"mat-card-content"),t._uU(85," There are many spots that give you mediocre armor, but for the really good builds you need the correct armor. Here I provide a list of high-stat armor sources. It may not be complete, but a good starting point. "),t.TgZ(86,"i"),t._uU(87,"Last updated February 8, 2022."),t.qZA(),t.TgZ(88,"ul")(89,"li"),t._uU(90," Farm legendary Dares!"),t.qZA(),t.TgZ(91,"li"),t._uU(92," Clear Pit of Heresy Dungeon, the boss drop guarantees two stats to be 16 (or higher)."),t.qZA(),t.TgZ(93,"li"),t._uU(94," Farm a bunch of Spoils, go into Master Vault of Glass and buy armor at the final chest."),t.qZA(),t.TgZ(95,"li"),t._uU(96," The list will be extended sometime in Witch Queen!"),t.qZA()(),t._uU(97," Some good armor rolls may look like these: "),t.TgZ(98,"div",14),t._UZ(99,"img",15)(100,"img",16)(101,"img",17)(102,"img",18),t.qZA()()(),t.TgZ(103,"mat-card")(104,"mat-card-title"),t._uU(105,"Known Issues"),t.qZA(),t.TgZ(106,"mat-card-content")(107,"ul"),t.YNc(108,Ga,2,1,"li",19),t.qZA()()(),t.TgZ(109,"mat-card")(110,"mat-card-title"),t._uU(111,"Changelog"),t.qZA(),t.TgZ(112,"mat-card-content",20),t._UZ(113,"app-changelog-list"),t.qZA()(),t.TgZ(114,"a",1),t._uU(115," Return to D2ArmorPicker "),t.qZA()()),2&e&&(t.xp6(108),t.Q6J("ngForOf",o.knownIssues))},dependencies:[b.sg,Q.xw,$.b8,R.zs,w.a8,w.dn,w.n5,L.gM,N.yS,Te],styles:["#help-container[_ngcontent-%COMP%]{max-width:800px;margin-left:auto;margin-right:auto}.changelog-table-container[_ngcontent-%COMP%]{max-height:700px;overflow-y:scroll}mat-card[_ngcontent-%COMP%]{margin-bottom:8px}#armor-image-container[_ngcontent-%COMP%]{overflow:auto}#armor-image-container[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]:not(:last-of-type){margin-right:20px}#armor-image-container[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-height:300px}.preview-image-container[_ngcontent-%COMP%]{max-width:600px}.preview-image[_ngcontent-%COMP%]{max-width:100%}.returnbutton[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:15px;width:100%}.changelog-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-of-type{min-width:80px}.changelog-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-of-type(2){min-width:40px}.changelog-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:#6e6e6e solid 1px}a[_ngcontent-%COMP%]{color:#99afe3}a[_ngcontent-%COMP%]:visited{color:#7294dc}"]}),n})();var ft=p(811);const Dt=[1.44,1.276,1.144,1,.9488,.9024,.8608,.8224,.798,.776,.7664],B=[1.25,1.14,1.04,1,.83,.72,.62,.55,.5,.455,.39],yt=[1.427,1.256,1.11,1,.91461,.829,.7683,.72,.622,.561,.5],V={[s.N.Titan]:["Hammer of Sol","Glacial Quake, Sentinel Shield, Fist of Havoc","Burning Maul, Thundercrash","","Ward of Dawn"],[s.N.Hunter]:["Spectral Blades","Arc Staff, Golden Gun","Morbius Quiver","Deadfall, Blade Barrage, Silence & Squall",""],[s.N.Warlock]:["Daybreak","Stormtrance, Chaos Reach, Nova Warp, Shadebinder","Nova Bomb","","Well of Radiance"],[s.N.None]:["","","","","","","","","","",""]},U={[s.N.Titan]:["Flux","Glacier, Axion Bolt","Coldsnap, Vortex, Scatter, Magnetic, Suppressor, Incendiary, Solar, Lightning, Pulse, Skip","Void Wall, Thermite, Arc Bolt, Storm","Void Spike, Tripmine, Swarm, Flashbang","Healing","Fusion","Duskfield, Firebolt"],[s.N.Hunter]:["Flux","Glacier, Axion Bolt","Coldsnap, Vortex, Scatter, Magnetic, Suppressor, Incendiary, Solar, Lightning, Pulse, Skip","Void Wall, Thermite, Arc Bolt, Storm","Void Spike, Tripmine, Swarm, Flashbang","Healing","Fusion","Duskfield, Firebolt"],[s.N.Warlock]:["Flux","Glacier, Axion Bolt","Coldsnap, Vortex, Scatter, Magnetic, Suppressor, Incendiary, Solar, Lightning, Pulse, Skip","Void Wall, Thermite, Arc Bolt, Storm","Void Spike, Tripmine, Swarm, Flashbang","Healing","Fusion","Duskfield, Firebolt"],[s.N.None]:["","","","","","","","","",""]},P={[s.N.Titan]:["Shiver Strike","","Frontal Assault","Shield Throw","Throwing Hammer, Hammer Strike, Shield Bash, Seismic Strike, Ballistic Slam, Thunderclap","",""],[s.N.Hunter]:["Withering Blade","Weighted Throwing Knife","","Proximity Expl. Knife, Tempest Strike, Disorienting Blow","Lightweight Knife, Snare Bomb","Knife Trick","Combination Blow"],[s.N.Warlock]:["Penumbral Blast, Ball Lightning","","","Celestial Fire","Incinerator Snap, Pocket Singularity, Chain Lightning, Rising Storm","",""],[s.N.None]:["","","","","","","","","","",""]};function $a(n,i){if(1&n&&(t.TgZ(0,"th",5),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("\u2206 Tier ",e.differenceTier,"")}}function tr(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=i.ngVar,o=t.oxw(2).ngVar,a=t.oxw(4).$implicit;t.ekj("good",o*a.benefitDirection>0)("bad",o*a.benefitDirection<0),t.xp6(1),t.AsE(" ",e>0?"+":"","",a.formatting(e)," ")}}function er(n,i){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,tr,2,6,"span",8),t.qZA()),2&n){const e=t.oxw(2).ngVar,o=t.oxw().ngVar;t.xp6(1),t.Q6J("ngVar",-(e-o))}}function nr(n,i){if(1&n&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().ngVar,o=t.oxw(4).$implicit;t.xp6(1),t.ekj("good",e*o.benefitDirection>0)("bad",e*o.benefitDirection<0),t.xp6(1),t.AsE(" (",e>0?"+":"","",t.xi3(3,6,100*e,"1.0-0"),"%) ")}}function or(n,i){if(1&n&&(t.ynx(0),t.YNc(1,er,2,1,"td",6),t.YNc(2,nr,4,9,"td",6),t.BQk()),2&n){const e=t.oxw(5);t.xp6(1),t.Q6J("ngIf",e.differenceTier!=e.tier),t.xp6(1),t.Q6J("ngIf",e.differenceTier!=e.tier)}}function ir(n,i){if(1&n&&(t.ynx(0),t.YNc(1,or,3,2,"ng-container",7),t.BQk()),2&n){const e=i.ngVar,o=t.oxw().ngVar,a=t.oxw(3);t.xp6(1),t.Q6J("ngVar",a.getPercentageDifference(o,e))}}function ar(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,ir,2,1,"ng-container",7),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.BQk()),2&n){const e=i.ngVar,o=t.oxw(2).$implicit,a=t.oxw();t.xp6(2),t.Oqu(o.name),t.xp6(2),t.Oqu(o.formatting(e)),t.xp6(1),t.Q6J("ngVar",o.valueFunction(a.differenceTier)),t.xp6(2),t.hij(" ",null!=o.description?o.description[a.characterClass]:""," ")}}function rr(n,i){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,ar,8,4,"ng-container",7),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngVar",e.valueFunction(o.tier))}}function sr(n,i){if(1&n&&(t.ynx(0),t.YNc(1,rr,2,1,"tr",6),t.BQk()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.description||!!e.description[o.characterClass])}}var Z=(()=>{return(n=Z||(Z={}))[n.Positive=1]="Positive",n[n.Negative=-1]="Negative",Z;var n})();const te=n=>(Math.round(100*n)/100).toFixed(2)+"m/s";function O(n){var i=function Xa(n){n=Math.abs(n);var i=Math.floor(n/60),e=Math.floor(n-60*i);return`${i}:${e<10?"0":""}${e}`}(n);return n<0&&(i="-"+i),i}const lr={[c.Mobility]:[{name:"Speed increase",benefitDirection:Z.Positive,valueFunction:n=>.04*n,formatting:n=>Math.floor(100*n)+"%"},{name:"Walking Speed",benefitDirection:Z.Positive,valueFunction:n=>5*(1+.04*n),formatting:te},{name:"Strafe Speed",benefitDirection:Z.Positive,valueFunction:n=>4.25*(1+.04*n),formatting:te},{name:"Crouch Speed",benefitDirection:Z.Positive,valueFunction:n=>2.75*(1+.04*n),formatting:te},{name:"Marksman Dodge",benefitDirection:Z.Negative,valueFunction:n=>29*yt[n],formatting:n=>O(n)},{name:"Gamblers Dodge",benefitDirection:Z.Negative,valueFunction:n=>38*yt[n],formatting:n=>O(n)},{name:"Acrobat's Dodge",benefitDirection:Z.Negative,valueFunction:n=>82*yt[n],formatting:n=>O(n)}],[c.Resilience]:[{name:"Hitpoints",benefitDirection:Z.Positive,valueFunction:n=>[185,186,187,188,189,190,192,194,196,198,200][n],formatting:n=>n.toString()},{name:"PvE Damage Reduction",benefitDirection:Z.Positive,valueFunction:n=>[0,1,2,3,4,8,14,20,26,32,40][n]/100,formatting:n=>Math.floor(100*n)+"%"},{name:"Rally Barricade",benefitDirection:Z.Negative,valueFunction:n=>32*yt[n],formatting:n=>O(n)},{name:"Towering Barricade",benefitDirection:Z.Negative,valueFunction:n=>40*yt[n],formatting:n=>O(n)},{name:"Bastion Barricade",benefitDirection:Z.Negative,valueFunction:n=>82*yt[n],formatting:n=>O(n)}],[c.Recovery]:[{name:"Regeneration time",benefitDirection:Z.Negative,valueFunction:n=>[9,8.8,8.6,8.4,8.2,8,7.8,7.4,7,6.6,6][n],formatting:n=>(Math.round(100*n)/100).toFixed(1)+"s"},{name:"Rift",benefitDirection:Z.Negative,valueFunction:n=>82*yt[n],formatting:n=>O(n)}],[c.Discipline]:[{name:"Tier 1",benefitDirection:Z.Negative,valueFunction:n=>Math.round(182*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:U[s.N.Hunter][0],[s.N.Warlock]:U[s.N.Warlock][0],[s.N.Titan]:U[s.N.Titan][0]}},{name:"Tier 2",benefitDirection:Z.Negative,valueFunction:n=>Math.round(152*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:U[s.N.Hunter][1],[s.N.Warlock]:U[s.N.Warlock][1],[s.N.Titan]:U[s.N.Titan][1]}},{name:"Tier 3",benefitDirection:Z.Negative,valueFunction:n=>Math.round(121*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:U[s.N.Hunter][2],[s.N.Warlock]:U[s.N.Warlock][2],[s.N.Titan]:U[s.N.Titan][2]}},{name:"Tier 4",benefitDirection:Z.Negative,valueFunction:n=>Math.round(105*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:U[s.N.Hunter][3],[s.N.Warlock]:U[s.N.Warlock][3],[s.N.Titan]:U[s.N.Titan][3]}},{name:"Tier 5",benefitDirection:Z.Negative,valueFunction:n=>Math.round(91*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:U[s.N.Hunter][4],[s.N.Warlock]:U[s.N.Warlock][4],[s.N.Titan]:U[s.N.Titan][4]}},{name:"Tier 6",benefitDirection:Z.Negative,valueFunction:n=>Math.round(82*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:U[s.N.Hunter][5],[s.N.Warlock]:U[s.N.Warlock][5],[s.N.Titan]:U[s.N.Titan][5]}},{name:"Tier 7",benefitDirection:Z.Negative,valueFunction:n=>Math.round(73*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:U[s.N.Hunter][6],[s.N.Warlock]:U[s.N.Warlock][6],[s.N.Titan]:U[s.N.Titan][6]}},{name:"Tier 8",benefitDirection:Z.Negative,valueFunction:n=>Math.round(64*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:U[s.N.Hunter][7],[s.N.Warlock]:U[s.N.Warlock][7],[s.N.Titan]:U[s.N.Titan][7]}}],[c.Intellect]:[{name:"Tier 1",benefitDirection:Z.Negative,valueFunction:n=>Math.round(625*Dt[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:V[s.N.Hunter][0],[s.N.Warlock]:V[s.N.Warlock][0],[s.N.Titan]:V[s.N.Titan][0]}},{name:"Tier 2",benefitDirection:Z.Negative,valueFunction:n=>Math.round(556*Dt[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:V[s.N.Hunter][1],[s.N.Warlock]:V[s.N.Warlock][1],[s.N.Titan]:V[s.N.Titan][1]}},{name:"Tier 3",benefitDirection:Z.Negative,valueFunction:n=>Math.round(500*Dt[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:V[s.N.Hunter][2],[s.N.Warlock]:V[s.N.Warlock][2],[s.N.Titan]:V[s.N.Titan][2]}},{name:"Tier 4",benefitDirection:Z.Negative,valueFunction:n=>Math.round(455*Dt[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:V[s.N.Hunter][3],[s.N.Warlock]:V[s.N.Warlock][3],[s.N.Titan]:V[s.N.Titan][3]}},{name:"Tier 5",benefitDirection:Z.Negative,valueFunction:n=>Math.round(417*Dt[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:V[s.N.Hunter][4],[s.N.Warlock]:V[s.N.Warlock][4],[s.N.Titan]:V[s.N.Titan][4]}}],[c.Strength]:[{name:"Tier 1",benefitDirection:Z.Negative,valueFunction:n=>Math.round(113*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:P[s.N.Hunter][0],[s.N.Warlock]:P[s.N.Warlock][0],[s.N.Titan]:P[s.N.Titan][0]}},{name:"Tier 2",benefitDirection:Z.Negative,valueFunction:n=>Math.round(109*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:P[s.N.Hunter][1],[s.N.Warlock]:P[s.N.Warlock][1],[s.N.Titan]:P[s.N.Titan][1]}},{name:"Tier 3",benefitDirection:Z.Negative,valueFunction:n=>Math.round(106*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:P[s.N.Hunter][2],[s.N.Warlock]:P[s.N.Warlock][2],[s.N.Titan]:P[s.N.Titan][2]}},{name:"Tier 4",benefitDirection:Z.Negative,valueFunction:n=>Math.round(100*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:P[s.N.Hunter][3],[s.N.Warlock]:P[s.N.Warlock][3],[s.N.Titan]:P[s.N.Titan][3]}},{name:"Tier 5",benefitDirection:Z.Negative,valueFunction:n=>Math.round(90*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:P[s.N.Hunter][4],[s.N.Warlock]:P[s.N.Warlock][4],[s.N.Titan]:P[s.N.Titan][4]}},{name:"Tier 6",benefitDirection:Z.Negative,valueFunction:n=>Math.round(82*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:P[s.N.Hunter][5],[s.N.Warlock]:P[s.N.Warlock][5],[s.N.Titan]:P[s.N.Titan][5]}},{name:"Tier 7",benefitDirection:Z.Negative,valueFunction:n=>Math.round(45*B[n]),formatting:n=>O(n),description:{[s.N.None]:"",[s.N.Hunter]:P[s.N.Hunter][6],[s.N.Warlock]:P[s.N.Warlock][6],[s.N.Titan]:P[s.N.Titan][6]}}]};let cr=(()=>{class n{constructor(e){this.config=e,this.ArmorStatNames=Zt,this.tier=0,this.differenceTier=0,this.stat=c.Mobility,this.entries=[]}get characterClass(){return this.config.readonlyConfigurationSnapshot.characterClass}ngOnInit(){this.entries=lr[this.stat]}getPercentageDifference(e,o){return(e-o)/Math.max(1,o)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stat-cooldown-tooltip"]],inputs:{tier:"tier",differenceTier:"differenceTier",stat:"stat"},decls:13,vars:5,consts:[[1,"tooltip-container"],["colspan","3",1,"exotic-name"],[2,"min-width","50px"],["style","min-width: 50px","colspan","2",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","2",2,"min-width","50px"],[4,"ngIf"],[4,"ngVar"],[3,"good","bad",4,"ngVar"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"div",0)(2,"table")(3,"tr")(4,"td",1),t._uU(5),t.qZA()(),t.TgZ(6,"tr")(7,"th",2),t._uU(8,"Stat"),t.qZA(),t.TgZ(9,"th",2),t._uU(10),t.qZA(),t.YNc(11,$a,2,1,"th",3),t.qZA(),t.YNc(12,sr,2,1,"ng-container",4),t.qZA()()()),2&e&&(t.xp6(5),t.AsE("",o.ArmorStatNames[o.stat]," at Tier ",o.tier,""),t.xp6(5),t.hij("Tier ",o.tier,""),t.xp6(1),t.Q6J("ngIf",o.differenceTier!=o.tier),t.xp6(1),t.Q6J("ngForOf",o.entries))},dependencies:[b.sg,b.O5,St,b.JJ],styles:["[_nghost-%COMP%]{max-width:420px}.tooltip-container[_ngcontent-%COMP%]{border:1px solid gray;padding:1px 5px 4px;background:linear-gradient(#484848 0px,#2c2c2c 100%)}.exotic-name[_ngcontent-%COMP%]{color:#eedb9e}.good[_ngcontent-%COMP%]{color:#58b458}.bad[_ngcontent-%COMP%]{color:#ff6b6b}table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:7px 3px}th[_ngcontent-%COMP%]{white-space:nowrap}"]}),n})(),mr=(()=>{class n{constructor(e,o,a){this._overlay=e,this._overlayPositionBuilder=o,this._elementRef=a,this.showToolTip=!0,this.tier=0,this.stat=c.Mobility,this.differenceTier=0}ngOnInit(){if(!this.showToolTip)return;const e=this._overlayPositionBuilder.flexibleConnectedTo(this._elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:5},{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-5}]);this._overlayRef=this._overlay.create({positionStrategy:e}),this._overlayRef.addPanelClass("overlay-no-pointer-event")}show(){if(this._overlayRef&&!this._overlayRef.hasAttached()){const e=this._overlayRef.attach(new Vt.C5(cr));e.instance.tier=this.tier,e.instance.differenceTier=this.differenceTier,e.instance.stat=this.stat}}hide(){this.closeToolTip()}ngOnDestroy(){this.closeToolTip()}closeToolTip(){this._overlayRef&&this._overlayRef.detach()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_t.aV),t.Y36(_t.wJ),t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n,selectors:[["","statCooldownTooltip",""]],hostBindings:function(e,o){1&e&&t.NdJ("mouseenter",function(){return o.show()})("mouseleave",function(){return o.hide()})},inputs:{showToolTip:"showToolTip",tier:["tooltipTier","tier"],stat:["tooltipStat","stat"],differenceTier:["tooltipDifferenceTier","differenceTier"],contentTemplate:"contentTemplate"}}),n})();function dr(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-button-toggle",4),t.NdJ("click",function(){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.setValue(r))}),t.TgZ(1,"div",5),t._uU(2),t.qZA()()}if(2&n){const e=i.index,o=t.oxw();t.ekj("isFromMod",o.isAddedByConfigMods(e))("mat-button-toggle-checked",o.selectedTier>=e)("not-checked",o.selectedTier<e),t.s9C("value",e),t.Q6J("checked",o.selectedTier==e)("disabled",o.maximumAvailableTier<e),t.xp6(1),t.Q6J("tooltipTier",e)("tooltipDifferenceTier",o.selectedTier)("tooltipStat",o.stat),t.xp6(1),t.hij(" ",10*e," ")}}function ur(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"lock_open"),t.qZA())}function pr(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"lock"),t.qZA())}let gr=(()=>{class n{constructor(){this.TierRange=new Array(11),this.stat=c.Mobility,this.statsByMods=0,this.maximumAvailableTier=10,this.selectedTier=0,this.locked=!1,this.selectedTierChange=new t.vpe,this.lockedChange=new t.vpe}setValue(e){e<=this.maximumAvailableTier&&(this.selectedTier=e,this.selectedTierChange.emit(e))}isAddedByConfigMods(e){return e>0&&(this.selectedTier-e>=0&&this.selectedTier-e<this.statsByMods||this.selectedTier<this.statsByMods&&e<=this.statsByMods)}toggleLockState(){this.locked=!this.locked,this.lockedChange.emit(this.locked)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stat-tier-selection"]],inputs:{stat:"stat",statsByMods:"statsByMods",maximumAvailableTier:"maximumAvailableTier",selectedTier:"selectedTier",locked:"locked"},outputs:{selectedTierChange:"selectedTierChange",lockedChange:"lockedChange"},decls:5,vars:3,consts:[["appearance","standard","name","fontStyle"],["class","select-button",3,"checked","isFromMod","mat-button-toggle-checked","not-checked","disabled","value","click",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Locking a stat enforces this stat to have exactly this value. Use this for example to get exact T3 of Mobility on a Titan.",3,"click"],[4,"ngIf"],[1,"select-button",3,"checked","disabled","value","click"],["statCooldownTooltip","",1,"stat-button-content",3,"tooltipTier","tooltipDifferenceTier","tooltipStat"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-button-toggle-group",0),t.YNc(1,dr,3,13,"mat-button-toggle",1),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){return o.toggleLockState()}),t.YNc(3,ur,2,0,"mat-icon",3),t.YNc(4,pr,2,0,"mat-icon",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.TierRange),t.xp6(2),t.Q6J("ngIf",!o.locked),t.xp6(1),t.Q6J("ngIf",o.locked))},dependencies:[b.sg,b.O5,R.lW,L.gM,ot.Hw,ft.A9,ft.Yi,mr],styles:[".select-button[_ngcontent-%COMP%]{min-width:40px}[_nghost-%COMP%]     .mat-button-toggle-label-content{padding:0!important;width:100%}.stat-button-content[_ngcontent-%COMP%]{width:100%}.mat-button-toggle-checked.isFromMod[_ngcontent-%COMP%]{background-color:#3f64b5}.not-checked.isFromMod[_ngcontent-%COMP%]{background-color:#3f6eb526}"]}),n})();function _r(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"app-stat-tier-selection",5),t.NdJ("selectedTierChange",function(a){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.setSelectedTier(l.value,a))})("lockedChange",function(a){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.setLockState(l.value,a))}),t.qZA()()()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("stat",e.value)("statsByMods",o.statsByMods[e.value])("maximumAvailableTier",o.maximumPossibleTiers[e.value])("selectedTier",o.minimumStatTiers[e.value].value)("locked",o.minimumStatTiers[e.value].fixed)}}function fr(n,i){1&n&&(t.TgZ(0,"div",6),t._uU(1," Known issue: Zero-Waste lets you select higher stats than you can achieve. "),t._UZ(2,"br"),t._uU(3," This will be fixed in a future update.\n"),t.qZA())}function ye(n){let i=0;for(let e of n)i+=Math.pow(10,6-e);return i}let hr=(()=>{class n{constructor(e,o){this.config=e,this.inventory=o,this.minimumStatTiers=le(1),this.maximumPossibleTiers=[10,10,10,10,10,10],this.statsByMods=[0,0,0,0,0,0],this._statCombo4x100=[],this._statCombo3x100=[],this.config_zero_waste=!1,this.ngUnsubscribe=new it.xQ,this.stats=Object.keys(c).filter(a=>!isNaN(Number(a))).map(a=>({name:c[a],value:+a}))}ngOnInit(){this.config.configuration.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(e=>{const o=[0,0,0,0,0,0];for(let a of e.enabledMods)for(let r of gt[a].bonus)o[r.stat]+=r.value/10;this.statsByMods=o,this.minimumStatTiers=e.minimumStatTiers,this.config_zero_waste=e.onlyShowResultsWithNoWastedStats}),this.inventory.armorResults.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(e=>{const o=e.maximumPossibleTiers||[10,10,10,10,10,10];console.log("d.maximumPossibleTiers",o),o.filter(a=>0==a).length<6&&(this.maximumPossibleTiers=o),this._statCombo3x100=(e.statCombo3x100||[]).sort((a,r)=>ye(r)-ye(a)),this._statCombo4x100=e.statCombo4x100||[]})}setSelectedTier(e,o){this.config.modifyConfiguration(a=>{a.minimumStatTiers[e].value=o})}clearStatSelection(){this.config.modifyConfiguration(e=>{for(let o=0;o<6;o++)e.minimumStatTiers[o]={fixed:!1,value:0}})}useStatPreset(e){0!=e.filter(o=>10!=this.config.readonlyConfigurationSnapshot.minimumStatTiers[o].value).length&&this.config.modifyConfiguration(o=>{for(let a of e)o.minimumStatTiers[a].value=10})}setLockState(e,o){this.config.modifyConfiguration(a=>{a.minimumStatTiers[e].fixed=o})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j),t.Y36(nt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-desired-stat-selection"]],decls:16,vars:2,consts:[[4,"ngFor","ngForOf"],["id","tierSelectButtonContainer"],[1,"tierSelectButton"],["mat-stroked-button","","color","warn","id","clearStatButton",3,"click"],["class","warn",4,"ngIf"],[3,"stat","statsByMods","maximumAvailableTier","selectedTier","locked","selectedTierChange","lockedChange"],[1,"warn"]],template:function(e,o){1&e&&(t.TgZ(0,"table"),t.YNc(1,_r,5,6,"tr",0),t.qZA(),t.TgZ(2,"span",1)(3,"span",2)(4,"button",3),t.NdJ("click",function(){return o.clearStatSelection()}),t._uU(5,"Clear"),t.qZA()(),t._UZ(6,"br"),t._uU(7," Disabled features for now (due to limited development time): "),t.TgZ(8,"ul")(9,"li"),t._uU(10,"3x100 and 4x100 buttons"),t.qZA(),t.TgZ(11,"li"),t._uU(12,"Mod cost limitation"),t.qZA(),t.TgZ(13,"li"),t._uU(14,"Zero-Waste"),t.qZA()()(),t.YNc(15,fr,4,0,"div",4)),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.stats),t.xp6(14),t.Q6J("ngIf",o.config_zero_waste))},dependencies:[b.sg,b.O5,R.lW,gr],styles:["#tierSelectButtonContainer[_ngcontent-%COMP%] > .tierSelectButton[_ngcontent-%COMP%]:not(:last-child){margin-right:5px}.dialogStatIcon[_ngcontent-%COMP%]{height:35px}.warn[_ngcontent-%COMP%]{background-color:#8b0000;padding-left:15px;padding-right:15px}"]}),n})();var ee=p(3217);function xr(n,i){if(1&n&&(t.TgZ(0,"div")(1,"div",22),t._UZ(2,"img",23)(3,"img",24),t.O4$(),t.TgZ(4,"svg",25)(5,"text",26),t._uU(6,"3"),t.qZA()(),t.TgZ(7,"svg",27)(8,"text",26),t._uU(9,"1"),t.qZA()(),t.kcU(),t._UZ(10,"div",28),t.qZA(),t.TgZ(11,"div",22),t._UZ(12,"img",29)(13,"img",30),t.O4$(),t.TgZ(14,"svg",25)(15,"text",26),t._uU(16,"4"),t.qZA()(),t.TgZ(17,"svg",27)(18,"text",26),t._uU(19,"2"),t.qZA()(),t.kcU(),t._UZ(20,"div",28),t.qZA(),t.TgZ(21,"div",22),t._UZ(22,"img",31)(23,"img",32),t.O4$(),t.TgZ(24,"svg",25)(25,"text",26),t._uU(26,"3"),t.qZA()(),t.TgZ(27,"svg",27)(28,"text",26),t._uU(29,"1"),t.qZA()(),t.kcU(),t._UZ(30,"div",28),t.qZA(),t.TgZ(31,"div",22),t._UZ(32,"img",33)(33,"img",34),t.O4$(),t.TgZ(34,"svg",25)(35,"text",26),t._uU(36,"3"),t.qZA()(),t.TgZ(37,"svg",27)(38,"text",26),t._uU(39,"1"),t.qZA()(),t.kcU(),t._UZ(40,"div",28),t.qZA(),t.TgZ(41,"div",22),t._UZ(42,"img",35)(43,"img",36),t.O4$(),t.TgZ(44,"svg",25)(45,"text",26),t._uU(46,"4"),t.qZA()(),t.TgZ(47,"svg",27)(48,"text",26),t._uU(49,"2"),t.qZA()(),t.kcU(),t._UZ(50,"div",28),t.qZA(),t.TgZ(51,"div",22),t._UZ(52,"img",37)(53,"img",38),t.O4$(),t.TgZ(54,"svg",25)(55,"text",26),t._uU(56,"4"),t.qZA()(),t.TgZ(57,"svg",27)(58,"text",26),t._uU(59,"2"),t.qZA()(),t.kcU(),t._UZ(60,"div",28),t.qZA()()),2&n){const e=i.ngVar;t.xp6(1),t.ekj("major",e>=3)("minor",e>=1&&e<3),t.xp6(10),t.ekj("major",e>=4)("minor",e>=2&&e<4),t.xp6(10),t.ekj("major",e>=3)("minor",e>=1&&e<3),t.xp6(10),t.ekj("major",e>=3)("minor",e>=1&&e<3),t.xp6(10),t.ekj("major",e>=4)("minor",e>=2&&e<4),t.xp6(10),t.ekj("major",e>=4)("minor",e>=2&&e<4)}}function Tr(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-button-toggle",39),t.NdJ("click",function(){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.setValue(r))}),t._uU(1),t.qZA()}if(2&n){const e=i.index,o=t.oxw();t.Gre("select-button ",o.selection>=e?"mat-button-toggle-checked":"",""),t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function yr(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"lock_open"),t.qZA())}function br(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"lock"),t.qZA())}function Cr(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",40),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.setArmorPerk(r))}),t._UZ(2,"app-armor-perk-icon",41),t.TgZ(3,"span",42),t._uU(4),t.qZA()(),t.BQk()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.ekj("selected-menu",e==o.armorPerk),t.xp6(1),t.Q6J("perk",e),t.xp6(2),t.Oqu(o.ArmorPerkOrSlotNames[e])}}function vr(n,i){if(1&n&&t._UZ(0,"img",43,44),2&n){const e=t.oxw();t.MGl("matTooltip","If you enable the lock on the settings on the right they will be forced to exist on a ",e.slotName,".")}}function Ar(n,i){if(1&n&&t._UZ(0,"img",45,44),2&n){const e=t.oxw();t.MGl("matTooltip","If you enable the lock on the settings on the right they will be forced to exist on a ",e.slotName,".")}}function Zr(n,i){if(1&n&&t._UZ(0,"img",46,44),2&n){const e=t.oxw();t.MGl("matTooltip","If you enable the lock on the settings on the right they will be forced to exist on a ",e.slotName,".")}}function wr(n,i){if(1&n&&t._UZ(0,"img",47,44),2&n){const e=t.oxw();t.MGl("matTooltip","If you enable the lock on the settings on the right they will be forced to exist on a ",e.slotName,".")}}function Sr(n,i){if(1&n&&t._UZ(0,"img",48,44),2&n){const e=t.oxw();t.MGl("matTooltip","If you enable the lock on the settings on the right they will be forced to exist on a ",e.slotName,".")}}const Ir=function(n,i,e,o,a,r,l,d,u,x,h,A,I){return[n,i,e,o,a,r,l,d,u,x,h,A,I]};let kr=(()=>{class n{constructor(e,o,a){this.config=e,this.inventory=o,this.db=a,this.featureDisabled=!M_featureFlags_enableModslotLimitation,this.ArmorSlot=C.y,this.ArmorPerkOrSlotNames=oe,this.ArmorPerkOrSlot=_,this.ModRange=new Array(6),this.selection=5,this.slot=C.y.ArmorSlotHelmet,this.possible=new t.vpe,this.isPossible=!0,this.configSelectedClass=0,this.armorPerk=_.None,this.armorPerkLock=!1,this.maximumModSlots=5,this.hoveredSlot=-1,this.disabled=!1,this.ngUnsubscribe=new it.xQ}runPossibilityCheck(){var e=this;return(0,T.Z)(function*(){if(e.armorPerkLock&&e.armorPerk!=_.None){var a=yield e.db.inventoryArmor.where("clazz").equals(e.configSelectedClass).and(r=>r.slot==e.slot).and(r=>r.perk==e.armorPerk).count();e.isPossible=a>0}else e.isPossible=!0;e.possible.next(e.isPossible)})()}get slotName(){switch(this.slot){case C.y.ArmorSlotHelmet:return"Helmet";case C.y.ArmorSlotGauntlet:return"Gauntlet";case C.y.ArmorSlotChest:return"Chest";case C.y.ArmorSlotLegs:return"Leg";case C.y.ArmorSlotClass:return"Class Item";default:return""}}ngOnInit(){var e=this;this.config.configuration.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(function(){var o=(0,T.Z)(function*(a){var r=e.configSelectedClass!=a.characterClass||e.selection!=a.maximumModSlots[e.slot].value||e.armorPerk!=a.armorPerks[e.slot].value||e.armorPerkLock!=a.armorPerks[e.slot].fixed||e.maximumModSlots!=a.maximumModSlots[e.slot].value;e.configSelectedClass=a.characterClass,e.selection=a.maximumModSlots[e.slot].value,e.armorPerk=a.armorPerks[e.slot].value,e.armorPerkLock=a.armorPerks[e.slot].fixed,e.maximumModSlots=a.maximumModSlots[e.slot].value,e.disabled=(yield e.inventory.getExoticsForClass(a.characterClass)).filter(l=>a.selectedExotics.indexOf(l.item.hash)>-1).map(l=>l.item.slot).indexOf(e.slot)>-1,r&&(yield e.runPossibilityCheck())});return function(a){return o.apply(this,arguments)}}())}toggleArmorPerkLock(){this.config.modifyConfiguration(e=>{e.armorPerks[this.slot].fixed=!e.armorPerks[this.slot].fixed})}setArmorPerk(e){this.armorPerk!=e&&this.config.modifyConfiguration(o=>{o.armorPerks[this.slot].value=e})}setValue(e){this.featureDisabled||this.maximumModSlots!=e&&(this.maximumModSlots=e,this.config.modifyConfiguration(o=>o.maximumModSlots[this.slot].value=e))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j),t.Y36(nt),t.Y36(ct))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-slot-limitation-selection"]],inputs:{slot:"slot"},outputs:{possible:"possible"},decls:35,vars:72,consts:[[1,"container"],[1,"energy"],[1,"energy-container",3,"mouseout"],[1,"energy-bar","blocked",3,"click","mouseover"],[1,"energy-bar",3,"click","mouseover"],[4,"ngVar"],["appearance","standard","name","fontStyle",2,"display","none"],[3,"value","class","click",4,"ngFor","ngForOf"],[1,"selector-slots"],["value","bold",3,"matMenuTriggerFor"],[3,"perk"],["disabled","",3,"disabled","matTooltip","click"],[4,"ngIf"],[1,"modslot-select-scroll-menu"],["dropdownArmorModslot","matMenu"],[4,"ngFor","ngForOf"],[1,"slot-icon-container"],["class","slot-icon","src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M24.77 7.03c-8.15.38-14.42 7.41-14.42 15.57v16.06c0 .23.13.44.34.53l10.33 4.68c.78.35 1.66-.22 1.66-1.07V31.9c0-.39-.19-.75-.52-.97l-5.39-3.64c-.87-.52-1.43-1.5-1.34-2.61.13-1.46 1.46-2.52 2.93-2.52h4.36c.65 0 1.17.53 1.17 1.17v6.71s0 .61 1.61.61 1.61-.61 1.61-.61v-6.71c0-.65.52-1.17 1.17-1.17h4.36c1.47 0 2.8 1.06 2.93 2.52.1 1.11-.47 2.09-1.34 2.61l-5.39 3.64c-.32.22-.52.58-.52.97v10.91c0 .85.88 1.42 1.66 1.07l10.33-4.68c.21-.1.34-.3.34-.53v-16.5c.01-8.61-7.18-15.55-15.88-15.14z'/%3e%3c/svg%3e",3,"matTooltip",4,"ngIf"],["class","slot-icon","src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M40.1 30.03c.39-.47.59-1.11.42-1.8-.18-.76-.81-1.39-1.58-1.55-.81-.17-1.54.14-2.01.68 0 0-.03.04-.05.07l-.12.15c-.47.61-1.95 2.37-3.29 2.45-1.62.1 2.51-16.14 2.51-16.14h-.01c.04-.15.07-.31.07-.48 0-.98-.79-1.77-1.77-1.77-.81 0-1.49.55-1.69 1.29h-.01s-.01.03-.01.05l-.03.15c-.24 1.21-1.68 8.2-2.81 8.89-1.24.75-1.22-13.23-1.22-13.23 0-.98-.79-1.77-1.77-1.77s-1.77.79-1.77 1.77c0 0-.35 12.85-1.73 12.73-1.37-.12-2.47-10.67-2.47-10.67 0-.98-.79-1.77-1.77-1.77s-1.77.79-1.77 1.77c0 .15.02.28.06.42.27 2.06 1.36 11.12-.06 11.12-1.6 0-3.68-6.35-3.68-6.35a1.62 1.62 0 0 0-3.14.56c0 .09.01.17.03.25l-.03.01s.02.07.07.19c.02.09.05.17.09.25.99 2.71 6.28 17.46 7.26 26.23.03.25.24.44.49.44H30.5a.5.5 0 0 0 .5-.45c.1-1.04.52-3.68 2.09-5.54 1.8-2.14 6.06-6.89 6.86-7.79.02-.02.03-.04.05-.06.07-.06.11-.1.1-.1z'/%3e%3c/svg%3e",3,"matTooltip",4,"ngIf"],["class","slot-icon","src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M42.49 13.55c-1.06-1.51-4.05-5.05-9.52-6.49a.635.635 0 0 0-.78.5c-.35 2.04-1.78 8.08-6.69 8.08s-6.34-6.04-6.69-8.08a.635.635 0 0 0-.78-.5c-5.47 1.44-8.46 4.98-9.52 6.49-.24.34-.09.8.3.94 2.01.7 7.34 2.94 7.34 7.01 0 4.24-4.47 6.89-5.87 7.61-.25.13-.38.4-.33.67 1.44 7.62 7.55 13.09 8.67 14.04.11.1.25.15.4.15h12.94c.15 0 .29-.05.4-.15 1.12-.95 7.23-6.42 8.67-14.04a.624.624 0 0 0-.33-.67c-1.4-.72-5.87-3.37-5.87-7.61 0-4.08 5.33-6.32 7.34-7.01.41-.14.56-.61.32-.94z'/%3e%3c/svg%3e",3,"matTooltip",4,"ngIf"],["class","slot-icon","src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M13 7.6h13.96c1.73 0 2.99 1.64 2.54 3.32l-5.44 20.46c-.07.28.03.57.28.72.99.62 4.64 2.57 8.15 5.78.12.11 2.92-.03 3.09-.01 2.31.2 3.97-.08 5.05 4.7.09.42-.21.82-.64.82H11.82c-.34 0-.63-.26-.66-.61-.15-1.82-.4-7.23 1.74-9.32a.62.62 0 0 0 .2-.6c-.39-1.74-2.09-9.83-2.74-22.48-.07-1.5 1.12-2.78 2.64-2.78z'/%3e%3c/svg%3e",3,"matTooltip",4,"ngIf"],["class","slot-icon","src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M43.12 7.12c-4.13 2.33-17.62 1.9-17.62 1.9s-13.49.43-17.62-1.9c-.37-.21-.85-.03-.94.39-.36 1.49-.87 4.42.09 5.86.09.13.22.21.38.25 1.23.3 7.36 1.65 18.09 1.65s16.86-1.35 18.09-1.65c.15-.04.29-.12.38-.25.96-1.44.45-4.37.1-5.86-.1-.42-.58-.6-.95-.39zM9.27 28.34s0 2.34 2.27 2.34 2.27-2.34 2.27-2.34V15.73c-1.93-.22-3.45-.45-4.55-.65v13.26zM16.3 34.8s0 2.34 2.27 2.34 2.27-2.34 2.27-2.34V16.24c-1.66-.06-3.18-.16-4.55-.27V34.8zM37.18 28.34s0 2.34 2.27 2.34 2.27-2.34 2.27-2.34V15.08c-1.09.2-2.61.44-4.55.65v12.61zM30.15 34.8s0 2.34 2.27 2.34 2.27-2.34 2.27-2.34V15.97c-1.36.11-2.88.21-4.55.27V34.8zM23.23 16.31v25.31s0 2.34 2.27 2.34 2.27-2.34 2.27-2.34V16.31c-.74.01-1.49.02-2.27.02-.78.01-1.54 0-2.27-.02z'/%3e%3c/svg%3e",3,"matTooltip",4,"ngIf"],[1,"mod-info"],["src","https://www.bungie.net/common/destiny2_content/icons/c664ddd10920daab49cc3808dbb6a1e6.png",1,"mod-icon","mod-major"],["src","https://www.bungie.net/common/destiny2_content/icons/287901ef741855655856f6e8f5776f03.png",1,"mod-icon","mod-minor"],["viewBox","0 0 100 100",1,"mod-number","mod-major"],["font-size","25px","text-anchor","end","x","87","y","30"],["viewBox","0 0 100 100",1,"mod-number","mod-minor"],[1,"overlay"],["src","https://bungie.net/common/destiny2_content/icons/195f4f173adb52b336b4ecd67101004d.png",1,"mod-icon","mod-major"],["src","https://bungie.net/common/destiny2_content/icons/53c28186a4b97285a01aace5748e4de7.png",1,"mod-icon","mod-minor"],["src","https://bungie.net/common/destiny2_content/icons/9d54e2149f945b2c298020da443b70fa.png",1,"mod-icon","mod-major"],["src","https://bungie.net/common/destiny2_content/icons/8fa2d4e4c82586668210e12c5115575a.png",1,"mod-icon","mod-minor"],["src","https://bungie.net/common/destiny2_content/icons/07f2361532c79e773909220e5884ab07.png",1,"mod-icon","mod-major"],["src","https://bungie.net/common/destiny2_content/icons/ec0b298ec4dac0023604e467a58c3868.png",1,"mod-icon","mod-minor"],["src","https://bungie.net/common/destiny2_content/icons/18054408a5fc068f2384c6c31a183423.png",1,"mod-icon","mod-major"],["src","https://bungie.net/common/destiny2_content/icons/f39b0c97678148a864d6f6fbbe85524d.png",1,"mod-icon","mod-minor"],["src","https://bungie.net/common/destiny2_content/icons/9fd56c3b42923c9df23edf585b0107bf.png",1,"mod-icon","mod-major"],["src","https://bungie.net/common/destiny2_content/icons/d8da60458e3355ddf7123be5ffe3dc3c.png",1,"mod-icon","mod-minor"],[3,"value","click"],["mat-menu-item","",3,"click"],[1,"menuArmorIcon",3,"perk"],[1,"menuArmorText"],["src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M24.77 7.03c-8.15.38-14.42 7.41-14.42 15.57v16.06c0 .23.13.44.34.53l10.33 4.68c.78.35 1.66-.22 1.66-1.07V31.9c0-.39-.19-.75-.52-.97l-5.39-3.64c-.87-.52-1.43-1.5-1.34-2.61.13-1.46 1.46-2.52 2.93-2.52h4.36c.65 0 1.17.53 1.17 1.17v6.71s0 .61 1.61.61 1.61-.61 1.61-.61v-6.71c0-.65.52-1.17 1.17-1.17h4.36c1.47 0 2.8 1.06 2.93 2.52.1 1.11-.47 2.09-1.34 2.61l-5.39 3.64c-.32.22-.52.58-.52.97v10.91c0 .85.88 1.42 1.66 1.07l10.33-4.68c.21-.1.34-.3.34-.53v-16.5c.01-8.61-7.18-15.55-15.88-15.14z'/%3e%3c/svg%3e",1,"slot-icon",3,"matTooltip"],["tooltip","matTooltip"],["src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M40.1 30.03c.39-.47.59-1.11.42-1.8-.18-.76-.81-1.39-1.58-1.55-.81-.17-1.54.14-2.01.68 0 0-.03.04-.05.07l-.12.15c-.47.61-1.95 2.37-3.29 2.45-1.62.1 2.51-16.14 2.51-16.14h-.01c.04-.15.07-.31.07-.48 0-.98-.79-1.77-1.77-1.77-.81 0-1.49.55-1.69 1.29h-.01s-.01.03-.01.05l-.03.15c-.24 1.21-1.68 8.2-2.81 8.89-1.24.75-1.22-13.23-1.22-13.23 0-.98-.79-1.77-1.77-1.77s-1.77.79-1.77 1.77c0 0-.35 12.85-1.73 12.73-1.37-.12-2.47-10.67-2.47-10.67 0-.98-.79-1.77-1.77-1.77s-1.77.79-1.77 1.77c0 .15.02.28.06.42.27 2.06 1.36 11.12-.06 11.12-1.6 0-3.68-6.35-3.68-6.35a1.62 1.62 0 0 0-3.14.56c0 .09.01.17.03.25l-.03.01s.02.07.07.19c.02.09.05.17.09.25.99 2.71 6.28 17.46 7.26 26.23.03.25.24.44.49.44H30.5a.5.5 0 0 0 .5-.45c.1-1.04.52-3.68 2.09-5.54 1.8-2.14 6.06-6.89 6.86-7.79.02-.02.03-.04.05-.06.07-.06.11-.1.1-.1z'/%3e%3c/svg%3e",1,"slot-icon",3,"matTooltip"],["src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M42.49 13.55c-1.06-1.51-4.05-5.05-9.52-6.49a.635.635 0 0 0-.78.5c-.35 2.04-1.78 8.08-6.69 8.08s-6.34-6.04-6.69-8.08a.635.635 0 0 0-.78-.5c-5.47 1.44-8.46 4.98-9.52 6.49-.24.34-.09.8.3.94 2.01.7 7.34 2.94 7.34 7.01 0 4.24-4.47 6.89-5.87 7.61-.25.13-.38.4-.33.67 1.44 7.62 7.55 13.09 8.67 14.04.11.1.25.15.4.15h12.94c.15 0 .29-.05.4-.15 1.12-.95 7.23-6.42 8.67-14.04a.624.624 0 0 0-.33-.67c-1.4-.72-5.87-3.37-5.87-7.61 0-4.08 5.33-6.32 7.34-7.01.41-.14.56-.61.32-.94z'/%3e%3c/svg%3e",1,"slot-icon",3,"matTooltip"],["src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M13 7.6h13.96c1.73 0 2.99 1.64 2.54 3.32l-5.44 20.46c-.07.28.03.57.28.72.99.62 4.64 2.57 8.15 5.78.12.11 2.92-.03 3.09-.01 2.31.2 3.97-.08 5.05 4.7.09.42-.21.82-.64.82H11.82c-.34 0-.63-.26-.66-.61-.15-1.82-.4-7.23 1.74-9.32a.62.62 0 0 0 .2-.6c-.39-1.74-2.09-9.83-2.74-22.48-.07-1.5 1.12-2.78 2.64-2.78z'/%3e%3c/svg%3e",1,"slot-icon",3,"matTooltip"],["src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M43.12 7.12c-4.13 2.33-17.62 1.9-17.62 1.9s-13.49.43-17.62-1.9c-.37-.21-.85-.03-.94.39-.36 1.49-.87 4.42.09 5.86.09.13.22.21.38.25 1.23.3 7.36 1.65 18.09 1.65s16.86-1.35 18.09-1.65c.15-.04.29-.12.38-.25.96-1.44.45-4.37.1-5.86-.1-.42-.58-.6-.95-.39zM9.27 28.34s0 2.34 2.27 2.34 2.27-2.34 2.27-2.34V15.73c-1.93-.22-3.45-.45-4.55-.65v13.26zM16.3 34.8s0 2.34 2.27 2.34 2.27-2.34 2.27-2.34V16.24c-1.66-.06-3.18-.16-4.55-.27V34.8zM37.18 28.34s0 2.34 2.27 2.34 2.27-2.34 2.27-2.34V15.08c-1.09.2-2.61.44-4.55.65v12.61zM30.15 34.8s0 2.34 2.27 2.34 2.27-2.34 2.27-2.34V15.97c-1.36.11-2.88.21-4.55.27V34.8zM23.23 16.31v25.31s0 2.34 2.27 2.34 2.27-2.34 2.27-2.34V16.31c-.74.01-1.49.02-2.27.02-.78.01-1.54 0-2.27-.02z'/%3e%3c/svg%3e",1,"slot-icon",3,"matTooltip"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.NdJ("mouseout",function(){return o.hoveredSlot=-1}),t.TgZ(3,"div",3),t.NdJ("click",function(){return o.setValue(5)})("mouseover",function(){return o.hoveredSlot=0}),t.qZA(),t.TgZ(4,"div",3),t.NdJ("click",function(){return o.setValue(5)})("mouseover",function(){return o.hoveredSlot=0}),t.qZA(),t.TgZ(5,"div",3),t.NdJ("click",function(){return o.setValue(5)})("mouseover",function(){return o.hoveredSlot=0}),t.qZA(),t.TgZ(6,"div",3),t.NdJ("click",function(){return o.setValue(5)})("mouseover",function(){return o.hoveredSlot=0}),t.qZA(),t.TgZ(7,"div",3),t.NdJ("click",function(){return o.setValue(5)})("mouseover",function(){return o.hoveredSlot=0}),t.qZA(),t.TgZ(8,"div",4),t.NdJ("click",function(){return o.setValue(4)})("mouseover",function(){return o.hoveredSlot=1}),t.qZA(),t.TgZ(9,"div",4),t.NdJ("click",function(){return o.setValue(3)})("mouseover",function(){return o.hoveredSlot=2}),t.qZA(),t.TgZ(10,"div",4),t.NdJ("click",function(){return o.setValue(2)})("mouseover",function(){return o.hoveredSlot=3}),t.qZA(),t.TgZ(11,"div",4),t.NdJ("click",function(){return o.setValue(1)})("mouseover",function(){return o.hoveredSlot=4}),t.qZA(),t.TgZ(12,"div",4),t.NdJ("click",function(){return o.setValue(0)})("mouseover",function(){return o.hoveredSlot=5}),t.qZA()(),t._UZ(13,"br"),t.YNc(14,xr,61,24,"div",5),t.qZA(),t.TgZ(15,"mat-button-toggle-group",6),t.YNc(16,Tr,2,5,"mat-button-toggle",7),t.qZA(),t.TgZ(17,"div",8)(18,"mat-button-toggle-group")(19,"mat-button-toggle",9),t._UZ(20,"app-armor-perk-icon",10),t.TgZ(21,"mat-icon"),t._uU(22,"arrow_drop_down"),t.qZA()(),t.TgZ(23,"mat-button-toggle",11),t.NdJ("click",function(r){return o.toggleArmorPerkLock(),r.stopPropagation()}),t.YNc(24,yr,2,0,"mat-icon",12),t.YNc(25,br,2,0,"mat-icon",12),t.qZA()(),t.TgZ(26,"mat-menu",13,14),t.YNc(28,Cr,5,4,"ng-container",15),t.qZA()(),t.TgZ(29,"span",16),t.YNc(30,vr,2,1,"img",17),t.YNc(31,Ar,2,1,"img",18),t.YNc(32,Zr,2,1,"img",19),t.YNc(33,wr,2,1,"img",20),t.YNc(34,Sr,2,1,"img",21),t.qZA()()),2&e){const a=t.MAs(27);t.ekj("disabled",o.disabled),t.xp6(8),t.ekj("active",5-o.maximumModSlots>=1)("hovered-higher",o.hoveredSlot>-1&&o.hoveredSlot<1)("hovered",o.hoveredSlot>=1)("blocked",o.featureDisabled),t.xp6(1),t.ekj("active",5-o.maximumModSlots>=2)("hovered-higher",o.hoveredSlot>-1&&o.hoveredSlot<2)("hovered",o.hoveredSlot>=2)("blocked",o.featureDisabled),t.xp6(1),t.ekj("active",5-o.maximumModSlots>=3)("hovered-higher",o.hoveredSlot>-1&&o.hoveredSlot<3)("hovered",o.hoveredSlot>=3)("blocked",o.featureDisabled),t.xp6(1),t.ekj("active",5-o.maximumModSlots>=4)("hovered-higher",o.hoveredSlot>-1&&o.hoveredSlot<4)("hovered",o.hoveredSlot>=4)("blocked",o.featureDisabled),t.xp6(1),t.ekj("active",5-o.maximumModSlots==5)("hovered-higher",o.hoveredSlot>-1&&o.hoveredSlot<5)("hovered",5==o.hoveredSlot)("blocked",o.featureDisabled),t.xp6(2),t.Q6J("ngVar",o.hoveredSlot>-1?5-o.hoveredSlot:o.maximumModSlots),t.xp6(2),t.Q6J("ngForOf",o.ModRange),t.xp6(2),t.ekj("impossible",!o.isPossible),t.xp6(1),t.Q6J("matMenuTriggerFor",a),t.xp6(1),t.Q6J("perk",o.armorPerk),t.xp6(3),t.MGl("matTooltip","Force the selected perk or slot to be on a ",o.slotName,"."),t.Q6J("disabled",o.disabled),t.xp6(1),t.Q6J("ngIf",!o.armorPerkLock),t.xp6(1),t.Q6J("ngIf",o.armorPerkLock),t.xp6(3),t.Q6J("ngForOf",t.rFY(58,Ir,[o.ArmorPerkOrSlot.None,o.ArmorPerkOrSlot.SlotKingsFall,o.ArmorPerkOrSlot.SlotVowOfTheDisciple,o.ArmorPerkOrSlot.SlotVaultOfGlass,o.ArmorPerkOrSlot.SlotDeepStoneCrypt,o.ArmorPerkOrSlot.SlotGardenOfSalvation,o.ArmorPerkOrSlot.SlotLastWish,o.ArmorPerkOrSlot.SlotNightmare,o.ArmorPerkOrSlot.SlotArtifice,o.ArmorPerkOrSlot.PerkIronBanner,o.ArmorPerkOrSlot.PerkUniformedOfficer,o.ArmorPerkOrSlot.PerkPlunderersTrappings,o.ArmorPerkOrSlot.SeraphSensorArray])),t.xp6(2),t.Q6J("ngIf",o.slot==o.ArmorSlot.ArmorSlotHelmet),t.xp6(1),t.Q6J("ngIf",o.slot==o.ArmorSlot.ArmorSlotGauntlet),t.xp6(1),t.Q6J("ngIf",o.slot==o.ArmorSlot.ArmorSlotChest),t.xp6(1),t.Q6J("ngIf",o.slot==o.ArmorSlot.ArmorSlotLegs),t.xp6(1),t.Q6J("ngIf",o.slot==o.ArmorSlot.ArmorSlotClass)}},dependencies:[b.sg,b.O5,L.gM,ot.Hw,ee.VK,ee.OP,ee.p6,ft.A9,ft.Yi,St,$t],styles:[".slot-icon-container[_ngcontent-%COMP%]{float:right;position:relative}.slot-icon-container[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{height:30px;position:absolute;left:-30px;filter:invert(1) drop-shadow(1px 1px 3px rgba(0,0,0,.25))!important}.container[_ngcontent-%COMP%]{height:60px}.select-button[_ngcontent-%COMP%]{min-width:40px}.selector-element[_ngcontent-%COMP%]{position:relative;float:right;width:90px;height:70px;top:-21px}.selector-element[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{position:absolute;bottom:2px;left:60px}.selector-element[_ngcontent-%COMP%]   .element-list[_ngcontent-%COMP%]{float:left;width:70px;padding-left:5px}.selector-element[_ngcontent-%COMP%]   .element-list[_ngcontent-%COMP%]   .element-icon[_ngcontent-%COMP%]{border:rgba(0,0,0,0) solid 2px;height:26px;width:26px;margin-right:1px;margin-bottom:1px;margin-top:1px;cursor:pointer;filter:grayscale(.4)}.selector-element[_ngcontent-%COMP%]   .element-list[_ngcontent-%COMP%]   .element-icon[_ngcontent-%COMP%]:hover{filter:grayscale(.2)}.selector-element[_ngcontent-%COMP%]   .element-list[_ngcontent-%COMP%]   .element-icon.selected[_ngcontent-%COMP%]{filter:grayscale(0)}[_nghost-%COMP%]     .selector-slots .mat-button-toggle{background-color:inherit}.modslot-selection[_ngcontent-%COMP%]{width:180px}.selector-slots[_ngcontent-%COMP%]{position:relative;float:right;top:-10px}.selector-slots[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{position:absolute;bottom:2px;left:140px}.selector-slots[_ngcontent-%COMP%]   .element-list[_ngcontent-%COMP%]{float:left;height:70px;width:175px;padding-left:5px}.selector-slots[_ngcontent-%COMP%]   .element-list[_ngcontent-%COMP%]   .element-icon[_ngcontent-%COMP%]{height:30px;width:30px;border:rgba(0,0,0,0) solid 2px;margin-right:1px;margin-top:-2px;cursor:pointer}.selector-slots[_ngcontent-%COMP%]   .element-list[_ngcontent-%COMP%]   .element-icon.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default;border:rgba(0,0,0,0) solid 2px!important}.impossible[_ngcontent-%COMP%]{background-color:#ff00004d;cursor:help}.left_line[_ngcontent-%COMP%]{pointer-events:none;height:15px;width:100%;border-left:1px solid white;border-bottom:1px solid white;position:absolute;bottom:0px;left:0}.overlay-icon-container[_ngcontent-%COMP%]{position:relative}.overlay-icon-container[_ngcontent-%COMP%]   .overlay-icon[_ngcontent-%COMP%]{width:20px;position:absolute;left:7px;bottom:11px;pointer-events:none}.element-icon[_ngcontent-%COMP%]:hover{border:cornflowerblue solid 2px!important}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]:hover{background-color:#89b2ff3d;border:#0059ff solid 2px!important}.energy-container[_ngcontent-%COMP%]   .energy-bar[_ngcontent-%COMP%]{float:left;margin-right:3px;width:20px;height:10px;border:white solid 2px;cursor:pointer}.energy-container[_ngcontent-%COMP%]   .energy-bar.none[_ngcontent-%COMP%]{border:indianred solid 2px}.energy-container[_ngcontent-%COMP%]   .energy-bar[_ngcontent-%COMP%]:hover, .energy-container[_ngcontent-%COMP%]   .hovered[_ngcontent-%COMP%]{background-color:#6e6e6e}.energy-container[_ngcontent-%COMP%]   .hovered-higher[_ngcontent-%COMP%]{background-color:#0000!important}.energy-container[_ngcontent-%COMP%]   .energy-bar.active[_ngcontent-%COMP%]{background-color:#fff}.energy-container[_ngcontent-%COMP%]   .energy-bar.blocked[_ngcontent-%COMP%]{border:#606060 solid 2px;background-color:#6e6e6e}.mod-info[_ngcontent-%COMP%]{position:relative;float:left;height:40px;width:40px;margin-right:5px}.mod-info[_ngcontent-%COMP%]   .mod-number[_ngcontent-%COMP%]{position:absolute;top:1px;bottom:1px;right:1px;left:1px;pointer-events:none;fill:#e0e0e0}.mod-info[_ngcontent-%COMP%]   .mod-minor[_ngcontent-%COMP%]{display:none}.mod-info[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0px;width:100%;height:100%;background:linear-gradient(to top left,rgba(0,0,0,0) 0%,rgba(0,0,0,0) calc(50% - .8px),rgb(0,0,0) 50%,rgba(0,0,0,0) calc(50% + .8px),rgba(0,0,0,0) 100%),linear-gradient(to top right,rgba(0,0,0,0) 0%,rgba(0,0,0,0) calc(50% - .8px),rgb(0,0,0) 50%,rgba(0,0,0,0) calc(50% + .8px),rgba(0,0,0,0) 100%)}.mod-info[_ngcontent-%COMP%]   .mod-icon[_ngcontent-%COMP%]{width:40px;height:40px}.mod-info[_ngcontent-%COMP%]   .mod-minor[_ngcontent-%COMP%]{border:rgba(0,0,0,0) solid 3px;width:34px;height:34px}.mod-info.major[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%], .mod-info.minor[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{display:none}.mod-info.minor[_ngcontent-%COMP%]   .mod-minor[_ngcontent-%COMP%]{display:block}.mod-info.minor[_ngcontent-%COMP%]   .mod-major[_ngcontent-%COMP%]{display:none}.menuArmorIcon[_ngcontent-%COMP%]{position:absolute;top:8px}.menuArmorText[_ngcontent-%COMP%]{padding-left:35px}.selected-menu[_ngcontent-%COMP%]{background-color:#89b2ff3d}.selected-menu[_ngcontent-%COMP%]:hover{background-color:#89b2ff4d}  .modslot-select-scroll-menu{overflow-y:auto;max-height:250px!important}"]}),n})(),Or=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-slot-limitation-title"]],decls:5,vars:0,consts:[[1,"energy"],[1,"selector-slots"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"div",0),t._uU(2," Energy "),t.qZA(),t.TgZ(3,"span",1),t._uU(4," Modslots "),t.qZA()())},styles:[".energy[_ngcontent-%COMP%]{border-bottom:#a1a1a1 1px solid;margin-bottom:6px}.selector-element[_ngcontent-%COMP%]{position:relative;float:right;width:90px;top:-26px}.selector-slots[_ngcontent-%COMP%]{position:relative;float:right;width:155px;top:-26px;text-align:center}"]}),n})();function Mr(n,i){1&n&&(t.TgZ(0,"mat-toolbar",13),t._uU(1," Some of your chosen limitations contain no armor pieces and will yield no results.\n"),t.qZA())}function Dr(n,i){1&n&&(t.TgZ(0,"mat-toolbar",13),t._uU(1," The mod cost limitation is currently disabled. Modslot filtering still works.\n"),t.qZA())}let Ur=(()=>{class n{constructor(e){this.config=e,this.ArmorSlot=C.y,this.ArmorPerkOrSlot=_,this.possibilityList=[!0,!0,!0,!0,!0],this.allPossible=!0,this.disabledSlotLimitation=!M_featureFlags_enableModslotLimitation}ngOnInit(){}updatePossibility(e,o){this.possibilityList[e]=o,this.allPossible=5==this.possibilityList.filter(a=>!!a).length}clear(){this.config.modifyConfiguration(e=>{for(let o=0;o<5;o++)e.armorPerks[o+1]={fixed:!0,value:0},e.maximumModSlots[o+1]={fixed:!0,value:5}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-desired-mod-selection"]],decls:129,vars:16,consts:[["color","warn","class","mat-elevation-z4 impossible-container",4,"ngIf"],[1,"container"],[3,"slot","possible"],["id","clear-container"],["color","warn","mat-stroked-button","",3,"click"],[1,"minispace"],[1,"mat-elevation-z6"],["aria-hidden","false","inline",""],["id","explanation-description"],[1,"text-highlight"],[1,"example-usecase"],[1,"modslot-legend"],[3,"perk"],["color","warn",1,"mat-elevation-z4","impossible-container"]],template:function(e,o){1&e&&(t.YNc(0,Mr,2,0,"mat-toolbar",0),t.TgZ(1,"div",1),t._UZ(2,"app-slot-limitation-title"),t.TgZ(3,"app-slot-limitation-selection",2),t.NdJ("possible",function(r){return o.updatePossibility(0,r)}),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"app-slot-limitation-selection",2),t.NdJ("possible",function(r){return o.updatePossibility(1,r)}),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"app-slot-limitation-selection",2),t.NdJ("possible",function(r){return o.updatePossibility(2,r)}),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"app-slot-limitation-selection",2),t.NdJ("possible",function(r){return o.updatePossibility(3,r)}),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"app-slot-limitation-selection",2),t.NdJ("possible",function(r){return o.updatePossibility(4,r)}),t.qZA()(),t.TgZ(12,"div",3)(13,"button",4),t.NdJ("click",function(){return o.clear()}),t._uU(14,"Clear the whole selection"),t.qZA()(),t._UZ(15,"div",5),t.YNc(16,Dr,2,0,"mat-toolbar",0),t._UZ(17,"div",5),t.TgZ(18,"mat-accordion")(19,"mat-expansion-panel",6)(20,"mat-expansion-panel-header")(21,"mat-panel-title")(22,"mat-icon",7),t._uU(23,"info"),t.qZA(),t._uU(24," Explanation "),t.qZA(),t.TgZ(25,"mat-panel-description"),t._uU(26," Detailed instructions for this section. "),t.qZA()(),t.TgZ(27,"div",8),t._uU(28," This section allows you to further finetune the results to your requirements."),t._UZ(29,"br")(30,"div",5),t.TgZ(31,"u"),t._uU(32,"Limitation of available stat mod types"),t.qZA(),t._UZ(33,"br"),t._uU(34," First off, you are able to "),t.TgZ(35,"span",9),t._uU(36,"select the kind and amount of stat mods"),t.qZA(),t._uU(37," you want. By filling the bars you "),t.TgZ(38,"span",9),t._uU(39,"specify how many modslots are already occupied"),t.qZA(),t._uU(40," and thus the tool knows how much space it is able to use for your builds. Hover over the bars, it will show you which mods are available after you changed your selection. "),t._UZ(41,"div",5),t.TgZ(42,"div",10),t._uU(43,' Example Use Case: "On one item I can only use up to four recovery mods, no major intellect mod. One item can not hold any mods". In this scenario you would set one slot to 10 used slots, and the rest to 6. '),t.qZA(),t._UZ(44,"br"),t.TgZ(45,"u"),t._uU(46,"Filter for Elemental Affinity and Armor Perk/Slot"),t.qZA(),t._UZ(47,"br"),t._uU(48," This allows you to super-finetune your elemental and armor-perk requirements. You can change the settings for "),t.TgZ(49,"span",9),t._uU(50,"each armor slot"),t.qZA(),t._uU(51,". There are two modes per armor slot: "),t.TgZ(52,"span",9),t._uU(53,"Locked"),t.qZA(),t._uU(54," and "),t.TgZ(55,"span",9),t._uU(56,"Unlocked"),t.qZA(),t._uU(57,". Per default each entry is in the "),t.TgZ(58,"span",9),t._uU(59,"Locked"),t.qZA(),t._uU(60," mode. "),t._UZ(61,"div",5),t.TgZ(62,"span",9),t._uU(63,"Locked"),t.qZA(),t._uU(64," means that "),t.TgZ(65,"span",9),t._uU(66,"this armor slot must have"),t.qZA(),t._uU(67," the selected element or perk. "),t._UZ(68,"div",5),t.TgZ(69,"span",9),t._uU(70,"Unlocked"),t.qZA(),t._uU(71," means that the perk must exist, but "),t.TgZ(72,"span",9),t._uU(73,"the exact armor slot is irrelevant"),t.qZA(),t._uU(74,". That means that the tool can decide where it puts the desired element or perk. "),t._UZ(75,"div",5),t.TgZ(76,"div",10),t._uU(77,' Example Use Case: "The Class Item and Gauntlet '),t.TgZ(78,"span",9),t._uU(79,"must be stasis"),t.qZA(),t._uU(80,'. Oh, and I need two solar and one arc modslots, but the position does not matter". In this scenario, Class Item and Gauntlet would be '),t.TgZ(81,"span",9),t._uU(82,"Locked"),t.qZA(),t._uU(83," and the rest would be "),t.TgZ(84,"span",9),t._uU(85,"Unlocked"),t.qZA(),t._uU(86,". "),t.qZA(),t._UZ(87,"br"),t._uU(88," Legend: "),t.TgZ(89,"table",11)(90,"tr")(91,"td"),t._UZ(92,"app-armor-perk-icon",12),t.qZA(),t.TgZ(93,"td"),t._uU(94,"Vault of Glass"),t.qZA(),t.TgZ(95,"td"),t._UZ(96,"app-armor-perk-icon",12),t.qZA(),t.TgZ(97,"td"),t._uU(98,"Deep Stone Crypt"),t.qZA(),t.TgZ(99,"td"),t._UZ(100,"app-armor-perk-icon",12),t.qZA(),t.TgZ(101,"td"),t._uU(102,"Garden of Salvation"),t.qZA()(),t.TgZ(103,"tr")(104,"td"),t._UZ(105,"app-armor-perk-icon",12),t.qZA(),t.TgZ(106,"td"),t._uU(107,"Last Wish"),t.qZA(),t.TgZ(108,"td"),t._UZ(109,"app-armor-perk-icon",12),t.qZA(),t.TgZ(110,"td"),t._uU(111,"Vow of the Disciple"),t.qZA(),t.TgZ(112,"td"),t._UZ(113,"app-armor-perk-icon",12),t.qZA(),t.TgZ(114,"td"),t._uU(115,"Nightmare Modslot"),t.qZA()(),t.TgZ(116,"tr")(117,"td"),t._UZ(118,"app-armor-perk-icon",12),t.qZA(),t.TgZ(119,"td"),t._uU(120,"Artifice Modslot"),t.qZA(),t.TgZ(121,"td"),t._UZ(122,"app-armor-perk-icon",12),t.qZA(),t.TgZ(123,"td"),t._uU(124,"Iron Banner Perk"),t.qZA(),t.TgZ(125,"td"),t._UZ(126,"app-armor-perk-icon",12),t.qZA(),t.TgZ(127,"td"),t._uU(128,"Uniformed Officer Perk"),t.qZA()()()()()()),2&e&&(t.Q6J("ngIf",!o.allPossible),t.xp6(3),t.Q6J("slot",o.ArmorSlot.ArmorSlotHelmet),t.xp6(2),t.Q6J("slot",o.ArmorSlot.ArmorSlotGauntlet),t.xp6(2),t.Q6J("slot",o.ArmorSlot.ArmorSlotChest),t.xp6(2),t.Q6J("slot",o.ArmorSlot.ArmorSlotLegs),t.xp6(2),t.Q6J("slot",o.ArmorSlot.ArmorSlotClass),t.xp6(5),t.Q6J("ngIf",o.disabledSlotLimitation),t.xp6(76),t.Q6J("perk",o.ArmorPerkOrSlot.SlotVaultOfGlass),t.xp6(4),t.Q6J("perk",o.ArmorPerkOrSlot.SlotDeepStoneCrypt),t.xp6(4),t.Q6J("perk",o.ArmorPerkOrSlot.SlotGardenOfSalvation),t.xp6(5),t.Q6J("perk",o.ArmorPerkOrSlot.SlotLastWish),t.xp6(4),t.Q6J("perk",o.ArmorPerkOrSlot.SlotVowOfTheDisciple),t.xp6(4),t.Q6J("perk",o.ArmorPerkOrSlot.SlotNightmare),t.xp6(5),t.Q6J("perk",o.ArmorPerkOrSlot.SlotArtifice),t.xp6(4),t.Q6J("perk",o.ArmorPerkOrSlot.PerkIronBanner),t.xp6(4),t.Q6J("perk",o.ArmorPerkOrSlot.PerkUniformedOfficer))},dependencies:[b.O5,R.lW,ot.Hw,tt.Ye,J.pp,J.ib,J.yz,J.yK,J.u4,kr,$t,Or],styles:[".container[_ngcontent-%COMP%]{margin-bottom:10px}.impossible-container[_ngcontent-%COMP%]{text-align:center;margin-right:auto;margin-left:auto;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;font-size:15px;line-height:20px;margin-bottom:10px}.element-icon[_ngcontent-%COMP%]{height:30px;width:30px}.element-icon.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default;pointer-events:none}.overlay-icon-container[_ngcontent-%COMP%]{position:relative}.overlay-icon-container[_ngcontent-%COMP%]   .overlay-icon[_ngcontent-%COMP%]{width:20px;position:absolute;left:5px;bottom:9px;pointer-events:none}.modslot-legend[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 0;width:100%}.modslot-legend[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0}#explanation-description[_ngcontent-%COMP%]{width:520px}.minispace[_ngcontent-%COMP%]{height:7px}.text-highlight[_ngcontent-%COMP%]{color:#cddcef}.example-usecase[_ngcontent-%COMP%]{font-size:small;line-height:normal}"]}),n})();function Nr(n,i){if(1&n&&t._UZ(0,"img",5),2&n){const e=t.oxw();t.s9C("alt",null==e.exoticPerk?null:e.exoticPerk.name),t.MGl("src","https://bungie.net/",null==e.exoticPerk?null:e.exoticPerk.icon,"",t.LSH)}}function Er(n,i){1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Loading exotic perk.."),t.qZA()())}function Pr(n,i){1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"No (fixed) exotic perk available."),t.qZA()())}function Rr(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td")(2,"span"),t._uU(3),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(null==e.exoticPerk?null:e.exoticPerk.name)}}function qr(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td",6),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",null==e.exoticPerk?null:e.exoticPerk.description," ")}}let Jr=(()=>{class n{constructor(e,o){this.inv=e,this.iconService=o,this.exoticPerkNotThere=!1}ngOnInit(){var e=this;return(0,T.Z)(function*(){e.exoticPerk=yield e.iconService.getItemCached(e.armor?.exoticPerkHash??0),e.exoticPerkNotThere=null==e.exoticPerk})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(nt),t.Y36(fe))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-exotic-perk-tooltip"]],inputs:{armor:["itemTooltip","armor"]},decls:12,vars:6,consts:[[1,"tooltip-container"],["rowspan","2",1,"perk-icon-col"],["class","perk-icon",3,"alt","src",4,"ngIf"],[1,"exotic-name"],[4,"ngIf"],[1,"perk-icon",3,"alt","src"],["colspan","2"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"div",0)(2,"table")(3,"tr")(4,"td",1),t.YNc(5,Nr,1,2,"img",2),t.qZA(),t.TgZ(6,"td",3),t._uU(7),t.qZA()(),t.YNc(8,Er,3,0,"tr",4),t.YNc(9,Pr,3,0,"tr",4),t.YNc(10,Rr,4,1,"tr",4),t.YNc(11,qr,3,1,"tr",4),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",o.exoticPerk),t.xp6(2),t.Oqu(null==o.armor?null:o.armor.name),t.xp6(1),t.Q6J("ngIf",!o.exoticPerk&&!o.exoticPerkNotThere),t.xp6(1),t.Q6J("ngIf",!o.exoticPerk&&o.exoticPerkNotThere),t.xp6(1),t.Q6J("ngIf",o.exoticPerk),t.xp6(1),t.Q6J("ngIf",o.exoticPerk))},dependencies:[b.O5],styles:["[_nghost-%COMP%]{width:350px}.tooltip-container[_ngcontent-%COMP%]{border:1px solid gray;padding:1px 5px 4px;background:linear-gradient(#484848 0px,#2c2c2c 100%)}.perk-icon[_ngcontent-%COMP%]{width:50px;height:50px}.perk-icon-col[_ngcontent-%COMP%]{width:55px}.exotic-name[_ngcontent-%COMP%]{color:#eedb9e}"]}),n})(),Lr=(()=>{class n{constructor(e,o,a){this._overlay=e,this._overlayPositionBuilder=o,this._elementRef=a,this.showToolTip=!0}ngOnInit(){if(!this.showToolTip)return;const e=this._overlayPositionBuilder.flexibleConnectedTo(this._elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:5},{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-5}]);this._overlayRef=this._overlay.create({positionStrategy:e}),this._overlayRef.addPanelClass("overlay-no-pointer-event")}show(){this._overlayRef&&!this._overlayRef.hasAttached()&&(this._overlayRef.attach(new Vt.C5(Jr)).instance.armor=this.armor)}hide(){this.closeToolTip()}ngOnDestroy(){this.closeToolTip()}closeToolTip(){this._overlayRef&&this._overlayRef.detach()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_t.aV),t.Y36(_t.wJ),t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n,selectors:[["","exoticTooltip",""]],hostBindings:function(e,o){1&e&&t.NdJ("mouseenter",function(){return o.show()})("mouseleave",function(){return o.hide()})},inputs:{showToolTip:"showToolTip",armor:["exoticTooltip","armor"],contentTemplate:"contentTemplate"}}),n})();function Yr(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"img",3,4),t.NdJ("click",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.selectExotic(-1,a))}),t.qZA()}if(2&n){const e=t.oxw(2);t.Gre("exoticIcon ",e.selectedExotics.indexOf(-1)>-1?"selected":"","")}}function Fr(n,i){if(1&n&&t._UZ(0,"img",8),2&n){const e=t.oxw().$implicit;t.MGl("src","https://www.bungie.net/",e.item.watermarkIcon,"",t.LSH)}}function Qr(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",5)(1,"img",6),t.NdJ("click",function(a){const l=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(l.inInventory&&d.selectExotic(l.item.hash,a))}),t.qZA(),t.YNc(2,Fr,1,1,"img",7),t.qZA()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(1),t.Gre("exoticIcon ",o.selectedExotics.indexOf(e.item.hash)>-1?"selected":"",""),t.ekj("disabled",!e.inInventory),t.MGl("src","https://www.bungie.net/",e.item.icon,"",t.LSH),t.Q6J("exoticTooltip",e.item),t.xp6(1),t.Q6J("ngIf",e.item.watermarkIcon)}}function Br(n,i){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Yr,2,3,"img",1),t.YNc(2,Qr,3,8,"span",2),t.qZA()),2&n){const e=i.$implicit,o=i.index;t.Q6J("@listAnimation",e.length),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngForOf",e)}}const Vr=(0,Y.X$)("listAnimation",[(0,Y.eR)("* <=> *",[(0,Y.IO)(":enter",[(0,Y.oB)({opacity:0}),(0,Y.EY)("30ms",(0,Y.jt)("350ms ease-out",(0,Y.oB)({opacity:1})))],{optional:!0})])]);let Hr=(()=>{class n{constructor(e,o){this.inventory=e,this.config=o,this.selectedExotics=[],this.currentClass=s.N.Titan,this.exotics=[],this.ngUnsubscribe=new it.xQ}ngOnInit(){var e=this;this.config.configuration.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(function(){var o=(0,T.Z)(function*(a){(a.characterClass!=e.currentClass||0==e.exotics.length)&&(e.currentClass=a.characterClass,yield e.updateExoticsForClass()),e.selectedExotics=a.selectedExotics});return function(a){return o.apply(this,arguments)}}()),this.inventory.manifest.pipe((0,lt.b)(10),(0,F.R)(this.ngUnsubscribe)).subscribe((0,T.Z)(function*(){yield e.updateExoticsForClass()})),this.inventory.inventory.pipe((0,lt.b)(10),(0,F.R)(this.ngUnsubscribe)).subscribe((0,T.Z)(function*(){yield e.updateExoticsForClass()}))}updateExoticsForClass(){var e=this;return(0,T.Z)(function*(){const o=yield e.inventory.getExoticsForClass(e.currentClass);function a(r){var l={};return r.filter(function(d){var u=d.item.hash;return!l.hasOwnProperty(u)&&(l[u]=!0)})}e.exotics=[a(o.filter(r=>r.item.slot==C.y.ArmorSlotHelmet)),a(o.filter(r=>r.item.slot==C.y.ArmorSlotGauntlet)),a(o.filter(r=>r.item.slot==C.y.ArmorSlotChest)),a(o.filter(r=>r.item.slot==C.y.ArmorSlotLegs))]})()}selectExotic(e,o){const a=this.selectedExotics.indexOf(e);a>-1?this.selectedExotics.splice(a,1):-1==e?this.selectedExotics=[-1]:(0==this.selectedExotics.length||!o.shiftKey)&&(this.selectedExotics=[e]),this.config.modifyConfiguration(r=>{r.selectedExotics=this.selectedExotics})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(nt),t.Y36(j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-desired-exotic-selection"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"],["src","https://www.bungie.net/common/destiny2_content/icons/b4d05ef69d0c3227a7d4f7f35bbc2848.png","matTooltip","Force to use NO exotic at all",3,"class","click",4,"ngIf"],["class","container",4,"ngFor","ngForOf"],["src","https://www.bungie.net/common/destiny2_content/icons/b4d05ef69d0c3227a7d4f7f35bbc2848.png","matTooltip","Force to use NO exotic at all",3,"click"],["tooltip","matTooltip"],[1,"container"],[3,"src","exoticTooltip","click"],["class","watermarkIcon",3,"src",4,"ngIf"],[1,"watermarkIcon",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"span")(1,"b"),t._uU(2,'For the FotL mask, scroll down to the "Advanced Settings".'),t.qZA()(),t.YNc(3,Br,3,3,"div",0)),2&e&&(t.xp6(3),t.Q6J("ngForOf",o.exotics))},dependencies:[b.sg,b.O5,L.gM,Lr],styles:[".exoticIcon[_ngcontent-%COMP%]{width:36px;height:36px;margin-right:3px;border:rgba(0,0,0,0) solid 2px;cursor:pointer}.watermarkIcon[_ngcontent-%COMP%]{width:36px;height:36px;margin-left:-41px;margin-top:2px;position:absolute;pointer-events:none}.exoticIcon[_ngcontent-%COMP%]:hover{border:cornflowerblue solid 2px}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]:hover{border:#0059ff solid 2px}[_nghost-%COMP%]{position:relative}.exoticText[_ngcontent-%COMP%]{position:absolute;text-shadow:0 0 6px #000000;background:rgba(33,33,33,.51);color:#f5f5f5;bottom:4px;right:5px}.disabled[_ngcontent-%COMP%]{filter:grayscale(1) contrast(.6)}.disabled[_ngcontent-%COMP%]:hover{cursor:default}"],data:{animation:[Vr]}}),n})(),jr=(()=>{class n{constructor(e,o,a){var r=this;this.auth=e,this.api=o,this.inventory=a,this.characters=[],this.loadCachedData(),e.logoutEvent.subscribe(l=>this.clearCachedData()),this.inventory.inventory.subscribe((0,T.Z)(function*(){yield r.updateCharacterData()}))}clearCachedData(){this.characters=[],localStorage.removeItem("cachedCharacters")}loadCachedData(){let e=localStorage.getItem("cachedCharacters")||"[]";this.characters=JSON.parse(e)}updateCharacterData(){var e=this;return(0,T.Z)(function*(){e.characters=yield e.api.getCharacters(),localStorage.setItem("cachedCharacters",JSON.stringify(e.characters))})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(G),t.LFG(Qt),t.LFG(nt))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Wr(n,i){1&n&&(t.TgZ(0,"div",11),t._uU(1," Loading characters.. "),t.qZA())}function zr(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Titan"),t.qZA())}function Gr(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Hunter"),t.qZA())}function Kr(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Warlock"),t.qZA())}function Xr(n,i){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"img",14),t.TgZ(2,"span",15),t._uU(3),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(3),t.hij("\xd7",o.itemCounts[e.clazz],"")}}function $r(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.selectClass(r.clazz))}),t.TgZ(1,"div",13),t.YNc(2,zr,2,0,"span",3),t.YNc(3,Gr,2,0,"span",3),t.YNc(4,Kr,2,0,"span",3),t.qZA(),t.YNc(5,Xr,4,1,"div",3),t.qZA()}if(2&n){const e=i.$implicit,o=i.index,a=t.oxw();t.Udp("background-image","url(https://bungie.net/"+e.emblemUrl+")"),t.ekj("selected",a.selectedClass==e.clazz),t.xp6(2),t.Q6J("ngIf",0==e.clazz),t.xp6(1),t.Q6J("ngIf",1==e.clazz),t.xp6(1),t.Q6J("ngIf",2==e.clazz),t.xp6(1),t.Q6J("ngIf",!!a.itemCounts[o])}}function ts(n,i){if(1&n&&(t.TgZ(0,"div")(1,"span",16),t._UZ(2,"img",17),t._uU(3),t.ALo(4,"number"),t.qZA(),t.TgZ(5,"span",16),t._UZ(6,"img",18),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"span",16),t._UZ(10,"img",19),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"span",16),t._UZ(14,"img",20),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"span",16),t._UZ(18,"img",21),t._uU(19),t.ALo(20,"number"),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.MGl("matTooltip","Ascendant Shards: ",e.storedMaterials[4257549985],""),t.xp6(2),t.hij(" ",t.xi3(4,10,e.storedMaterials[4257549985],"1.0-0")," "),t.xp6(2),t.MGl("matTooltip","Enhancement Prisms: ",e.storedMaterials[4257549984],""),t.xp6(2),t.hij(" ",t.xi3(8,13,e.storedMaterials[4257549984],"1.0-0")," "),t.xp6(2),t.MGl("matTooltip","Enhancement Cores: ",e.storedMaterials[3853748946],""),t.xp6(2),t.hij(" ",t.xi3(12,16,e.storedMaterials[3853748946],"1.0-0")," "),t.xp6(2),t.MGl("matTooltip","Legendary Shards: ",e.storedMaterials[1022552290],""),t.xp6(2),t.hij(" ",t.xi3(16,19,e.storedMaterials[1022552290],"1.0-0")," "),t.xp6(2),t.MGl("matTooltip","Glimmer: ",e.storedMaterials[3159615086],""),t.xp6(2),t.hij(" ",t.xi3(20,22,e.storedMaterials[3159615086],"1.0-0")," ")}}let es=(()=>{class n{constructor(e,o,a){this.config=e,this.userdata=o,this.inv=a,this.availableClasses=[0,1,2],this.itemCounts=[null,null,null],this.selectedClass=-1,this.storedMaterials=null,this.ngUnsubscribe=new it.xQ}ngOnInit(){var e=this;this.config.configuration.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(o=>{this.selectedClass=o.characterClass,this.availableClasses.length>0&&-1==this.availableClasses.indexOf(o.characterClass)&&this.config.modifyConfiguration(a=>{a.characterClass=this.availableClasses[0],a.selectedExotics=[]})}),this.inv.inventory.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(function(){var o=(0,T.Z)(function*(a){yield e.loadStoredMaterials(),yield e.updateItemCount()});return function(a){return o.apply(this,arguments)}}())}selectClass(e){this.config.readonlyConfigurationSnapshot.characterClass!=e&&this.config.modifyConfiguration(o=>{o.characterClass=e,o.selectedExotics=[]})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}updateItemCount(){var e=this;return(0,T.Z)(function*(){for(let o=0;o<3;o++)e.itemCounts[o]=yield e.inv.getItemCountForClass(o)})()}loadStoredMaterials(){var e=this;return(0,T.Z)(function*(){var o=JSON.parse(localStorage.getItem("stored-materials")||"{}");"3853748946"in o||(o[3853748946]=0),"4257549984"in o||(o[4257549984]=0),"4257549985"in o||(o[4257549985]=0),"3159615086"in o||(o[3159615086]=0),"1022552290"in o||(o[1022552290]=0),e.storedMaterials=o})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j),t.Y36(jr),t.Y36(nt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-desired-class-selection"]],inputs:{availableClasses:"availableClasses"},decls:22,vars:3,consts:[[1,"character-container"],["class","character-entry",4,"ngIf"],["class","character-entry","style","float: left;",3,"selected","background-image","click",4,"ngFor","ngForOf"],[4,"ngIf"],["color","primary","fxShow","false","fxShow.lt-md","true","mat-flat-button","","routerLink","/help",2,"margin-left","15px"],["inline",""],["color","accent","href","https://ko-fi.com/mijago","matTooltip","You like my work? This leads you to ko-fi.com, where you can easily support me!","target","_blank"],["color","accent","href","http://discord.d2armorpicker.com","target","_blank"],[1,"crayon_logo_container"],["alt","","src","https://cdn.discordapp.com/emojis/917423317139480586.webp?size=96&quality=lossless",1,"crayon_logo"],["href","https://mijago.github.io/Crayon","target","_blank"],[1,"character-entry"],[1,"character-entry",2,"float","left",3,"click"],[1,"class-text"],["matTooltip","Amount of armor pieces for this class.","src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M24.77 7.03c-8.15.38-14.42 7.41-14.42 15.57v16.06c0 .23.13.44.34.53l10.33 4.68c.78.35 1.66-.22 1.66-1.07V31.9c0-.39-.19-.75-.52-.97l-5.39-3.64c-.87-.52-1.43-1.5-1.34-2.61.13-1.46 1.46-2.52 2.93-2.52h4.36c.65 0 1.17.53 1.17 1.17v6.71s0 .61 1.61.61 1.61-.61 1.61-.61v-6.71c0-.65.52-1.17 1.17-1.17h4.36c1.47 0 2.8 1.06 2.93 2.52.1 1.11-.47 2.09-1.34 2.61l-5.39 3.64c-.32.22-.52.58-.52.97v10.91c0 .85.88 1.42 1.66 1.07l10.33-4.68c.21-.1.34-.3.34-.53v-16.5c.01-8.61-7.18-15.55-15.88-15.14z'/%3e%3c/svg%3e",1,"head-icon"],["matTooltip","Amount of armor pieces for this class.",1,"armor-text"],[1,"material-listing",3,"matTooltip"],["src","https://www.bungie.net/common/destiny2_content/icons/2bd6547fa8f170d8868c8ab24b9fe84a.jpg","alt","Ascendant Shard"],["src","https://www.bungie.net/common/destiny2_content/icons/0397d34d04b687484f73665bb714227b.jpg","alt","Enhancement Prism"],["src","https://www.bungie.net/common/destiny2_content/icons/259c571eb7f9f85e56be657f371e303f.jpg","alt","Enhancement Core"],["src","https://www.bungie.net/common/destiny2_content/icons/1ff4a008cb851794ccb588e4eb3918a1.png","alt","Legendary Shard"],["src","https://www.bungie.net/common/destiny2_content/icons/36dd52a3005cb28f7f68448f1ab76c1e.png","alt","Glimmer"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Wr,2,0,"div",1),t.YNc(2,$r,6,8,"div",2),t.qZA(),t.YNc(3,ts,21,25,"div",3),t.TgZ(4,"a",4)(5,"mat-icon",5),t._uU(6,"help"),t.qZA(),t._uU(7," Help and Information about D2ArmorPicker\n"),t.qZA(),t.TgZ(8,"div"),t._uU(9," If you like my work, you can "),t.TgZ(10,"a",6),t._uU(11," support me here."),t.qZA(),t._uU(12," You can also "),t.TgZ(13,"a",7),t._uU(14," join my dev Discord! "),t.qZA(),t.TgZ(15,"div"),t._uU(16," Also check out my Discord-Bot "),t.TgZ(17,"div",8),t._UZ(18,"img",9),t.qZA(),t.TgZ(19,"a",10),t._uU(20,"Crayon"),t.qZA(),t._uU(21,", for all your item information needs! "),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",0==o.userdata.characters.length),t.xp6(1),t.Q6J("ngForOf",o.userdata.characters),t.xp6(1),t.Q6J("ngIf",null!=o.storedMaterials))},dependencies:[b.sg,b.O5,$.b8,R.zs,L.gM,ot.Hw,N.yS,b.JJ],styles:[".discord-btn[_ngcontent-%COMP%]{margin-left:15px}.material-listing[_ngcontent-%COMP%]{position:relative;padding-left:22px;padding-right:10px}.material-listing[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;position:absolute;top:-2px;left:0}.crayon_logo_container[_ngcontent-%COMP%]{position:relative;width:22px;display:inline-block;margin-right:3px}.crayon_logo_container[_ngcontent-%COMP%]   .crayon_logo[_ngcontent-%COMP%]{position:absolute;width:22px;top:-14px}  .mat-option-text{color:#fff}.character-container[_ngcontent-%COMP%]{height:50px}.character-entry[_ngcontent-%COMP%]{color:#fff;background-size:cover;background-position:left center;background-repeat:no-repeat;width:180px;height:36px;position:relative;margin-right:7px;margin-bottom:7px;border:rgba(255,255,255,0) solid 2px;opacity:.75;cursor:pointer}.character-entry[_ngcontent-%COMP%]:hover{border:rgba(255,255,255,.41) solid 2px;opacity:.98}.character-entry.selected[_ngcontent-%COMP%]{cursor:default;opacity:1;border:white solid 2px}.class-text[_ngcontent-%COMP%]{position:absolute;left:35px;top:8px;font-size:x-large;text-shadow:0 0 6px #000000}.head-icon[_ngcontent-%COMP%]{height:25px;top:6px;right:30px;position:absolute;filter:invert(1) drop-shadow(1px 1px 3px rgba(0,0,0,.25))!important}.armor-text[_ngcontent-%COMP%]{position:absolute;right:4px;top:9px;text-shadow:0 0 6px #000000;font-size:small}a[_ngcontent-%COMP%]{color:#99afe3}a[_ngcontent-%COMP%]:visited{color:#7294dc}"]}),n})();var ne=p(455);function ns(n,i){1&n&&t._UZ(0,"img",7)}function os(n,i){1&n&&t._UZ(0,"img",8)}function is(n,i){1&n&&t._UZ(0,"img",9)}function as(n,i){1&n&&t._UZ(0,"img",10)}function rs(n,i){1&n&&t._UZ(0,"img",11)}function ss(n,i){1&n&&t._UZ(0,"img",12)}let be=(()=>{class n{constructor(){this.stat=c.Mobility}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stat-icon"]],inputs:{stat:"stat"},decls:7,vars:6,consts:[[1,"statContainerWrapper"],["src","https://www.bungie.net/common/destiny2_content/icons/e26e0e93a9daf4fdd21bf64eb9246340.png","class","dialogStatIcon","alt","Mobility",4,"ngIf"],["src","https://www.bungie.net/common/destiny2_content/icons/202ecc1c6febeb6b97dafc856e863140.png","class","dialogStatIcon","alt","Resilience",4,"ngIf"],["src","https://www.bungie.net/common/destiny2_content/icons/128eee4ee7fc127851ab32eac6ca91cf.png","class","dialogStatIcon","alt","Recovery",4,"ngIf"],["src","https://www.bungie.net/common/destiny2_content/icons/ca62128071dc254fe75891211b98b237.png","class","dialogStatIcon","alt","Discipline",4,"ngIf"],["src","https://www.bungie.net/common/destiny2_content/icons/59732534ce7060dba681d1ba84c055a6.png","class","dialogStatIcon","alt","Intellect",4,"ngIf"],["src","https://www.bungie.net/common/destiny2_content/icons/c7eefc8abbaa586eeab79e962a79d6ad.png","class","dialogStatIcon","alt","Strength",4,"ngIf"],["src","https://www.bungie.net/common/destiny2_content/icons/e26e0e93a9daf4fdd21bf64eb9246340.png","alt","Mobility",1,"dialogStatIcon"],["src","https://www.bungie.net/common/destiny2_content/icons/202ecc1c6febeb6b97dafc856e863140.png","alt","Resilience",1,"dialogStatIcon"],["src","https://www.bungie.net/common/destiny2_content/icons/128eee4ee7fc127851ab32eac6ca91cf.png","alt","Recovery",1,"dialogStatIcon"],["src","https://www.bungie.net/common/destiny2_content/icons/ca62128071dc254fe75891211b98b237.png","alt","Discipline",1,"dialogStatIcon"],["src","https://www.bungie.net/common/destiny2_content/icons/59732534ce7060dba681d1ba84c055a6.png","alt","Intellect",1,"dialogStatIcon"],["src","https://www.bungie.net/common/destiny2_content/icons/c7eefc8abbaa586eeab79e962a79d6ad.png","alt","Strength",1,"dialogStatIcon"]],template:function(e,o){1&e&&(t.TgZ(0,"span",0),t.YNc(1,ns,1,0,"img",1),t.YNc(2,os,1,0,"img",2),t.YNc(3,is,1,0,"img",3),t.YNc(4,as,1,0,"img",4),t.YNc(5,rs,1,0,"img",5),t.YNc(6,ss,1,0,"img",6),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",0==o.stat),t.xp6(1),t.Q6J("ngIf",1==o.stat),t.xp6(1),t.Q6J("ngIf",2==o.stat),t.xp6(1),t.Q6J("ngIf",3==o.stat),t.xp6(1),t.Q6J("ngIf",4==o.stat),t.xp6(1),t.Q6J("ngIf",5==o.stat))},dependencies:[b.O5],styles:[".dialogStatIcon[_ngcontent-%COMP%]{position:relative;width:25px;margin-right:3px;top:4px}"]}),n})(),ls=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mod-description-tooltip"]],inputs:{mod:"mod"},decls:9,vars:2,consts:[[1,"tooltip-container"],[1,"exotic-name"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"div",0)(2,"table")(3,"tr")(4,"td",1),t._uU(5),t.qZA()(),t.TgZ(6,"tr")(7,"td"),t._uU(8),t.qZA()()()()()),2&e&&(t.xp6(5),t.Oqu(null==o.mod?null:o.mod.name),t.xp6(3),t.Oqu(null==o.mod?null:o.mod.description))},styles:["[_nghost-%COMP%]{width:350px}.tooltip-container[_ngcontent-%COMP%]{border:1px solid gray;padding:1px 5px 4px;background:linear-gradient(#484848 0px,#2c2c2c 100%)}.exotic-name[_ngcontent-%COMP%]{color:#eedb9e}"]}),n})(),cs=(()=>{class n{constructor(e,o,a){this._overlay=e,this._overlayPositionBuilder=o,this._elementRef=a}ngOnInit(){const e=this._overlayPositionBuilder.flexibleConnectedTo(this._elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:5},{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-5}]);this._overlayRef=this._overlay.create({positionStrategy:e}),this._overlayRef.addPanelClass("overlay-no-pointer-event")}show(){this._overlayRef&&!this._overlayRef.hasAttached()&&(this._overlayRef.attach(new Vt.C5(ls)).instance.mod=this.mod)}hide(){this.closeToolTip()}ngOnDestroy(){this.closeToolTip()}closeToolTip(){this._overlayRef&&this._overlayRef.detach()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_t.aV),t.Y36(_t.wJ),t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n,selectors:[["","modTooltip",""]],hostBindings:function(e,o){1&e&&t.NdJ("mouseenter",function(){return o.show()})("mouseleave",function(){return o.hide()})},inputs:{mod:["modTooltip","mod"]}}),n})();function ms(n,i){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"br"),t.TgZ(2,"mat-button-toggle-group",4)(3,"mat-button-toggle",5),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.setElement(a.ModifierType.Arc))}),t._uU(4," Arc "),t.qZA(),t.TgZ(5,"mat-button-toggle",5),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.setElement(a.ModifierType.Solar))}),t._uU(6," Solar "),t.qZA(),t.TgZ(7,"mat-button-toggle",5),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.setElement(a.ModifierType.Void))}),t._uU(8," Void "),t.qZA(),t.TgZ(9,"mat-button-toggle",5),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.setElement(a.ModifierType.Stasis))}),t._uU(10," Stasis "),t.qZA(),t.TgZ(11,"mat-button-toggle",5),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.setElement(a.ModifierType.Strand))}),t._uU(12," Strand "),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("value",e.selectedElement),t.xp6(1),t.Q6J("value",e.ModifierType.Arc),t.xp6(2),t.Q6J("value",e.ModifierType.Solar),t.xp6(2),t.Q6J("value",e.ModifierType.Void),t.xp6(2),t.Q6J("value",e.ModifierType.Stasis),t.xp6(2),t.Q6J("value",e.ModifierType.Strand)}}function ds(n,i){if(1&n&&(t.TgZ(0,"h3",8),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.name)}}function us(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"There are no fragments configured yet. Please be patient."),t.qZA())}function ps(n,i){1&n&&(t.TgZ(0,"th",22),t._uU(1,"Name"),t.qZA())}function gs(n,i){if(1&n&&(t.TgZ(0,"td",23)(1,"mat-slide-toggle",24),t._uU(2),t.qZA()()),2&n){const e=i.$implicit,o=t.oxw(4);t.Q6J("modTooltip",e),t.xp6(1),t.Q6J("checked",o.selectedMods.indexOf(e.id)>-1),t.xp6(1),t.hij(" ",e.name," ")}}function _s(n,i){1&n&&(t.TgZ(0,"th",22),t._UZ(1,"app-stat-icon",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",0))}function fs(n,i){if(1&n&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("+",e,"")}}function hs(n,i){if(1&n&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.Oqu(e)}}function xs(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,fs,2,1,"span",28),t.YNc(2,hs,2,1,"span",29),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(1),t.Q6J("ngIf",e<0)}}function Ts(n,i){if(1&n&&(t.TgZ(0,"td",26),t.YNc(1,xs,3,2,"span",27),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngVar",o.getModifierTextForValue(e.bonus,0))}}function ys(n,i){1&n&&(t.TgZ(0,"th",22),t._UZ(1,"app-stat-icon",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",1))}function bs(n,i){if(1&n&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("+",e,"")}}function Cs(n,i){if(1&n&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.Oqu(e)}}function vs(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,bs,2,1,"span",28),t.YNc(2,Cs,2,1,"span",29),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(1),t.Q6J("ngIf",e<0)}}function As(n,i){if(1&n&&(t.TgZ(0,"td",26),t.YNc(1,vs,3,2,"span",27),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngVar",o.getModifierTextForValue(e.bonus,1))}}function Zs(n,i){1&n&&(t.TgZ(0,"th",22),t._UZ(1,"app-stat-icon",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",2))}function ws(n,i){if(1&n&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("+",e,"")}}function Ss(n,i){if(1&n&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.Oqu(e)}}function Is(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,ws,2,1,"span",28),t.YNc(2,Ss,2,1,"span",29),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(1),t.Q6J("ngIf",e<0)}}function ks(n,i){if(1&n&&(t.TgZ(0,"td",26),t.YNc(1,Is,3,2,"span",27),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngVar",o.getModifierTextForValue(e.bonus,2))}}function Os(n,i){1&n&&(t.TgZ(0,"th",22),t._UZ(1,"app-stat-icon",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",3))}function Ms(n,i){if(1&n&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("+",e,"")}}function Ds(n,i){if(1&n&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.Oqu(e)}}function Us(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Ms,2,1,"span",28),t.YNc(2,Ds,2,1,"span",29),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(1),t.Q6J("ngIf",e<0)}}function Ns(n,i){if(1&n&&(t.TgZ(0,"td",26),t.YNc(1,Us,3,2,"span",27),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngVar",o.getModifierTextForValue(e.bonus,3))}}function Es(n,i){1&n&&(t.TgZ(0,"th",22),t._UZ(1,"app-stat-icon",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",4))}function Ps(n,i){if(1&n&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("+",e,"")}}function Rs(n,i){if(1&n&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.Oqu(e)}}function qs(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Ps,2,1,"span",28),t.YNc(2,Rs,2,1,"span",29),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(1),t.Q6J("ngIf",e<0)}}function Js(n,i){if(1&n&&(t.TgZ(0,"td",26),t.YNc(1,qs,3,2,"span",27),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngVar",o.getModifierTextForValue(e.bonus,4))}}function Ls(n,i){1&n&&(t.TgZ(0,"th",22),t._UZ(1,"app-stat-icon",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",5))}function Ys(n,i){if(1&n&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.hij("+",e,"")}}function Fs(n,i){if(1&n&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngVar;t.xp6(1),t.Oqu(e)}}function Qs(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Ys,2,1,"span",28),t.YNc(2,Fs,2,1,"span",29),t.qZA()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(1),t.Q6J("ngIf",e<0)}}function Bs(n,i){if(1&n&&(t.TgZ(0,"td",26),t.YNc(1,Qs,3,2,"span",27),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngVar",o.getModifierTextForValue(e.bonus,5))}}function Vs(n,i){1&n&&t._UZ(0,"tr",32)}function Hs(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr",33),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(4);return t.KtG(l.handleRowClick(r))}),t.qZA()}if(2&n){const e=i.$implicit,o=t.oxw(4);t.ekj("selected",o.selectedMods.indexOf(e.id)>-1)}}function js(n,i){if(1&n&&(t.TgZ(0,"table",9),t.ynx(1,10),t.YNc(2,ps,2,0,"th",11),t.YNc(3,gs,3,3,"td",12),t.BQk(),t.ynx(4,13),t.YNc(5,_s,2,1,"th",11),t.YNc(6,Ts,2,1,"td",14),t.BQk(),t.ynx(7,15),t.YNc(8,ys,2,1,"th",11),t.YNc(9,As,2,1,"td",14),t.BQk(),t.ynx(10,16),t.YNc(11,Zs,2,1,"th",11),t.YNc(12,ks,2,1,"td",14),t.BQk(),t.ynx(13,17),t.YNc(14,Os,2,1,"th",11),t.YNc(15,Ns,2,1,"td",14),t.BQk(),t.ynx(16,18),t.YNc(17,Es,2,1,"th",11),t.YNc(18,Js,2,1,"td",14),t.BQk(),t.ynx(19,19),t.YNc(20,Ls,2,1,"th",11),t.YNc(21,Bs,2,1,"td",14),t.BQk(),t.YNc(22,Vs,1,0,"tr",20),t.YNc(23,Hs,1,2,"tr",21),t.qZA()),2&n){const e=t.oxw(2).$implicit,o=t.oxw();t.Q6J("dataSource",e.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns)}}function Ws(n,i){if(1&n&&(t.ynx(0),t.YNc(1,ds,2,1,"h3",6),t.YNc(2,us,2,0,"span",3),t.YNc(3,js,24,3,"table",7),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.group),t.xp6(1),t.Q6J("ngIf",0==e.data.length),t.xp6(1),t.Q6J("ngIf",e.data.length>0)}}function zs(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,ms,13,6,"ng-container",3),t.YNc(2,Ws,4,3,"ng-container",3),t.qZA()),2&n){const e=i.$implicit,o=i.index,a=t.oxw();t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",!e.group||e.type==a.selectedElement)}}let Gs=(()=>{class n{constructor(e){this.config=e,this.ModifierType=f.O,this.ModOrAbility=g,this.displayedColumns=["name","mobility","resilience","recovery","discipline","intellect","strength"],this.selectedClass=s.N.None,this.selectedMods=[],this.selectedElement=f.O.Solar,this.ngUnsubscribe=new it.xQ;const o=Object.values(gt).sort((h,A)=>h.name.toLowerCase()<A.name.toLowerCase()?-1:h.name.toLowerCase()>A.name.toLowerCase()?1:0);o.filter(h=>h.type==f.O.CombatStyleMod);let r=o.filter(h=>h.type==f.O.Stasis),l=o.filter(h=>h.type==f.O.Void),d=o.filter(h=>h.type==f.O.Solar),u=o.filter(h=>h.type==f.O.Arc),x=o.filter(h=>h.type==f.O.Strand);this.data=[{name:"Stasis Fragments",data:r,group:!0,type:f.O.Stasis},{name:"Void Fragments",data:l,group:!0,type:f.O.Void},{name:"Solar Fragments",data:d,group:!0,type:f.O.Solar},{name:"Arc Fragments",data:u,group:!0,type:f.O.Arc},{name:"Strand Fragments",data:x,group:!0,type:f.O.Strand}],this.dataSource=o}ngOnInit(){this.config.configuration.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(e=>{this.selectedMods=e.enabledMods,this.selectedClass=e.characterClass,this.selectedElement=e.selectedModElement})}getModifierTextForValue(e,o){return e.filter(a=>a.stat==o||a.stat==xt.ClassAbilityRegenerationStat&&(this.selectedClass==s.N.Titan&&o==c.Resilience||this.selectedClass==s.N.Hunter&&o==c.Mobility||this.selectedClass==s.N.Warlock&&o==c.Recovery)).reduce((a,r)=>a+r.value,0)}handleRowClick(e){this.config.modifyConfiguration(o=>{const a=o.enabledMods.indexOf(e.id);a>-1?o.enabledMods.splice(a,1):o.enabledMods.push(e.id)})}clear(){this.config.modifyConfiguration(e=>{e.enabledMods=[]})}getAffinityName(e){return ae[e]}getAffinityUrl(e){return re[e]}setElement(e){this.selectedElement!=e&&this.config.modifyConfiguration(o=>{const a=o.enabledMods.filter(r=>gt[r].type!=f.O.CombatStyleMod&&gt[r].type!=e);o.selectedModElement=e;for(let r of a){const l=o.enabledMods.indexOf(r);o.enabledMods.splice(l,1)}})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-desired-mods-selection"]],features:[t._Bn([{provide:ne.HT,useValue:{disableToggleValue:!1,disableDragValue:!0}}])],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"],["id","clear-container"],["color","warn","mat-stroked-button","",3,"click"],[4,"ngIf"],[3,"value"],[3,"value","click"],["class","stat-part-title",4,"ngIf"],["mat-table","",3,"dataSource",4,"ngIf"],[1,"stat-part-title"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"modTooltip",4,"matCellDef"],["matColumnDef","mobility"],["mat-cell","",4,"matCellDef"],["matColumnDef","resilience"],["matColumnDef","recovery"],["matColumnDef","discipline"],["matColumnDef","intellect"],["matColumnDef","strength"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",3,"modTooltip"],["color","primary","disabled","",2,"cursor","pointer !important",3,"checked"],[3,"stat"],["mat-cell",""],[4,"ngVar"],["class","stat-positive",4,"ngIf"],["class","stat-negative",4,"ngIf"],[1,"stat-positive"],[1,"stat-negative"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,o){1&e&&(t.YNc(0,zs,3,2,"span",0),t.TgZ(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.clear()}),t._uU(3,"Clear the whole selection"),t.qZA()()),2&e&&t.Q6J("ngForOf",o.data)},dependencies:[b.sg,b.O5,R.lW,ne.Rr,S.BZ,S.fO,S.as,S.w1,S.Dz,S.nj,S.ge,S.ev,S.XQ,S.Gk,ft.A9,ft.Yi,be,St,cs],styles:[".mat-slide-toggle.mat-disabled[_ngcontent-%COMP%]{opacity:1}.stat-part-title[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:5px}.modTable[_ngcontent-%COMP%]{width:100%}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{height:30px}.mat-column-mobility[_ngcontent-%COMP%], .mat-column-resilience[_ngcontent-%COMP%], .mat-column-recovery[_ngcontent-%COMP%], .mat-column-discipline[_ngcontent-%COMP%], .mat-column-intellect[_ngcontent-%COMP%], .mat-column-strength[_ngcontent-%COMP%], .mat-column-cost[_ngcontent-%COMP%]{min-width:40px;text-align:center}.mat-row[_ngcontent-%COMP%]:hover{background-color:#494949}.mat-column-mobility[_ngcontent-%COMP%], .mat-column-recovery[_ngcontent-%COMP%], .mat-column-intellect[_ngcontent-%COMP%]{background-color:#464646}.mat-column-name[_ngcontent-%COMP%]{padding-right:4px;border-right:1px solid currentColor;min-width:150px}.mat-row[_ngcontent-%COMP%]{cursor:pointer}th.mat-header-cell[_ngcontent-%COMP%]:last-of-type, td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}.mat-cell[_ngcontent-%COMP%]:last-of-type, .mat-header-cell[_ngcontent-%COMP%]:last-of-type, .mat-footer-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}.stat-negative[_ngcontent-%COMP%], .stat-positive[_ngcontent-%COMP%]{margin-right:3px}.stat-negative[_ngcontent-%COMP%]{color:#f08080}.stat-positive[_ngcontent-%COMP%]{color:#b6cbfc}.stat-display[_ngcontent-%COMP%]{width:60px;float:left;align-content:end;text-align:right}.mat-row[_ngcontent-%COMP%]:hover, .mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{background-color:#494949}.mat-row.selected[_ngcontent-%COMP%]:hover, .mat-row.selected[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{background-color:#89b2ff30}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .mat-column-mobility[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .mat-column-recovery[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .mat-column-intellect[_ngcontent-%COMP%]{background-color:#89b2ff1c}.mat-column-name[_ngcontent-%COMP%]{min-width:190px}.element-icon[_ngcontent-%COMP%]{width:22px}#clear-container[_ngcontent-%COMP%]{padding-top:10px}#retrofit-table[_ngcontent-%COMP%]   .rft-icon-container[_ngcontent-%COMP%]{width:22px;display:inline-block}#retrofit-table[_ngcontent-%COMP%]   .rft-icon-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative}#retrofit-table[_ngcontent-%COMP%]   .rft-icon-container[_ngcontent-%COMP%]   app-stat-icon[_ngcontent-%COMP%]{position:absolute;top:-22px;left:-10px}"]}),n})();function Ks(n,i){if(1&n&&(t.TgZ(0,"mat-icon",8,9),t._uU(2," help "),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("matTooltip",e.help)}}function Xs(n,i){1&n&&(t.TgZ(0,"mat-icon",10,9),t._uU(2," report_problem "),t.qZA())}function $s(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"mat-slide-toggle",5),t.NdJ("change",function(a){const l=t.CHM(e).$implicit;return t.KtG(l.cp(a.checked))}),t._uU(2),t.qZA(),t.YNc(3,Ks,3,1,"mat-icon",6),t.YNc(4,Xs,3,0,"mat-icon",7),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("disabled",e.disabled)("checked",e.value),t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",e.help),t.xp6(1),t.Q6J("ngIf",e.impactsResultCount)}}function tl(n,i){if(1&n&&(t.TgZ(0,"div")(1,"span",1),t._uU(2),t.qZA(),t.YNc(3,$s,5,5,"div",2),t._UZ(4,"div",3),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngForOf",o.fields2[e])}}let el=(()=>{class n{constructor(e){this.config=e,this.fields2={},this.fieldKeys=[],this.ngUnsubscribe=new it.xQ}ngOnInit(){this.config.configuration.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(e=>{this.fields2={Events:[{name:"Enforce the usage of a Festival of the Lost Mask.",cp:o=>this.config.modifyConfiguration(a=>a.useFotlArmor=o),value:e.useFotlArmor,disabled:!1,impactsResultCount:!0,help:"Only use a FotL masks. You will not get results if you do not own the mask."}],"Armor selection":[{name:"Allow the usage of armor that is not exotic or legendary.",cp:o=>this.config.modifyConfiguration(a=>a.allowBlueArmorPieces=o),value:e.allowBlueArmorPieces,disabled:!1,impactsResultCount:!1,help:"This setting allows the tool to use white, green and blue armor pieces."},{name:"Ignore sunset armor.",cp:o=>this.config.modifyConfiguration(a=>a.ignoreSunsetArmor=o),value:e.ignoreSunsetArmor,disabled:!1,impactsResultCount:!1,help:"Ignore sunset armor in the results."}],Masterwork:[{name:"Assume all legendary items are masterworked",cp:o=>this.config.modifyConfiguration(a=>a.assumeLegendariesMasterworked=o),value:e.assumeLegendariesMasterworked,disabled:!1,impactsResultCount:!1,help:void 0},{name:"Assume all exotic items are masterworked",cp:o=>this.config.modifyConfiguration(a=>a.assumeExoticsMasterworked=o),value:e.assumeExoticsMasterworked,disabled:!1,impactsResultCount:!1,help:"If this setting is enabled, the tool will treat non-masterworked exotic armor as if it were masterworked-."},{name:"Assume that class items are masterworked",cp:o=>this.config.modifyConfiguration(a=>a.assumeClassItemMasterworked=o),value:e.assumeClassItemMasterworked,disabled:!1,impactsResultCount:!1,help:"If this setting is enabled, a plain +2 is added to every stat. This means that your Class Item must be masterworked."},{name:"Only use already masterworked items",cp:o=>this.config.modifyConfiguration(a=>a.onlyUseMasterworkedItems=o),value:e.onlyUseMasterworkedItems,disabled:!1,impactsResultCount:!0,help:void 0}],"Performance Optimization":[{name:"Use security features to prevent app crashes (resets on reload).",cp:o=>this.config.modifyConfiguration(a=>a.limitParsedResults=o),value:e.limitParsedResults,disabled:!1,impactsResultCount:!0,help:"Only parse the first 30,000 results. Deactivating this may crash your browser. The results will still be limited to 1,000,000 entries. Note that you will not miss any significant results by leaving this enabled."}],"Extra Columns":[{name:"Show maximum reachable tiers in the Tiers-Column instead of real Tiers.",cp:o=>this.config.modifyConfiguration(a=>a.showPotentialTierColumn=o),value:e.showPotentialTierColumn,disabled:!1,impactsResultCount:!1,help:"Shows an additional column in the table that shows how many tiers this build would have, if all stat mods were used. This is important when builds do not use all 5 stat mods."},{name:"Show the wasted stats in an extra column.",cp:o=>this.config.modifyConfiguration(a=>a.showWastedStatsColumn=o),value:e.showWastedStatsColumn,disabled:!1,impactsResultCount:!1,help:"Shows an additional column in the table that shows how many stats are wasted in a build."}],"Wasted Stats":[{name:"Try to optimize wasted stats",cp:o=>this.config.modifyConfiguration(a=>a.tryLimitWastedStats=o),value:e.tryLimitWastedStats,disabled:!1,impactsResultCount:!1,help:"The tool will try to add minor stat mods to minimize wasted stats. This only works for combinations that fulfill your desired stat combination with enough mods so at least one mod slot is still open."},{name:"Only show builds with no wasted stats",cp:o=>this.config.modifyConfiguration(a=>a.onlyShowResultsWithNoWastedStats=o),value:M_featureFlags_enableZeroWaste&&e.tryLimitWastedStats&&e.onlyShowResultsWithNoWastedStats,disabled:!e.tryLimitWastedStats||!M_featureFlags_enableZeroWaste,impactsResultCount:!0,help:"Only show builds with zero wasted stats - this means, its highly likely that you won't get any results."}],"Data-Science":[{name:"Add a constant +1 resilience to the results with non-exotic chests. For.. reasons..",cp:o=>this.config.modifyConfiguration(a=>a.addConstent1Resilience=o),value:e.addConstent1Resilience,disabled:!1,impactsResultCount:!1,help:"You usually do not want to use this."},{name:"Assume every legendary is an artifice armor.",cp:o=>this.config.modifyConfiguration(a=>a.assumeEveryLegendaryIsArtifice=o),value:e.assumeEveryLegendaryIsArtifice,disabled:!1,impactsResultCount:!0,help:"This is for debugging purposes. Do not complain if you enable this. Reload after changing this setting."}]},this.fieldKeys=Object.keys(this.fields2)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-advanced-settings"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"category-header"],["class","adv-settings",4,"ngFor","ngForOf"],[1,"category-spacer"],[1,"adv-settings"],["color","primary",3,"disabled","checked","change"],["inline","","aria-hidden","false","aria-label","Help",3,"matTooltip",4,"ngIf"],["inline","","aria-hidden","false","aria-label","Help","class","report-problem-icon","matTooltip","This setting might impact the amount of results. It may happen that you won't get any results if you change this setting. In this case, simply switch it back to its default state.",4,"ngIf"],["inline","","aria-hidden","false","aria-label","Help",3,"matTooltip"],["tooltip","matTooltip"],["inline","","aria-hidden","false","aria-label","Help","matTooltip","This setting might impact the amount of results. It may happen that you won't get any results if you change this setting. In this case, simply switch it back to its default state.",1,"report-problem-icon"]],template:function(e,o){1&e&&t.YNc(0,tl,5,2,"div",0),2&e&&t.Q6J("ngForOf",o.fieldKeys)},dependencies:[b.sg,b.O5,ne.Rr,L.gM,ot.Hw],styles:[".category-spacer[_ngcontent-%COMP%]{height:3px}.category-header[_ngcontent-%COMP%]{font-style:italic}.adv-settings[_ngcontent-%COMP%]{margin-left:20px}.report-problem-icon[_ngcontent-%COMP%]{color:#f08080}"]}),n})(),Ht=(()=>{class n{constructor(e,o){this.dialogRef=e,this.data=o}onNoClick(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(K.so),t.Y36(K.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-confirm-dialog"]],decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close"]],template:function(e,o){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Confirm"),t.qZA(),t.TgZ(2,"div",1)(3,"p"),t._uU(4),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t.NdJ("click",function(){return o.onNoClick()}),t._uU(7,"No Thanks"),t.qZA(),t.TgZ(8,"button",4),t._uU(9,"Ok"),t.qZA()()),2&e&&(t.xp6(4),t.Oqu(o.data.description),t.xp6(4),t.Q6J("mat-dialog-close",!0))},dependencies:[R.lW,K.ZT,K.uh,K.xY,K.H8]}),n})();var X=p(4006),dt=p(9549),nl=p(4385),jt=p(4144);function ol(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Titan"),t.qZA())}function il(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Hunter"),t.qZA())}function al(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Warlock"),t.qZA())}function rl(n,i){if(1&n&&(t.TgZ(0,"mat-option",30)(1,"span"),t._uU(2,"("),t.YNc(3,ol,2,0,"span",26),t.YNc(4,il,2,0,"span",26),t.YNc(5,al,2,0,"span",26),t._uU(6,") "),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA()()),2&n){const e=i.$implicit;t.Q6J("value",e.name),t.xp6(3),t.Q6J("ngIf",0==e.configuration.characterClass),t.xp6(1),t.Q6J("ngIf",1==e.configuration.characterClass),t.xp6(1),t.Q6J("ngIf",2==e.configuration.characterClass),t.xp6(3),t.hij(" ",e.name,"")}}function sl(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1,"Name"),t.qZA())}function ll(n,i){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij("",e.name," ")}}function cl(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Class "),t.qZA())}function ml(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Titan"),t.qZA())}function dl(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Hunter"),t.qZA())}function ul(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Warlock"),t.qZA())}function pl(n,i){if(1&n&&(t.TgZ(0,"td",32),t.YNc(1,ml,2,0,"span",26),t.YNc(2,dl,2,0,"span",26),t.YNc(3,ul,2,0,"span",26),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",0==e.configuration.characterClass),t.xp6(1),t.Q6J("ngIf",1==e.configuration.characterClass),t.xp6(1),t.Q6J("ngIf",2==e.configuration.characterClass)}}function gl(n,i){1&n&&(t.TgZ(0,"th",31),t._UZ(1,"app-stat-icon",33),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",0))}function _l(n,i){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",10*e.configuration.minimumStatTiers[0].value," ")}}function fl(n,i){1&n&&(t.TgZ(0,"th",31),t._UZ(1,"app-stat-icon",33),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",1))}function hl(n,i){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",10*e.configuration.minimumStatTiers[1].value," ")}}function xl(n,i){1&n&&(t.TgZ(0,"th",31),t._UZ(1,"app-stat-icon",33),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",2))}function Tl(n,i){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",10*e.configuration.minimumStatTiers[2].value," ")}}function yl(n,i){1&n&&(t.TgZ(0,"th",31),t._UZ(1,"app-stat-icon",33),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",3))}function bl(n,i){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",10*e.configuration.minimumStatTiers[3].value," ")}}function Cl(n,i){1&n&&(t.TgZ(0,"th",31),t._UZ(1,"app-stat-icon",33),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",4))}function vl(n,i){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",10*e.configuration.minimumStatTiers[4].value," ")}}function Al(n,i){1&n&&(t.TgZ(0,"th",31),t._UZ(1,"app-stat-icon",33),t.qZA()),2&n&&(t.xp6(1),t.Q6J("stat",5))}function Zl(n,i){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",10*e.configuration.minimumStatTiers[5].value," ")}}function wl(n,i){1&n&&t._UZ(0,"th",31)}function Sl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",32)(1,"button",34),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.delete(r.name))}),t.TgZ(2,"mat-icon"),t._uU(3,"delete_forever"),t.qZA()(),t.TgZ(4,"button",35),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.load(r.name))}),t.TgZ(5,"mat-icon"),t._uU(6,"check_circle_outline"),t.qZA()(),t.TgZ(7,"button",36),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.copySingleSettingToClipboard(r))}),t.TgZ(8,"mat-icon"),t._uU(9,"get_app"),t.qZA()()()}}function Il(n,i){1&n&&t._UZ(0,"tr",37)}function kl(n,i){1&n&&t._UZ(0,"tr",38)}function Ol(n,i){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"br"),t.TgZ(2,"button",39),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.copyAllSettingsToClipboard())}),t._uU(3," Copy all saved configurations to the clipboard "),t.qZA(),t.BQk()}}let Ml=(()=>{class n{constructor(e,o,a,r,l){this.config=e,this.formBuilder=o,this.dialog=a,this._snackBar=r,this.clipboard=l,this.selectedEntry="",this.storedConfigs=[],this.displayedColumns=["name","class","mobility","resilience","recovery","discipline","intellect","strength","delete"],this.ngUnsubscribe=new it.xQ,this.settingsNameForm=this.formBuilder.group({name:[null]}),this.importTextForm=this.formBuilder.group({content:[null]})}ngOnInit(){this.config.storedConfigurations.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(e=>this.storedConfigs=e)}submit(){const e=this.settingsNameForm.get("name")?.value;!e||(this.config.doesSavedConfigurationExist(e)?this.dialog.open(Ht,{width:"300px",data:{description:"Do you want to overwrite this configuration?"}}).afterClosed().subscribe(a=>{a&&(this.config.saveCurrentConfigurationToName(e),this.settingsNameForm.reset(),this.selectedEntry=e)}):(this.config.saveCurrentConfigurationToName(e),this.settingsNameForm.reset(),this.selectedEntry=e))}delete(e){this.dialog.open(Ht,{width:"300px",data:{description:"Do you want to delete this configuration?"}}).afterClosed().subscribe(a=>{a&&this.config.deleteStoredConfiguration(e)})}clearEverything(){this.dialog.open(Ht,{width:"300px",data:{description:"Do you want to clear all settings?"}}).afterClosed().subscribe(o=>{o&&this.config.resetCurrentConfiguration()})}load(e){this.dialog.open(Ht,{width:"300px",data:{description:"Do you want to load this preset?"}}).afterClosed().subscribe(a=>{a&&this.config.loadSavedConfiguration(e)})}runImport(){const e=this.importTextForm.get("content")?.value;if(!e)return this.openSnackBar("Invalid input.");try{const o=mt.decompress(e,{inputEncoding:"Base64"}),a="["==o.substr(0,1);let r=JSON.parse(o);a||(r=[r]),console.log("Incoming json:",r);for(let l of r)this.config.checkAndFixOldSavedConfigurations(l),l.hasOwnProperty("name")?a?this.config.saveConfiguration(l.name,l.configuration):this.config.saveCurrentConfiguration(l.configuration):this.config.saveCurrentConfiguration(l);this.openSnackBar("Successfully loaded this configuration"),this.importTextForm.get("content")?.reset()}catch(o){this.openSnackBar("Invalid input."),console.error(o)}}copySingleSettingToClipboard(e){this.clipboard.copy(this.config.getStoredConfigurationBase64Compressed(e.name)),this.openSnackBar("Copied the configuration to your clipboard. You can share it with your friends.")}copyAllSettingsToClipboard(){this.clipboard.copy(this.config.getAllStoredConfigurationsBase64Compressed()),this.openSnackBar("Exported all configurations to the clipboard. You can then save and share them.")}openSnackBar(e){this._snackBar.open(e,"",{duration:2500,politeness:"polite"})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j),t.Y36(X.QS),t.Y36(K.uw),t.Y36(Xt.ux),t.Y36(Mt.TU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-load-and-save-settings"]],decls:78,vars:13,consts:[[3,"formGroup","submit"],["id","settings"],["appearance","outline"],["formControlName","name","matInput","","maxlength","30","minlength","4","placeholder","Awesome Discipline Build 4"],["color","primary","mat-raised-button","","type","submit",3,"disabled"],["color","warn","mat-raised-button","","matTooltip","Clears the ENTIRE configuration and uses the default settings. Use with caution.",3,"click"],["color","primary","mat-raised-button","","matTooltip","Copy your current configuration into your clipboard. You will be able to share it with others and import it later.",3,"cdkCopyToClipboard","click"],[2,"display","none"],[3,"value","disabled","valueChange"],[3,"value",4,"ngFor","ngForOf"],["color","primary","mat-raised-button","","matTooltip","Load the currently selected configuration.",3,"disabled","click"],["color","warn","mat-stroked-button","","matTooltip","Delete the currently selected configuration. Can not be undone.",3,"disabled","click"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","class"],["matColumnDef","mobility"],["matColumnDef","resilience"],["matColumnDef","recovery"],["matColumnDef","discipline"],["matColumnDef","intellect"],["matColumnDef","strength"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"formGroup"],["formControlName","content","matInput",""],["color","primary","mat-raised-button","","matTooltip","Import the given configuration",3,"click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[3,"stat"],["color","warn","mat-icon-button","","matTooltip","Delete this configuration permanently.",3,"click"],["color","primary","mat-icon-button","","matTooltip","Load this configuration. Your current settings will be overwritten.",3,"click"],["color","primary","mat-icon-button","","matTooltip","Copy this configuration into your clipboard. You will be able to share it with others and import it later.",3,"click"],["mat-header-row",""],["mat-row",""],["color","primary","mat-raised-button","","matTooltip","Export all configurations to the clipboard. You can then save and share them.",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("submit",function(){return o.submit()}),t.TgZ(1,"table",1)(2,"tr")(3,"td")(4,"mat-form-field",2)(5,"mat-label"),t._uU(6,"Name to save the configuration"),t.qZA(),t._UZ(7,"input",3),t.qZA()(),t.TgZ(8,"td")(9,"button",4),t._uU(10," Save current "),t.qZA()(),t.TgZ(11,"td")(12,"button",5),t.NdJ("click",function(){return o.clearEverything()}),t._uU(13,"Clear everything "),t.qZA()(),t.TgZ(14,"td")(15,"button",6),t.NdJ("click",function(){return o.openSnackBar("Copied the configuration to your clipboard. You can share it with your friends.")}),t._uU(16," Copy Current "),t.qZA()()(),t.TgZ(17,"tr",7)(18,"td")(19,"mat-form-field",2)(20,"mat-label"),t._uU(21,"Load saved configuration"),t.qZA(),t.TgZ(22,"mat-select",8),t.NdJ("valueChange",function(r){return o.selectedEntry=r}),t.YNc(23,rl,9,5,"mat-option",9),t.qZA()()(),t.TgZ(24,"td")(25,"button",10),t.NdJ("click",function(){return o.load(o.selectedEntry)}),t._uU(26,"Load "),t.qZA()(),t.TgZ(27,"td")(28,"button",11),t.NdJ("click",function(){return o.delete(o.selectedEntry)}),t._uU(29,"Delete "),t.qZA()()()()(),t._UZ(30,"br"),t.TgZ(31,"table",12),t.ynx(32,13),t.YNc(33,sl,2,0,"th",14),t.YNc(34,ll,2,1,"td",15),t.BQk(),t.ynx(35,16),t.YNc(36,cl,2,0,"th",14),t.YNc(37,pl,4,3,"td",15),t.BQk(),t.ynx(38,17),t.YNc(39,gl,2,1,"th",14),t.YNc(40,_l,2,1,"td",15),t.BQk(),t.ynx(41,18),t.YNc(42,fl,2,1,"th",14),t.YNc(43,hl,2,1,"td",15),t.BQk(),t.ynx(44,19),t.YNc(45,xl,2,1,"th",14),t.YNc(46,Tl,2,1,"td",15),t.BQk(),t.ynx(47,20),t.YNc(48,yl,2,1,"th",14),t.YNc(49,bl,2,1,"td",15),t.BQk(),t.ynx(50,21),t.YNc(51,Cl,2,1,"th",14),t.YNc(52,vl,2,1,"td",15),t.BQk(),t.ynx(53,22),t.YNc(54,Al,2,1,"th",14),t.YNc(55,Zl,2,1,"td",15),t.BQk(),t.ynx(56,23),t.YNc(57,wl,1,0,"th",14),t.YNc(58,Sl,10,0,"td",15),t.BQk(),t.YNc(59,Il,1,0,"tr",24),t.YNc(60,kl,1,0,"tr",25),t.qZA(),t.YNc(61,Ol,4,0,"ng-container",26),t._UZ(62,"br"),t.TgZ(63,"div"),t._UZ(64,"hr"),t.TgZ(65,"h2"),t._uU(66,"Import a previously exported configuration"),t.qZA(),t.TgZ(67,"form",27)(68,"table")(69,"tr")(70,"td")(71,"mat-form-field",2)(72,"mat-label"),t._uU(73,"Copied configuration"),t.qZA(),t._UZ(74,"input",28),t.qZA()(),t.TgZ(75,"td")(76,"button",29),t.NdJ("click",function(){return o.runImport()}),t._uU(77," Start the import "),t.qZA()()()()()()),2&e){let a;t.Q6J("formGroup",o.settingsNameForm),t.xp6(9),t.Q6J("disabled",!(null!=(a=o.settingsNameForm.get("name"))&&a.value)||(null==(a=o.settingsNameForm.get("name"))?null:a.value.length)<4||(null==(a=o.settingsNameForm.get("name"))?null:a.value.length)>30),t.xp6(6),t.Q6J("cdkCopyToClipboard",o.config.getCurrentConfigBase64Compressed()),t.xp6(7),t.Q6J("value",o.selectedEntry)("disabled",0==o.storedConfigs.length),t.xp6(1),t.Q6J("ngForOf",o.storedConfigs),t.xp6(2),t.Q6J("disabled",!o.selectedEntry||0==o.storedConfigs.length),t.xp6(3),t.Q6J("disabled",!o.selectedEntry||0==o.storedConfigs.length),t.xp6(3),t.Q6J("dataSource",o.storedConfigs),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",o.storedConfigs.length>0),t.xp6(6),t.Q6J("formGroup",o.importTextForm)}},dependencies:[b.sg,b.O5,X._Y,X.Fj,X.JJ,X.JL,X.wO,X.nD,X.sg,X.u,R.lW,dt.KE,dt.hX,nl.gD,xe.ey,jt.Nt,S.BZ,S.fO,S.as,S.w1,S.Dz,S.nj,S.ge,S.ev,S.XQ,S.Gk,L.gM,ot.Hw,Mt.i3,be],styles:[".modTable[_ngcontent-%COMP%]{width:100%}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{height:30px}.mat-column-class[_ngcontent-%COMP%]{min-width:55px;padding-right:2px;padding-left:2px;text-align:center;border-right:1px solid currentColor}.mat-column-mobility[_ngcontent-%COMP%], .mat-column-resilience[_ngcontent-%COMP%], .mat-column-recovery[_ngcontent-%COMP%], .mat-column-discipline[_ngcontent-%COMP%], .mat-column-intellect[_ngcontent-%COMP%], .mat-column-strength[_ngcontent-%COMP%]{min-width:40px;text-align:center}.mat-row[_ngcontent-%COMP%]:hover{background-color:#494949}.mat-column-mobility[_ngcontent-%COMP%], .mat-column-recovery[_ngcontent-%COMP%], .mat-column-intellect[_ngcontent-%COMP%]{background-color:#464646}.mat-column-name[_ngcontent-%COMP%]{padding-right:4px;border-right:1px solid currentColor;min-width:150px}th.mat-header-cell[_ngcontent-%COMP%]:last-of-type, td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}.mat-cell[_ngcontent-%COMP%]:last-of-type, .mat-header-cell[_ngcontent-%COMP%]:last-of-type, .mat-footer-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}.stat-negative[_ngcontent-%COMP%], .stat-positive[_ngcontent-%COMP%]{margin-right:3px}.stat-negative[_ngcontent-%COMP%]{color:#f08080}.stat-positive[_ngcontent-%COMP%]{color:#6495ed}.stat-display[_ngcontent-%COMP%]{width:60px;float:left;align-content:end;text-align:right}.mat-row[_ngcontent-%COMP%]:hover, .mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{background-color:#494949}.mat-row.selected[_ngcontent-%COMP%]:hover, .mat-row.selected[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{background-color:#89b2ff30}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .mat-column-mobility[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .mat-column-recovery[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .mat-column-intellect[_ngcontent-%COMP%]{background-color:#89b2ff1c}.mat-column-load[_ngcontent-%COMP%], .mat-column-delete[_ngcontent-%COMP%]{padding-left:3px;padding-right:3px}[_nghost-%COMP%]     .mat-form-field-wrapper{margin:0!important;padding:0}"]}),n})();function Dl(n,i){1&n&&t._UZ(0,"br")}function Ul(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",2)(1,"img",3),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.enableItem(r.itemInstanceId))}),t.qZA(),t.YNc(2,Dl,1,0,"br",4),t.qZA()}if(2&n){const e=i.$implicit,o=i.index,a=t.oxw();t.xp6(1),t.MGl("src","https://bungie.net/",e.icon,"",t.LSH),t.Q6J("matTooltip",a.generateTooltip(e)),t.xp6(1),t.Q6J("ngIf",(o+1)%10==0)}}let Nl=(()=>{class n{constructor(e,o){this.config=e,this.db=o,this.disabledItems=[],this.ngUnsubscribe=new it.xQ}enableItem(e){this.config.modifyConfiguration(o=>{o.disabledItems.splice(o.disabledItems.indexOf(e),1)})}generateTooltip(e){return"Click this icon to activate this item again.\r\n"+e.name+"  "+(e.mobility+(e.masterworked?2:0))+"/"+(e.resilience+(e.masterworked?2:0))+"/"+(e.recovery+(e.masterworked?2:0))+"/"+(e.discipline+(e.masterworked?2:0))+"/"+(e.intellect+(e.masterworked?2:0))+"/"+(e.strength+(e.masterworked?2:0))}ngOnInit(){var e=this;this.config.configuration.pipe((0,F.R)(this.ngUnsubscribe)).subscribe(function(){var o=(0,T.Z)(function*(a){let r=[];for(let l of a.disabledItems){let d=yield e.db.inventoryArmor.where("itemInstanceId").equals(l).first();d&&r.push(d)}e.disabledItems=r});return function(a){return o.apply(this,arguments)}}())}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j),t.Y36(ct))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ignored-items-list"]],decls:2,vars:1,consts:[[1,"item-icon-container"],["class","item-sub",4,"ngFor","ngForOf"],[1,"item-sub"],["matTooltipClass","allow-cr",1,"item-icon",3,"src","matTooltip","click"],[4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ul,3,3,"span",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.disabledItems))},dependencies:[b.sg,b.O5,L.gM],styles:[".item-icon[_ngcontent-%COMP%]{width:40px}.item-icon[_ngcontent-%COMP%]:hover{filter:brightness(.8) hue-rotate(350deg) saturate(3) blur(2px) contrast(.6);cursor:not-allowed}.item-sub[_ngcontent-%COMP%]{margin-right:3px}.item-icon-container[_ngcontent-%COMP%]{position:relative;contain:layout paint style;box-sizing:border-box;width:var(--item-size);transition:opacity .2s,transform .2s}"]}),n})(),El=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-settings"]],decls:63,vars:0,consts:[["id","card-config"],["id","content-char-selection"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-title"),t._uU(3,"Character Selection"),t.qZA(),t.TgZ(4,"mat-card-content",1),t._UZ(5,"app-desired-class-selection"),t.qZA()(),t.TgZ(6,"mat-card")(7,"mat-card-title"),t._uU(8,"Select the stats you want to achieve"),t.qZA(),t.TgZ(9,"mat-card-subtitle"),t._uU(10,"The heart of this tool. Select the stats you want!"),t.qZA(),t.TgZ(11,"mat-card-content"),t._UZ(12,"app-desired-stat-selection"),t.qZA()(),t.TgZ(13,"mat-card")(14,"mat-card-title"),t._uU(15,"Exotic"),t.qZA(),t.TgZ(16,"mat-card-subtitle"),t._uU(17," If you want, limit all results to an exotic. Use this to create a build around an exotic."),t._UZ(18,"br"),t._uU(19," Exotics you do not have in the inventory or vault are grayed out. "),t.qZA(),t.TgZ(20,"mat-card-content"),t._UZ(21,"app-desired-exotic-selection"),t.qZA()(),t.TgZ(22,"mat-card")(23,"mat-card-title"),t._uU(24,"Armor limitation"),t.qZA(),t.TgZ(25,"mat-card-subtitle"),t._uU(26," This section allows you to further specify what kind of armor and mods you want. "),t.qZA(),t.TgZ(27,"mat-card-content"),t._UZ(28,"app-desired-mod-selection"),t.qZA()(),t.TgZ(29,"mat-card")(30,"mat-card-title"),t._uU(31,"Stat-Boost Selection"),t.qZA(),t.TgZ(32,"mat-card-subtitle"),t._uU(33,"Select Mods and Skills that affect your overall stats."),t._UZ(34,"br"),t._uU(35," Please note that D2AP also allows theoretical, but impossible input."),t.qZA(),t.TgZ(36,"mat-card-content"),t._UZ(37,"app-desired-mods-selection"),t.qZA()(),t.TgZ(38,"mat-card")(39,"mat-card-title"),t._uU(40,"Advanced Settings"),t.qZA(),t.TgZ(41,"mat-card-subtitle"),t._uU(42,"More settings! Use them to fine-tune your buildcrafting process."),t.qZA(),t.TgZ(43,"mat-card-content"),t._UZ(44,"app-advanced-settings"),t.qZA()(),t.TgZ(45,"mat-card")(46,"mat-card-title"),t._uU(47,"Disabled Armor Pieces"),t.qZA(),t.TgZ(48,"mat-card-subtitle"),t._uU(49," These armor pieces are disabled. Click them to enable them again."),t._UZ(50,"br"),t._uU(51," They won't show up in any results."),t._UZ(52,"br"),t._uU(53," You can disable items in the detailed result overview. "),t.qZA(),t.TgZ(54,"mat-card-content"),t._UZ(55,"app-ignored-items-list"),t.qZA()(),t.TgZ(56,"mat-card")(57,"mat-card-title"),t._uU(58,"Configuration Management"),t.qZA(),t.TgZ(59,"mat-card-subtitle"),t._uU(60,"Save and load your buildcrafting settings for another day!"),t.qZA(),t.TgZ(61,"mat-card-content"),t._UZ(62,"app-load-and-save-settings"),t.qZA()()())},dependencies:[w.a8,w.dn,w.n5,w.$j,hr,Ur,Hr,es,Gs,el,Ml,Nl],styles:["#card-config[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:inline-block;vertical-align:top;white-space:normal;margin-bottom:20px;margin-left:3px;margin-right:3px}#card-config[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{margin-bottom:4px}#content-char-selection[_ngcontent-%COMP%]{margin-bottom:0}"]}),n})(),Pl=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-armor-picker-page"]],decls:3,vars:0,consts:[["id","container"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-settings")(2,"app-results"),t.qZA())},dependencies:[El,_e],styles:["#container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin-right:3px;white-space:nowrap}"]}),n})();const Ce=function(){return["","Mobility","Resilience","Recovery","Discipline","Intellect","Strength"]};function Rl(n,i){if(1&n&&(t.TgZ(0,"tr",27)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",22)(4,"div",28),t._UZ(5,"div",29),t.TgZ(6,"span",30),t._uU(7),t.ALo(8,"number"),t.qZA()()()()),2&n){const e=t.oxw().index,o=t.oxw(2).index,a=t.oxw();t.Q6J("matTooltip",t.DdM(9,Ce)[e]),t.xp6(2),t.hij(" ",t.DdM(10,Ce)[e]," "),t.xp6(3),t.Jzz("width:",a.clusterInformation[o].mean[e]/32*100,"%"),t.xp6(2),t.hij(" ",t.xi3(8,6,a.clusterInformation[o].mean[e],"1.0-0")," ")}}function ql(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Rl,9,11,"tr",26),t.BQk()),2&n){const e=i.index;t.xp6(1),t.Q6J("ngIf",e>0)}}function Jl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card",21)(1,"mat-card-title"),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-content")(6,"div")(7,"table",22),t.YNc(8,ql,2,1,"ng-container",18),t.qZA()(),t.TgZ(9,"mat-form-field",23)(10,"mat-label"),t._uU(11,"DIM Search Query"),t.qZA(),t._UZ(12,"input",24),t.qZA(),t.TgZ(13,"button",25),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openSnackBar("Copied the DIM search query to your clipboard."))}),t._uU(14," Copy DIM query to clipboard "),t.qZA()()()}if(2&n){const e=t.oxw(),o=e.index,a=e.$implicit,r=t.oxw();t.xp6(2),t.hij(" Cluster ",o+1," "),t.xp6(2),t.AsE(" Contains ",a.length," item",a.length>1?"s":""," "),t.xp6(4),t.Q6J("ngForOf",r.clusterInformation[o].mean),t.xp6(4),t.Q6J("value",r.getDIMStringForCluster(a)),t.xp6(1),t.Q6J("cdkCopyToClipboard",r.getDIMStringForCluster(a))}}function Ll(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Jl,15,6,"mat-card",20),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.length>0)}}var ve=[{id:0,size:214,centroids:[5.242990654205609,3.4392523364485994,23.074766355140188,4.52336448598131,17.99532710280374,8.074766355140188],std:[3.262185500658884,3.137958193527344,2.0745611905196912,3.223158380401712,2.6478649185881147,3.356022774004607,3.3823650213485315],mean:[62.350467289719624,5.242990654205608,3.439252336448598,23.074766355140188,4.5233644859813085,17.99532710280374,8.074766355140186]},{id:1,size:264,centroids:[13.613636363636365,3.060606060606063,14.431818181818182,6.731060606060606,12.575757575757574,10.575757575757576],std:[4.915624932359143,2.735897756946947,1.897597343200423,3.036390647550984,3.2253188618447473,3.0097969617389406,3.1372197425220545],mean:[60.98863636363637,13.613636363636363,3.0606060606060606,14.431818181818182,6.731060606060606,12.575757575757576,10.575757575757576]},{id:2,size:220,centroids:[5.209090909090909,15.586363636363636,10.936363636363636,13.281818181818181,13.604545454545452,3.8818181818181836],std:[3.3631090204013643,2.931782865076046,2.9200605883727038,3.289049973803757,2.6349662061268395,2.6591750828428204,2.395703224398619],mean:[62.5,5.209090909090909,15.586363636363636,10.936363636363636,13.281818181818181,13.604545454545455,3.881818181818182]},{id:3,size:230,centroids:[8.6,15.330434782608698,6.943478260869563,6.408695652173913,5.578260869565216,18.26086956521739],std:[4.27370926113142,3.855014315301441,3.2487061290912984,3.5081098914433078,3.559587955581114,3.1761194803539676,3.596667444705349],mean:[61.12173913043478,8.6,15.330434782608696,6.943478260869565,6.408695652173913,5.578260869565217,18.26086956521739]},{id:4,size:261,centroids:[11.74712643678161,5.655172413793104,13.873563218390803,11.022988505747126,16.57088122605364,3.0038314176245224],std:[3.5878146263573103,2.8197860971981994,2.9890605143791737,2.9825309245974925,2.7497287061744258,2.8324620286123516,1.8428616632651005],mean:[61.87356321839081,11.74712643678161,5.655172413793103,13.873563218390805,11.022988505747126,16.57088122605364,3.003831417624521]},{id:5,size:249,centroids:[6.598393574297189,7.2289156626506035,7.674698795180722,6.831325301204822,5.995983935742974,7.425702811244981],std:[12.188382924990831,3.7780346472852226,3.7855581933977014,3.9659084518463055,3.2508780840166134,2.4288222155150856,3.23718036285365],mean:[41.75502008032129,6.598393574297189,7.228915662650603,7.674698795180723,6.831325301204819,5.995983935742972,7.42570281124498]},{id:6,size:241,centroids:[4.580912863070541,10.62655601659751,15.72199170124481,20.186721991701248,5.7634854771784205,4.8672199170124495],std:[4.0360666526825675,2.5776864620318327,2.726712032141287,2.7236414380869185,3.4135743182998106,3.164594939982558,2.8952195061747896],mean:[61.74688796680498,4.580912863070539,10.62655601659751,15.721991701244812,20.186721991701244,5.763485477178423,4.867219917012448]},{id:7,size:352,centroids:[4.96875,10.849431818181818,15.676136363636362,5.085227272727275,13.079545454545453,12.113636363636365],std:[3.864447558701623,2.876694966732471,2.825917840642513,2.8500410080793133,2.604753041986593,2.753797030174534,3.084495990290069],mean:[61.77272727272727,4.96875,10.849431818181818,15.676136363636363,5.0852272727272725,13.079545454545455,12.113636363636363]},{id:8,size:219,centroids:[21.401826484018265,4.529680365296804,4.954337899543379,14.022831050228312,7.168949771689496,6.8036529680365305],std:[7.654498360234386,3.856746305047457,3.0774088630224354,3.486239910130717,4.509361233853425,3.691515724130434,3.433882092856456],mean:[58.881278538812786,21.401826484018265,4.529680365296803,4.954337899543379,14.02283105022831,7.168949771689498,6.80365296803653]},{id:9,size:183,centroids:[4.448087431693989,22.114754098360656,4.868852459016392,7.459016393442623,11.240437158469945,9.765027322404372],std:[7.900837110469869,3.265921971202623,3.896032191192026,3.424902708986657,3.3556927380910535,3.7206143627650876,3.9564220813839577],mean:[59.89617486338798,4.448087431693989,22.114754098360656,4.868852459016393,7.459016393442623,11.240437158469945,9.765027322404372]},{id:10,size:197,centroids:[13.563451776649746,10.761421319796954,6.527918781725887,20.654822335025383,4.934010152284262,5.18274111675127],std:[4.239153654030002,3.3077343290831713,2.8924486501981233,2.9338771160608355,3.5098461495889413,3.192898794854312,2.920215710334156],mean:[61.6243654822335,13.563451776649746,10.761421319796954,6.527918781725888,20.65482233502538,4.934010152284264,5.182741116751269]},{id:11,size:176,centroids:[8.255681818181818,16.181818181818183,7.11931818181818,4.619318181818182,21.0625,5.505681818181819],std:[3.349621998445128,3.4620343467651815,3.3296776490755446,2.945693532873097,2.7583580190103967,3.126214049887545,3.078027492852078],mean:[62.74431818181818,8.255681818181818,16.181818181818183,7.119318181818182,4.619318181818182,21.0625,5.505681818181818]},{id:12,size:194,centroids:[3.5670103092783503,14.773195876288659,13.036082474226804,13.185567010309278,4.979381443298967,12.144329896907218],std:[3.89886364980042,2.255251632823776,2.5893570716174388,3.248552824613239,3.1004926799108317,2.8845824993776903,2.8864151735009584],mean:[61.68556701030928,3.5670103092783507,14.77319587628866,13.036082474226804,13.185567010309278,4.979381443298969,12.144329896907216]},{id:13,size:302,centroids:[5.311258278145695,4.4701986754966905,21.897350993377486,10.688741721854305,6.834437086092715,12.605960264900663],std:[5.1142628152416245,2.9920946350614983,2.6882491851253567,3.071581172564087,2.99431450280505,3.116626644660552,2.58548804104293],mean:[61.80794701986755,5.311258278145695,4.470198675496689,21.897350993377483,10.688741721854305,6.8344370860927155,12.605960264900663]},{id:14,size:364,centroids:[12.263736263736265,11.32967032967033,5.936813186813188,8.524725274725274,12.07142857142857,7.782967032967034],std:[6.666392881793753,2.8942239993391565,2.947866371540881,3.041289192757803,3.0876888182534996,2.4540644069260296,2.6803305558675676],mean:[57.90934065934066,12.263736263736265,11.32967032967033,5.936813186813187,8.524725274725276,12.071428571428571,7.782967032967033]},{id:15,size:219,centroids:[6.981735159817351,5.9908675799086755,18.127853881278536,4.97716894977169,5.182648401826483,20.89041095890411],std:[4.3335830659244685,3.5503759593138464,3.5270785628911785,4.123339305032141,2.7998081886699646,3.283747903424203,2.8311584355558064],mean:[62.15068493150685,6.981735159817352,5.9908675799086755,18.12785388127854,4.9771689497716896,5.1826484018264845,20.89041095890411]},{id:16,size:147,centroids:[6.285714285714285,20.836734693877553,4.8639455782312915,17.510204081632654,5.897959183673469,7.394557823129253],std:[3.358145469360083,3.4877476344546254,3.2245649941865486,3.0557367019327,4.0937094190209065,3.1136788219952605,3.842013283457479],mean:[62.7891156462585,6.285714285714286,20.836734693877553,4.863945578231292,17.510204081632654,5.8979591836734695,7.394557823129252]},{id:17,size:202,centroids:[18.425742574257423,6.871287128712871,6.678217821782177,5.06930693069307,20.40594059405941,5.876237623762377],std:[3.0226636827682554,3.292828132097339,3.518715749263091,3.4627255810748356,3.075363266145594,3.5804283293104753,3.315804113390658],mean:[63.32673267326733,18.425742574257427,6.871287128712871,6.678217821782178,5.069306930693069,20.405940594059405,5.876237623762377]},{id:18,size:286,centroids:[11.22027972027972,7.073426573426573,12.65034965034965,12.594405594405593,4.209790209790211,13.220279720279722],std:[4.720510224882134,2.8685361372318168,2.6005789112305338,3.052197922484291,2.451602446915686,2.7244266014541174,2.7638787756329526],mean:[60.96853146853147,11.22027972027972,7.073426573426573,12.65034965034965,12.594405594405595,4.20979020979021,13.22027972027972]},{id:19,size:197,centroids:[6.263959390862944,8.568527918781726,16.80710659898477,4.000000000000003,22.593908629441625,4.883248730964468],std:[2.7333118141791917,3.3626657547151964,3.4540163497542435,2.646397291854302,2.565469285152567,3.018237668617547,2.8287109641017594],mean:[63.11675126903553,6.2639593908629445,8.568527918781726,16.80710659898477,4,22.593908629441625,4.883248730964467]},{id:20,size:279,centroids:[18.025089605734767,6.150537634408602,6.161290322580646,5.767025089605736,7.999999999999998,15.602150537634408],std:[6.590788110639117,3.6436721401086296,3.165505073725202,3.13700467469825,2.7769973891540207,3.4672154149710614,4.017425492621824],mean:[59.70609318996416,18.025089605734767,6.150537634408602,6.161290322580645,5.767025089605735,8,15.602150537634408]},{id:21,size:78,centroids:[15.96153846153846,16.85897435897436,16.807692307692307,3552713678800501e-30,5329070518200751e-30,-5329070518200751e-30],std:[2.095815090231219,7.438828122504502,7.482836393563639,8.12413063050432,0,0,0],mean:[49.62820512820513,15.961538461538462,16.858974358974358,16.807692307692307,0,0,0]},{id:22,size:137,centroids:[4.525547445255475,3.583941605839417,23.532846715328468,19.948905109489054,4.3576642335766405,6.248175182481752],std:[2.9351806639916567,2.7575572416084317,2.2707939003224227,2.908029186302962,3.3306093063017315,2.6644092885703916,3.4848010785869454],mean:[62.197080291970806,4.525547445255475,3.5839416058394162,23.532846715328468,19.94890510948905,4.357664233576642,6.248175182481752]},{id:23,size:194,centroids:[13.242268041237114,3.5103092783505163,14.675257731958762,19.55154639175258,6.139175257731957,5.092783505154641],std:[3.810494814771566,2.886105181640385,2.0818477512276696,2.6197152448917316,3.409818599464837,3.0311357231629183,2.9733966349516936],mean:[62.21134020618557,13.242268041237113,3.5103092783505154,14.675257731958762,19.551546391752577,6.139175257731959,5.092783505154639]},{id:24,size:239,centroids:[5.569037656903766,5.401673640167365,20.92468619246862,13.09205020920502,13.497907949790793,4.096234309623432],std:[3.8502204432228733,3.071015816571908,3.081143061480697,2.79904271710946,2.169280265760518,2.62802363192924,2.3450167178621983],mean:[62.58158995815899,5.569037656903766,5.401673640167364,20.92468619246862,13.092050209205022,13.497907949790795,4.096234309623431]}];let Yl=(()=>{class n{constructor(e,o,a){this.db=e,this._snackBar=o,this.inventory=a,this.clusterInformation=ve,this.items=[],this.clusters=[],this.exoticFilter=0,this.masterworkFilter=0,this.classFilter=-1,this.clusterInformation=ve.sort((r,l)=>l.mean[3]-r.mean[3])}ngAfterViewInit(){var e=this;return(0,T.Z)(function*(){e.inventory.inventory.pipe((0,lt.b)(200)).subscribe((0,T.Z)(function*(){yield e.Update(),e.openSnackBar("Clusters were updated.")}))})()}Update(){var e=this;return(0,T.Z)(function*(){var o=yield e.db.inventoryArmor.toArray(),a=[];for(let l=0;l<e.clusterInformation.length;l++)a.push([]);for(let l of o)l.slot==C.y.ArmorSlotClass||l.slot==C.y.ArmorSlotNone||-1!=e.classFilter&&l.clazz!=e.classFilter||-1==e.exoticFilter&&l.isExotic||1==e.exoticFilter&&!l.isExotic||-1==e.masterworkFilter&&l.masterworked||1==e.masterworkFilter&&!l.masterworked||a[e.getClusterid(l)].push(l);e.clusters=a})()}openSnackBar(e){this._snackBar.open(e,"",{duration:2500,politeness:"polite"})}getDIMStringForCluster(e){return e.map(o=>`id:'${o.itemInstanceId}'`).join(" or ")}vectorDistance(e,o){return Math.sqrt(e.reduce((a,r,l)=>a+Math.pow(r-o[l],2),0))}getClusterid(e){var o=Number.MAX_VALUE,a=-1;for(let l=0;l<this.clusterInformation.length;l++){var r=this.vectorDistance(this.clusterInformation[l].mean,[e.mobility+e.resilience+e.recovery+e.discipline+e.intellect+e.strength,e.mobility,e.resilience,e.recovery,e.discipline,e.intellect,e.strength]);r<o&&(o=r,a=l)}return a}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ct),t.Y36(Xt.ux),t.Y36(nt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-armor-cluster-page"]],decls:92,vars:5,consts:[["id","cluster-container"],["color","primary","fxShow","false","fxShow.lt-md","true","mat-raised-button","","routerLink","/",1,"returnbutton"],[1,"settings-container"],[3,"value","valueChange"],["matTooltip","Only select non-exotic armor pieces.","value","-1",1,"red"],["matTooltip","Only select exotic  armor pieces.","value","1",1,"green"],["checked","","value","0"],["matTooltip","Only select non-masterworked armor pieces.","value","-1",1,"red"],["matTooltip","Only select masterworked armor pieces.","value","1",1,"green"],["matTooltip","Titan","value","0"],["aria-hidden","true","focusable","false","viewBox","0 0 32 32","xmlns","http://www.w3.org/2000/svg",1,"svgClassIcon"],["d","m14.839 15.979-13.178-7.609v15.218zm2.322 0 13.178 7.609v-15.218zm5.485-12.175-6.589-3.804-13.178 7.609 13.178 7.609 13.179-7.609zm0 16.784-6.589-3.805-13.178 7.609 13.178 7.608 13.179-7.608-6.59-3.805z","fill","currentColor"],["matTooltip","Hunter","value","1"],["d","m9.055 10.446 6.945-.023-6.948 10.451 6.948-.024-7.412 11.15h-7.045l7.036-10.428h-7.036l7.032-10.422h-7.032l7.507-11.126 6.95-.024zm13.89 0-6.945-10.446 6.95.024 7.507 11.126h-7.032l7.032 10.422h-7.036l7.036 10.428h-7.045l-7.412-11.15 6.948.024-6.948-10.451z","fill","currentColor"],["matTooltip","Warlock","value","2"],["d","m5.442 23.986 7.255-11.65-2.71-4.322-9.987 15.972zm5.986 0 4.28-6.849-2.717-4.333-6.992 11.182zm7.83-11.611 7.316 11.611h5.426l-10.015-15.972zm-7.26 11.611h8.004l-4.008-6.392zm6.991-11.182-2.703 4.324 4.302 6.858h5.413zm-5.707-.459 2.71-4.331 2.71 4.331-2.703 4.326z","fill","currentColor"],["checked","","value","-1"],["fxFlexFill","1","fxLayout","row","fxLayout.xs","column","fxLayoutGap","5px",1,"cluster-container"],[4,"ngFor","ngForOf"],["color","primary","mat-raised-button","","routerLink","/","fxShow","false","fxShow.lt-md","true",1,"returnbutton"],["class","cluster-item",4,"ngIf"],[1,"cluster-item"],["width","100%"],["appearance","fill",1,"searchQueryField"],["matInput","","readonly","","type","text",3,"value"],["color","primary","mat-raised-button","","matTooltip","Use this button to copy a DIM search query to your clip board. It allows you to search the given items in DIM.",1,"copyButton",3,"cdkCopyToClipboard","click"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"stat-range"],[1,"stat-range-bar"],[1,"avg-stat-value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t._uU(2," Return to D2ArmorPicker "),t.qZA(),t.TgZ(3,"mat-card")(4,"mat-card-title"),t._uU(5," About this page "),t.qZA(),t.TgZ(6,"mat-card-content"),t._uU(7," This page "),t.TgZ(8,"i"),t._uU(9,"can"),t.qZA(),t._uU(10),t._UZ(11,"br")(12,"br"),t._uU(13,' Please note that it will cluster all armor for all characters. Make sure to use "is:titan", "is:warlock" or "is:hunter" in DIM. '),t._UZ(14,"br")(15,"br"),t._uU(16," Please also note that this feature is new and may have some inaccuracy for some items. "),t.qZA(),t.TgZ(17,"mat-card-title"),t._uU(18," How do I use this page? "),t.qZA(),t.TgZ(19,"mat-card-content")(20,"ol")(21,"li"),t._uU(22,"Pick one of the clusters below."),t.qZA(),t.TgZ(23,"li"),t._uU(24,"Copy the DIM search query and insert it in the search bar in DIM."),t.qZA(),t.TgZ(25,"li"),t._uU(26,' If you want, add one of the following to the search query: "is:titan", "is:warlock", "is:hunter" (without " of course);'),t._UZ(27,"br"),t._uU(28,' You can also use "not:masterwork", "not:exotic" or other filters. '),t.qZA(),t.TgZ(29,"li"),t._uU(30,"Look at all the armor. Just look at it. If you see duplicates, you can look at them and decide which ones to keep. "),t.qZA()()()(),t.TgZ(31,"mat-card")(32,"mat-card-title"),t._uU(33,"Options"),t.qZA(),t.TgZ(34,"mat-card-subtitle"),t._uU(35," Additional options for the clustering results. "),t.qZA(),t.TgZ(36,"mat-card-content")(37,"div",2)(38,"span")(39,"b"),t._uU(40,"Exotics"),t.qZA(),t._UZ(41,"br"),t._uU(42,"Decide whether you want to see or hide exotics."),t.qZA(),t.TgZ(43,"span")(44,"mat-button-toggle-group",3),t.NdJ("valueChange",function(){return o.Update()})("valueChange",function(r){return o.exoticFilter=r}),t.TgZ(45,"mat-button-toggle",4)(46,"mat-icon"),t._uU(47,"visibility_off"),t.qZA()(),t.TgZ(48,"mat-button-toggle",5)(49,"mat-icon"),t._uU(50,"visibility"),t.qZA()(),t.TgZ(51,"mat-button-toggle",6),t._uU(52,"All"),t.qZA()()()(),t.TgZ(53,"div",2)(54,"span")(55,"b"),t._uU(56,"Masterwork"),t.qZA(),t._UZ(57,"br"),t._uU(58,"Decide whether you want to see or hide masterworked armor."),t.qZA(),t.TgZ(59,"span")(60,"mat-button-toggle-group",3),t.NdJ("valueChange",function(){return o.Update()})("valueChange",function(r){return o.masterworkFilter=r}),t.TgZ(61,"mat-button-toggle",7)(62,"mat-icon"),t._uU(63,"visibility_off"),t.qZA()(),t.TgZ(64,"mat-button-toggle",8)(65,"mat-icon"),t._uU(66,"visibility"),t.qZA()(),t.TgZ(67,"mat-button-toggle",6),t._uU(68,"All"),t.qZA()()()(),t.TgZ(69,"div",2)(70,"span")(71,"b"),t._uU(72,"Class"),t.qZA(),t._UZ(73,"br"),t._uU(74,"Decide which class you want to see."),t.qZA(),t.TgZ(75,"span")(76,"mat-button-toggle-group",3),t.NdJ("valueChange",function(){return o.Update()})("valueChange",function(r){return o.classFilter=r}),t.TgZ(77,"mat-button-toggle",9),t.O4$(),t.TgZ(78,"svg",10),t._UZ(79,"path",11),t.qZA()(),t.kcU(),t.TgZ(80,"mat-button-toggle",12),t.O4$(),t.TgZ(81,"svg",10),t._UZ(82,"path",13),t.qZA()(),t.kcU(),t.TgZ(83,"mat-button-toggle",14),t.O4$(),t.TgZ(84,"svg",10),t._UZ(85,"path",15),t.qZA()(),t.kcU(),t.TgZ(86,"mat-button-toggle",16),t._uU(87,"All"),t.qZA()()()()()(),t.TgZ(88,"div",17),t.YNc(89,Ll,2,1,"ng-container",18),t.qZA(),t.TgZ(90,"a",19),t._uU(91," Return to D2ArmorPicker "),t.qZA()()),2&e&&(t.xp6(10),t.hij(" help you to sort out your vault a bit. It takes all your armor entries and tries to sort them into ",o.clusterInformation.length," clusters. It then gives you a DIM search query for each cluster. You can use this to look at similar rolls in your vault and to clean out some of them. "),t.xp6(34),t.Q6J("value",o.exoticFilter),t.xp6(16),t.Q6J("value",o.masterworkFilter),t.xp6(16),t.Q6J("value",o.classFilter),t.xp6(13),t.Q6J("ngForOf",o.clusters))},dependencies:[b.sg,b.O5,Q.xw,Q.SQ,Q.s9,$.b8,R.lW,R.zs,dt.KE,dt.hX,jt.Nt,w.a8,w.dn,w.n5,w.$j,L.gM,ot.Hw,ft.A9,ft.Yi,N.yS,Mt.i3,b.JJ],styles:["#cluster-container[_ngcontent-%COMP%]{max-width:800px;margin-left:auto;margin-right:auto}mat-card[_ngcontent-%COMP%]{margin-bottom:8px}.searchQueryField[_ngcontent-%COMP%]{width:100%}.returnbutton[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:15px;width:100%}.stat-range[_ngcontent-%COMP%]{height:20px;width:100%;margin-bottom:3px;float:left;background-color:gray}.stat-range-bar[_ngcontent-%COMP%]{height:100%;float:left;background-color:#fff}.settings-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.settings-container[_ngcontent-%COMP%]:not(:last-of-type){padding-bottom:2px;border-bottom:1px whitesmoke solid;margin-bottom:2px}.red[_ngcontent-%COMP%]{color:red}.red.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:red;color:#fff}.green[_ngcontent-%COMP%]{color:green}.green.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:green;color:#fff}.svgClassIcon[_ngcontent-%COMP%]{width:24px}.cluster-container[_ngcontent-%COMP%]{flex-wrap:wrap}.cluster-item[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}.avg-stat-value[_ngcontent-%COMP%]{margin-left:3px}.copyButton[_ngcontent-%COMP%]{width:100%}"]}),n})();function Fl(n,i){if(1&n&&(t.TgZ(0,"div",4,5),t._UZ(2,"img",6),t.TgZ(3,"span",7),t._uU(4),t.qZA()()),2&n){const e=t.oxw().ngVar,o=t.oxw();t.xp6(2),t.Q6J("src",o.artificeUrl,t.LSH),t.xp6(2),t.hij("\xd7",e,"")}}function Ql(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Fl,5,2,"div",3),t.BQk()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function Bl(n,i){if(1&n&&(t.TgZ(0,"div",9,5),t._UZ(2,"img",10),t.TgZ(3,"span",11),t._uU(4),t.qZA()()),2&n){const e=t.oxw().ngVar,o=t.oxw().$implicit,a=t.oxw().$implicit,r=t.oxw();t.Q6J("matTooltip",r.getStatName(a)),t.xp6(2),t.ekj("minor",1==o),t.Q6J("src",r.ModUrl[o+3*a],t.LSH),t.xp6(1),t.ekj("minor",1==o),t.xp6(1),t.hij("\xd7",e,"")}}function Vl(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Bl,5,7,"div",8),t.BQk()),2&n){const e=i.ngVar;t.xp6(1),t.Q6J("ngIf",e>0)}}function Hl(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Vl,2,1,"ng-container",1),t.ALo(2,"count"),t.BQk()),2&n){const e=i.$implicit,o=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngVar",t.xi3(2,1,a.mods,e+3*o))}}function jl(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Hl,3,4,"ng-container",2),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.modTypeIndex)}}const Wl={[v.MINOR_MOBILITY]:"https://www.bungie.net/common/destiny2_content/icons/287901ef741855655856f6e8f5776f03.png",[v.MAJOR_MOBILITY]:"https://www.bungie.net/common/destiny2_content/icons/c664ddd10920daab49cc3808dbb6a1e6.png",[v.ARTIFICE_MOBILITY]:"https://www.bungie.net/common/destiny2_content/icons/287901ef741855655856f6e8f5776f03.png",[v.MINOR_RESILIENCE]:"https://bungie.net/common/destiny2_content/icons/53c28186a4b97285a01aace5748e4de7.png",[v.MAJOR_RESILIENCE]:"https://www.bungie.net/common/destiny2_content/icons/195f4f173adb52b336b4ecd67101004d.png",[v.ARTIFICE_RESILIENCE]:"https://bungie.net/common/destiny2_content/icons/53c28186a4b97285a01aace5748e4de7.png",[v.MINOR_RECOVERY]:"https://bungie.net/common/destiny2_content/icons/f39b0c97678148a864d6f6fbbe85524d.png",[v.MAJOR_RECOVERY]:"https://www.bungie.net/common/destiny2_content/icons/18054408a5fc068f2384c6c31a183423.png",[v.ARTIFICE_RECOVERY]:"https://bungie.net/common/destiny2_content/icons/f39b0c97678148a864d6f6fbbe85524d.png",[v.MINOR_DISCIPLINE]:"https://bungie.net/common/destiny2_content/icons/8fa2d4e4c82586668210e12c5115575a.png",[v.MAJOR_DISCIPLINE]:"https://www.bungie.net/common/destiny2_content/icons/9d54e2149f945b2c298020da443b70fa.png",[v.ARTIFICE_DISCIPLINE]:"https://bungie.net/common/destiny2_content/icons/8fa2d4e4c82586668210e12c5115575a.png",[v.MINOR_INTELLECT]:"https://bungie.net/common/destiny2_content/icons/d8da60458e3355ddf7123be5ffe3dc3c.png",[v.MAJOR_INTELLECT]:"https://www.bungie.net/common/destiny2_content/icons/9fd56c3b42923c9df23edf585b0107bf.png",[v.ARTIFICE_INTELLECT]:"https://bungie.net/common/destiny2_content/icons/d8da60458e3355ddf7123be5ffe3dc3c.png",[v.MINOR_STRENGTH]:"https://bungie.net/common/destiny2_content/icons/ec0b298ec4dac0023604e467a58c3868.png",[v.MAJOR_STRENGTH]:"https://www.bungie.net/common/destiny2_content/icons/07f2361532c79e773909220e5884ab07.png",[v.ARTIFICE_STRENGTH]:"https://bungie.net/common/destiny2_content/icons/ec0b298ec4dac0023604e467a58c3868.png"};let zl=(()=>{class n{constructor(){this.artificeUrl=ie[_.SlotArtifice],this.modIndex=[0,1,2,3,4,5],this.modTypeIndex=[1,2],this.ModUrl=Wl,this.mods=[],this.artifice=[]}ngOnInit(){}getStatName(e){return Zt[e]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-table-mod-display"]],inputs:{mods:"mods",artifice:"artifice"},decls:4,vars:4,consts:[[1,"row-mod"],[4,"ngVar"],[4,"ngFor","ngForOf"],["class","container","matTooltip","Artifice",4,"ngIf"],["matTooltip","Artifice",1,"container"],["tooltip","matTooltip"],[1,"artificeIcon","artifice",3,"src"],[1,"modText","artifice"],["class","container",3,"matTooltip",4,"ngIf"],[1,"container",3,"matTooltip"],[1,"modIcon",3,"src"],[1,"modText"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ql,2,1,"ng-container",1),t.ALo(2,"count"),t.YNc(3,jl,2,1,"ng-container",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngVar",t.lcZ(2,2,o.artifice)),t.xp6(2),t.Q6J("ngForOf",o.modIndex))},dependencies:[b.sg,b.O5,L.gM,St,he],styles:[".container[_ngcontent-%COMP%]{display:inline-block;width:32px;height:30px;position:relative}.modIcon[_ngcontent-%COMP%]{position:absolute;top:-12px;left:-12px;width:50px;height:50px;filter:contrast(2.3);border:#00000000 solid 2px;-webkit-mask-image:url(modmask.f03dde91561a62d6.svg);mask-image:image(url(modmask.f03dde91561a62d6.svg),black)}.modIcon.minor[_ngcontent-%COMP%]{filter:contrast(1.3)}.artificeIcon[_ngcontent-%COMP%]{height:28px;width:28px;filter:saturate(40) hue-rotate(40deg)}.selected[_ngcontent-%COMP%]{border:red solid 2px}[_nghost-%COMP%]{position:relative}.modText[_ngcontent-%COMP%]{position:absolute;text-shadow:0 0 6px #000000;font-size:smaller;color:#f5f5f5;bottom:-6px;right:-1px}"]}),n})();var Gl=p(7314);function Kl(n,i){if(1&n&&t._UZ(0,"div"),2&n){const e=i.$implicit,o=i.index,a=t.oxw().index;t.Jzz("width:",e/32*100,"%"),t.Gre("stat-range-bar stat-range-bar",o+(a>=3?3:0),"")}}const Ae=function(){return["Mobility","Resilience","Recovery","Discipline","Intellect","Strength"]};function Xl(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"tr",16)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td",17)(8,"div",18),t.YNc(9,Kl,1,6,"div",19),t.qZA()()(),t.BQk()),2&n){const e=i.$implicit,o=i.index,a=t.oxw().$implicit;t.xp6(1),t.Q6J("matTooltip",t.DdM(7,Ae)[o]),t.xp6(2),t.hij(" ",t.DdM(8,Ae)[o]," "),t.xp6(2),t.Oqu(t.xi3(6,4,a.totalStats[o],"1.0-0")),t.xp6(4),t.Q6J("ngForOf",e)}}function $l(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td")(2,"a",20),t._UZ(3,"img",15),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"td",21),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&n){const e=i.$implicit,o=t.oxw(3);t.xp6(2),t.MGl("href","https://data.destinysets.com/i/InventoryItem:",e,"",t.LSH),t.xp6(2),t.hij(" ",e,""),t.xp6(2),t.Oqu(o.getPlugSum(e)),t.xp6(2),t.Oqu(o.getPlugString(e))}}const tc=function(n,i,e,o,a,r){return[n,i,e,o,a,r]};function ec(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-card",12)(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-content")(5,"table")(6,"tr")(7,"td",13),t._uU(8,"Hash:"),t.qZA(),t.TgZ(9,"td")(10,"a",14),t._UZ(11,"img",15),t.qZA(),t._uU(12),t.qZA()(),t.TgZ(13,"tr")(14,"td",13),t._uU(15,"ItemInstanceId:"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA()(),t.TgZ(18,"tr")(19,"td",13),t._uU(20,"Sunset?"),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA()(),t.TgZ(23,"tr")(24,"td"),t._uU(25,"Total"),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA()(),t.YNc(28,Xl,10,9,"ng-container",10),t.qZA()(),t.TgZ(29,"mat-card-content"),t._uU(30," Plugs: "),t.TgZ(31,"table")(32,"tr")(33,"td"),t._uU(34,"Plug"),t.qZA(),t.TgZ(35,"td"),t._uU(36,"Total"),t.qZA(),t.TgZ(37,"td"),t._uU(38,"Values"),t.qZA()(),t.YNc(39,$l,9,4,"tr",10),t.qZA()()(),t.BQk()),2&n){const e=i.$implicit;t.xp6(3),t.hij(" ",e.name," "),t.xp6(7),t.MGl("href","https://data.destinysets.com/i/InventoryItem:",e.hash,"",t.LSH),t.xp6(2),t.hij(" ",e.hash,""),t.xp6(5),t.Oqu(e.itemInstanceId),t.xp6(5),t.Oqu(e.isSunset),t.xp6(5),t.Oqu(e.totalSum),t.xp6(1),t.Q6J("ngForOf",t.HTZ(8,tc,e.mobility,e.resilience,e.recovery,e.discipline,e.intellect,e.strength)),t.xp6(11),t.Q6J("ngForOf",e.statPlugHashes)}}function nc(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-toolbar"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"div",11),t.YNc(5,ec,40,15,"ng-container",10),t.qZA(),t.BQk()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.hij(" ",o.getCategoryName(e.key)," "),t.xp6(3),t.Q6J("ngForOf",e.value)}}let oc=(()=>{class n{constructor(e,o){this.inventory=e,this.db=o,this.minMobility=0,this.minResilience=0,this.minRecovery=0,this.minDiscipline=0,this.minIntellect=0,this.minStrength=0,this.anyPlugWithN=0,this.anyPlugBelowN=17,this.allPlugsWithN=0,this.allPlugsBelowN=17,this.armorName="",this.armorHash="",this.armorId="",this.armorItemsPerSlot=new Map,this.plugData={},this.ngUnsubscribe=new it.xQ}ngOnInit(){var e=this;this.inventory.inventory.pipe((0,lt.b)(10),(0,F.R)(this.ngUnsubscribe)).subscribe((0,T.Z)(function*(){e.updateItems()}))}getPlugString(e){var o=this.plugData[e];let a=[0,0,0,0,0,0];for(let r of o.investmentStats)switch(r.statTypeHash){case 2996146975:a[0]+=r.value;break;case 392767087:a[1]+=r.value;break;case 1943323491:a[2]+=r.value;break;case 1735777505:a[3]+=r.value;break;case 144602215:a[4]+=r.value;break;case 4244567218:a[5]+=r.value}return"["+a.join(" ")+"]"}updateItems(){var e=this;return(0,T.Z)(function*(){const a=(yield e.db.manifestArmor.toArray()).filter(d=>19==d.itemType);let r=Object.fromEntries(a.map(d=>[d.hash,d]));e.plugData=r;let l=(yield e.db.inventoryArmor.toArray()).sort((d,u)=>(""+d.name).localeCompare(u.name)).map(d=>{var u={name:d.name,hash:d.hash,isSunset:d.isSunset,itemInstanceId:d.itemInstanceId,statPlugHashes:d.statPlugHashes,mobility:[],resilience:[],recovery:[],discipline:[],intellect:[],strength:[],totalStats:[0,0,0,0,0,0],totalSum:0,slot:d.slot};if(d.statPlugHashes)for(let h of d.statPlugHashes){var x=r[h];for(let A of x.investmentStats)switch(A.statTypeHash){case 2996146975:u.mobility.push(A.value),u.totalStats[0]+=A.value;break;case 392767087:u.resilience.push(A.value),u.totalStats[1]+=A.value;break;case 1943323491:u.recovery.push(A.value),u.totalStats[2]+=A.value;break;case 1735777505:u.discipline.push(A.value),u.totalStats[3]+=A.value;break;case 144602215:u.intellect.push(A.value),u.totalStats[4]+=A.value;break;case 4244567218:u.strength.push(A.value),u.totalStats[5]+=A.value}}if(d.investmentStats)for(let h of d.investmentStats)switch(h.statTypeHash){case 2996146975:u.mobility.push(h.value),u.totalStats[0]+=h.value;break;case 392767087:u.resilience.push(h.value),u.totalStats[1]+=h.value;break;case 1943323491:u.recovery.push(h.value),u.totalStats[2]+=h.value;break;case 1735777505:u.discipline.push(h.value),u.totalStats[3]+=h.value;break;case 144602215:u.intellect.push(h.value),u.totalStats[4]+=h.value;break;case 4244567218:u.strength.push(h.value),u.totalStats[5]+=h.value}for(let h of u.totalStats)u.totalSum+=h;return u});l=e.filterItems(l),e.armorItemsPerSlot=l.reduce((d,u)=>{const x=u.slot?u.slot:10;return d.has(x)||d.set(x,[]),d.get(x)?.push(u),d},new Map)})()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}getCategoryName(e){switch(e){case 1:return"Helmets";case 2:return"Gauntlets";case 3:return"Chest Pieces";case 4:return"Legs";case 5:return"Class Items"}return"Unknown Category"}getPlugSum(e){var o=this.plugData[e],a=0;for(let r of o.investmentStats)switch(r.statTypeHash){case 2996146975:case 392767087:case 1943323491:case 1735777505:case 144602215:case 4244567218:a+=r.value}return a}clear(){this.armorName="",this.armorHash="",this.armorId="",this.minMobility=0,this.minResilience=0,this.minRecovery=0,this.minDiscipline=0,this.minIntellect=0,this.minStrength=0,this.anyPlugWithN=0,this.anyPlugBelowN=17}filterItems(e){return this.armorName&&(e=e.filter(o=>o.name.toLowerCase().indexOf(this.armorName)>-1)),this.armorHash&&(e=e.filter(o=>(o.hash||0).toString().indexOf(this.armorHash)>-1)),this.armorId&&(e=e.filter(o=>(o.itemInstanceId||0).toString().indexOf(this.armorId)>-1)),e=(e=(e=(e=(e=(e=e.filter(o=>o.totalStats[0]>=(this.minMobility||0))).filter(o=>o.totalStats[1]>=(this.minResilience||0))).filter(o=>o.totalStats[2]>=(this.minRecovery||0))).filter(o=>o.totalStats[3]>=(this.minDiscipline||0))).filter(o=>o.totalStats[4]>=(this.minIntellect||0))).filter(o=>o.totalStats[5]>=(this.minStrength||0)),(this.anyPlugWithN??0)>0&&(e=e.filter(o=>(o.statPlugHashes||[]).filter(a=>this.getPlugSum(a)>=(this.anyPlugWithN||0)).length>0)),(this.anyPlugBelowN??0)<17&&(e=e.filter(o=>(o.statPlugHashes||[]).filter(a=>this.getPlugSum(a)<=(this.anyPlugBelowN||0)).length>0)),(this.allPlugsWithN??0)>0&&(e=e.filter(o=>0==(o.statPlugHashes||[]).filter(a=>this.getPlugSum(a)<(this.allPlugsWithN||0)).length)),(this.allPlugsBelowN??0)<17&&(e=e.filter(o=>0==(o.statPlugHashes||[]).filter(a=>this.getPlugSum(a)>(this.allPlugsBelowN||0)).length)),e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(nt),t.Y36(ct))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-armor-investigation-page"]],decls:112,vars:26,consts:[["id","description"],["href","https://www.reddit.com/r/DestinyTheGame/comments/mpaopq/how_armor_stats_roll_an_advanced_insight_into/","target","_blank"],["colspan","3"],["appearance","outline"],["matInput","","placeholder","Stronghold",3,"ngModel","ngModelChange"],["matInput","",3,"ngModel","ngModelChange"],["max","32","min","0","step","1","thumbLabel","","tickInterval","1",3,"value","valueChange"],["max","17","min","0","step","1","thumbLabel","","tickInterval","1",3,"value","valueChange"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap","10px",1,"armor-container"],[1,"cluster-item"],["colspan","2"],["alt","This armor on data.destinysets.com","target","_blank",3,"href"],["src","https://data.destinysets.com/static/media/logo.556bd7bd.svg",2,"width","15px"],[3,"matTooltip"],["width","100%"],[1,"stat-range"],[3,"class","style",4,"ngFor","ngForOf"],["alt","This plug on data.destinysets.com","target","_blank",3,"href"],[1,"plug-sum-col"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title"),t._uU(2," Armor Investigation "),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t._uU(4," A visualization tool for data scientists. "),t.qZA(),t.TgZ(5,"mat-card-content"),t._uU(6," This part of the D2ArmorPicker lists all of your armor items. For each armor it shows how it is generated. It shows every used "),t.TgZ(7,"i"),t._uU(8,'"plug"'),t.qZA(),t._uU(9,", as well as the intrinsic stats of exotics. For more information about plugs, see "),t.TgZ(10,"a",1),t._uU(11,"here"),t.qZA(),t._uU(12,". Make sure to give the author an upvote for the hard work! "),t._UZ(13,"br")(14,"br"),t._uU(15," Please note that this feature is mainly targeted for data nerds and people interested in the basic stats of armor. It is just a data visualization. Mobile layout and a search function "),t.TgZ(16,"i"),t._uU(17,"may"),t.qZA(),t._uU(18," happen in the future. "),t.qZA(),t.TgZ(19,"mat-card-title"),t._uU(20," Filters "),t.qZA(),t.TgZ(21,"mat-card-subtitle"),t._uU(22," Some filters. Nothing fancy but it works. Sorry ;) "),t.qZA(),t.TgZ(23,"mat-card-content")(24,"table")(25,"tr")(26,"td",2)(27,"mat-form-field",3)(28,"mat-label"),t._uU(29,"Item Name"),t.qZA(),t.TgZ(30,"input",4),t.NdJ("ngModelChange",function(r){return o.armorName=r}),t.qZA()()(),t.TgZ(31,"td",2)(32,"mat-form-field",3)(33,"mat-label"),t._uU(34,"Item Hash"),t.qZA(),t.TgZ(35,"input",5),t.NdJ("ngModelChange",function(r){return o.armorHash=r}),t.qZA()()(),t.TgZ(36,"td",2)(37,"mat-form-field",3)(38,"mat-label"),t._uU(39,"Item ID"),t.qZA(),t.TgZ(40,"input",5),t.NdJ("ngModelChange",function(r){return o.armorId=r}),t.qZA()()()(),t.TgZ(41,"tr")(42,"td"),t._uU(43," Mobility: "),t.qZA(),t.TgZ(44,"td"),t._uU(45),t.qZA(),t.TgZ(46,"td")(47,"mat-slider",6),t.NdJ("valueChange",function(r){return o.minMobility=r}),t.qZA()(),t.TgZ(48,"td"),t._uU(49," Resilience: "),t.qZA(),t.TgZ(50,"td"),t._uU(51),t.qZA(),t.TgZ(52,"td")(53,"mat-slider",6),t.NdJ("valueChange",function(r){return o.minResilience=r}),t.qZA()(),t.TgZ(54,"td"),t._uU(55," Recovery: "),t.qZA(),t.TgZ(56,"td"),t._uU(57),t.qZA(),t.TgZ(58,"td")(59,"mat-slider",6),t.NdJ("valueChange",function(r){return o.minRecovery=r}),t.qZA()()(),t.TgZ(60,"tr")(61,"td"),t._uU(62," Discipline: "),t.qZA(),t.TgZ(63,"td"),t._uU(64),t.qZA(),t.TgZ(65,"td")(66,"mat-slider",6),t.NdJ("valueChange",function(r){return o.minDiscipline=r}),t.qZA()(),t.TgZ(67,"td"),t._uU(68," Intellect: "),t.qZA(),t.TgZ(69,"td"),t._uU(70),t.qZA(),t.TgZ(71,"td")(72,"mat-slider",6),t.NdJ("valueChange",function(r){return o.minIntellect=r}),t.qZA()(),t.TgZ(73,"td"),t._uU(74," Strength: "),t.qZA(),t.TgZ(75,"td"),t._uU(76),t.qZA(),t.TgZ(77,"td")(78,"mat-slider",6),t.NdJ("valueChange",function(r){return o.minStrength=r}),t.qZA()()(),t.TgZ(79,"tr")(80,"td"),t._uU(81," Any plug >=: "),t.qZA(),t.TgZ(82,"td"),t._uU(83),t.qZA(),t.TgZ(84,"td")(85,"mat-slider",7),t.NdJ("valueChange",function(r){return o.anyPlugWithN=r}),t.qZA()(),t.TgZ(86,"td"),t._uU(87," Any Plug <=: "),t.qZA(),t.TgZ(88,"td"),t._uU(89),t.qZA(),t.TgZ(90,"td")(91,"mat-slider",7),t.NdJ("valueChange",function(r){return o.anyPlugBelowN=r}),t.qZA()()(),t.TgZ(92,"tr")(93,"td"),t._uU(94," All plugs >=: "),t.qZA(),t.TgZ(95,"td"),t._uU(96),t.qZA(),t.TgZ(97,"td")(98,"mat-slider",7),t.NdJ("valueChange",function(r){return o.allPlugsWithN=r}),t.qZA()(),t.TgZ(99,"td"),t._uU(100," All Plugs <=: "),t.qZA(),t.TgZ(101,"td"),t._uU(102),t.qZA(),t.TgZ(103,"td")(104,"mat-slider",7),t.NdJ("valueChange",function(r){return o.allPlugsBelowN=r}),t.qZA()()()(),t.TgZ(105,"a",8),t.NdJ("click",function(){return o.updateItems()}),t._uU(106,"Update"),t.qZA(),t._uU(107,"\xa0 "),t.TgZ(108,"a",9),t.NdJ("click",function(){return o.clear()}),t._uU(109,"Clear"),t.qZA()()(),t.YNc(110,nc,6,2,"ng-container",10),t.ALo(111,"keyvalue")),2&e&&(t.xp6(30),t.Q6J("ngModel",o.armorName),t.xp6(5),t.Q6J("ngModel",o.armorHash),t.xp6(5),t.Q6J("ngModel",o.armorId),t.xp6(5),t.hij(" ",o.minMobility,""),t.xp6(2),t.Q6J("value",o.minMobility),t.xp6(4),t.hij(" ",o.minResilience,""),t.xp6(2),t.Q6J("value",o.minResilience),t.xp6(4),t.hij(" ",o.minRecovery,""),t.xp6(2),t.Q6J("value",o.minRecovery),t.xp6(5),t.hij(" ",o.minDiscipline,""),t.xp6(2),t.Q6J("value",o.minDiscipline),t.xp6(4),t.hij(" ",o.minIntellect,""),t.xp6(2),t.Q6J("value",o.minIntellect),t.xp6(4),t.Oqu(o.minStrength),t.xp6(2),t.Q6J("value",o.minStrength),t.xp6(5),t.Oqu(o.anyPlugWithN),t.xp6(2),t.Q6J("value",o.anyPlugWithN),t.xp6(4),t.Oqu(o.anyPlugBelowN),t.xp6(2),t.Q6J("value",o.anyPlugBelowN),t.xp6(5),t.Oqu(o.allPlugsWithN),t.xp6(2),t.Q6J("value",o.allPlugsWithN),t.xp6(4),t.Oqu(o.allPlugsBelowN),t.xp6(2),t.Q6J("value",o.allPlugsBelowN),t.xp6(6),t.Q6J("ngForOf",t.lcZ(111,24,o.armorItemsPerSlot)))},dependencies:[b.sg,Q.xw,Q.SQ,X.Fj,X.JJ,X.On,R.zs,dt.KE,dt.hX,Gl.pH,jt.Nt,w.a8,w.dn,w.n5,w.$j,L.gM,tt.Ye,b.JJ,b.Nd],styles:["#description[_ngcontent-%COMP%], #filter[_ngcontent-%COMP%]{max-width:700px;margin-bottom:10px;margin-left:auto;margin-right:auto}.cluster-item[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0;min-width:250px;max-width:350px;margin-bottom:10px}.armor-container[_ngcontent-%COMP%], .plug-sum-col[_ngcontent-%COMP%]{padding-left:5px}.armor-container[_ngcontent-%COMP%]{flex-wrap:wrap}.stat-range[_ngcontent-%COMP%]{height:20px;width:100%;margin-bottom:3px;float:left;background-color:gray}.stat-range-bar[_ngcontent-%COMP%]{height:100%;float:left;background-color:#fff}.stat-range-bar0[_ngcontent-%COMP%]{background-color:#acfff1}.stat-range-bar1[_ngcontent-%COMP%]{background-color:#5e9eff}.stat-range-bar3[_ngcontent-%COMP%]{background-color:#ffc2ac}.stat-range-bar4[_ngcontent-%COMP%]{background-color:#ffb45e}.stat-range-bar2[_ngcontent-%COMP%], .stat-range-bar5[_ngcontent-%COMP%]{background-color:#c246ff}a[_ngcontent-%COMP%]{color:#99afe3}a[_ngcontent-%COMP%]:visited{color:#7294dc}"]}),n})(),ic=(()=>{class n{constructor(e,o,a){this.db=e,this.inv=o,this.loginService=a}ngOnInit(){}downloadArmorInformation(){var e=this;return(0,T.Z)(function*(){const o=yield e.db.inventoryArmor.toArray(),a=window.URL.createObjectURL(new Blob([JSON.stringify(o,null,2)])),r=document.createElement("a");r.href=a,r.setAttribute("download","d2ap_armor.json"),document.body.appendChild(r),r.click()})()}downloadManifestInformation(){var e=this;return(0,T.Z)(function*(){const o=yield e.db.manifestArmor.toArray(),a=window.URL.createObjectURL(new Blob([JSON.stringify(o,null,1)])),r=document.createElement("a");r.href=a,r.setAttribute("download","d2ap_manifest.json"),document.body.appendChild(r),r.click()})()}resetDatabase(){var e=this;return(0,T.Z)(function*(){yield e.db.resetDatabase(),yield e.inv.refreshAll(!0,!0)})()}resetEverything(){var e=this;return(0,T.Z)(function*(){localStorage.clear(),yield e.db.resetDatabase(),yield e.loginService.logout()})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ct),t.Y36(nt),t.Y36(G))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-account-config-page"]],decls:35,vars:0,consts:[["id","account-config-container"],["color","primary","fxShow","false","fxShow.lt-md","true","mat-raised-button","","routerLink","/",1,"returnbutton"],["color","primary","mat-raised-button","",1,"btn-download",3,"click"],["color","warn","mat-raised-button","",1,"btn-download",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t._uU(2," Return to D2ArmorPicker "),t.qZA(),t.TgZ(3,"mat-card")(4,"mat-card-title"),t._uU(5," Account Configuration "),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7," The configuration on this page will not be reset when you reset your build settings. "),t.qZA(),t.TgZ(8,"mat-card-content"),t._uU(9,' This will come in a future update. Right now, I just wanted to push the "Debugging" section out. '),t.qZA()(),t.TgZ(10,"mat-card")(11,"mat-card-title"),t._uU(12," Debugging "),t.qZA(),t.TgZ(13,"mat-card-subtitle"),t._uU(14," Some options for debugging purposes. "),t.qZA(),t.TgZ(15,"mat-card-content"),t._uU(16," If the team asks you to send some specific data, you can find it here:"),t._UZ(17,"br"),t.TgZ(18,"a",2),t.NdJ("click",function(){return o.downloadArmorInformation()}),t._uU(19," Download armor information (d2ap_armor.json) "),t.qZA(),t.TgZ(20,"a",2),t.NdJ("click",function(){return o.downloadManifestInformation()}),t._uU(21," Download manifest information (d2ap_manifest.json) "),t.qZA(),t._UZ(22,"br")(23,"br"),t._uU(24," If you experience issues with the local database - for example, exotics not being found, try this:"),t._UZ(25,"br"),t.TgZ(26,"a",3),t.NdJ("click",function(){return o.resetDatabase()}),t._uU(27," Delete Database "),t.qZA(),t._UZ(28,"br"),t._uU(29," If you really want to reset EVERYTHING, use this: "),t._UZ(30,"br"),t.TgZ(31,"a",3),t.NdJ("click",function(){return o.resetEverything()}),t._uU(32," Reset the whole application "),t.qZA()()(),t.TgZ(33,"a",1),t._uU(34," Return to D2ArmorPicker "),t.qZA()())},dependencies:[$.b8,R.zs,w.a8,w.dn,w.n5,w.$j,N.yS],styles:[".returnbutton[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:15px;width:100%}#account-config-container[_ngcontent-%COMP%]{max-width:800px;margin-left:auto;margin-right:auto}mat-card[_ngcontent-%COMP%]{margin-bottom:8px}.btn-download[_ngcontent-%COMP%]{margin-right:10px}"]}),n})();var ac=p(4661),Ze=p(7331);const rc=[{path:"",component:Be,canActivate:[qt],children:[{path:"",component:Pl},{path:"help",component:Ka},{path:"cluster",component:Yl},{path:"investigate",component:oc},{path:"theory",loadChildren:()=>p.e(613).then(p.bind(p,8613)).then(n=>n.TheorizerPageModule)},{path:"account",component:ic}]},{path:"login",component:Pt,canActivate:[Jt]},{path:"login-bungie",component:Ot},{path:"**",redirectTo:"/"}];let sc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n,bootstrap:[Et]}),n.\u0275inj=t.cJS({imports:[b.ez,ac.V,D.b2,Rt.PW,vt.JF,N.Bz.forRoot(rc,{useHash:!0}),Mt.Iq,ut.xu]}),n})();t.B6R(_e,function(){return[b.sg,b.O5,Q.xw,Q.SQ,Q.Wh,Q.yH,dt.KE,dt.hX,dt.R9,jt.Nt,S.BZ,S.fO,S.as,S.w1,S.Dz,S.nj,S.ge,S.ev,S.XQ,S.Gk,w.a8,w.dn,w.n5,w.$j,L.gM,ot.Hw,Kt.YE,Kt.nU,ge.NW,Ze.qn,Ze.HS,Qa,zl]},function(){return[b.JJ]}),t.B6R(ue,function(){return[R.lW,K.ZT,K.uh,K.xY,K.H8,Te]},[]),(0,t.G48)(),D.q6().bootstrapModule(sc).catch(n=>console.error(n))},2361:()=>{},4616:()=>{}},rt=>{rt.O(0,[736],()=>rt(rt.s=3877)),rt.O()}]);