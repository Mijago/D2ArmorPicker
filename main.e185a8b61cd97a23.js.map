{"version":3,"file":"main.e185a8b61cd97a23.js","mappings":"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,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CAAC,CAAC,EAAG,EAAG,EAAG,KACf,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CAAC,CAAC,EAAG,EAAG,EAAG,KACf,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CAAC,CAAC,EAAG,EAAG,EAAG,KACf,GAAI,CAAC,CAAC,EAAG,EAAG,EAAG,KACf,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CAAC,CAAC,EAAG,EAAG,EAAG,KACf,GAAI,CAAC,CAAC,EAAG,EAAG,EAAG,KACf,GAAI,GACJ,GAAI,CAAC,CAAC,EAAG,EAAG,EAAG,KACf,GAAI,CAAC,CAAC,EAAG,EAAG,EAAG,KACf,GAAI,GACJ,GAAI,CAAC,CAAC,EAAG,EAAG,EAAG,KACf,GAAI,GACJ,GAAI,GACJ,GAAI,CAAC,CAAC,EAAG,EAAG,EAAG,MC1fJC,EAAsF,CACjG,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CACF,CAAC,EAAG,EAAG,EAAG,IACV,CAAC,EAAG,EAAG,EAAG,KAEZ,GAAI,CAAC,CAAC,EAAG,EAAG,EAAG,KACf,GAAI,CAAC,CAAC,EAAG,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HAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,oEAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,0IAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,gFAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,8CAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,yCAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,sFAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,uFAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,wKAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,8HAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,yDAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,qEAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,oIAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,sFAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,qEAER,CACErmB,KAAM8lB,EAAmBC,IACzBM,KAAM,qDAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,8EAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,oKAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,4GAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,4EAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,4NAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,mIAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,wKAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,0FAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,yGAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,uEAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,8DAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,uFAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,0EAER,CACErmB,KAAM8lB,EAAmBG,SACzBI,KAAM,oEAER,CACErm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","names":["ModInformation","ModOrAbility","WhisperOfDurance","id","name","description","type","ModifierType","Stasis","bonus","stat","ArmorStat","StatMelee","value","cost","requiredArmorAffinity","hash","WhisperOfChains","StatClass","WhisperOfConduction","StatSuper","StatHealth","WhisperOfBonds","WhisperOfHunger","WhisperOfFractures","StatGrenade","WhisperOfImpetus","WhisperOfTorment","EchoOfExpulsion","Void","EchoOfProvision","EchoOfPersistence","SpecialArmorStat","ClassAbilityRegenerationStat","EchoOfLeeching","EchoOfDomineering","EchoOfDilation","StatWeapon","EchoOfUndermining","EchoOfInstability","EchoOfHarvest","EchoOfObscurity","EchoOfStarvation","EchoOfVigilance","EmberOfBenelovence","Solar","EmberOfBeams","EmberOfEmpyrean","EmberOfCombustion","EmberOfChar","EmberOfTempering","EmberOfEruption","EmberOfWonder","EmberOfSearing","EmberOfTorches","EmberOfMercy","SparkOfBrilliance","Arc","SparkOfFeedback","SparkOfDischarge","SparkOfFocus","SparkOfVolts","SparkOfResistance","SparkOfShock","ThreadOfFury","Strand","ThreadOfAscent","ThreadOfFinality","ThreadOfWarding","ThreadOfTransmutation","ThreadOfEvolution","ThreadOfBinding","ThreadOfGeneration","ThreadOfPropagation","FacetOfAwakening","Prismatic","FacetOfCourage","FacetOfDawn","FacetOfDefiance","FacetOfDevotion","FacetOfDominance","FacetOfGrace","FacetOfHonor","FacetOfJustice","FacetOfProtection","FacetOfPurpose","FacetOfRuin","FacetOfSacrifice","MAXIMUM_STAT_MOD_AMOUNT","MAXIMUM_MASTERWORK_LEVEL","FORCE_USE_NO_EXOTIC","FORCE_USE_ANY_EXOTIC","ArmorSlot","ArmorSlotNone","ArmorSlotHelmet","ArmorSlotGauntlet","ArmorSlotChest","ArmorSlotLegs","ArmorSlotClass","StatModifier","NONE","MINOR_WEAPON","MAJOR_WEAPON","ARTIFICE_WEAPON","MINOR_HEALTH","MAJOR_HEALTH","ARTIFICE_HEALTH","MINOR_CLASS","MAJOR_CLASS","ARTIFICE_CLASS","MINOR_GRENADE","MAJOR_GRENADE","ARTIFICE_GRENADE","MINOR_SUPER","MAJOR_SUPER","ARTIFICE_SUPER","MINOR_MELEE","MAJOR_MELEE","ARTIFICE_MELEE","ARMORSTAT_ORDER","STAT_MOD_VALUES","ArmorStatNames","ArmorStatHashes","ArmorStatIconUrls","ArmorPerkOrSlot","None","Any","SlotCrotasEnd","SlotRootOfNightmares","SlotKingsFall","SlotVowOfTheDisciple","SlotVaultOfGlass","SlotDeepStoneCrypt","SlotGardenOfSalvation","SlotLastWish","SlotArtifice","PerkIronBanner","SlotNightmare","GuardianGamesClassItem","PerkEchoesOfGlory","SlotSalvationsEdge","SlotEidosApprentice","PerkOverflowingCorruption","ArmorPerkOrSlotNames","SpecialItemIconUrls","ArmorPerkOrSlotIcons","ArmorPerkSocketHashes","MapAlternativeToArmorPerkOrSlot","MapAlternativeSocketTypeToArmorPerkOrSlot","SubclassHashes","ModOptimizationStrategy","ReduceUsedModSockets","ReduceUsedModPoints","CombatStyleMod","SubclassNames","InventoryArmorSource","Inventory","Collections","Vendor","createArmorItem","manifestItem","itemInstanceId","source","Error","item","Object","assign","tier","masterworked","masterworkLevel","archetypeStats","energyLevel","mobility","resilience","recovery","discipline","intellect","strength","created_at","Date","now","updated_at","undefined","slot","exoticPerkHash","Array","isArray","applyInvestmentStats","r","investmentStats","getInvestmentStats","isEqualItem","a","b","totalStats","ArmorSystem","Armor1","Armor2","Armor3","precalculatedZeroWasteModCombinations","precalculatedModCombinations","isIPermutatorArmorSet","obj","prototype","hasOwnProperty","call","checkSlots","config","constantModslotRequirement","availableClassItemTypes","helmet","gauntlet","chest","leg","requirements","Map","slots","armorSystem","isExotic","assumeEveryLegendaryIsArtifice","assumeClassItemIsArtifice","set","get","perk","gearSetHash","SlotRequirements","key","Math","max","valid","requiredClassItemType","requiredClassItemPerk","entries","find","c","has","applyMasterworkStats","stats","assumeExoticsMasterworked","assumeLegendariesMasterworked","i","multiplier","includes","handlePermutation","runtime","classItems","constantBonus","doNotOutput","items","getStatSum","addConstent1Health","statsWithoutMods","n","minimumStatTiers","fixed","availableArtificeCount","filter","d","assumeEveryExoticIsArtifice","length","distances","onlyShowResultsWithNoWastedStats","v","optionalDistances","tryLimitWastedStats","sortedClassItems","sort","scoreA","scoreB","min","finalResult","classItem","adjustedStats","tmpArtificeCount","adjustedStatsWithoutMods","newDistances","newOptionalDistances","newDistanceSum","newTotalOptionalDistances","reduce","result","get_mods_precalc","modOptimizationStrategy","performTierAvailabilityTesting","tryCreateArmorSetWithClassItem","maximumPossibleTiers","low","high","mid","ceil","testDistances","usedArtifice","usedMods","finalStats","statModifier","floor","waste1","getWaste","createArmorSet","statsWithMods","armor","useExoticClassItem","optimize","totalDistance","every","modCombinations","precalculatedMods","additionalCombosA","slice","concat","statModLimits","maxMajorMods","maxMods","bestMods","bestScore","score","currentIndex","validate","sum","mustExecuteOptimization","root","inner","mods","m","scoreVal","push","getSkillTier","addEventListener","_ref","_asyncToGenerator","data","threadSplit","anyStatFixed","values","some","startTime","console","time","current","environment","featureFlags","enableZeroWaste","enableModslotLimitation","helmets","k","useFotlArmor","indexOf","gauntlets","chests","legs","count","splitEntry","keepLength","round","startIndex","endIndex","splice","selectedExoticPerks","firstPerkFilter","secondPerkFilter","hasFirstPerk","hasSecondPerk","map","doesNotRequireArmorPerks","armorRequirements","index","self","findIndex","exoticClassItems","legendaryClassItems","exoticClassItemIsEnforced","selectedExotics","availableClassItemPerkTypes","Set","warn","postMessage","results","done","checkedCalculations","estimatedCalculations","permutationCount","itemCount","totalTime","prepareConstantStatBonus","mod","enabledMods","characterClass","prepareConstantModslotRequirement","constantPerkRequirement","req","e","Number","parseInt","requiresAtLeastOneExotic","resultsLength","listedResults","totalResults","estimateCombinationsToBeChecked","totalCalculations","exoticHelmets","legendaryHelmets","exoticGauntlets","legendaryGauntlets","exoticChests","legendaryChests","exoticLegs","legendaryLegs","lastProgressReportTime","info","progressBarDelay","debug","generateArmorCombinations","slotCheckResult","hasOneExotic","classItemsToUse","limitParsedResults","reachableTiers","timeEnd","_x","apply","this","arguments","version","revision","production","beta","canary","apiKey","clientId","client_secret","offlineMode","highlight_project_id","enableGuardianGamesFeatures","getDifferences","object1","object2","differences","keys","forEach","typedKey","_isEqual","from","JSON","stringify","to","changes","StatusProviderService","constructor","__status","cancelledCalculation","calculatingResults","calculatingPermutations","updatingResultsTable","updatingInventory","updatingManifest","updatingVendors","apiError","authError","__last_Status","structuredClone","_status","BehaviorSubject","status","asObservable","getStatus","modifyStatus","cb","next","setApiError","clearApiError","setAuthError","clearAuthError","factory","ɵfac","providedIn","AuthService","http","router","_logoutEvent","ReplaySubject","logoutEvent","refreshTokenExpired","refreshTokenExpiringAt","autoRegenerateTokens","_this","tokenInfo","lastRefresh","dateNow","refreshToken","timing","generateTokens","getCurrentMembershipData","_this2","parse","localStorage","getItem","currentMembershipData","setItem","refresh","_this3","CLIENT_ID","CLIENT_SECRET","body","authCode","post","headers","toPromise","then","log","accessToken","access_token","refresh_token","refresh_expires_in","s","catch","err","isAuthenticated","newCode","removeItem","l","toString","clearManifestInfo","clearLoginInfo","logout","_this4","navigate","i0","i1","i2","i3","HandleBungieLoginComponent","activatedRoute","loginService","ngOnInit","queryParams","subscribe","params","code","window","location","search","substr","selectors","decls","vars","template","rf","ctx","AppComponent","title","is_beta","is_canary","consts","AppComponent_mat_toolbar_0_Template","item_r2","image","subtitle","i_r4","_r6","ctx_r5","goToSlide","ctx_r1","currentSlide","LoginComponent","autoScrollDelay","carouselItems","startAutoScroll","ngOnDestroy","stopAutoScroll","autoScrollInterval","setInterval","nextSlide","clearInterval","pauseCarousel","resumeCarousel","startLogin","href","LoginComponent_div_11_Template","LoginComponent_button_13_Template","AuthenticatedGuard","auth","canActivate","route","state","NotAuthenticatedGuard","getDefaultStatDict","BuildConfiguration","disabledItems","putArtificeMods","allowBlueArmorPieces","allowLegacyLegendaryArmor","allowLegacyExoticArmor","enforceFeaturedLegendaryArmor","enforceFeaturedExoticArmor","ignoreSunsetArmor","includeVendorRolls","includeCollectionRolls","onlyUseMasterworkedExotics","onlyUseMasterworkedLegendaries","selectedModElement","buildEmptyConfiguration","Database","Dexie","super","stores","manifestArmor","inventoryArmor","sandboxPerkDefinition","equipableItemSetDefinition","manifestCollectibles","vendorNames","vendorItemSubscreen","ChangelogEntryType","ADD","REMOVE","MODIFIED","CHANGELOG_DATA","date","clearManifest","text","issues","ChangelogDialogComponent","changelog","changelogData","ChangelogService","dialog","setChangelogSeenFlag","lastViewedChangelog","mustShowChangelog","wipeManifest","openChangelogDialog","open","afterClosed","DatabaseService","verno","upgrade","tx","_ref2","clearDatabase","_x2","initialize","writeManifestArmor","clear","bulkPut","db","resetDatabase","delete","lastManifestUpdate","lastManifestVersion","lastManifestRevision","lastManifestDbName","updatedAt","migrateExoticPerkHash","lzCompOptions","outputEncoding","lzDecompOptions","inputEncoding","ConfigurationService","readonlyConfigurationSnapshot","__configuration","loadCurrentConfiguration","__LastConfiguration","_configuration","configuration","_storedConfigurations","listSavedConfigurations","storedConfigurations","modifyConfiguration","saveCurrentConfiguration","saveConfiguration","list","compressed","lzutf8","doesSavedConfigurationExist","loadSavedConfiguration","checkAndFixOldSavedConfigurations","tiers","minimumStatTier","selectedExoticHash","deleteStoredConfiguration","saveCurrentConfigurationToName","dummy","getCurrentConfigBase64Compressed","getAllStoredConfigurationsBase64Compressed","getStoredConfigurationBase64Compressed","resetCurrentConfiguration","ctx_r0","parsedResults","_r37","ctx_r36","cancelCalculation","ctx_r16","computationProgress","isCalculatingPermutations","ResultsComponent_div_58_li_15_Template","ResultsComponent_div_58_li_16_Template","ResultsComponent_div_58_li_17_Template","ResultsComponent_div_58_li_18_Template","ctx_r18","_config_enforceFeaturedArmor","_config_legacyArmor","_config_includeVendorRolls","_config_includeCollectionRolls","ctx_r42","_results","element_r70","ctx_r45","element_r71","ctx_r47","element_r72","ctx_r49","element_r73","ctx_r51","element_r74","ctx_r53","element_r75","ctx_r55","element_r76","artifice","element_r77","exotic","icon","watermark","ResultsComponent_div_59_table_2_td_24_img_2_Template","ResultsComponent_div_59_table_2_td_24_img_3_Template","ResultsComponent_div_59_table_2_td_24_img_4_Template","ResultsComponent_div_59_table_2_td_27_img_2_Template","ResultsComponent_div_59_table_2_td_27_img_3_Template","element_r84","usesCollectionRoll","usesVendorRoll","ResultsComponent_div_59_table_2_td_30_mat_icon_1_Template","ResultsComponent_div_59_table_2_td_30_mat_icon_2_Template","ctx_r63","expandedElement","element_r87","ctx_r65","getTotalStats","element_r90","ctx_r66","shownColumns","element_r91","element_r92","_r94","$implicit","ctx_r93","ctx_r68","ResultsComponent_div_59_table_2_th_2_Template","ResultsComponent_div_59_table_2_td_3_Template","ResultsComponent_div_59_table_2_th_5_Template","ResultsComponent_div_59_table_2_td_6_Template","ResultsComponent_div_59_table_2_th_8_Template","ResultsComponent_div_59_table_2_td_9_Template","ResultsComponent_div_59_table_2_th_11_Template","ResultsComponent_div_59_table_2_td_12_Template","ResultsComponent_div_59_table_2_th_14_Template","ResultsComponent_div_59_table_2_td_15_Template","ResultsComponent_div_59_table_2_th_17_Template","ResultsComponent_div_59_table_2_td_18_Template","ResultsComponent_div_59_table_2_th_20_Template","ResultsComponent_div_59_table_2_td_21_Template","ResultsComponent_div_59_table_2_th_23_Template","ResultsComponent_div_59_table_2_td_24_Template","ResultsComponent_div_59_table_2_th_26_Template","ResultsComponent_div_59_table_2_td_27_Template","ResultsComponent_div_59_table_2_th_29_Template","ResultsComponent_div_59_table_2_td_30_Template","ResultsComponent_div_59_table_2_th_32_Template","ResultsComponent_div_59_table_2_td_33_Template","ResultsComponent_div_59_table_2_td_35_Template","ResultsComponent_div_59_table_2_tr_36_Template","ResultsComponent_div_59_table_2_tr_37_Template","ResultsComponent_div_59_table_2_tr_38_Template","ctx_r43","tableDataSource","_c0","ResultsComponent_div_59_app_results_card_view_1_Template","ResultsComponent_div_59_table_2_Template","ctx_r19","viewMode","_r97","ctx_r96","saveBuilds","ResultItemMoveState","TRANSFER_NONE","WAITING_FOR_TRANSFER","TRANSFERRING","TRANSFERRED","ERROR_DURING_TRANSFER","ResultsComponent","inventory","configService","_config_assumeLegendariesMasterworked","_config_assumeExoticsMasterworked","_config_selectedExotics","_config_tryLimitWastedStats","_config_onlyUseMasterworkedExotics","_config_onlyUseMasterworkedLegendaries","_config_onlyShowResultsWithNoWastedStats","_config_assumeEveryLegendaryIsArtifice","_config_assumeEveryExoticIsArtifice","_config_modslotLimitation","_config_armorPerkLimitation","MatTableDataSource","paginator","selectedClass","initializing","ngUnsubscribe","Subject","savedViewMode","ngAfterViewInit","sortingDataAccessor","sortHeaderId","modCount","modCost","pipe","takeUntil","calculationProgress","progress","columns","armorResults","updateData","setTimeout","initializeTableSorting","element","complete","jsonData","configCompressed","p","instance","document","createElement","download","url","URL","createObjectURL","Blob","link","setAttribute","appendChild","click","onViewModeChange","event","active","sortChange","emit","direction","viewQuery","MatPaginator","MatSort","ResultsComponent_mat_icon_20_Template","ResultsComponent_mat_icon_21_Template","$event","ResultsComponent_mat_chip_option_42_Template","ResultsComponent_mat_chip_option_43_Template","ResultsComponent_mat_chip_option_44_Template","ResultsComponent_mat_chip_option_45_Template","ResultsComponent_mat_chip_option_46_Template","ResultsComponent_mat_chip_option_47_Template","ResultsComponent_mat_chip_option_48_Template","ResultsComponent_mat_chip_option_49_Template","ResultsComponent_mat_chip_option_50_Template","ResultsComponent_mat_chip_option_51_Template","ResultsComponent_mat_chip_option_52_Template","ResultsComponent_mat_chip_option_53_Template","ResultsComponent_mat_chip_option_54_Template","ResultsComponent_div_55_Template","ResultsComponent_div_56_Template","ResultsComponent_div_57_Template","ResultsComponent_div_58_Template","ResultsComponent_div_59_Template","ResultsComponent_mat_card_actions_61_Template","_c1","trigger","style","height","transition","animate","ExoticClassItemSpirits","SpiritOfTheSwarm","SpiritOfTheClaw","SpiritOfTheStag","SpiritOfStarfire","SpiritOfApotheosis","SpiritOfVesper","SpiritOfTheNecrotic","SpiritOfOsmiomancy","SpiritOfHarmony","SpiritOfTheFilaments","SpiritOfCompetition","SpiritOfTheAssassin","SpiritOfInmostLight","SpiritOfTheOphidian","SpiritOfTheStarEater","SpiritOfSynthoceps","SpiritOfVerity","SpiritOfTheArmamentarium","SpiritOfAlphaLupi","SpiritOfContact","SpiritOfTheBear","SpiritOfTheHorn","SpiritOfScars","SpiritOfHoarfrost","SpiritOfSeverance","SpiritOfTheAbeyant","SpiritOfTheEternalWarrior","SpiritOfTheCoyote","SpiritOfTheWormhusk","SpiritOfTheLiar","SpiritOfTheGyrfalcon","SpiritOfTheCyrtarachne","SpiritOfRenewal","SpiritOfCaliban","SpiritOfTheFoetracer","SpiritOfGalanor","SpiritOfTheDragon","ExoticClassItemPerkNames","HttpClientService","authService","$httpWithoutBearerToken","$http","$httpWithoutApiKey","$httpPost","Authorization","retry","error","logoutOnFailure","bearerToken","retryCount","options","res","ErrorStatus","MembershipService","clearCachedData","getMembershipDataForCurrentUser","membershipData","membershipDataAge","H","identify","membershipId","membershipType","highlightDisplayName","displayName","avatar","iconPath","bungieGlobalDisplayName","bungieGlobalDisplayNameCode","applicableMembershipTypes","response","memberships","Response","destinyMemberships","crossSaveOverride","lastLoggedInProfileIndex","x","primaryMembershipId","lastPlayed","membership","profile","getProfile","components","destinyMembershipId","dateLastPlayed","getCharacters","destinyMembership","characters","characterId","clazz","classType","emblemUrl","emblemBackgroundPath","collectInvestmentStats","itemInvestmentStats","plugHashes","newStats","statTypeHash","plugs","statPlugHashes","plm","entry","investmentStatsOverZero","_","statHash","BungieApiService","manifestUpdated$","manifestUpdatedSubject","manifestAlreadyUpdated","transferItem","targetCharacter","equip","r1","transferResult","moveItemToVault","payload","itemId","itemReferenceHash","itemHash","stackSize","transferToVault","equipPayload","equipItem","getUnlockedExoticArmor","characterCollectibles","manifestExoticArmorItemHashes","toArray","acc","cur","itemHashes","flatMap","char","collectibles","updateArmorItems","force","unlockedExoticArmorItemHashes","allItems","profileInventory","charI","characterEquipment","characterInventories","materials","previousValue","currentValue","quantity","glimmerEntry","profileCurrencies","idSet","add","validManifestArmor","modsData","itemType","validManifestArmorMap","fromEntries","modsMap","filteredItems","bucketHash","itemComponents","instances","energy","armorItem","gearTier","sockets","socket","plugHash","energyCapacity","socketsList","sock","sortedStats","statObj","thirdHighestStatHash","investmentStat","mmod","perks","perkHash","Boolean","collectionRollItems","exoticItemHash","manifestArmorItem","collectionItem","socketEntries","singleInitialItemHash","updateDatabaseItems","newItems","_this5","ids_noSource","bulkDelete","bulkAdd","getArmorPerk","scks","reusablePlugSetHash","socketHash","slotType","kvpair","socketTypeHash","updateVendorNames","manifestTables","_this6","vendorInfo","DestinyVendorDefinition","vendorId","vendorName","displayProperties","vendorDescription","vendorIdentifier","updateVendorItemSubScreens","_this7","DestinyInventoryItemDefinition","preview","previewVendorHash","vendorHash","updateAbilities","allAbilities","plug","plugCategoryIdentifier","match","updateExoticCollectibles","_this8","exoticArmorCollectibles","DestinyCollectibleDefinition","tierType","updateManifest","_this9","manifestCache","destinyManifest","getDestinyManifest","manifestVersion","getDestinyManifestSlice","tableNames","language","enManifestTables","updateEquipableItemSetDefinitions","updateSandboxPerks","itemCategoryHashes","bucketTypeHash","isArmor2","sunsetPowerCaps","isSunset","quality","versions","powerCapHash","clasz","collectibleHash","presentationParentNode","parentNodeHashes","DestinyPresentationNodeDefinition","socketDef","DestinySocketTypeDefinition","plugWhitelist","categoryIdentifier","isFeatured","isFeaturedItem","watermarkIcon","iconWatermarkFeatured","iconWatermark","rarity","itemSubType","getGearSet","DestinyEquipableItemSetDefinition","itemSetDefinitions","itemSet","setItems","sandboxPerks","DestinySandboxPerkDefinition","mappedSandboxPerks","equipableItemSetDefinitions","mapped","moveItem","sourceCharacterId","targetCharacterId","_this10","swapItems","itemInstanceId1","itemInstanceId2","_this11","item1","item2","equipItemById","_this12","getCharacterIdForCurrentClass","_this13","moveResultItems","_this14","flat","transferState","success","allSuccessful","importCurrentlyEquippedExotic","_this15","manifestArmorMap","updatedConfig","exoticArmor","manifest","exoticVariants","exoticPerks","extractExoticClassItemPerks","importCurrentlyEquippedSubclass","_this16","subclass","configClass","subclassKey","fragmentHashes","modKey","i4","i5","VENDOR_NEXT_REFRESH_KEY","VendorsService","where","getVendorArmorItemsForCharacter","manifestItems","vendorsResponse","getVendors","allVendors","vendors","allVendorsMap","vendorsWithParent","Promise","all","sales","_vendorHash","saleItems","bulkGet","parentHash","vendor","enabled","canPurchase","parent","vendorItemIndex","saleItem","refreshDate","nextRefreshDate","getTime","vendorArmorItems","VendorPromises","getVendor","vendorResponse","vendorItemStats","itemStats","augments","statsOverride","lastVendor","parentVendor","reason","isVendorCacheValid","nextRefreshTimeStr","nextVendorRefresh","isFinite","information","shouldRefresh","writeVendorCache","toISOString","updateVendorArmorItemsCache","setMinutes","getMinutes","InventoryService","api","allArmorResults","currentClass","_calculationProgress","_config","totalPermutationCount","resultMaximumTiers","inventoryArmorItems","permutatorArmorItems","endResults","refreshing","_inventory","_manifest","_armorResults","_reachableTiers","workers","dataAlreadyFetched","events","debounceTime","val","NavigationEnd","killWorkers","clearResults","refreshAll","shouldCalculateResults","forceArmor","forceManifest","armorUpdated","manifestUpdated","updateInventoryItems","updateVendorsAsync","triggerArmorUpdateAndUpdateResults","triggerInventoryUpdate","triggerResultsUpdate","updateResults","finally","w","terminate","nthreads","doneWorkerCount","_ref3","equals","first","_x3","distinct","rhs","estimateRequiredThreads","threadCalculationAmountArr","threadCalculationDoneArr","threadCalculationReachableTiers","fill","oldProgressValue","Worker","__webpack_require__","tu","u","onmessage","_ref4","ev","sumTotal","sumDone","minReachableTiers","minArr","currArr","idx","newProgress","armorSet","y","statsNoMods","waste","_x4","onerror","largestArmorBucket","calculationMultiplier","maximumCalculationPerThread","navigator","hardwareConcurrency","getItemCountForClass","pieces","getExoticsForClass","exotics","ex","inCollection","inInventory","inVendor","curr","existing","localeCompare","errorLoop","alert","i6","i7","BASE_URL","CHARACTER_STATS_URL","UPDATES_URL","LOCAL_STORAGE_STATS_VERSION_KEY","LOCAL_STORAGE_STATS_KEY","ClarityService","inv","_characterStats","characterStats","load","loadCharacterStats","fetchUpdateData","storedData","liveVersion","storedVersion","lastUpdate","schemaVersion","fetchLiveCharacterStats","CharacterStatType","Speed","Percentage","Time","TimeMMSS","PercentagePerSecond","CharacterStatsService","clarity","allStatEntries","overrides","updateCharacterStats","ability","Overrides","Mobility","generateEntries","valueType","Resilience","Recovery","Discipline","Intellect","Strength","statName","exoticHashes","exoticOverrides","o","Hash","override","applyExoticArmorOverride","originalEntry","Requirements","overrideIcons","CooldownOverride","Scalar","reqIndex","scalar","base","rest","abilityList","Abilities","SuperAbilities","getClassAndElementForAbility","parts","split","className","elementName","Cooldowns","VarDirectiveDirective","ngVar","context","hasView","vcRef","createEmbeddedView","templateRef","inputs","ChangelogDialogControllerComponent","encapsulation","AppV2CoreComponent_div_0_div_2_mat_toolbar_1_Template","stat_r11","_r16","_r4","toggle","activeLinkIndex","idx_r14","link_r13","_r18","ctx_r7","idx_r20","link_r19","AppV2CoreComponent_div_0_span_61_mat_progress_bar_1_Template","stat_r21","ctx_r27","AppV2CoreComponent_div_0_div_63_mat_card_1_Template","AppV2CoreComponent_div_0_div_63_mat_card_2_Template","AppV2CoreComponent_div_0_div_63_mat_card_3_Template","AppV2CoreComponent_div_0_div_63_mat_card_4_Template","AppV2CoreComponent_div_0_div_63_mat_card_5_Template","stat_r23","AppV2CoreComponent_div_0_mat_toolbar_1_Template","AppV2CoreComponent_div_0_div_2_Template","_r30","AppV2CoreComponent_div_0_a_16_Template","ctx_r31","AppV2CoreComponent_div_0_button_28_Template","AppV2CoreComponent_div_0_a_43_Template","ctx_r32","ctx_r33","ctx_r34","AppV2CoreComponent_div_0_span_61_Template","AppV2CoreComponent_div_0_div_63_Template","stat_r1","isHandset$","navLinks","_r8","AppV2CoreComponent","breakpointObserver","observe","Breakpoints","Handset","Small","XSmall","matches","shareReplay","tab","AppV2CoreComponent_div_0_Template","StatIconComponent","MASTERWORK_COST_LEGENDARY","glimmer","core","prism","ascshard","MASTERWORK_COST_EXOTIC","getMasterworkCostList","DimService","armorStatIds","generateDIMQuery","join","copyDIMQuery","query","clipboard","writeText","generateDIMLink","fragments","modInfo","artificemod","statConstraints","assumeArmorMasterwork","minStat","maxStat","exoticItem","exoticArmorHash","loadout","parameters","equipped","unequipped","clearSpace","socketOverrides","subclassHash","encodeURIComponent","openInDIM","InventoryArmorSourceNames","VendorNamePipe","database","transform","pure","VendorIdFromItemIdPipe","startsWith","substring","isNaN","itemTooltip","ctx_r3","getWidth","getMasterworkBonus","statId_r2","ArmorTooltipComponent_tr_15_div_10_Template","getArmorStatName","getStatWithMasterwork","ArmorTooltipComponent","getSourceText","statId","isVendorItem","ArmorTooltipComponent_tr_11_Template","ArmorTooltipComponent_tr_15_Template","ItemTooltipRendererDirective","_overlay","_overlayPositionBuilder","_elementRef","showToolTip","positionStrategy","flexibleConnectedTo","withPositions","originX","originY","overlayX","overlayY","offsetY","_overlayRef","create","addPanelClass","show","hasAttached","attach","ComponentPortal","hide","closeToolTip","detach","hostBindings","ItemIconServiceService","itemLookup","sandboxperkIconLookup","gearsetIconLookup","getItemCached","getExoticPerkDescription","getSandboxPerkIconCached","getGearsetPerkCached","amount","setPerks","requiredSetCount","perkIcon","sandboxPerkHash","ctx_r2","ctx_r4","isFromVendor","isFromCollection","ItemIconComponent_div_0_img_1_Template","ItemIconComponent_div_0_ng_container_2_Template","ItemIconComponent_div_0_img_3_Template","ItemIconComponent_div_0_div_4_Template","ItemIconComponent_div_0_div_5_Template","ItemIconComponent","iconService","ItemIconComponent_div_0_Template","ArmorPerkIconComponent_ng_container_1_img_3_Template","customIconMods","ArmorPerkIconComponent","ngOnChanges","features","ArmorPerkIconComponent_ng_container_1_Template","ArmorPerkIconComponent_ng_container_2_Template","CountElementInListPipe","searchItem","i_r13","bonus_r26","ExpandedResultContentComponent_ng_container_24_ng_container_13_mat_icon_1_Template","ExpandedResultContentComponent_ng_container_24_ng_template_14_span_0_Template","ExpandedResultContentComponent_ng_container_24_u_3_Template","ExpandedResultContentComponent_ng_container_24_span_4_Template","ExpandedResultContentComponent_ng_container_24_ng_container_5_Template","ExpandedResultContentComponent_ng_container_24_ng_container_13_Template","ExpandedResultContentComponent_ng_container_24_ng_template_14_Template","_r36","ctx_r35","disableItem","ExpandedResultContentComponent_ng_container_24_td_20_Template","ExpandedResultContentComponent_ng_container_24_td_21_Template","ExpandedResultContentComponent_ng_container_24_td_22_Template","stats_r37","ctx_r38","ctx_r39","ctx_r40","ctx_r41","ExpandedResultContentComponent_tr_25_td_3_Template","ExpandedResultContentComponent_tr_25_td_4_Template","ExpandedResultContentComponent_tr_25_td_5_Template","ExpandedResultContentComponent_tr_25_td_6_Template","ExpandedResultContentComponent_tr_25_td_7_Template","ExpandedResultContentComponent_tr_25_td_8_Template","ExpandedResultContentComponent_span_30_span_1_Template","configValues","ExpandedResultContentComponent_span_32_span_1_Template","ExpandedResultContentComponent_span_34_span_1_Template","ExpandedResultContentComponent_span_36_span_1_Template","ExpandedResultContentComponent_span_38_span_1_Template","ctx_r6","ExpandedResultContentComponent_span_40_span_1_Template","count_r63","ExpandedResultContentComponent_tr_41_td_3_span_1_Template","count_r66","ExpandedResultContentComponent_tr_41_td_5_span_1_Template","count_r69","ExpandedResultContentComponent_tr_41_td_7_span_1_Template","count_r72","ExpandedResultContentComponent_tr_41_td_9_span_1_Template","count_r75","ExpandedResultContentComponent_tr_41_td_11_span_1_Template","count_r78","ExpandedResultContentComponent_tr_41_td_13_span_1_Template","ExpandedResultContentComponent_tr_41_td_3_Template","ExpandedResultContentComponent_tr_41_td_5_Template","ExpandedResultContentComponent_tr_41_td_7_Template","ExpandedResultContentComponent_tr_41_td_9_Template","ExpandedResultContentComponent_tr_41_td_11_Template","ExpandedResultContentComponent_tr_41_td_13_Template","mods_r56","ctx_r8","count_r88","ExpandedResultContentComponent_tr_42_td_3_span_1_Template","count_r91","ExpandedResultContentComponent_tr_42_td_5_span_1_Template","count_r94","ExpandedResultContentComponent_tr_42_td_7_span_1_Template","count_r97","ExpandedResultContentComponent_tr_42_td_9_span_1_Template","count_r100","ExpandedResultContentComponent_tr_42_td_11_span_1_Template","count_r103","ExpandedResultContentComponent_tr_42_td_13_span_1_Template","ExpandedResultContentComponent_tr_42_td_3_Template","ExpandedResultContentComponent_tr_42_td_5_Template","ExpandedResultContentComponent_tr_42_td_7_Template","ExpandedResultContentComponent_tr_42_td_9_Template","ExpandedResultContentComponent_tr_42_td_11_Template","ExpandedResultContentComponent_tr_42_td_13_Template","mods_r81","ctx_r9","count_r113","ExpandedResultContentComponent_ng_container_43_td_4_span_1_Template","count_r116","ExpandedResultContentComponent_ng_container_43_td_6_span_1_Template","count_r119","ExpandedResultContentComponent_ng_container_43_td_8_span_1_Template","count_r122","ExpandedResultContentComponent_ng_container_43_td_10_span_1_Template","count_r125","ExpandedResultContentComponent_ng_container_43_td_12_span_1_Template","count_r128","ExpandedResultContentComponent_ng_container_43_td_14_span_1_Template","ExpandedResultContentComponent_ng_container_43_td_4_Template","ExpandedResultContentComponent_ng_container_43_td_6_Template","ExpandedResultContentComponent_ng_container_43_td_8_Template","ExpandedResultContentComponent_ng_container_43_td_10_Template","ExpandedResultContentComponent_ng_container_43_td_12_Template","ExpandedResultContentComponent_ng_container_43_td_14_Template","mods_r106","ctx_r10","stats_r131","ctx_r11","cost_r132","ExpandedResultContentComponent_ng_container_45_div_1_span_2_Template","ExpandedResultContentComponent_ng_container_45_div_1_span_3_Template","ExpandedResultContentComponent_ng_container_45_div_1_span_4_Template","ExpandedResultContentComponent_ng_container_45_div_1_span_5_Template","ExpandedResultContentComponent_ng_container_45_div_1_Template","total","ExpandedResultContentComponent","_snackBar","bungieApi","dimService","config_characterClass","config_assumeLegendariesMasterworked","config_assumeExoticsMasterworked","config_enabledMods","DIMUrl","ArmorItems","ExoticArmorItem","CopyDIMQuery","openSnackBar","message","duration","politeness","disableAllItems","moveItems","calculateRequiredMasterworkCost","shards","costList","entryName","goToDIM","getTiersForStat","getColumnForStat","configValueTiers","moddedTiersMinor","cvt","getRequiredMasterworkBonus","ExpandedResultContentComponent_ng_container_24_Template","ExpandedResultContentComponent_tr_25_Template","ExpandedResultContentComponent_span_30_Template","ExpandedResultContentComponent_span_32_Template","ExpandedResultContentComponent_span_34_Template","ExpandedResultContentComponent_span_36_Template","ExpandedResultContentComponent_span_38_Template","ExpandedResultContentComponent_span_40_Template","ExpandedResultContentComponent_tr_41_Template","ExpandedResultContentComponent_tr_42_Template","ExpandedResultContentComponent_ng_container_43_Template","ExpandedResultContentComponent_tr_44_Template","ExpandedResultContentComponent_ng_container_45_Template","ChangelogListComponent_ng_container_1_mat_list_item_3_mat_icon_1_Template","ChangelogListComponent_ng_container_1_mat_list_item_3_mat_icon_2_Template","ChangelogListComponent_ng_container_1_mat_list_item_3_mat_icon_3_Template","entry_r3","ChangelogListComponent_ng_container_1_mat_list_item_3_Template","log_r1","ChangelogListComponent","ChangelogListComponent_ng_container_1_Template","text_r1","HelpPageComponent","knownIssues","HelpPageComponent_li_112_Template","value_r10","_r12","maximumAvailableTier","setValueMob","ctx_r13","handleHover","ctx_r14","clearHover","selectedValue","hoveredValue","currentAnimatedMaxValue","ctx_r15","tabIndexOffset","ctx_r17","_r20","startValueEdit","_r23","_r21","ctx_r22","commitValueEdit","ctx_r24","ctx_r25","cancelValueEdit","StatTierSelectionComponent","TierRange","statsByMods","selectedTier","locked","selectedTierChange","EventEmitter","lockedChange","statValues","editingValue","shouldSelectText","animationTimeouts","animateMaxTierChange","clearAnimationTimeouts","ngAfterViewChecked","valueInput","nativeElement","focus","inputElem","select","valueLength","setSelectionRange","setValue","newValue","inputEvent","isAddedByConfigMods","toggleLockState","requestAnimationFrame","num","isSixthStat","getSelectedValuePosition","targetMaxValue","startValue","steps","abs","timeout","clearTimeout","isStatValueAnimating","currentMax","targetMax","minRange","maxRange","StatTierSelectionComponent_ng_container_3_Template","StatTierSelectionComponent_button_5_Template","StatTierSelectionComponent_div_6_Template","StatTierSelectionComponent_div_7_Template","StatTierSelectionComponent_div_8_Template","StatTierSelectionComponent_button_9_Template","StatTierSelectionComponent_span_14_Template","StatTierSelectionComponent_input_15_Template","StatTierSelectionComponent_mat_icon_21_Template","StatTierSelectionComponent_mat_icon_22_Template","enum_r1","setSelectedTier","setLockState","i_r2","DesiredStatSelectionComponent","config_zero_waste","config_mod_strategy","config_reduce_waste","tmpStatsByMods","enabledMod","clearStatSelection","useStatPreset","armorStat","setModOptimizationStrategy","toggleReduceWaste","DesiredStatSelectionComponent_tr_1_Template","gearset","GearsetTooltipComponent","iconUrl","GearsetTooltipComponent_tr_3_Template","GearsetTooltipComponent_tr_4_Template","GearsetTooltipComponent_tr_5_Template","GearsetcTooltipDirective","gearsetTooltip","bonus_r5","_r10","onTwoPieceBonusChange","GearsetSelectionComponent_tr_11_div_4_img_3_Template","available","selectedTwoPieceCount","hasIcon","bonus_r12","_r17","onFourPieceBonusChange","GearsetSelectionComponent_tr_11_div_6_img_3_Template","GearsetSelectionComponent_tr_11_div_4_Template","GearsetSelectionComponent_tr_11_div_6_Template","gearSet_r1","twoPieceBonus","fourPieceBonus","GearsetSelectionComponent","inventoryService","refreshingGearsets","gearSets","refreshGearSets","refreshGearsetAvailability","distinctUntilChanged","gearSet","uniqueSlots","size","updateConfiguration","gearsets","nameA","toLowerCase","nameB","gs","twoPieceBonusInfo","twoPieceBonusData","fourPieceBonusInfo","fourPieceBonusData","configCount","newEntry","insertIndex","hasTwoPieceSelected","gearSetIndex","gsIndex","unshift","maximumModSlots","isFourPieceDisabled","GearsetSelectionComponent_tr_11_Template","slot_r1","_r11","hoveredPerkIndex","removePerk","ModslotVisualizationComponent_ng_container_7_ng_container_5_div_3_Template","getPerkName","perk_r21","_r24","onPerkSelect","ctx_r20","ModslotVisualizationComponent_ng_container_7_ng_container_6_ng_container_2_ng_container_1_button_7_Template","_r19","availablePerks","ModslotVisualizationComponent_ng_container_7_ng_container_6_ng_container_2_ng_container_1_Template","firstEmptySlotIndex","ModslotVisualizationComponent_ng_container_7_ng_container_6_ng_container_2_Template","SlotType","SlotTypeEmpty","ModslotVisualizationComponent_ng_container_7_ng_container_3_Template","ModslotVisualizationComponent_ng_container_7_ng_container_4_Template","ModslotVisualizationComponent_ng_container_7_ng_container_5_Template","ModslotVisualizationComponent_ng_container_7_ng_container_6_Template","SlotTypeExotic","SlotTypeGearset","SlotTypePerk","ModslotVisualizationComponent","itemIconService","newSlots","enabledAmount","gsData","slotIndex","selectedPerk","ModslotVisualizationComponent_ng_container_7_Template","n_r3","n_r4","ModLimitSegmentedComponent","major","onTotalChange","onMajorChange","ModLimitSegmentedComponent_mat_button_toggle_5_Template","ModLimitSegmentedComponent_mat_button_toggle_10_Template","ModLimitSegmentedComponent_div_11_Template","DesiredModLimitSelectionComponent","exoticPerk","ExoticPerkTooltipComponent_tr_12_ng_container_3_ng_container_2_Template","ExoticPerkTooltipComponent_tr_12_ng_container_3_Template","ExoticPerkTooltipComponent_tr_12_ng_container_4_Template","collection","ExoticPerkTooltipComponent","exoticPerkNotThere","ExoticPerkTooltipComponent_img_5_Template","ExoticPerkTooltipComponent_tr_8_Template","ExoticPerkTooltipComponent_tr_9_Template","ExoticPerkTooltipComponent_tr_10_Template","ExoticPerkTooltipComponent_tr_11_Template","ExoticPerkTooltipComponent_tr_12_Template","ExoticTooltipDirective","exoticTooltipInVendor","exoticTooltipInCollection","tooltipRef","exoticTooltip","selectExotic","_r14","exotic_r15","getHashesForExotic","DesiredExoticSelectionComponent_div_0_span_3_div_2_Template","DesiredExoticSelectionComponent_div_0_img_1_Template","DesiredExoticSelectionComponent_div_0_img_2_Template","DesiredExoticSelectionComponent_div_0_span_3_Template","itemGroup_r4","i_r5","perk_r22","perk_r23","_r25","setExoticPerk","DesiredExoticSelectionComponent_div_1_mat_option_10_Template","ctx_r26","DesiredExoticSelectionComponent_div_1_mat_option_17_Template","anyPerkValue","availableFirstPerks","availableSecondPerks","_r28","listAnimation","opacity","stagger","optional","DesiredExoticSelectionComponent","importEquippedExoticInProgress","updateExoticsForClass","armors","updateAvailableExoticClassItemPerks","classItemExotics","firstPerks","secondPerks","hasSelectedExoticClassItem","setAllowCollectionRolls","allow","setAllowVendorItems","setAllowBlueArmorPieces","setAllowLegacyLegendaryArmor","setAllowLegacyExoticArmor","setIgnoreSunsetArmor","ignore","setEnforceFeaturedLegendaryArmor","enforce","setEnforceFeaturedExoticArmor","hashes","importEquippedExotic","DesiredExoticSelectionComponent_div_0_Template","DesiredExoticSelectionComponent_div_1_Template","DesiredExoticSelectionComponent_button_3_Template","DesiredExoticSelectionComponent_mat_spinner_7_Template","checked","UserdataService","loadCachedData","updateCharacterData","itemCounts","char_r3","selectClass","DesiredClassSelectionComponent_div_2_span_2_Template","DesiredClassSelectionComponent_div_2_span_3_Template","DesiredClassSelectionComponent_div_2_span_4_Template","DesiredClassSelectionComponent_div_2_div_5_Template","idx_r4","storedMaterials","DesiredClassSelectionComponent","userdata","classAvailable","chr","loadStoredMaterials","updateItemCount","DesiredClassSelectionComponent_div_1_Template","DesiredClassSelectionComponent_div_2_Template","DesiredClassSelectionComponent_div_3_Template","ModDescriptionTooltipComponent","ModTooltipDirective","_r7","setElement","ctx_r12","selectedElement","d_r2","element_r22","selectedMods","value_r30","DesiredModsSelectionComponent_span_0_ng_container_2_table_3_ng_container_4_td_3_span_1_span_1_Template","DesiredModsSelectionComponent_span_0_ng_container_2_table_3_ng_container_4_td_3_span_1_span_2_Template","DesiredModsSelectionComponent_span_0_ng_container_2_table_3_ng_container_4_td_3_span_1_Template","getModifierTextForValue","element_r28","DesiredModsSelectionComponent_span_0_ng_container_2_table_3_ng_container_4_th_2_Template","DesiredModsSelectionComponent_span_0_ng_container_2_table_3_ng_container_4_td_3_Template","row_r38","_r40","handleRowClick","ctx_r21","DesiredModsSelectionComponent_span_0_ng_container_2_table_3_th_2_Template","DesiredModsSelectionComponent_span_0_ng_container_2_table_3_td_3_Template","DesiredModsSelectionComponent_span_0_ng_container_2_table_3_ng_container_4_Template","DesiredModsSelectionComponent_span_0_ng_container_2_table_3_tr_5_Template","DesiredModsSelectionComponent_span_0_ng_container_2_table_3_tr_6_Template","displayedColumns","DesiredModsSelectionComponent_span_0_ng_container_2_h3_1_Template","DesiredModsSelectionComponent_span_0_ng_container_2_span_2_Template","DesiredModsSelectionComponent_span_0_ng_container_2_table_3_Template","group","DesiredModsSelectionComponent_span_0_ng_container_1_Template","DesiredModsSelectionComponent_span_0_ng_container_2_Template","idx_r3","DesiredModsSelectionComponent","isLoadingSubclass","modifiers","dataSource","row","pos","toDisableMods","position","importEquippedSubclass","provide","MAT_SLIDE_TOGGLE_DEFAULT_OPTIONS","useValue","disableToggleValue","disableDragValue","DesiredModsSelectionComponent_span_0_Template","DesiredModsSelectionComponent_mat_spinner_4_Template","f_r3","help","_r13","onToggle","AdvancedSettingsComponent_div_0_div_3_div_1_mat_icon_3_Template","AdvancedSettingsComponent_div_0_div_3_div_1_mat_icon_4_Template","disabled","impactsResultCount","option_r18","label","onSelect","AdvancedSettingsComponent_div_0_div_3_div_2_mat_option_6_Template","AdvancedSettingsComponent_div_0_div_3_div_2_mat_icon_7_Template","AdvancedSettingsComponent_div_0_div_3_div_2_mat_icon_8_Template","isEnabled","AdvancedSettingsComponent_div_0_div_3_div_1_Template","AdvancedSettingsComponent_div_0_div_3_div_2_Template","AdvancedSettingsComponent_div_0_div_3_Template","category_r1","fields2","AdvancedSettingsComponent","fieldKeys","Events","Masterwork","AdvancedSettingsComponent_div_0_Template","ConfirmDialogComponent","dialogRef","onNoClick","close","MAT_DIALOG_DATA","LoadAndSaveSettingsComponent_mat_option_23_span_3_Template","LoadAndSaveSettingsComponent_mat_option_23_span_4_Template","LoadAndSaveSettingsComponent_mat_option_23_span_5_Template","element_r26","LoadAndSaveSettingsComponent_td_37_span_1_Template","LoadAndSaveSettingsComponent_td_37_span_2_Template","LoadAndSaveSettingsComponent_td_37_span_3_Template","element_r27","element_r31","element_r32","element_r33","element_r34","element_r35","element_r36","element_r37","_r39","copySingleSettingToClipboard","_r44","copyAllSettingsToClipboard","LoadAndSaveSettingsComponent","formBuilder","selectedEntry","storedConfigs","settingsNameForm","importTextForm","content","submit","width","reset","clearEverything","runImport","jsonText","jsonDatum","copy","LoadAndSaveSettingsComponent_mat_option_23_Template","LoadAndSaveSettingsComponent_th_33_Template","LoadAndSaveSettingsComponent_td_34_Template","LoadAndSaveSettingsComponent_th_36_Template","LoadAndSaveSettingsComponent_td_37_Template","LoadAndSaveSettingsComponent_th_39_Template","LoadAndSaveSettingsComponent_td_40_Template","LoadAndSaveSettingsComponent_th_42_Template","LoadAndSaveSettingsComponent_td_43_Template","LoadAndSaveSettingsComponent_th_45_Template","LoadAndSaveSettingsComponent_td_46_Template","LoadAndSaveSettingsComponent_th_48_Template","LoadAndSaveSettingsComponent_td_49_Template","LoadAndSaveSettingsComponent_th_51_Template","LoadAndSaveSettingsComponent_td_52_Template","LoadAndSaveSettingsComponent_th_54_Template","LoadAndSaveSettingsComponent_td_55_Template","LoadAndSaveSettingsComponent_th_57_Template","LoadAndSaveSettingsComponent_td_58_Template","LoadAndSaveSettingsComponent_tr_59_Template","LoadAndSaveSettingsComponent_tr_60_Template","LoadAndSaveSettingsComponent_ng_container_61_Template","tmp_1_0","i_r10","enableItem","IgnoredItemsListComponent_div_0_div_1_span_6_br_2_Template","generateTooltip","idx_r11","IgnoredItemsListComponent_div_0_div_1_div_1_Template","IgnoredItemsListComponent_div_0_div_1_div_2_Template","IgnoredItemsListComponent_div_0_div_1_div_3_Template","IgnoredItemsListComponent_div_0_div_1_div_4_Template","IgnoredItemsListComponent_div_0_div_1_div_5_Template","IgnoredItemsListComponent_div_0_div_1_span_6_Template","entries_r2","IgnoredItemsListComponent_div_0_div_1_Template","IgnoredItemsListComponent","instanceId","newDisabledItems","itemInstance","IgnoredItemsListComponent_div_0_Template","SettingsComponent","ArmorPickerPageComponent","idx1_r6","clusterInformation","idx_r2","mean","ArmorClusterPageComponent_ng_container_92_mat_card_1_ng_container_9_tr_1_Template","ArmorClusterPageComponent_ng_container_92_mat_card_1_ng_container_9_Template","cluster_r1","getDIMStringForCluster","ArmorClusterPageComponent_ng_container_92_mat_card_1_Template","clusterData","centroids","std","ArmorClusterPageComponent","clusters","exoticFilter","masterworkFilter","classFilter","Update","getClusterid","cluster","vectorDistance","sqrt","pow","currentDist","MAX_VALUE","currentId","dist","ArmorClusterPageComponent_ng_container_92_Template","artificeUrl","artificeCount_r2","TableModDisplayComponent_ng_container_1_div_1_Template","getStatName","stat_r6","modType_r8","ModUrl","count_r10","TableModDisplayComponent_ng_container_3_ng_container_1_ng_container_1_div_1_Template","TableModDisplayComponent_ng_container_3_ng_container_1_ng_container_1_Template","TableModDisplayComponent_ng_container_3_ng_container_1_Template","modTypeIndex","TableModDisplayComponent","modIndex","TableModDisplayComponent_ng_container_1_Template","TableModDisplayComponent_ng_container_3_Template","id2_r11","idx1_r8","ci_r10","ArmorInvestigationPageComponent_ng_container_134_ng_container_5_ng_container_29_div_9_Template","armor_r3","entry_r7","plug_r14","getPlugSum","getPlugString","ArmorInvestigationPageComponent_ng_container_134_ng_container_5_ng_container_29_Template","ArmorInvestigationPageComponent_ng_container_134_ng_container_5_tr_40_Template","totalSum","ArmorInvestigationPageComponent_ng_container_134_ng_container_5_Template","getCategoryName","armorItems_r1","ArmorInvestigationPageComponent","minWeapon","minHealth","minClass","minGrenade","minSuper","minMelee","anyPlugWithN","anyPlugBelowN","allPlugsWithN","allPlugsBelowN","armorName","armorHash","armorId","armorSystemFilter","armorItemsPerSlot","plugData","updateItems","plugId","plugInfo","armorItems","filterItems","pl","ArmorInvestigationPageComponent_ng_container_134_Template","AccountConfigPageComponent","downloadArmorInformation","downloadManifestInformation","resetEverything","CommonMaterialModule","MatButtonModule","MatFormFieldModule","MatSelectModule","MatOptionModule","MatSliderModule","MatInputModule","MatSlideToggleModule","MatTableModule","MatCardModule","MatTooltipModule","MatProgressBarModule","MatIconModule","MatSortModule","MatPaginatorModule","MatToolbarModule","MatMenuModule","MatButtonToggleModule","MatListModule","MatExpansionModule","MatDialogModule","MatSnackBarModule","MatProgressSpinnerModule","MatTabsModule","MatChipsModule","MatSidenavModule","ReactiveFormsModule","FormsModule","toggleSort","displayedResults","filteredResults","activeSortField","getSortIcon","getStatIcon","result_r12","stat_r29","ResultsCardViewComponent_mat_card_4_div_18_mat_chip_option_2_Template","ResultsCardViewComponent_mat_card_4_div_18_mat_chip_option_3_Template","stat_r36","stat_r38","item_r39","getMasterworkTooltip","getMasterworkDisplay","getItemStatWithMasterwork","stat_r48","ResultsCardViewComponent_mat_card_4_tr_49_span_6_Template","ResultsCardViewComponent_mat_card_4_tr_49_div_7_Template","ResultsCardViewComponent_mat_card_4_tr_49_mat_progress_spinner_9_Template","ResultsCardViewComponent_mat_card_4_tr_49_mat_icon_10_Template","ResultsCardViewComponent_mat_card_4_tr_49_mat_icon_11_Template","ResultsCardViewComponent_mat_card_4_tr_49_td_12_Template","shouldShowTooltip","getShortItemName","STAT_ORDER","_r55","toggleBreakdown","stopPropagation","ctx_r50","isBreakdownExpanded","stat_r57","ResultsCardViewComponent_mat_card_4_tr_50_td_1_Template","ResultsCardViewComponent_mat_card_4_tr_50_td_2_Template","ResultsCardViewComponent_mat_card_4_tr_50_td_3_Template","hasBreakdownRows","ctx_r62","getConfigValue","stat_r61","ResultsCardViewComponent_mat_card_4_tr_51_td_3_span_1_Template","ctx_r60","ResultsCardViewComponent_mat_card_4_tr_51_td_3_Template","ctx_r23","getMinorModCount","stat_r65","ResultsCardViewComponent_mat_card_4_tr_52_td_3_span_1_Template","ctx_r64","ResultsCardViewComponent_mat_card_4_tr_52_td_3_Template","ctx_r72","getMajorModCount","stat_r71","ResultsCardViewComponent_mat_card_4_tr_53_td_3_span_1_Template","ctx_r70","ResultsCardViewComponent_mat_card_4_tr_53_td_3_Template","ctx_r78","getArtificeModCount","stat_r77","ResultsCardViewComponent_mat_card_4_tr_54_td_3_span_1_Template","ctx_r76","ResultsCardViewComponent_mat_card_4_tr_54_td_3_Template","stat_r82","_r85","ctx_r84","toggleCard","ResultsCardViewComponent_mat_card_4_img_5_Template","ResultsCardViewComponent_mat_card_4_img_6_Template","ResultsCardViewComponent_mat_card_4_div_10_Template","ResultsCardViewComponent_mat_card_4_div_18_Template","ResultsCardViewComponent_mat_card_4_img_23_Template","ResultsCardViewComponent_mat_card_4_div_37_Template","ResultsCardViewComponent_mat_card_4_th_47_Template","ResultsCardViewComponent_mat_card_4_tr_49_Template","ResultsCardViewComponent_mat_card_4_tr_50_Template","ResultsCardViewComponent_mat_card_4_tr_51_Template","ResultsCardViewComponent_mat_card_4_tr_52_Template","ResultsCardViewComponent_mat_card_4_tr_53_Template","ResultsCardViewComponent_mat_card_4_tr_54_Template","ResultsCardViewComponent_mat_card_4_td_59_Template","ctx_r86","ctx_r87","ctx_r88","ctx_r89","expandedCard","hasConfigBonus","hasMinorMods","hasMajorMods","hasArtificeMods","ResultsCardViewComponent","snackBar","bungieApiService","sortDirection","expandedBreakdown","isLoading","PAGE_SIZE","currentPage","destroy$","initializeData","applyFiltersAndSort","resetPagination","loadNextPage","field","aValue","bValue","getModSortValue","newResults","onScroll","target","scrollTop","clientHeight","scrollHeight","trackByFn","getModCost","statIndex","baseStat","fullName","replace","getItemColor","configValue","modifierId","minorMods","minorModForStat","majorMods","majorModForStat","artificeModForStat","moveResult","ResultsCardViewComponent_div_1_Template","ResultsCardViewComponent_mat_card_4_Template","ResultsCardViewComponent_div_5_Template","init","tracingOrigins","inlineImages","networkRecording","recordHeadersAndBody","urlBlocklist","routes","path","component","children","redirectTo","AppModule","bootstrap","CommonModule","BrowserModule","BrowserAnimationsModule","HttpClientModule","RouterModule","forRoot","useHash","ClipboardModule","LayoutModule","i8","i9","i10","i11","i12","i13","enableProdMode","__NgCli_bootstrap_1","bootstrapModule"],"sourceRoot":"webpack:///","sources":["./src/app/data/ModInformation.ts","./src/app/data/constants.ts","./src/app/data/enum/armor-slot.ts","./src/app/data/enum/armor-stat.ts","./src/app/data/enum/mod-optimization-strategy.ts","./src/app/data/enum/modOrAbility.ts","./src/app/data/enum/modifierType.ts","./src/app/data/types/IInventoryArmor.ts","./src/app/data/types/IManifestArmor.ts","./src/app/data/generated/precalculatedZeroWasteModCombinations.ts","./src/app/data/generated/precalculatedModCombinations.ts","./src/app/data/types/IPermutatorArmorSet.ts","./src/app/services/results-builder.worker.ts","./src/environments/environment.prod.ts","./src/app/data/commonFunctions.ts","./src/app/services/status-provider.service.ts","./src/app/services/auth.service.ts","./src/app/components/handle-bungie-login/handle-bungie-login.component.ts","./src/app/app.component.html","./src/app/app.component.ts","./src/app/components/login/login.component.html","./src/app/components/login/login.component.ts","./src/app/guards/authenticated.guard.ts","./src/app/guards/not-authenticated.guard.ts","./src/app/data/buildConfiguration.ts","./src/app/data/database.ts","./src/app/data/changelog.ts","./src/app/components/authenticated-v2/components/changelog-dialog/changelog-dialog.component.ts","./src/app/components/authenticated-v2/components/changelog-dialog/changelog-dialog.component.html","./src/app/services/changelog.service.ts","./src/app/services/database.service.ts","./src/app/services/configuration.service.ts","./src/app/components/authenticated-v2/results/results.component.html","./src/app/components/authenticated-v2/results/results.component.ts","./src/app/data/exotic-class-item-spirits.ts","./src/app/services/http-client.service.ts","./src/app/services/membership.service.ts","./src/app/services/bungie-api.service.ts","./src/app/services/vendors.service.ts","./src/app/services/inventory.service.ts","./src/app/services/clarity.service.ts","./src/app/services/character-stats.service.ts","./src/app/components/authenticated-v2/components/var-directive.directive.ts","./src/app/components/authenticated-v2/components/changelog-dialog-controller/changelog-dialog-controller.component.ts","./src/app/components/authenticated-v2/app-v2-core/app-v2-core.component.html","./src/app/components/authenticated-v2/app-v2-core/app-v2-core.component.ts","./src/app/components/authenticated-v2/components/stat-icon/stat-icon.component.ts","./src/app/components/authenticated-v2/components/stat-icon/stat-icon.component.html","./src/app/data/masterworkCost.ts","./src/app/services/dim.service.ts","./src/app/data/enum/armor-source.ts","./src/app/components/authenticated-v2/pipes/vendor-name-pipe.ts","./src/app/components/authenticated-v2/overlays/armor-tooltip-component/armor-tooltip.component.html","./src/app/components/authenticated-v2/overlays/armor-tooltip-component/armor-tooltip.component.ts","./src/app/components/authenticated-v2/overlays/armor-tooltip-component/item-tooltip-renderer.directive.ts","./src/app/services/item-icon-service.service.ts","./src/app/components/authenticated-v2/components/item-icon/item-icon.component.html","./src/app/components/authenticated-v2/components/item-icon/item-icon.component.ts","./src/app/components/authenticated-v2/components/armor-perk-icon/armor-perk-icon.component.html","./src/app/components/authenticated-v2/components/armor-perk-icon/armor-perk-icon.component.ts","./src/app/components/authenticated-v2/results/expanded-result-content/count-element-in-list.pipe.ts","./src/app/components/authenticated-v2/results/expanded-result-content/expanded-result-content.component.html","./src/app/components/authenticated-v2/results/expanded-result-content/expanded-result-content.component.ts","./src/app/components/authenticated-v2/components/changelog-list/changelog-list.component.html","./src/app/components/authenticated-v2/components/changelog-list/changelog-list.component.ts","./src/app/components/authenticated-v2/subpages/help-page/help-page.component.html","./src/app/components/authenticated-v2/subpages/help-page/help-page.component.ts","./src/app/components/authenticated-v2/settings/desired-stat-selection/stat-tier-selection/stat-tier-selection.component.html","./src/app/components/authenticated-v2/settings/desired-stat-selection/stat-tier-selection/stat-tier-selection.component.ts","./src/app/components/authenticated-v2/settings/desired-stat-selection/desired-stat-selection.component.html","./src/app/components/authenticated-v2/settings/desired-stat-selection/desired-stat-selection.component.ts","./src/app/components/authenticated-v2/overlays/gearset-tooltip/gearset-tooltip.component.html","./src/app/components/authenticated-v2/overlays/gearset-tooltip/gearset-tooltip.component.ts","./src/app/components/authenticated-v2/overlays/gearset-tooltip/gearset-tooltip.directive.ts","./src/app/components/authenticated-v2/settings/desired-mod-limit-selection/gearset-selection/gearset-selection.component.html","./src/app/components/authenticated-v2/settings/desired-mod-limit-selection/gearset-selection/gearset-selection.component.ts","./src/app/components/authenticated-v2/settings/desired-mod-limit-selection/modslot-visualization/modslot-visualization.component.html","./src/app/components/authenticated-v2/settings/desired-mod-limit-selection/modslot-visualization/modslot-visualization.component.ts","./src/app/components/authenticated-v2/settings/desired-mod-limit-selection/mod-limit-segmented/mod-limit-segmented.component.html","./src/app/components/authenticated-v2/settings/desired-mod-limit-selection/mod-limit-segmented/mod-limit-segmented.component.ts","./src/app/components/authenticated-v2/settings/desired-mod-limit-selection/desired-mod-limit-selection.component.ts","./src/app/components/authenticated-v2/settings/desired-mod-limit-selection/desired-mod-limit-selection.component.html","./src/app/components/authenticated-v2/overlays/exotic-perk-tooltip/exotic-perk-tooltip.component.html","./src/app/components/authenticated-v2/overlays/exotic-perk-tooltip/exotic-perk-tooltip.component.ts","./src/app/components/authenticated-v2/overlays/exotic-perk-tooltip/exotic-tooltip.directive.ts","./src/app/components/authenticated-v2/settings/desired-exotic-selection/desired-exotic-selection.component.html","./src/app/components/authenticated-v2/settings/desired-exotic-selection/desired-exotic-selection.component.ts","./src/app/services/userdata.service.ts","./src/app/components/authenticated-v2/settings/desired-class-selection/desired-class-selection.component.html","./src/app/components/authenticated-v2/settings/desired-class-selection/desired-class-selection.component.ts","./src/app/components/authenticated-v2/overlays/mod-description-tooltip/mod-description-tooltip.component.ts","./src/app/components/authenticated-v2/overlays/mod-description-tooltip/mod-description-tooltip.component.html","./src/app/components/authenticated-v2/overlays/mod-description-tooltip/mod-tooltip.directive.ts","./src/app/components/authenticated-v2/settings/desired-mods-selection/desired-mods-selection.component.html","./src/app/components/authenticated-v2/settings/desired-mods-selection/desired-mods-selection.component.ts","./src/app/components/authenticated-v2/settings/advanced-settings/advanced-settings.component.html","./src/app/components/authenticated-v2/settings/advanced-settings/advanced-settings.component.ts","./src/app/components/authenticated-v2/components/confirm-dialog/confirm-dialog.component.ts","./src/app/components/authenticated-v2/components/confirm-dialog/confirm-dialog.component.html","./src/app/components/authenticated-v2/settings/load-and-save-settings/load-and-save-settings.component.html","./src/app/components/authenticated-v2/settings/load-and-save-settings/load-and-save-settings.component.ts","./src/app/components/authenticated-v2/settings/ignored-items-list/ignored-items-list.component.html","./src/app/components/authenticated-v2/settings/ignored-items-list/ignored-items-list.component.ts","./src/app/components/authenticated-v2/settings/settings.component.ts","./src/app/components/authenticated-v2/settings/settings.component.html","./src/app/components/authenticated-v2/subpages/armor-picker-page/armor-picker-page.component.ts","./src/app/components/authenticated-v2/subpages/armor-picker-page/armor-picker-page.component.html","./src/app/components/authenticated-v2/subpages/armor-cluster-page/armor-cluster-page.component.html","./src/app/components/authenticated-v2/subpages/armor-cluster-page/armor-cluster-page.component.ts","./src/app/components/authenticated-v2/results/table-mod-display/table-mod-display.component.html","./src/app/components/authenticated-v2/results/table-mod-display/table-mod-display.component.ts","./src/app/components/authenticated-v2/subpages/armor-investigation-page/armor-investigation-page.component.html","./src/app/components/authenticated-v2/subpages/armor-investigation-page/armor-investigation-page.component.ts","./src/app/components/authenticated-v2/subpages/account-config-page/account-config-page.component.ts","./src/app/components/authenticated-v2/subpages/account-config-page/account-config-page.component.html","./src/app/modules/common-material/common-material.module.ts","./src/app/components/authenticated-v2/results/results-card-view/results-card-view.component.html","./src/app/components/authenticated-v2/results/results-card-view/results-card-view.component.ts","./src/app/app.module.ts","./src/main.ts"],"sourcesContent":["/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { EnumDictionary } from \"./types/EnumDictionary\";\nimport { ModOrAbility } from \"./enum/modOrAbility\";\nimport { Modifier } from \"./modifier\";\nimport { ModifierType } from \"./enum/modifierType\";\nimport { ArmorStat, SpecialArmorStat } from \"./enum/armor-stat\";\nimport { DestinyEnergyType } from \"bungie-api-ts/destiny2/interfaces\";\n\nexport const ModInformation: EnumDictionary<ModOrAbility, Modifier> = {\n  // region Stasis\n  [ModOrAbility.WhisperOfDurance]: {\n    id: ModOrAbility.WhisperOfDurance,\n    name: \"Whisper of Durance\",\n    description:\n      \"Slow that you apply to targets lasts longer. For those abilities that linger, their duration will also increase.\",\n    type: ModifierType.Stasis,\n    bonus: [{ stat: ArmorStat.StatMelee, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 3469412969,\n  },\n  [ModOrAbility.WhisperOfChains]: {\n    id: ModOrAbility.WhisperOfChains,\n    name: \"Whisper of Chains\",\n    description:\n      \"While you are near frozen targets or a friendly Stasis crystal, you take reduced damage from targets.\",\n    type: ModifierType.Stasis,\n    bonus: [{ stat: ArmorStat.StatClass, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 537774540,\n  },\n  [ModOrAbility.WhisperOfConduction]: {\n    id: ModOrAbility.WhisperOfConduction,\n    name: \"Whisper of Conduction\",\n    description: \"Nearby Stasis shards track to your position.\",\n    type: ModifierType.Stasis,\n    bonus: [\n      { stat: ArmorStat.StatSuper, value: 10 },\n      { stat: ArmorStat.StatHealth, value: 10 },\n    ],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2483898429,\n  },\n  [ModOrAbility.WhisperOfBonds]: {\n    id: ModOrAbility.WhisperOfBonds,\n    name: \"Whisper of Bonds\",\n    description: \"Defeating frozen targets generates an Orb of Power.\",\n    type: ModifierType.Stasis,\n    bonus: [{ stat: ArmorStat.StatSuper, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 3469412974,\n  },\n  [ModOrAbility.WhisperOfHunger]: {\n    id: ModOrAbility.WhisperOfHunger,\n    name: \"Whisper of Hunger\",\n    description: \"Increases the melee energy gained from picking up Stasis shards.\",\n    type: ModifierType.Stasis,\n    bonus: [{ stat: ArmorStat.StatMelee, value: -20 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2483898431,\n  },\n  [ModOrAbility.WhisperOfFractures]: {\n    id: ModOrAbility.WhisperOfFractures,\n    name: \"Whisper of Fractures\",\n    description: \"Your melee energy recharges faster when you are near two or more targets.\",\n    type: ModifierType.Stasis,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 537774542,\n  },\n  [ModOrAbility.WhisperOfImpetus]: {\n    id: ModOrAbility.WhisperOfImpetus,\n    name: \"Whisper of Impetus\",\n    description:\n      \"Damaging targets with a Stasis melee reloads your stowed weapons and grants you a temporary boost to weapon ready speed.\",\n    type: ModifierType.Stasis,\n    bonus: [{ stat: ArmorStat.StatHealth, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 537774543,\n  },\n  [ModOrAbility.WhisperOfTorment]: {\n    id: ModOrAbility.WhisperOfTorment,\n    name: \"Whisper of Torment\",\n    description:\n      \"You gain grenade energy each time you take damage from targets. Having Frost Armor increases the amount of energy gained.\",\n    type: ModifierType.Stasis,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 537774541,\n  },\n  // endregion Stasis\n\n  // region Void\n  [ModOrAbility.EchoOfExpulsion]: {\n    id: ModOrAbility.EchoOfExpulsion,\n    name: \"Echo of Expulsion\",\n    description: \"Void ability final blows cause targets to explode.\",\n    type: ModifierType.Void,\n    bonus: [{ stat: ArmorStat.StatSuper, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2272984665,\n  },\n  [ModOrAbility.EchoOfProvision]: {\n    id: ModOrAbility.EchoOfProvision,\n    name: \"Echo of Provision\",\n    description: \"Damaging targets with grenades grants melee energy.\",\n    type: ModifierType.Void,\n    bonus: [{ stat: ArmorStat.StatMelee, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2272984664,\n  },\n  [ModOrAbility.EchoOfPersistence]: {\n    id: ModOrAbility.EchoOfPersistence,\n    name: \"Echo of Persistence\",\n    description:\n      \"Void buffs applied to you (Invisibility, Overshield, and Devour) have increased duration.\",\n    type: ModifierType.Void,\n    bonus: [{ stat: SpecialArmorStat.ClassAbilityRegenerationStat, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2272984671,\n  },\n  [ModOrAbility.EchoOfLeeching]: {\n    id: ModOrAbility.EchoOfLeeching,\n    name: \"Echo of Leeching\",\n    description: \"Melee final blows start health regeneration for you and nearby allies.\",\n    type: ModifierType.Void,\n    bonus: [{ stat: ArmorStat.StatHealth, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2272984670,\n  },\n  [ModOrAbility.EchoOfDomineering]: {\n    id: ModOrAbility.EchoOfDomineering,\n    name: \"Echo of Domineering\",\n    description:\n      \"After suppressing a target, you gain greatly increased mobility for a short duration, and your equipped weapon is reloaded from reserves.\\n\\nDefeating suppressed targets creates a Void Breach.\",\n    type: ModifierType.Void,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2272984657,\n  },\n  [ModOrAbility.EchoOfDilation]: {\n    id: ModOrAbility.EchoOfDilation,\n    name: \"Echo of Dilation\",\n    description: \"While crouched, you sneak faster and gain enhanced radar resolution.\",\n    type: ModifierType.Void,\n    bonus: [\n      { stat: ArmorStat.StatWeapon, value: 10 },\n      { stat: ArmorStat.StatSuper, value: 10 },\n    ],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2272984656,\n  },\n  [ModOrAbility.EchoOfUndermining]: {\n    id: ModOrAbility.EchoOfUndermining,\n    name: \"Echo of Undermining\",\n    description: \"Your Void grenades weaken targets.\",\n    type: ModifierType.Void,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: -20 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2272984668,\n  },\n  [ModOrAbility.EchoOfInstability]: {\n    id: ModOrAbility.EchoOfInstability,\n    name: \"Echo of Instability\",\n    description: \"Defeating targets with grenades grants Volatile Rounds to your Void weapons.\",\n    type: ModifierType.Void,\n    bonus: [{ stat: ArmorStat.StatMelee, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2661180600,\n  },\n  [ModOrAbility.EchoOfHarvest]: {\n    id: ModOrAbility.EchoOfHarvest,\n    name: \"Echo of Harvest\",\n    description: \"Defeating weakened targets creates an Orb of Power and a Void Breach.\",\n    type: ModifierType.Void,\n    bonus: [{ stat: ArmorStat.StatSuper, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2661180601,\n  },\n  [ModOrAbility.EchoOfObscurity]: {\n    id: ModOrAbility.EchoOfObscurity,\n    name: \"Echo of Obscurity\",\n    description: \"Finisher final blows grant Invisibility.\",\n    type: ModifierType.Void,\n    bonus: [{ stat: ArmorStat.StatClass, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2661180602,\n  },\n  [ModOrAbility.EchoOfStarvation]: {\n    id: ModOrAbility.EchoOfStarvation,\n    name: \"Echo of Starvation\",\n    description: \"Picking up a Void Breach or an Orb of Power grants Devour.\",\n    type: ModifierType.Void,\n    bonus: [{ stat: ArmorStat.StatClass, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2661180603,\n  },\n  [ModOrAbility.EchoOfVigilance]: {\n    id: ModOrAbility.EchoOfVigilance,\n    name: \"Echo of Vigilance\",\n    description:\n      \"Defeating a target while your shields are depleted grants you a temporary Void overshield.\",\n    type: ModifierType.Void,\n    bonus: [{ stat: ArmorStat.StatClass, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 3854948621,\n  },\n  // endregion Void\n\n  // region Solar\n  [ModOrAbility.EmberOfBenelovence]: {\n    id: ModOrAbility.EmberOfBenelovence,\n    name: \"Ember of Benevolence\",\n    description:\n      \"Applying restoration, cure,  or radiant to allies grants increased grenade, melee, and class ability regeneration for a short duration.\",\n    type: ModifierType.Solar,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 362132292,\n  },\n  [ModOrAbility.EmberOfBeams]: {\n    id: ModOrAbility.EmberOfBeams,\n    name: \"Ember of Beams\",\n    description: \"Your Solar Super projectiles have stronger target acquisition.\",\n    type: ModifierType.Solar,\n    bonus: [{ stat: ArmorStat.StatSuper, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 362132295,\n  },\n  [ModOrAbility.EmberOfEmpyrean]: {\n    id: ModOrAbility.EmberOfEmpyrean,\n    name: \"Ember of Empyrean\",\n    description:\n      \"Solar weapon or ability final blows extend the duration of restoration and radiant effects applied to you.\",\n    type: ModifierType.Solar,\n    bonus: [{ stat: ArmorStat.StatHealth, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 362132294,\n  },\n  [ModOrAbility.EmberOfCombustion]: {\n    id: ModOrAbility.EmberOfCombustion,\n    name: \"Ember of Combustion\",\n    description:\n      \"Final blows with a Solar Super causes targets to ignite and creates a Firesprite.\",\n    type: ModifierType.Solar,\n    bonus: [{ stat: ArmorStat.StatMelee, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 362132289,\n  },\n  [ModOrAbility.EmberOfChar]: {\n    id: ModOrAbility.EmberOfChar,\n    name: \"Ember of Char\",\n    description: \"Your Solar ignitions spread scorch to affected targets.\",\n    type: ModifierType.Solar,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 362132291,\n  },\n  [ModOrAbility.EmberOfTempering]: {\n    id: ModOrAbility.EmberOfTempering,\n    name: \"Ember of Tempering\",\n    description:\n      \"Solar weapon final blows grant you and your allies increased recovery for a short duration. Stacks 3 times.\\n\\nWhile Ember of Tempering is active, your weapons have increased airborne effectiveness, and your Solar weapon final blows create a Firesprite.\",\n    type: ModifierType.Solar,\n    bonus: [{ stat: ArmorStat.StatClass, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 362132290,\n  },\n  [ModOrAbility.EmberOfEruption]: {\n    id: ModOrAbility.EmberOfEruption,\n    name: \"Ember of Eruption\",\n    description: \"Your Solar ignitions have increased area of effect.\",\n    type: ModifierType.Solar,\n    bonus: [{ stat: ArmorStat.StatMelee, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 1051276348,\n  },\n  [ModOrAbility.EmberOfWonder]: {\n    id: ModOrAbility.EmberOfWonder,\n    name: \"Ember of Wonder\",\n    description:\n      \"Rapidly defeating multiple targets with Solar ignitions generates an Orb of Power.\",\n    type: ModifierType.Solar,\n    bonus: [{ stat: ArmorStat.StatHealth, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 1051276350,\n  },\n  [ModOrAbility.EmberOfSearing]: {\n    id: ModOrAbility.EmberOfSearing,\n    name: \"Ember of Searing\",\n    description: \"Defeating scorched targets grants melee energy and creates a Firesprite.\",\n    type: ModifierType.Solar,\n    bonus: [{ stat: ArmorStat.StatClass, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 1051276351,\n  },\n  [ModOrAbility.EmberOfTorches]: {\n    id: ModOrAbility.EmberOfTorches,\n    name: \"Ember of Torches\",\n    description: \"Powered melee attacks against combatants make you and nearby allies radiant.\",\n    type: ModifierType.Solar,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 362132288,\n  },\n  [ModOrAbility.EmberOfMercy]: {\n    id: ModOrAbility.EmberOfMercy,\n    name: \"Ember of Mercy\",\n    description:\n      \"When you revive an ally, you and other nearby allies gain restoration.\\n\\nPicking up a Firesprite grants restoration.\",\n    type: ModifierType.Solar,\n    bonus: [{ stat: ArmorStat.StatHealth, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 4180586737,\n  },\n  // endregion Solar\n\n  // region Arc\n  [ModOrAbility.SparkOfBrilliance]: {\n    id: ModOrAbility.SparkOfBrilliance,\n    name: \"Spark of Brilliance\",\n    description: \"Defeating a blinded target with precision damage creates a blinding explosion.\",\n    type: ModifierType.Arc,\n    bonus: [{ stat: ArmorStat.StatSuper, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 3277705905,\n  },\n  [ModOrAbility.SparkOfFeedback]: {\n    id: ModOrAbility.SparkOfFeedback,\n    name: \"Spark of Feedback\",\n    description: \"Taking melee damage briefly increases your outgoing melee damage.\",\n    type: ModifierType.Arc,\n    bonus: [{ stat: ArmorStat.StatHealth, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 3277705907,\n  },\n  [ModOrAbility.SparkOfDischarge]: {\n    id: ModOrAbility.SparkOfDischarge,\n    name: \"Spark of Discharge\",\n    description: \"Arc weapon final blows have a chance to create an Ionic Trace.\",\n    type: ModifierType.Arc,\n    bonus: [{ stat: ArmorStat.StatMelee, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 1727069362,\n  },\n  [ModOrAbility.SparkOfFocus]: {\n    id: ModOrAbility.SparkOfFocus,\n    name: \"Spark of Focus\",\n    description: \"After sprinting for a short time, your class ability regeneration is increased.\",\n    type: ModifierType.Arc,\n    bonus: [{ stat: SpecialArmorStat.ClassAbilityRegenerationStat, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 1727069360,\n  },\n  [ModOrAbility.SparkOfVolts]: {\n    id: ModOrAbility.SparkOfVolts,\n    name: \"Spark of Volts\",\n    description: \"Finishers make you amplified.\",\n    type: ModifierType.Arc,\n    bonus: [{ stat: ArmorStat.StatClass, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 3277705904,\n  },\n  [ModOrAbility.SparkOfResistance]: {\n    id: ModOrAbility.SparkOfResistance,\n    name: \"Spark of Resistance\",\n    description: \"While surrounded by combatants, you are more resistant to incoming damage.\",\n    type: ModifierType.Arc,\n    bonus: [{ stat: ArmorStat.StatMelee, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 1727069366,\n  },\n  [ModOrAbility.SparkOfShock]: {\n    id: ModOrAbility.SparkOfShock,\n    name: \"Spark of Shock\",\n    description: \"Your Arc grenades jolt targets.\",\n    type: ModifierType.Arc,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 1727069364,\n  },\n  // endregion Arc\n\n  // region Strand\n  [ModOrAbility.ThreadOfFury]: {\n    id: ModOrAbility.ThreadOfFury,\n    name: \"Thread of Fury\",\n    description: \"Damaging targets with a Tangle grants melee energy.\",\n    type: ModifierType.Strand,\n    bonus: [{ stat: ArmorStat.StatMelee, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 4208512219,\n  },\n  [ModOrAbility.ThreadOfAscent]: {\n    id: ModOrAbility.ThreadOfAscent,\n    name: \"Thread of Ascent\",\n    description:\n      \"Activating your grenade ability reloads your equipped weapon and grants bonus airborne effectiveness and handling for a short duration.\",\n    type: ModifierType.Strand,\n    bonus: [{ stat: ArmorStat.StatWeapon, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 4208512216,\n  },\n  [ModOrAbility.ThreadOfFinality]: {\n    id: ModOrAbility.ThreadOfFinality,\n    name: \"Thread of Finality\",\n    description: \"Finisher final blows create Threadlings.\",\n    type: ModifierType.Strand,\n    bonus: [{ stat: ArmorStat.StatClass, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 4208512217,\n  },\n  [ModOrAbility.ThreadOfWarding]: {\n    id: ModOrAbility.ThreadOfWarding,\n    name: \"Thread of Warding\",\n    description: \"Picking up an Orb of Power grants Woven Mail.\",\n    type: ModifierType.Strand,\n    bonus: [{ stat: ArmorStat.StatHealth, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 4208512222,\n  },\n  [ModOrAbility.ThreadOfTransmutation]: {\n    id: ModOrAbility.ThreadOfTransmutation,\n    name: \"Thread of Transmutation\",\n    description: \"While you have Woven Mail, weapon final blows create a Tangle.\",\n    type: ModifierType.Strand,\n    bonus: [{ stat: ArmorStat.StatMelee, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 4208512221,\n  },\n  [ModOrAbility.ThreadOfEvolution]: {\n    id: ModOrAbility.ThreadOfEvolution,\n    name: \"Thread of Evolution\",\n    description: \"Threadlings travel farther and deal additional damage.\",\n    type: ModifierType.Strand,\n    bonus: [{ stat: ArmorStat.StatSuper, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 4208512211,\n  },\n  [ModOrAbility.ThreadOfBinding]: {\n    id: ModOrAbility.ThreadOfBinding,\n    name: \"Thread of Binding\",\n    description: \"Super final blows emit a suspending burst from the target.\",\n    type: ModifierType.Strand,\n    bonus: [{ stat: ArmorStat.StatHealth, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 3192552688,\n  },\n  [ModOrAbility.ThreadOfGeneration]: {\n    id: ModOrAbility.ThreadOfGeneration,\n    name: \"Thread of Generation\",\n    description: \"Dealing damage generates grenade energy.\",\n    type: ModifierType.Strand,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 3192552691,\n  },\n  [ModOrAbility.ThreadOfPropagation]: {\n    id: ModOrAbility.ThreadOfPropagation,\n    name: \"Thread of Propagation\",\n    description: \"Powered melee final blows grant your Strand weapons Unraveling Rounds.\",\n    type: ModifierType.Strand,\n    bonus: [{ stat: ArmorStat.StatMelee, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 4208512210,\n  },\n  // endregion Strand\n\n  // region Prismatic\n  [ModOrAbility.FacetOfAwakening]: {\n    id: ModOrAbility.FacetOfAwakening,\n    name: \"Facet of Awakening\",\n    description:\n      \"Rapid elemental final blows and Super final blows generate an elemental pickup of the matching damage type.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatHealth, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 124726505,\n  },\n  [ModOrAbility.FacetOfCourage]: {\n    id: ModOrAbility.FacetOfCourage,\n    name: \"Facet of Courage\",\n    description:\n      \"Your Light abilities deal increased damage to targets afflicted with Darkness debuffs.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2626922124,\n  },\n  [ModOrAbility.FacetOfDawn]: {\n    id: ModOrAbility.FacetOfDawn,\n    name: \"Facet of Dawn\",\n    description:\n      \"Powered melee hits against targets make you Radiant. Powered melee final blows make both you and nearby allies Radiant.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatMelee, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2626922126,\n  },\n  [ModOrAbility.FacetOfDefiance]: {\n    id: ModOrAbility.FacetOfDefiance,\n    name: \"Facet of Defiance\",\n    description:\n      \"Finishers create a detonation that either jolts, scorches, slows, severs, or makes targets volatile based on the damage type of your equipped Super.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatClass, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 74393640,\n  },\n  [ModOrAbility.FacetOfDevotion]: {\n    id: ModOrAbility.FacetOfDevotion,\n    name: \"Facet of Devotion\",\n    description:\n      \"Defeating targets afflicted with a Darkness debuff grants bonus Light Transcendence energy.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatMelee, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2626922125,\n  },\n  [ModOrAbility.FacetOfDominance]: {\n    id: ModOrAbility.FacetOfDominance,\n    name: \"Facet of Dominance\",\n    description: \"Your Void grenades weaken targets, and your Arc grenades jolt targets.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 124726504,\n  },\n  [ModOrAbility.FacetOfGrace]: {\n    id: ModOrAbility.FacetOfGrace,\n    name: \"Facet of Grace\",\n    description:\n      \"Defeating targets with Kinetic weapons grants you bonus Transcendence energy. Defeating targets with your Super grants you and nearby allies bonus Transcendence energy.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatHealth, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2626922121,\n  },\n  [ModOrAbility.FacetOfHonor]: {\n    id: ModOrAbility.FacetOfHonor,\n    name: \"Facet of Honor\",\n    description:\n      \"Collecting an elemental pickup or destroying a Tangle grants Transcendence energy of the same type.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatMelee, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 124726501,\n  },\n  [ModOrAbility.FacetOfJustice]: {\n    id: ModOrAbility.FacetOfJustice,\n    name: \"Facet of Justice\",\n    description: \"While Transcendent, your ability final blows explode.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatSuper, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2626922115,\n  },\n  [ModOrAbility.FacetOfProtection]: {\n    id: ModOrAbility.FacetOfProtection,\n    name: \"Facet of Protection\",\n    description: \"While surrounded by enemies, you are more resistant to incoming damage.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatMelee, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 2626922120,\n  },\n  [ModOrAbility.FacetOfPurpose]: {\n    id: ModOrAbility.FacetOfPurpose,\n    name: \"Facet of Purpose\",\n    description:\n      \"Picking up an Orb of Power grants either Amplified, Restoration, Frost Armor, Woven Mail, or Overshield, based on the damage type of your equipped super.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatClass, value: -10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 124726498,\n  },\n  [ModOrAbility.FacetOfRuin]: {\n    id: ModOrAbility.FacetOfRuin,\n    name: \"Facet of Ruin\",\n    description:\n      \"Increases the size and damage of the burst when you shatter a Stasis crystal or frozen target and increases the area of effect of Solar ignitions.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatWeapon, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 124726499,\n  },\n  [ModOrAbility.FacetOfSacrifice]: {\n    id: ModOrAbility.FacetOfSacrifice,\n    name: \"Facet of Sacrifice\",\n    description:\n      \"While you have a Light buff, ability final blows grant bonus Darkness Transcendence energy.\",\n    type: ModifierType.Prismatic,\n    bonus: [{ stat: ArmorStat.StatGrenade, value: 10 }],\n    cost: 1,\n    requiredArmorAffinity: DestinyEnergyType.Any,\n    hash: 124726502,\n  },\n  // endregion Prismatic\n};\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport const MAXIMUM_STAT_MOD_AMOUNT = 5;\nexport const MAXIMUM_MASTERWORK_LEVEL = 5;\n\nexport const FORCE_USE_NO_EXOTIC = -1;\nexport const FORCE_USE_ANY_EXOTIC = -2;\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport enum ArmorSlot {\n  ArmorSlotNone,\n  ArmorSlotHelmet,\n  ArmorSlotGauntlet,\n  ArmorSlotChest,\n  ArmorSlotLegs,\n  ArmorSlotClass,\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { EnumDictionary } from \"../types/EnumDictionary\";\nimport { DestinyClass } from \"bungie-api-ts/destiny2\";\nimport { ModifierType, Subclass } from \"./modifierType\";\n\nexport enum StatModifier {\n  NONE,\n  MINOR_WEAPON,\n  MAJOR_WEAPON,\n  ARTIFICE_WEAPON,\n  MINOR_HEALTH,\n  MAJOR_HEALTH,\n  ARTIFICE_HEALTH,\n  MINOR_CLASS,\n  MAJOR_CLASS,\n  ARTIFICE_CLASS,\n  MINOR_GRENADE,\n  MAJOR_GRENADE,\n  ARTIFICE_GRENADE,\n  MINOR_SUPER,\n  MAJOR_SUPER,\n  ARTIFICE_SUPER,\n  MINOR_MELEE,\n  MAJOR_MELEE,\n  ARTIFICE_MELEE,\n}\n\nexport enum ArmorStat {\n  StatWeapon,\n  StatHealth,\n  StatClass,\n  StatGrenade,\n  StatSuper,\n  StatMelee,\n}\n\nexport const ARMORSTAT_ORDER = [\n  ArmorStat.StatHealth,\n  ArmorStat.StatMelee,\n  ArmorStat.StatGrenade,\n  ArmorStat.StatSuper,\n  ArmorStat.StatClass,\n  ArmorStat.StatWeapon,\n];\n\n// Stat Enum, bonus, cost, mod hash\nexport const STAT_MOD_VALUES: EnumDictionary<StatModifier, [ArmorStat, number, number, number]> = {\n  [StatModifier.NONE]: [ArmorStat.StatMelee, 0, 0, 0],\n  [StatModifier.MINOR_WEAPON]: [ArmorStat.StatWeapon, 5, 1, 1703647492],\n  [StatModifier.MAJOR_WEAPON]: [ArmorStat.StatWeapon, 10, 3, 4183296050],\n  [StatModifier.ARTIFICE_WEAPON]: [ArmorStat.StatWeapon, 3, 0, 2322202118],\n  [StatModifier.MINOR_HEALTH]: [ArmorStat.StatHealth, 5, 1, 2532323436],\n  [StatModifier.MAJOR_HEALTH]: [ArmorStat.StatHealth, 10, 3, 1180408010],\n  [StatModifier.ARTIFICE_HEALTH]: [ArmorStat.StatHealth, 3, 0, 199176566],\n  [StatModifier.MINOR_CLASS]: [ArmorStat.StatClass, 5, 1, 1237786518],\n  [StatModifier.MAJOR_CLASS]: [ArmorStat.StatClass, 10, 3, 4204488676],\n  [StatModifier.ARTIFICE_CLASS]: [ArmorStat.StatClass, 3, 0, 539459624],\n  [StatModifier.MINOR_GRENADE]: [ArmorStat.StatGrenade, 5, 1, 4021790309],\n  [StatModifier.MAJOR_GRENADE]: [ArmorStat.StatGrenade, 10, 3, 1435557120],\n  [StatModifier.ARTIFICE_GRENADE]: [ArmorStat.StatGrenade, 3, 0, 617569843],\n  [StatModifier.MINOR_SUPER]: [ArmorStat.StatSuper, 5, 1, 350061697],\n  [StatModifier.MAJOR_SUPER]: [ArmorStat.StatSuper, 10, 3, 2724608735],\n  [StatModifier.ARTIFICE_SUPER]: [ArmorStat.StatSuper, 3, 0, 3160845295],\n  [StatModifier.MINOR_MELEE]: [ArmorStat.StatMelee, 5, 1, 2639422088],\n  [StatModifier.MAJOR_MELEE]: [ArmorStat.StatMelee, 10, 3, 4287799666],\n  [StatModifier.ARTIFICE_MELEE]: [ArmorStat.StatMelee, 3, 0, 2507624050],\n};\n\nexport const ArmorStatNames: EnumDictionary<ArmorStat, string> = {\n  [ArmorStat.StatWeapon]: \"Weapon\",\n  [ArmorStat.StatHealth]: \"Health\",\n  [ArmorStat.StatClass]: \"Class\",\n  [ArmorStat.StatGrenade]: \"Grenade\",\n  [ArmorStat.StatSuper]: \"Super\",\n  [ArmorStat.StatMelee]: \"Melee\",\n};\n\nexport const ArmorStatHashes: EnumDictionary<ArmorStat, number> = {\n  [ArmorStat.StatWeapon]: 2996146975,\n  [ArmorStat.StatHealth]: 392767087,\n  [ArmorStat.StatClass]: 1943323491,\n  [ArmorStat.StatGrenade]: 1735777505,\n  [ArmorStat.StatSuper]: 144602215,\n  [ArmorStat.StatMelee]: 4244567218,\n};\n\nexport const ArmorStatIconUrls: EnumDictionary<ArmorStat, string> = {\n  [ArmorStat.StatWeapon]:\n    \"https://www.bungie.net/common/destiny2_content/icons/bc69675acdae9e6b9a68a02fb4d62e07.png\",\n  [ArmorStat.StatHealth]:\n    \"https://www.bungie.net/common/destiny2_content/icons/717b8b218cc14325a54869bef21d2964.png\",\n  [ArmorStat.StatClass]:\n    \"https://www.bungie.net/common/destiny2_content/icons/7eb845acb5b3a4a9b7e0b2f05f5c43f1.png\",\n  [ArmorStat.StatGrenade]:\n    \"https://www.bungie.net/common/destiny2_content/icons/065cdaabef560e5808e821cefaeaa22c.png\",\n  [ArmorStat.StatSuper]:\n    \"https://www.bungie.net/common/destiny2_content/icons/585ae4ede9c3da96b34086fccccdc8cd.png\",\n  [ArmorStat.StatMelee]:\n    \"https://www.bungie.net/common/destiny2_content/icons/fa534aca76d7f2d7e7b4ba4df4271b42.png\",\n};\n\nexport enum SpecialArmorStat {\n  ClassAbilityRegenerationStat = 10,\n}\n\nexport enum ArmorPerkOrSlot {\n  None = -1,\n  Any,\n  SlotCrotasEnd = 2,\n  SlotRootOfNightmares,\n  SlotKingsFall,\n  SlotVowOfTheDisciple,\n  SlotVaultOfGlass,\n  SlotDeepStoneCrypt,\n  SlotGardenOfSalvation,\n  SlotLastWish,\n  SlotArtifice,\n  PerkIronBanner,\n  SlotNightmare,\n  // A special case just for guardian games class items.\n  GuardianGamesClassItem = 18,\n  PerkEchoesOfGlory = 20,\n  SlotSalvationsEdge,\n  SlotEidosApprentice,\n  PerkOverflowingCorruption,\n}\n\nexport const ArmorPerkOrSlotNames: EnumDictionary<ArmorPerkOrSlot, string> = {\n  [ArmorPerkOrSlot.None]: \"None\",\n  [ArmorPerkOrSlot.Any]: \"Any\",\n  [ArmorPerkOrSlot.SlotCrotasEnd]: \"Crota's End Modslot\",\n  [ArmorPerkOrSlot.SlotRootOfNightmares]: \"Root of Nightmares Modslot\",\n  [ArmorPerkOrSlot.SlotKingsFall]: \"King's Fall Modslot\",\n  [ArmorPerkOrSlot.SlotVowOfTheDisciple]: \"Vow of the Disciple Modslot\",\n  [ArmorPerkOrSlot.SlotVaultOfGlass]: \"Vault of Glass Modslot\",\n  [ArmorPerkOrSlot.SlotDeepStoneCrypt]: \"Deep Stone Crypt Modslot\",\n  [ArmorPerkOrSlot.SlotGardenOfSalvation]: \"Garden of Salvation Modslot\",\n  [ArmorPerkOrSlot.SlotLastWish]: \"Last Wish Modslot\",\n  [ArmorPerkOrSlot.SlotArtifice]: \"Artifice Modslot\",\n  [ArmorPerkOrSlot.PerkIronBanner]: \"Iron Banner Perk\",\n  [ArmorPerkOrSlot.SlotNightmare]: \"Nightmare Hunt Modslot\",\n  [ArmorPerkOrSlot.GuardianGamesClassItem]: \"Guardian Games\",\n  [ArmorPerkOrSlot.PerkEchoesOfGlory]: \"Echoes of Glory Perk\",\n  [ArmorPerkOrSlot.SlotSalvationsEdge]: \"Salvation's Edge Modslot\",\n  [ArmorPerkOrSlot.SlotEidosApprentice]: \"Eido's Apprentice Perk\",\n  [ArmorPerkOrSlot.PerkOverflowingCorruption]: \"Overflowing Corruption Perk\",\n};\n\n// To be used in the item icon component to display special icons for certain items\nexport const SpecialItemIconUrls: EnumDictionary<number, string> = {\n  [717667840]:\n    \"https://www.bungie.net/common/destiny2_content/icons/d89e12c918cb0c6b1087b073ad14d6c2.png\",\n  [4144354978]:\n    \"https://www.bungie.net/common/destiny2_content/icons/f2b6ec58e14244e4972705897667c246.png\",\n  [1728096240]:\n    \"https://www.bungie.net/common/destiny2_content/icons/0e515c7cf25a2f2350b788e6f5b7f8eb.png\",\n  [2447143568]:\n    \"https://www.bungie.net/common/destiny2_content/icons/b84b6ea72dd05de7123aa2ae87ba0d6a.png\",\n};\n\nexport const ArmorPerkOrSlotIcons: EnumDictionary<ArmorPerkOrSlot, string> = {\n  [ArmorPerkOrSlot.Any]: \"https://www.bungie.net/img/misc/missing_icon_d2.png\",\n  [ArmorPerkOrSlot.None]:\n    \"https://www.bungie.net//common/destiny2_content/icons/56761c8361e33a367c6fa94f397d8692.png\",\n  //[ArmorPerkOrSlot.None]: \"https://www.bungie.net/common/destiny2_content/icons/58afd7d17e7b58883b94fd5ba2e66b76.png\",\n  [ArmorPerkOrSlot.SlotCrotasEnd]:\n    \"https://www.bungie.net/common/destiny2_content/icons/d89e12c918cb0c6b1087b073ad14d6c2.png\",\n  [ArmorPerkOrSlot.SlotRootOfNightmares]:\n    \"https://www.bungie.net/common/destiny2_content/icons/f2b6ec58e14244e4972705897667c246.png\",\n  [ArmorPerkOrSlot.SlotKingsFall]:\n    \"https://www.bungie.net/common/destiny2_content/icons/0e515c7cf25a2f2350b788e6f5b7f8eb.png\",\n  [ArmorPerkOrSlot.SlotVowOfTheDisciple]:\n    \"https://www.bungie.net/common/destiny2_content/icons/b84b6ea72dd05de7123aa2ae87ba0d6a.png\",\n  [ArmorPerkOrSlot.SlotVaultOfGlass]:\n    \"https://www.bungie.net/common/destiny2_content/icons/7c9a2d95113de19c5acdbed57775abf4.png\",\n  [ArmorPerkOrSlot.SlotDeepStoneCrypt]:\n    \"https://www.bungie.net/common/destiny2_content/icons/d6452d010cfe72a51a9089ec68ab223c.png\",\n  [ArmorPerkOrSlot.SlotGardenOfSalvation]:\n    \"https://www.bungie.net/common/destiny2_content/icons/53d6e3505cd03d4026b3dbbd9ccc19b6.jpg\",\n  [ArmorPerkOrSlot.SlotLastWish]:\n    \"https://www.bungie.net/common/destiny2_content/icons/76f0c1520fa384ceb27bd2469225dd8a.png\",\n  [ArmorPerkOrSlot.SlotArtifice]:\n    \"https://www.bungie.net/common/destiny2_content/icons/46eec78bb7864641bbd7ba1fd4f9f248.png\",\n  [ArmorPerkOrSlot.PerkIronBanner]:\n    \"https://bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_fe57052d7cf971f7502daa75a2ca2437.png\",\n  [ArmorPerkOrSlot.SlotNightmare]:\n    \"https://www.bungie.net/common/destiny2_content/icons/53d6e3505cd03d4026b3dbbd9ccc19b6.jpg\",\n  [ArmorPerkOrSlot.GuardianGamesClassItem]:\n    \"https://www.bungie.net/common/destiny2_content/icons/DestinyEventCardDefinition_ce6c2cf855dce694bcc89803b6bc44b7.png\",\n  [ArmorPerkOrSlot.SlotSalvationsEdge]:\n    \"https://www.bungie.net/common/destiny2_content/icons/f4a1f99b49ecf412726d71ea9ee15540.png\",\n  [ArmorPerkOrSlot.PerkEchoesOfGlory]:\n    \"https://www.bungie.net/common/destiny2_content/icons/c67322c917e16f3b8a4cb962e3f11166.png\",\n  [ArmorPerkOrSlot.SlotEidosApprentice]:\n    \"https://www.bungie.net/common/destiny2_content/icons/e083d8a85c2c60825204d14b9e9263b7.png\",\n  [ArmorPerkOrSlot.PerkOverflowingCorruption]:\n    \"https://www.bungie.net/common/destiny2_content/icons/7a714dc1f8b669d8d5901c1543eb244b.png\",\n};\n\n// List of armorInventoryItem.sockets.socketEntries[n].singleInitialItemHash values for each type\n// GuardianGamesClassItem is excluded as these are checked by item hash\nexport const ArmorPerkSocketHashes: EnumDictionary<\n  Exclude<\n    ArmorPerkOrSlot,\n    ArmorPerkOrSlot.GuardianGamesClassItem | ArmorPerkOrSlot.Any | ArmorPerkOrSlot.None\n  >,\n  number\n> = {\n  [ArmorPerkOrSlot.SlotCrotasEnd]: 717667840,\n  [ArmorPerkOrSlot.SlotRootOfNightmares]: 4144354978,\n  [ArmorPerkOrSlot.SlotKingsFall]: 1728096240,\n  [ArmorPerkOrSlot.SlotVowOfTheDisciple]: 2447143568,\n  [ArmorPerkOrSlot.SlotVaultOfGlass]: 3738398030,\n  [ArmorPerkOrSlot.SlotDeepStoneCrypt]: 4055462131,\n  [ArmorPerkOrSlot.SlotGardenOfSalvation]: 706611068,\n  [ArmorPerkOrSlot.SlotLastWish]: 1679876242,\n  [ArmorPerkOrSlot.SlotArtifice]: 3727270518,\n  [ArmorPerkOrSlot.PerkIronBanner]: 2472875850,\n  [ArmorPerkOrSlot.SlotNightmare]: 1180997867,\n  [ArmorPerkOrSlot.SlotSalvationsEdge]: 4059283783,\n  [ArmorPerkOrSlot.PerkEchoesOfGlory]: 2352831367,\n  [ArmorPerkOrSlot.SlotEidosApprentice]: 273417606,\n  [ArmorPerkOrSlot.PerkOverflowingCorruption]: 1128948126,\n};\n\n// In the case that a perk has multiple possible hashes, we can use this to determine a mapping\nexport const MapAlternativeToArmorPerkOrSlot: EnumDictionary<number, ArmorPerkOrSlot> = {\n  [1760565003]: ArmorPerkOrSlot.PerkEchoesOfGlory,\n};\n\nexport const MapAlternativeSocketTypeToArmorPerkOrSlot: EnumDictionary<number, ArmorPerkOrSlot> = {\n  [1719555937]: ArmorPerkOrSlot.SlotArtifice,\n  [2770223926]: ArmorPerkOrSlot.SlotArtifice,\n  [2831858578]: ArmorPerkOrSlot.SlotArtifice,\n  [3136585661]: ArmorPerkOrSlot.SlotArtifice,\n  [3642670483]: ArmorPerkOrSlot.SlotArtifice,\n  [4096670123]: ArmorPerkOrSlot.SlotArtifice,\n};\n\nexport const ArmorPerkOrSlotDIMText: EnumDictionary<ArmorPerkOrSlot, string> = {\n  [ArmorPerkOrSlot.Any]: \"\",\n  [ArmorPerkOrSlot.None]: \"\",\n  [ArmorPerkOrSlot.SlotCrotasEnd]: \"modslot:crotasend\",\n  [ArmorPerkOrSlot.SlotRootOfNightmares]: \"modslot:rootofnightmares\",\n  [ArmorPerkOrSlot.SlotKingsFall]: \"modslot:kingsfall\",\n  [ArmorPerkOrSlot.SlotVowOfTheDisciple]: \"modslot:vowofthedisciple\",\n  [ArmorPerkOrSlot.SlotVaultOfGlass]: \"modslot:vaultofglass\",\n  [ArmorPerkOrSlot.SlotDeepStoneCrypt]: \"modslot:deepstonecrypt\",\n  [ArmorPerkOrSlot.SlotGardenOfSalvation]: \"modslot:gardenofsalvation\",\n  [ArmorPerkOrSlot.SlotLastWish]: \"modslot:lastwish\",\n  [ArmorPerkOrSlot.SlotArtifice]: 'perkname:\"artifice armor\"',\n  [ArmorPerkOrSlot.PerkIronBanner]: 'perkname:\"iron lord\\'s pride\"',\n  [ArmorPerkOrSlot.SlotNightmare]: \"modslot:nightmare\",\n  [ArmorPerkOrSlot.GuardianGamesClassItem]: \"(hash:537041732 or hash:366019830 or hash:1013401891)\",\n  [ArmorPerkOrSlot.PerkEchoesOfGlory]: 'exactperk:\"echoes of glory\"',\n  [ArmorPerkOrSlot.SlotSalvationsEdge]: \"(source:salvationsedge is:armor)\",\n  [ArmorPerkOrSlot.SlotEidosApprentice]: 'perkname:\"eido\\'s apprentice\"',\n  [ArmorPerkOrSlot.PerkOverflowingCorruption]: 'perkname:\"overflowing corruption\"',\n};\n\nexport const SubclassHashes: EnumDictionary<\n  Exclude<DestinyClass, DestinyClass.Unknown>,\n  EnumDictionary<Subclass, number>\n> = {\n  [DestinyClass.Hunter]: {\n    [ModifierType.Stasis]: 873720784,\n    [ModifierType.Void]: 2453351420,\n    [ModifierType.Solar]: 2240888816,\n    [ModifierType.Arc]: 2328211300,\n    [ModifierType.Strand]: 3785442599,\n    [ModifierType.Prismatic]: 4282591831,\n  },\n  [DestinyClass.Titan]: {\n    [ModifierType.Stasis]: 613647804,\n    [ModifierType.Void]: 2842471112,\n    [ModifierType.Solar]: 2550323932,\n    [ModifierType.Arc]: 2932390016,\n    [ModifierType.Strand]: 242419885,\n    [ModifierType.Prismatic]: 1616346845,\n  },\n  [DestinyClass.Warlock]: {\n    [ModifierType.Stasis]: 3291545503,\n    [ModifierType.Void]: 2849050827,\n    [ModifierType.Solar]: 3941205951,\n    [ModifierType.Arc]: 3168997075,\n    [ModifierType.Strand]: 4204413574,\n    [ModifierType.Prismatic]: 3893112950,\n  },\n};\n\n// Mapping function to convert exotic perk hashes to ArmorPerkOrSlot values\n// This will be needed for proper exotic class item filtering\nexport function mapExoticPerkHashToArmorPerk(perkHash: number): ArmorPerkOrSlot {\n  // TODO: Add actual mappings based on the exotic perk hash values\n  // This is a placeholder that needs to be populated with real data\n  const exoticPerkHashMap: Record<number, ArmorPerkOrSlot> = {\n    // Example mappings - these need to be filled with actual game data\n    // 123456789: ArmorPerkOrSlot.PerkOverflowingCorruption,\n    // 987654321: ArmorPerkOrSlot.PerkBane,\n    // Add more mappings as needed\n  };\n\n  return exoticPerkHashMap[perkHash] || ArmorPerkOrSlot.None;\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport enum ModOptimizationStrategy {\n  None = 0,\n  ReduceUsedModSockets,\n  ReduceUsedModPoints,\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport enum ModOrAbility {\n  WhisperOfDurance = 1000,\n  WhisperOfChains,\n  WhisperOfConduction,\n  // WhisperOfShards,\n\n  // WhisperOfHedrons = 1100,\n  WhisperOfBonds = 1101,\n  WhisperOfHunger,\n  WhisperOfFractures,\n  WhisperOfTorment,\n\n  // VOID\n  EchoOfExpulsion = 1200,\n  EchoOfProvision,\n  EchoOfPersistence,\n  EchoOfLeeching,\n  EchoOfDomineering,\n  EchoOfDilation,\n  EchoOfUndermining,\n\n  EchoOfInstability, //+10 str\n  EchoOfHarvest,\n  EchoOfObscurity, //+10rec\n  EchoOfStarvation,\n  EchoOfVigilance,\n\n  // SOLAR\n  EmberOfBenelovence = 1300,\n  EmberOfBeams,\n  EmberOfEmpyrean,\n  EmberOfCombustion,\n  EmberOfChar,\n  EmberOfTempering,\n  EmberOfEruption,\n  EmberOfWonder,\n  EmberOfSearing,\n  EmberOfTorches,\n  EmberOfMercy,\n  //EchoOfExchange ,\n  //EchoOfRemnants,\n  //EchoOfReprisal,\n\n  SparkOfBrilliance = 1400,\n  SparkOfFeedback,\n  SparkOfDischarge,\n  SparkOfFocus,\n  SparkOfVolts,\n  SparkOfResistance,\n  SparkOfShock,\n\n  // Artifact mods,\n\n  // Strand\n  ThreadOfFury = 1600,\n  ThreadOfAscent,\n  ThreadOfFinality,\n  ThreadOfWarding,\n  ThreadOfTransmutation,\n  ThreadOfEvolution,\n  ThreadOfBinding,\n  ThreadOfGeneration,\n  ThreadOfPropagation,\n\n  // These names are mapped to the fragment hash\n  WhisperOfImpetus = 537774543,\n\n  // Prismatic\n  FacetOfAwakening = 1700,\n  FacetOfCourage,\n  FacetOfDawn,\n  FacetOfDefiance,\n  FacetOfDevotion,\n  FacetOfDominance,\n  FacetOfGrace,\n  FacetOfHonor,\n  FacetOfJustice,\n  FacetOfProtection,\n  FacetOfPurpose,\n  FacetOfRuin,\n  FacetOfSacrifice,\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { EnumDictionary } from \"../types/EnumDictionary\";\n\nexport enum ModifierType {\n  CombatStyleMod,\n  Stasis,\n  Void,\n  Solar,\n  Arc,\n  Strand,\n  Prismatic,\n}\n\nexport type Subclass = Exclude<ModifierType, ModifierType.CombatStyleMod>;\n\nexport const SubclassNames: EnumDictionary<Subclass, string> = {\n  [ModifierType.Arc]: \"Arc\",\n  [ModifierType.Solar]: \"Solar\",\n  [ModifierType.Void]: \"Void\",\n  [ModifierType.Stasis]: \"Stasis\",\n  [ModifierType.Strand]: \"Strand\",\n  [ModifierType.Prismatic]: \"Prismatic\",\n};\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { ArmorSlot } from \"../enum/armor-slot\";\nimport { ArmorStat } from \"../enum/armor-stat\";\nimport { ArmorSystem, IDisplayManifestArmor, IManifestArmor } from \"./IManifestArmor\";\n\nexport interface ITimestampedEntry {\n  created_at: number;\n  updated_at: number;\n}\n\nexport enum InventoryArmorSource {\n  Inventory = 0,\n  Collections = 1,\n  Vendor = 2,\n}\n\nexport interface IDestinyArmor {\n  id: number;\n  hash: number;\n  slot: ArmorSlot;\n\n  masterworkLevel: number; // 0-5; 5 = full masterwork\n  archetypeStats: Array<ArmorStat>;\n  tier: number; // 1-5, 0 = exotic\n  gearSetHash: number | null;\n\n  mobility: number;\n  resilience: number;\n  recovery: number;\n  discipline: number;\n  intellect: number;\n  strength: number;\n\n  source: InventoryArmorSource;\n  armorSystem: ArmorSystem;\n}\n\nexport interface IDisplayInventoryArmor extends IDisplayManifestArmor, IDestinyArmor {\n  itemInstanceId: string;\n  energyLevel: number;\n}\n\nexport interface IInventoryArmor\n  extends IDisplayInventoryArmor,\n    IManifestArmor,\n    IDestinyArmor,\n    ITimestampedEntry {\n  // Note: this will be empty for vendor items\n  statPlugHashes?: (number | undefined)[];\n  // exoticPerkHash is now inherited as number[] from IManifestArmor\n}\n\nexport function createArmorItem(\n  manifestItem: IManifestArmor,\n  itemInstanceId: string,\n  source: InventoryArmorSource\n): IInventoryArmor {\n  if (!manifestItem) throw new Error(\"Missing manifest item\");\n\n  const item: IInventoryArmor = Object.assign(\n    {\n      id: -1,\n      tier: 1,\n      itemInstanceId,\n      masterworked: false,\n      masterworkLevel: 0,\n      archetypeStats: [],\n      energyLevel: 0,\n      mobility: 0,\n      resilience: 0,\n      recovery: 0,\n      discipline: 0,\n      intellect: 0,\n      strength: 0,\n      source,\n      created_at: Date.now(),\n      updated_at: Date.now(),\n    },\n    manifestItem\n  );\n  (item as any).id = undefined;\n\n  // HALLOWEEN MASKS\n  if (\n    manifestItem.hash == 2545426109 ||\n    manifestItem.hash == 199733460 ||\n    manifestItem.hash == 3224066584\n  ) {\n    item.slot = ArmorSlot.ArmorSlotHelmet;\n  }\n\n  // exoticPerkHash is now an array from manifestArmor\n  // For most armor pieces (non-class items), only the first perk matters\n  // For exotic class items, all perks in the array are relevant\n  if (manifestItem.exoticPerkHash) {\n    item.exoticPerkHash = Array.isArray(manifestItem.exoticPerkHash)\n      ? manifestItem.exoticPerkHash\n      : [manifestItem.exoticPerkHash];\n  }\n\n  return item;\n}\n\n// This will mutate the incoming armor item to add the relevant stats\n// plugHashes is received as a simple array of hashes,\n// as the data is in a different shape for instances vs manifest items\nexport function applyInvestmentStats(\n  r: IInventoryArmor,\n  investmentStats: { [id: number]: number }\n) {\n  r.mobility = investmentStats[2996146975];\n  r.resilience = investmentStats[392767087];\n  r.recovery = investmentStats[1943323491];\n  r.discipline = investmentStats[1735777505];\n  r.intellect = investmentStats[144602215];\n  r.strength = investmentStats[4244567218];\n}\n\nexport function getInvestmentStats(r: IInventoryArmor): { [id: number]: number } {\n  return {\n    2996146975: r.mobility,\n    392767087: r.resilience,\n    1943323491: r.recovery,\n    1735777505: r.discipline,\n    144602215: r.intellect,\n    4244567218: r.strength,\n  };\n}\n\n// Returns true if the items are effectively equal in stats\nexport function isEqualItem(a: IDestinyArmor, b: IDestinyArmor): boolean {\n  return (\n    a.slot === b.slot &&\n    a.hash === b.hash &&\n    a.mobility === b.mobility &&\n    a.resilience === b.resilience &&\n    a.recovery === b.recovery &&\n    a.discipline === b.discipline &&\n    a.intellect === b.intellect &&\n    a.strength === b.strength\n  );\n}\n\nexport function totalStats(a: IDestinyArmor): number {\n  return a.mobility + a.resilience + a.recovery + a.discipline + a.intellect + a.strength;\n}\n\n// For any code that displays exotic perks, use this pattern:\n// For regular exotics (non-class items): item.exoticPerkHash[0]\n// For exotic class items: item.exoticPerkHash (all perks)\n\n// Example usage in tooltips or display components:\nexport function getExoticPerkForDisplay(item: IInventoryArmor): number | null {\n  if (!item.isExotic || !item.exoticPerkHash || item.exoticPerkHash.length === 0) {\n    return null;\n  }\n\n  // For class items, you might want to handle multiple perks differently\n  if (item.slot === ArmorSlot.ArmorSlotClass) {\n    // Handle multiple perks for class items\n    return item.exoticPerkHash[0]; // or return the array\n  }\n\n  // For other exotic armor pieces, use the first (and typically only) perk\n  return item.exoticPerkHash[0];\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {\n  DestinyClass,\n  DestinyItemInvestmentStatDefinition,\n  DestinyItemSocketEntryDefinition,\n  TierType,\n} from \"bungie-api-ts/destiny2/interfaces\";\nimport { ArmorSlot } from \"../enum/armor-slot\";\nimport { ArmorPerkOrSlot } from \"../enum/armor-stat\";\n\nexport enum ArmorSystem {\n  Armor1 = 1, // Armor 1.0\n  Armor2 = 2, // Armor 2.0\n  Armor3 = 3, // Armor 3.0\n}\n\nexport interface IDisplayManifestArmor {\n  hash: number;\n  name: string;\n  icon: string;\n  description: string;\n  slot: ArmorSlot;\n  clazz: DestinyClass;\n  isExotic: 0 | 1;\n  rarity: TierType;\n  armorSystem: ArmorSystem;\n  isFeatured: boolean;\n  gearSetHash: number | null;\n}\nexport interface IManifestArmor extends IDisplayManifestArmor {\n  watermarkIcon: string;\n  perk: ArmorPerkOrSlot;\n  exoticPerkHash: number[];\n  isSunset: boolean;\n  rawData?: string;\n  itemType: number;\n  itemSubType: number;\n  investmentStats: DestinyItemInvestmentStatDefinition[];\n  socketEntries: DestinyItemSocketEntryDefinition[];\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// Dicts: [artifice, minor, major, total]\n\nexport const precalculatedZeroWasteModCombinations: {\n  [key: number]: [number, number, number, number][];\n} = {\n  1: [\n    [2, 1, 0, 11],\n    [2, 3, 0, 21],\n    [2, 1, 1, 21],\n    [2, 1, 2, 31],\n  ],\n  2: [\n    [4, 0, 0, 12],\n    [4, 2, 0, 22],\n    [4, 0, 1, 22],\n    [4, 4, 0, 32],\n    [4, 0, 2, 32],\n  ],\n  3: [\n    [1, 0, 0, 3],\n    [1, 2, 0, 13],\n    [1, 0, 1, 13],\n    [1, 4, 0, 23],\n    [1, 2, 1, 23],\n    [1, 0, 2, 23],\n    [1, 2, 2, 33],\n  ],\n  4: [\n    [3, 1, 0, 14],\n    [3, 3, 0, 24],\n    [3, 1, 1, 24],\n    [3, 1, 2, 34],\n  ],\n  5: [\n    [0, 1, 0, 5],\n    [5, 0, 0, 15],\n    [0, 3, 0, 15],\n    [0, 1, 1, 15],\n    [5, 2, 0, 25],\n    [5, 0, 1, 25],\n    [0, 3, 1, 25],\n    [0, 1, 2, 25],\n    [5, 4, 0, 35],\n    [5, 0, 2, 35],\n    [0, 3, 2, 35],\n  ],\n  6: [\n    [2, 0, 0, 6],\n    [2, 2, 0, 16],\n    [2, 0, 1, 16],\n    [2, 4, 0, 26],\n    [2, 2, 1, 26],\n    [2, 0, 2, 26],\n    [2, 2, 2, 36],\n    [2, 0, 3, 36],\n    [2, 2, 3, 46],\n  ],\n  7: [\n    [4, 1, 0, 17],\n    [4, 3, 0, 27],\n    [4, 1, 1, 27],\n    [4, 5, 0, 37],\n    [4, 1, 2, 37],\n    [4, 1, 3, 47],\n  ],\n  8: [\n    [1, 1, 0, 8],\n    [1, 3, 0, 18],\n    [1, 1, 1, 18],\n    [1, 5, 0, 28],\n    [1, 3, 1, 28],\n    [1, 1, 2, 28],\n    [1, 3, 2, 38],\n    [1, 1, 3, 38],\n  ],\n  9: [\n    [3, 0, 0, 9],\n    [3, 2, 0, 19],\n    [3, 0, 1, 19],\n    [3, 4, 0, 29],\n    [3, 2, 1, 29],\n    [3, 0, 2, 29],\n    [3, 2, 2, 39],\n    [3, 0, 3, 39],\n    [3, 2, 3, 49],\n  ],\n  10: [\n    [0, 2, 0, 10],\n    [0, 0, 1, 10],\n    [5, 1, 0, 20],\n    [0, 4, 0, 20],\n    [0, 2, 1, 20],\n    [0, 0, 2, 20],\n    [5, 3, 0, 30],\n    [5, 1, 1, 30],\n    [0, 4, 1, 30],\n    [0, 2, 2, 30],\n    [0, 0, 3, 30],\n    [5, 5, 0, 40],\n    [5, 1, 2, 40],\n    [0, 2, 3, 40],\n    [5, 1, 3, 50],\n  ],\n  11: [\n    [2, 1, 0, 11],\n    [2, 3, 0, 21],\n    [2, 1, 1, 21],\n    [2, 5, 0, 31],\n    [2, 3, 1, 31],\n    [2, 1, 2, 31],\n    [2, 3, 2, 41],\n    [2, 1, 3, 41],\n  ],\n  12: [\n    [4, 0, 0, 12],\n    [4, 2, 0, 22],\n    [4, 0, 1, 22],\n    [4, 4, 0, 32],\n    [4, 2, 1, 32],\n    [4, 0, 2, 32],\n    [4, 2, 2, 42],\n    [4, 0, 3, 42],\n    [4, 2, 3, 52],\n  ],\n  13: [\n    [1, 2, 0, 13],\n    [1, 0, 1, 13],\n    [1, 4, 0, 23],\n    [1, 2, 1, 23],\n    [1, 0, 2, 23],\n    [1, 4, 1, 33],\n    [1, 2, 2, 33],\n    [1, 0, 3, 33],\n    [1, 2, 3, 43],\n  ],\n  14: [\n    [3, 1, 0, 14],\n    [3, 3, 0, 24],\n    [3, 1, 1, 24],\n    [3, 5, 0, 34],\n    [3, 3, 1, 34],\n    [3, 1, 2, 34],\n    [3, 3, 2, 44],\n    [3, 1, 3, 44],\n  ],\n  15: [\n    [5, 0, 0, 15],\n    [0, 3, 0, 15],\n    [0, 1, 1, 15],\n    [5, 2, 0, 25],\n    [0, 5, 0, 25],\n    [5, 0, 1, 25],\n    [0, 3, 1, 25],\n    [0, 1, 2, 25],\n    [5, 4, 0, 35],\n    [5, 2, 1, 35],\n    [5, 0, 2, 35],\n    [0, 3, 2, 35],\n    [0, 1, 3, 35],\n    [5, 2, 2, 45],\n    [5, 0, 3, 45],\n    [5, 2, 3, 55],\n  ],\n  16: [\n    [2, 2, 0, 16],\n    [2, 0, 1, 16],\n    [2, 4, 0, 26],\n    [2, 2, 1, 26],\n    [2, 0, 2, 26],\n    [2, 4, 1, 36],\n    [2, 2, 2, 36],\n    [2, 0, 3, 36],\n    [2, 2, 3, 46],\n    [2, 0, 4, 46],\n  ],\n  17: [\n    [4, 1, 0, 17],\n    [4, 3, 0, 27],\n    [4, 1, 1, 27],\n    [4, 5, 0, 37],\n    [4, 3, 1, 37],\n    [4, 1, 2, 37],\n    [4, 3, 2, 47],\n    [4, 1, 3, 47],\n    [4, 1, 4, 57],\n  ],\n  18: [\n    [1, 3, 0, 18],\n    [1, 1, 1, 18],\n    [1, 5, 0, 28],\n    [1, 3, 1, 28],\n    [1, 1, 2, 28],\n    [1, 3, 2, 38],\n    [1, 1, 3, 38],\n    [1, 1, 4, 48],\n  ],\n  19: [\n    [3, 2, 0, 19],\n    [3, 0, 1, 19],\n    [3, 4, 0, 29],\n    [3, 2, 1, 29],\n    [3, 0, 2, 29],\n    [3, 4, 1, 39],\n    [3, 2, 2, 39],\n    [3, 0, 3, 39],\n    [3, 2, 3, 49],\n    [3, 0, 4, 49],\n  ],\n  20: [\n    [5, 1, 0, 20],\n    [0, 4, 0, 20],\n    [0, 2, 1, 20],\n    [0, 0, 2, 20],\n    [5, 3, 0, 30],\n    [5, 1, 1, 30],\n    [0, 4, 1, 30],\n    [0, 2, 2, 30],\n    [0, 0, 3, 30],\n    [5, 5, 0, 40],\n    [5, 3, 1, 40],\n    [5, 1, 2, 40],\n    [0, 2, 3, 40],\n    [0, 0, 4, 40],\n    [5, 3, 2, 50],\n    [5, 1, 3, 50],\n    [5, 1, 4, 60],\n  ],\n  21: [\n    [2, 3, 0, 21],\n    [2, 1, 1, 21],\n    [2, 5, 0, 31],\n    [2, 3, 1, 31],\n    [2, 1, 2, 31],\n    [2, 3, 2, 41],\n    [2, 1, 3, 41],\n    [2, 1, 4, 51],\n  ],\n  22: [\n    [4, 2, 0, 22],\n    [4, 0, 1, 22],\n    [4, 4, 0, 32],\n    [4, 2, 1, 32],\n    [4, 0, 2, 32],\n    [4, 4, 1, 42],\n    [4, 2, 2, 42],\n    [4, 0, 3, 42],\n    [4, 2, 3, 52],\n    [4, 0, 4, 52],\n  ],\n  23: [\n    [1, 4, 0, 23],\n    [1, 2, 1, 23],\n    [1, 0, 2, 23],\n    [1, 4, 1, 33],\n    [1, 2, 2, 33],\n    [1, 0, 3, 33],\n    [1, 2, 3, 43],\n    [1, 0, 4, 43],\n  ],\n  24: [\n    [3, 3, 0, 24],\n    [3, 1, 1, 24],\n    [3, 5, 0, 34],\n    [3, 3, 1, 34],\n    [3, 1, 2, 34],\n    [3, 3, 2, 44],\n    [3, 1, 3, 44],\n    [3, 1, 4, 54],\n  ],\n  25: [\n    [5, 2, 0, 25],\n    [0, 5, 0, 25],\n    [5, 0, 1, 25],\n    [0, 3, 1, 25],\n    [0, 1, 2, 25],\n    [5, 4, 0, 35],\n    [5, 2, 1, 35],\n    [5, 0, 2, 35],\n    [0, 3, 2, 35],\n    [0, 1, 3, 35],\n    [5, 4, 1, 45],\n    [5, 2, 2, 45],\n    [5, 0, 3, 45],\n    [0, 1, 4, 45],\n    [5, 2, 3, 55],\n    [5, 0, 4, 55],\n  ],\n  26: [\n    [2, 4, 0, 26],\n    [2, 2, 1, 26],\n    [2, 0, 2, 26],\n    [2, 4, 1, 36],\n    [2, 2, 2, 36],\n    [2, 0, 3, 36],\n    [2, 2, 3, 46],\n    [2, 0, 4, 46],\n    [2, 0, 5, 56],\n  ],\n  27: [\n    [4, 3, 0, 27],\n    [4, 1, 1, 27],\n    [4, 5, 0, 37],\n    [4, 3, 1, 37],\n    [4, 1, 2, 37],\n    [4, 3, 2, 47],\n    [4, 1, 3, 47],\n    [4, 1, 4, 57],\n  ],\n  28: [\n    [1, 5, 0, 28],\n    [1, 3, 1, 28],\n    [1, 1, 2, 28],\n    [1, 3, 2, 38],\n    [1, 1, 3, 38],\n    [1, 1, 4, 48],\n  ],\n  29: [\n    [3, 4, 0, 29],\n    [3, 2, 1, 29],\n    [3, 0, 2, 29],\n    [3, 4, 1, 39],\n    [3, 2, 2, 39],\n    [3, 0, 3, 39],\n    [3, 2, 3, 49],\n    [3, 0, 4, 49],\n    [3, 0, 5, 59],\n  ],\n  30: [\n    [5, 3, 0, 30],\n    [5, 1, 1, 30],\n    [0, 4, 1, 30],\n    [0, 2, 2, 30],\n    [0, 0, 3, 30],\n    [5, 5, 0, 40],\n    [5, 3, 1, 40],\n    [5, 1, 2, 40],\n    [0, 2, 3, 40],\n    [0, 0, 4, 40],\n    [5, 3, 2, 50],\n    [5, 1, 3, 50],\n    [0, 0, 5, 50],\n    [5, 1, 4, 60],\n  ],\n  31: [\n    [2, 5, 0, 31],\n    [2, 3, 1, 31],\n    [2, 1, 2, 31],\n    [2, 3, 2, 41],\n    [2, 1, 3, 41],\n    [2, 1, 4, 51],\n  ],\n  32: [\n    [4, 4, 0, 32],\n    [4, 2, 1, 32],\n    [4, 0, 2, 32],\n    [4, 4, 1, 42],\n    [4, 2, 2, 42],\n    [4, 0, 3, 42],\n    [4, 2, 3, 52],\n    [4, 0, 4, 52],\n    [4, 0, 5, 62],\n  ],\n  33: [\n    [1, 4, 1, 33],\n    [1, 2, 2, 33],\n    [1, 0, 3, 33],\n    [1, 2, 3, 43],\n    [1, 0, 4, 43],\n    [1, 0, 5, 53],\n  ],\n  34: [\n    [3, 5, 0, 34],\n    [3, 3, 1, 34],\n    [3, 1, 2, 34],\n    [3, 3, 2, 44],\n    [3, 1, 3, 44],\n    [3, 1, 4, 54],\n  ],\n  35: [\n    [5, 4, 0, 35],\n    [5, 2, 1, 35],\n    [5, 0, 2, 35],\n    [0, 3, 2, 35],\n    [0, 1, 3, 35],\n    [5, 4, 1, 45],\n    [5, 2, 2, 45],\n    [5, 0, 3, 45],\n    [0, 1, 4, 45],\n    [5, 2, 3, 55],\n    [5, 0, 4, 55],\n    [5, 0, 5, 65],\n  ],\n  36: [\n    [2, 4, 1, 36],\n    [2, 2, 2, 36],\n    [2, 0, 3, 36],\n    [2, 2, 3, 46],\n    [2, 0, 4, 46],\n    [2, 0, 5, 56],\n  ],\n  37: [\n    [4, 5, 0, 37],\n    [4, 3, 1, 37],\n    [4, 1, 2, 37],\n    [4, 3, 2, 47],\n    [4, 1, 3, 47],\n    [4, 1, 4, 57],\n  ],\n  38: [\n    [1, 3, 2, 38],\n    [1, 1, 3, 38],\n    [1, 1, 4, 48],\n  ],\n  39: [\n    [3, 4, 1, 39],\n    [3, 2, 2, 39],\n    [3, 0, 3, 39],\n    [3, 2, 3, 49],\n    [3, 0, 4, 49],\n    [3, 0, 5, 59],\n  ],\n  40: [\n    [5, 5, 0, 40],\n    [5, 3, 1, 40],\n    [5, 1, 2, 40],\n    [0, 2, 3, 40],\n    [0, 0, 4, 40],\n    [5, 3, 2, 50],\n    [5, 1, 3, 50],\n    [0, 0, 5, 50],\n    [5, 1, 4, 60],\n  ],\n  41: [\n    [2, 3, 2, 41],\n    [2, 1, 3, 41],\n    [2, 1, 4, 51],\n  ],\n  42: [\n    [4, 4, 1, 42],\n    [4, 2, 2, 42],\n    [4, 0, 3, 42],\n    [4, 2, 3, 52],\n    [4, 0, 4, 52],\n    [4, 0, 5, 62],\n  ],\n  43: [\n    [1, 2, 3, 43],\n    [1, 0, 4, 43],\n    [1, 0, 5, 53],\n  ],\n  44: [\n    [3, 3, 2, 44],\n    [3, 1, 3, 44],\n    [3, 1, 4, 54],\n  ],\n  45: [\n    [5, 4, 1, 45],\n    [5, 2, 2, 45],\n    [5, 0, 3, 45],\n    [0, 1, 4, 45],\n    [5, 2, 3, 55],\n    [5, 0, 4, 55],\n    [5, 0, 5, 65],\n  ],\n  46: [\n    [2, 2, 3, 46],\n    [2, 0, 4, 46],\n    [2, 0, 5, 56],\n  ],\n  47: [\n    [4, 3, 2, 47],\n    [4, 1, 3, 47],\n    [4, 1, 4, 57],\n  ],\n  48: [[1, 1, 4, 48]],\n  49: [\n    [3, 2, 3, 49],\n    [3, 0, 4, 49],\n    [3, 0, 5, 59],\n  ],\n  50: [\n    [5, 3, 2, 50],\n    [5, 1, 3, 50],\n    [0, 0, 5, 50],\n    [5, 1, 4, 60],\n  ],\n  51: [[2, 1, 4, 51]],\n  52: [\n    [4, 2, 3, 52],\n    [4, 0, 4, 52],\n    [4, 0, 5, 62],\n  ],\n  53: [[1, 0, 5, 53]],\n  54: [[3, 1, 4, 54]],\n  55: [\n    [5, 2, 3, 55],\n    [5, 0, 4, 55],\n    [5, 0, 5, 65],\n  ],\n  56: [[2, 0, 5, 56]],\n  57: [[4, 1, 4, 57]],\n  58: [],\n  59: [[3, 0, 5, 59]],\n  60: [[5, 1, 4, 60]],\n  61: [],\n  62: [[4, 0, 5, 62]],\n  63: [],\n  64: [],\n  65: [[5, 0, 5, 65]],\n};\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// Dicts: [artifice, minor, major, total]\n\nexport const precalculatedModCombinations: { [key: number]: [number, number, number, number][] } = {\n  1: [\n    [1, 0, 0, 3],\n    [0, 1, 0, 5],\n    [0, 0, 1, 10],\n  ],\n  2: [\n    [1, 0, 0, 3],\n    [0, 1, 0, 5],\n    [0, 0, 1, 10],\n  ],\n  3: [\n    [1, 0, 0, 3],\n    [0, 1, 0, 5],\n    [0, 0, 1, 10],\n  ],\n  4: [\n    [0, 1, 0, 5],\n    [2, 0, 0, 6],\n    [0, 0, 1, 10],\n  ],\n  5: [\n    [0, 1, 0, 5],\n    [2, 0, 0, 6],\n    [0, 0, 1, 10],\n  ],\n  6: [\n    [2, 0, 0, 6],\n    [1, 1, 0, 8],\n    [0, 2, 0, 10],\n    [0, 0, 1, 10],\n  ],\n  7: [\n    [1, 1, 0, 8],\n    [3, 0, 0, 9],\n    [0, 2, 0, 10],\n    [0, 0, 1, 10],\n  ],\n  8: [\n    [1, 1, 0, 8],\n    [3, 0, 0, 9],\n    [0, 2, 0, 10],\n    [0, 0, 1, 10],\n  ],\n  9: [\n    [3, 0, 0, 9],\n    [0, 2, 0, 10],\n    [0, 0, 1, 10],\n    [2, 1, 0, 11],\n  ],\n  10: [\n    [0, 2, 0, 10],\n    [0, 0, 1, 10],\n    [2, 1, 0, 11],\n    [4, 0, 0, 12],\n  ],\n  11: [\n    [2, 1, 0, 11],\n    [4, 0, 0, 12],\n    [1, 2, 0, 13],\n    [1, 0, 1, 13],\n    [0, 3, 0, 15],\n    [0, 1, 1, 15],\n    [0, 0, 2, 20],\n  ],\n  12: [\n    [4, 0, 0, 12],\n    [1, 2, 0, 13],\n    [1, 0, 1, 13],\n    [3, 1, 0, 14],\n    [0, 3, 0, 15],\n    [0, 1, 1, 15],\n    [0, 0, 2, 20],\n  ],\n  13: [\n    [1, 2, 0, 13],\n    [1, 0, 1, 13],\n    [3, 1, 0, 14],\n    [5, 0, 0, 15],\n    [0, 3, 0, 15],\n    [0, 1, 1, 15],\n    [0, 0, 2, 20],\n  ],\n  14: [\n    [3, 1, 0, 14],\n    [5, 0, 0, 15],\n    [0, 3, 0, 15],\n    [0, 1, 1, 15],\n    [2, 2, 0, 16],\n    [2, 0, 1, 16],\n    [0, 0, 2, 20],\n  ],\n  15: [\n    [5, 0, 0, 15],\n    [0, 3, 0, 15],\n    [0, 1, 1, 15],\n    [2, 2, 0, 16],\n    [2, 0, 1, 16],\n    [4, 1, 0, 17],\n    [0, 0, 2, 20],\n  ],\n  16: [\n    [2, 2, 0, 16],\n    [2, 0, 1, 16],\n    [4, 1, 0, 17],\n    [1, 3, 0, 18],\n    [1, 1, 1, 18],\n    [0, 4, 0, 20],\n    [0, 2, 1, 20],\n    [0, 0, 2, 20],\n  ],\n  17: [\n    [4, 1, 0, 17],\n    [1, 3, 0, 18],\n    [1, 1, 1, 18],\n    [3, 2, 0, 19],\n    [3, 0, 1, 19],\n    [0, 4, 0, 20],\n    [0, 2, 1, 20],\n    [0, 0, 2, 20],\n  ],\n  18: [\n    [1, 1, 1, 18],\n    [1, 3, 0, 18],\n    [3, 2, 0, 19],\n    [3, 0, 1, 19],\n    [5, 1, 0, 20],\n    [0, 4, 0, 20],\n    [0, 2, 1, 20],\n    [0, 0, 2, 20],\n  ],\n  19: [\n    [3, 2, 0, 19],\n    [3, 0, 1, 19],\n    [5, 1, 0, 20],\n    [0, 4, 0, 20],\n    [0, 2, 1, 20],\n    [0, 0, 2, 20],\n    [2, 3, 0, 21],\n    [2, 1, 1, 21],\n  ],\n  20: [\n    [5, 1, 0, 20],\n    [0, 4, 0, 20],\n    [0, 2, 1, 20],\n    [0, 0, 2, 20],\n    [2, 3, 0, 21],\n    [2, 1, 1, 21],\n    [4, 2, 0, 22],\n    [4, 0, 1, 22],\n  ],\n  21: [\n    [2, 3, 0, 21],\n    [2, 1, 1, 21],\n    [4, 2, 0, 22],\n    [4, 0, 1, 22],\n    [1, 4, 0, 23],\n    [1, 2, 1, 23],\n    [1, 0, 2, 23],\n    [0, 5, 0, 25],\n    [0, 3, 1, 25],\n    [0, 1, 2, 25],\n    [0, 0, 3, 30],\n  ],\n  22: [\n    [4, 2, 0, 22],\n    [4, 0, 1, 22],\n    [1, 4, 0, 23],\n    [1, 2, 1, 23],\n    [1, 0, 2, 23],\n    [3, 3, 0, 24],\n    [3, 1, 1, 24],\n    [0, 5, 0, 25],\n    [0, 3, 1, 25],\n    [0, 1, 2, 25],\n    [0, 0, 3, 30],\n  ],\n  23: [\n    [1, 4, 0, 23],\n    [1, 2, 1, 23],\n    [1, 0, 2, 23],\n    [3, 3, 0, 24],\n    [3, 1, 1, 24],\n    [5, 2, 0, 25],\n    [0, 5, 0, 25],\n    [5, 0, 1, 25],\n    [0, 3, 1, 25],\n    [0, 1, 2, 25],\n    [0, 0, 3, 30],\n  ],\n  24: [\n    [3, 3, 0, 24],\n    [3, 1, 1, 24],\n    [5, 2, 0, 25],\n    [0, 5, 0, 25],\n    [5, 0, 1, 25],\n    [0, 3, 1, 25],\n    [0, 1, 2, 25],\n    [2, 4, 0, 26],\n    [2, 2, 1, 26],\n    [2, 0, 2, 26],\n    [0, 0, 3, 30],\n  ],\n  25: [\n    [5, 2, 0, 25],\n    [0, 5, 0, 25],\n    [5, 0, 1, 25],\n    [0, 3, 1, 25],\n    [0, 1, 2, 25],\n    [2, 4, 0, 26],\n    [2, 2, 1, 26],\n    [2, 0, 2, 26],\n    [4, 3, 0, 27],\n    [4, 1, 1, 27],\n    [0, 0, 3, 30],\n  ],\n  26: [\n    [2, 4, 0, 26],\n    [2, 2, 1, 26],\n    [2, 0, 2, 26],\n    [4, 3, 0, 27],\n    [4, 1, 1, 27],\n    [1, 5, 0, 28],\n    [1, 3, 1, 28],\n    [1, 1, 2, 28],\n    [0, 4, 1, 30],\n    [0, 2, 2, 30],\n    [0, 0, 3, 30],\n  ],\n  27: [\n    [4, 3, 0, 27],\n    [4, 1, 1, 27],\n    [1, 5, 0, 28],\n    [1, 3, 1, 28],\n    [1, 1, 2, 28],\n    [3, 4, 0, 29],\n    [3, 2, 1, 29],\n    [3, 0, 2, 29],\n    [0, 4, 1, 30],\n    [0, 2, 2, 30],\n    [0, 0, 3, 30],\n  ],\n  28: [\n    [1, 5, 0, 28],\n    [1, 3, 1, 28],\n    [1, 1, 2, 28],\n    [3, 4, 0, 29],\n    [3, 2, 1, 29],\n    [3, 0, 2, 29],\n    [5, 3, 0, 30],\n    [5, 1, 1, 30],\n    [0, 4, 1, 30],\n    [0, 2, 2, 30],\n    [0, 0, 3, 30],\n  ],\n  29: [\n    [3, 4, 0, 29],\n    [3, 2, 1, 29],\n    [3, 0, 2, 29],\n    [5, 3, 0, 30],\n    [5, 1, 1, 30],\n    [0, 4, 1, 30],\n    [0, 2, 2, 30],\n    [0, 0, 3, 30],\n    [2, 5, 0, 31],\n    [2, 3, 1, 31],\n    [2, 1, 2, 31],\n  ],\n  30: [\n    [5, 3, 0, 30],\n    [5, 1, 1, 30],\n    [0, 4, 1, 30],\n    [0, 2, 2, 30],\n    [0, 0, 3, 30],\n    [2, 5, 0, 31],\n    [2, 3, 1, 31],\n    [2, 1, 2, 31],\n    [4, 4, 0, 32],\n    [4, 2, 1, 32],\n    [4, 0, 2, 32],\n  ],\n  31: [\n    [2, 5, 0, 31],\n    [2, 3, 1, 31],\n    [2, 1, 2, 31],\n    [4, 4, 0, 32],\n    [4, 2, 1, 32],\n    [4, 0, 2, 32],\n    [1, 4, 1, 33],\n    [1, 2, 2, 33],\n    [1, 0, 3, 33],\n    [0, 3, 2, 35],\n    [0, 1, 3, 35],\n    [0, 0, 4, 40],\n  ],\n  32: [\n    [4, 4, 0, 32],\n    [4, 2, 1, 32],\n    [4, 0, 2, 32],\n    [1, 4, 1, 33],\n    [1, 2, 2, 33],\n    [1, 0, 3, 33],\n    [3, 5, 0, 34],\n    [3, 3, 1, 34],\n    [3, 1, 2, 34],\n    [0, 3, 2, 35],\n    [0, 1, 3, 35],\n    [0, 0, 4, 40],\n  ],\n  33: [\n    [1, 4, 1, 33],\n    [1, 2, 2, 33],\n    [1, 0, 3, 33],\n    [3, 5, 0, 34],\n    [3, 3, 1, 34],\n    [3, 1, 2, 34],\n    [5, 4, 0, 35],\n    [5, 2, 1, 35],\n    [5, 0, 2, 35],\n    [0, 3, 2, 35],\n    [0, 1, 3, 35],\n    [0, 0, 4, 40],\n  ],\n  34: [\n    [3, 5, 0, 34],\n    [3, 3, 1, 34],\n    [3, 1, 2, 34],\n    [5, 4, 0, 35],\n    [5, 2, 1, 35],\n    [5, 0, 2, 35],\n    [0, 3, 2, 35],\n    [0, 1, 3, 35],\n    [2, 4, 1, 36],\n    [2, 2, 2, 36],\n    [2, 0, 3, 36],\n    [0, 0, 4, 40],\n  ],\n  35: [\n    [5, 4, 0, 35],\n    [5, 2, 1, 35],\n    [5, 0, 2, 35],\n    [0, 3, 2, 35],\n    [0, 1, 3, 35],\n    [2, 4, 1, 36],\n    [2, 2, 2, 36],\n    [2, 0, 3, 36],\n    [4, 5, 0, 37],\n    [4, 3, 1, 37],\n    [4, 1, 2, 37],\n    [0, 0, 4, 40],\n  ],\n  36: [\n    [2, 4, 1, 36],\n    [2, 2, 2, 36],\n    [2, 0, 3, 36],\n    [4, 5, 0, 37],\n    [4, 3, 1, 37],\n    [4, 1, 2, 37],\n    [1, 3, 2, 38],\n    [1, 1, 3, 38],\n    [0, 2, 3, 40],\n    [0, 0, 4, 40],\n  ],\n  37: [\n    [4, 5, 0, 37],\n    [4, 3, 1, 37],\n    [4, 1, 2, 37],\n    [1, 3, 2, 38],\n    [1, 1, 3, 38],\n    [3, 4, 1, 39],\n    [3, 2, 2, 39],\n    [3, 0, 3, 39],\n    [0, 2, 3, 40],\n    [0, 0, 4, 40],\n  ],\n  38: [\n    [1, 3, 2, 38],\n    [1, 1, 3, 38],\n    [3, 4, 1, 39],\n    [3, 2, 2, 39],\n    [3, 0, 3, 39],\n    [5, 5, 0, 40],\n    [5, 3, 1, 40],\n    [5, 1, 2, 40],\n    [0, 2, 3, 40],\n    [0, 0, 4, 40],\n  ],\n  39: [\n    [3, 4, 1, 39],\n    [3, 2, 2, 39],\n    [3, 0, 3, 39],\n    [5, 5, 0, 40],\n    [5, 3, 1, 40],\n    [5, 1, 2, 40],\n    [0, 2, 3, 40],\n    [0, 0, 4, 40],\n    [2, 3, 2, 41],\n    [2, 1, 3, 41],\n  ],\n  40: [\n    [5, 5, 0, 40],\n    [5, 3, 1, 40],\n    [5, 1, 2, 40],\n    [0, 2, 3, 40],\n    [0, 0, 4, 40],\n    [2, 3, 2, 41],\n    [2, 1, 3, 41],\n    [4, 4, 1, 42],\n    [4, 2, 2, 42],\n    [4, 0, 3, 42],\n  ],\n  41: [\n    [2, 3, 2, 41],\n    [2, 1, 3, 41],\n    [4, 4, 1, 42],\n    [4, 2, 2, 42],\n    [4, 0, 3, 42],\n    [1, 2, 3, 43],\n    [1, 0, 4, 43],\n    [0, 1, 4, 45],\n    [0, 0, 5, 50],\n  ],\n  42: [\n    [4, 4, 1, 42],\n    [4, 2, 2, 42],\n    [4, 0, 3, 42],\n    [1, 2, 3, 43],\n    [1, 0, 4, 43],\n    [3, 3, 2, 44],\n    [3, 1, 3, 44],\n    [0, 1, 4, 45],\n    [0, 0, 5, 50],\n  ],\n  43: [\n    [1, 2, 3, 43],\n    [1, 0, 4, 43],\n    [3, 3, 2, 44],\n    [3, 1, 3, 44],\n    [5, 4, 1, 45],\n    [5, 2, 2, 45],\n    [5, 0, 3, 45],\n    [0, 1, 4, 45],\n    [0, 0, 5, 50],\n  ],\n  44: [\n    [3, 3, 2, 44],\n    [3, 1, 3, 44],\n    [5, 4, 1, 45],\n    [5, 2, 2, 45],\n    [5, 0, 3, 45],\n    [0, 1, 4, 45],\n    [2, 2, 3, 46],\n    [2, 0, 4, 46],\n    [0, 0, 5, 50],\n  ],\n  45: [\n    [5, 4, 1, 45],\n    [5, 2, 2, 45],\n    [5, 0, 3, 45],\n    [0, 1, 4, 45],\n    [2, 2, 3, 46],\n    [2, 0, 4, 46],\n    [4, 3, 2, 47],\n    [4, 1, 3, 47],\n    [0, 0, 5, 50],\n  ],\n  46: [\n    [2, 2, 3, 46],\n    [2, 0, 4, 46],\n    [4, 3, 2, 47],\n    [4, 1, 3, 47],\n    [1, 1, 4, 48],\n    [0, 0, 5, 50],\n  ],\n  47: [\n    [4, 3, 2, 47],\n    [4, 1, 3, 47],\n    [1, 1, 4, 48],\n    [3, 2, 3, 49],\n    [3, 0, 4, 49],\n    [0, 0, 5, 50],\n  ],\n  48: [\n    [1, 1, 4, 48],\n    [3, 2, 3, 49],\n    [3, 0, 4, 49],\n    [5, 3, 2, 50],\n    [5, 1, 3, 50],\n    [0, 0, 5, 50],\n  ],\n  49: [\n    [3, 2, 3, 49],\n    [3, 0, 4, 49],\n    [5, 3, 2, 50],\n    [5, 1, 3, 50],\n    [0, 0, 5, 50],\n    [2, 1, 4, 51],\n  ],\n  50: [\n    [5, 3, 2, 50],\n    [5, 1, 3, 50],\n    [0, 0, 5, 50],\n    [2, 1, 4, 51],\n    [4, 2, 3, 52],\n    [4, 0, 4, 52],\n  ],\n  51: [\n    [2, 1, 4, 51],\n    [4, 2, 3, 52],\n    [4, 0, 4, 52],\n    [1, 0, 5, 53],\n  ],\n  52: [\n    [4, 2, 3, 52],\n    [4, 0, 4, 52],\n    [1, 0, 5, 53],\n    [3, 1, 4, 54],\n  ],\n  53: [\n    [1, 0, 5, 53],\n    [3, 1, 4, 54],\n    [5, 2, 3, 55],\n    [5, 0, 4, 55],\n  ],\n  54: [\n    [3, 1, 4, 54],\n    [5, 2, 3, 55],\n    [5, 0, 4, 55],\n    [2, 0, 5, 56],\n  ],\n  55: [\n    [5, 2, 3, 55],\n    [5, 0, 4, 55],\n    [2, 0, 5, 56],\n    [4, 1, 4, 57],\n  ],\n  56: [\n    [2, 0, 5, 56],\n    [4, 1, 4, 57],\n  ],\n  57: [\n    [4, 1, 4, 57],\n    [3, 0, 5, 59],\n  ],\n  58: [\n    [3, 0, 5, 59],\n    [5, 1, 4, 60],\n  ],\n  59: [\n    [3, 0, 5, 59],\n    [5, 1, 4, 60],\n  ],\n  60: [\n    [5, 1, 4, 60],\n    [4, 0, 5, 62],\n  ],\n  61: [[4, 0, 5, 62]],\n  62: [[4, 0, 5, 62]],\n  63: [[5, 0, 5, 65]],\n  64: [[5, 0, 5, 65]],\n  65: [[5, 0, 5, 65]],\n};\n","import { StatModifier } from \"../enum/armor-stat\";\nimport { IPermutatorArmor } from \"./IPermutatorArmor\";\n\nexport interface IPermutatorArmorSet {\n  armor: number[];\n  useExoticClassItem: boolean;\n  usedArtifice: StatModifier[];\n  usedMods: StatModifier[];\n  statsWithMods: number[];\n  statsWithoutMods: number[];\n}\n\nexport function createArmorSet(\n  helmet: IPermutatorArmor,\n  gauntlet: IPermutatorArmor,\n  chest: IPermutatorArmor,\n  leg: IPermutatorArmor,\n  classItem: IPermutatorArmor,\n  usedArtifice: StatModifier[],\n  usedMods: StatModifier[],\n  statsWithMods: number[],\n  statsWithoutMods: number[]\n): IPermutatorArmorSet {\n  return {\n    armor: [helmet.id, gauntlet.id, chest.id, leg.id, classItem.id],\n    useExoticClassItem: false,\n    usedArtifice,\n    usedMods,\n    statsWithMods,\n    statsWithoutMods,\n  };\n}\n\nexport function isIPermutatorArmorSet(obj: any): obj is IPermutatorArmorSet {\n  return (\n    obj != null &&\n    Object.prototype.hasOwnProperty.call(obj, \"armor\") &&\n    Object.prototype.hasOwnProperty.call(obj, \"useExoticClassItem\") &&\n    Object.prototype.hasOwnProperty.call(obj, \"usedArtifice\") &&\n    Object.prototype.hasOwnProperty.call(obj, \"usedMods\") &&\n    Object.prototype.hasOwnProperty.call(obj, \"statsWithMods\")\n  );\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// region Imports\nimport { BuildConfiguration, FixableSelection } from \"../data/buildConfiguration\";\nimport { IDestinyArmor, InventoryArmorSource } from \"../data/types/IInventoryArmor\";\nimport { ArmorSlot } from \"../data/enum/armor-slot\";\nimport { FORCE_USE_ANY_EXOTIC, MAXIMUM_MASTERWORK_LEVEL } from \"../data/constants\";\nimport { ModInformation } from \"../data/ModInformation\";\nimport {\n  ArmorPerkOrSlot,\n  ArmorPerkSocketHashes,\n  ArmorStat,\n  SpecialArmorStat,\n  STAT_MOD_VALUES,\n  StatModifier,\n} from \"../data/enum/armor-stat\";\n\nimport { environment } from \"../../environments/environment\";\n\nimport { precalculatedZeroWasteModCombinations } from \"../data/generated/precalculatedZeroWasteModCombinations\";\nimport { precalculatedModCombinations } from \"../data/generated/precalculatedModCombinations\";\nimport { ModOptimizationStrategy } from \"../data/enum/mod-optimization-strategy\";\nimport { IPermutatorArmor } from \"../data/types/IPermutatorArmor\";\nimport {\n  IPermutatorArmorSet,\n  createArmorSet,\n  isIPermutatorArmorSet,\n} from \"../data/types/IPermutatorArmorSet\";\nimport { ArmorSystem } from \"../data/types/IManifestArmor\";\n// endregion Imports\n\n// region Validation and Preparation Functions\nfunction checkSlots(\n  config: BuildConfiguration,\n  constantModslotRequirement: Map<number, number>,\n  availableClassItemTypes: Set<ArmorPerkOrSlot>,\n  helmet: IPermutatorArmor,\n  gauntlet: IPermutatorArmor,\n  chest: IPermutatorArmor,\n  leg: IPermutatorArmor\n) {\n  let requirements = new Map(constantModslotRequirement);\n  const slots = [\n    { slot: ArmorSlot.ArmorSlotHelmet, item: helmet },\n    { slot: ArmorSlot.ArmorSlotGauntlet, item: gauntlet },\n    { slot: ArmorSlot.ArmorSlotChest, item: chest },\n    { slot: ArmorSlot.ArmorSlotLegs, item: leg },\n  ];\n\n  for (let { item } of slots) {\n    if (item.armorSystem === ArmorSystem.Armor2) {\n      if (\n        (item.isExotic && config.assumeEveryLegendaryIsArtifice) ||\n        (!item.isExotic && config.assumeEveryLegendaryIsArtifice) ||\n        (!item.isExotic &&\n          item.slot == ArmorSlot.ArmorSlotClass &&\n          config.assumeClassItemIsArtifice)\n      ) {\n        requirements.set(\n          ArmorPerkOrSlot.SlotArtifice,\n          (requirements.get(ArmorPerkOrSlot.SlotArtifice) ?? 0) - 1\n        );\n        continue;\n      }\n    }\n\n    requirements.set(item.perk, (requirements.get(item.perk) ?? 0) - 1);\n    if (item.gearSetHash != null)\n      requirements.set(item.gearSetHash, (requirements.get(item.gearSetHash) ?? 0) - 1);\n  }\n\n  let SlotRequirements = 0;\n  for (let [key] of requirements) {\n    if (key == ArmorPerkOrSlot.Any || key == ArmorPerkOrSlot.None) continue;\n    SlotRequirements += Math.max(0, requirements.get(key) ?? 0);\n  }\n\n  if (SlotRequirements > 1) return { valid: false };\n  if (SlotRequirements == 0) return { valid: true, requiredClassItemType: ArmorPerkOrSlot.Any };\n\n  const requiredClassItemPerk = [...requirements.entries()].find((c) => c[1] > 0)?.[0];\n  if (!requiredClassItemPerk) return { valid: false, requiredClassItemType: ArmorPerkOrSlot.Any };\n  return {\n    valid: availableClassItemTypes.has(requiredClassItemPerk),\n    requiredClassItemType: requiredClassItemPerk,\n  };\n}\n\nfunction prepareConstantStatBonus(config: BuildConfiguration) {\n  const constantBonus = [0, 0, 0, 0, 0, 0];\n  // Apply configurated mods to the stat value\n  // Apply mods\n  for (const mod of config.enabledMods) {\n    for (const bonus of ModInformation[mod].bonus) {\n      var statId =\n        bonus.stat == SpecialArmorStat.ClassAbilityRegenerationStat\n          ? [1, 0, 2][config.characterClass]\n          : bonus.stat;\n      constantBonus[statId] += bonus.value;\n    }\n  }\n  return constantBonus;\n}\n\nfunction prepareConstantModslotRequirement(config: BuildConfiguration) {\n  let constantPerkRequirement = new Map<ArmorPerkOrSlot, number>();\n\n  for (let [key] of constantPerkRequirement) {\n    constantPerkRequirement.set(key, 0);\n  }\n\n  for (const req of config.armorRequirements) {\n    if (\"perk\" in req) {\n      let perk = req.perk;\n\n      const e = Object.entries(ArmorPerkSocketHashes).find(([, value]) => value == perk);\n      if (e) perk = Number.parseInt(e[0]) as any as ArmorPerkOrSlot;\n\n      if (perk != ArmorPerkOrSlot.Any && perk != ArmorPerkOrSlot.None) {\n        constantPerkRequirement.set(perk, (constantPerkRequirement.get(perk) ?? 0) + 1);\n      }\n    } else if (\"gearSetHash\" in req) {\n      // Gear set requirement\n      constantPerkRequirement.set(\n        req.gearSetHash,\n        (constantPerkRequirement.get(req.gearSetHash) ?? 0) + 1\n      );\n    }\n  }\n  return constantPerkRequirement;\n}\n\nfunction* generateArmorCombinations(\n  helmets: IPermutatorArmor[],\n  gauntlets: IPermutatorArmor[],\n  chests: IPermutatorArmor[],\n  legs: IPermutatorArmor[],\n  requiresAtLeastOneExotic: boolean\n) {\n  for (let helmet of helmets) {\n    for (let gauntlet of gauntlets) {\n      if (helmet.isExotic && gauntlet.isExotic) continue;\n      for (let chest of chests) {\n        if ((helmet.isExotic || gauntlet.isExotic) && chest.isExotic) continue;\n        for (let leg of legs) {\n          if ((helmet.isExotic || gauntlet.isExotic || chest.isExotic) && leg.isExotic) continue;\n          if (\n            requiresAtLeastOneExotic &&\n            !(helmet.isExotic || gauntlet.isExotic || chest.isExotic || leg.isExotic)\n          )\n            continue;\n\n          yield [helmet, gauntlet, chest, leg];\n        }\n      }\n    }\n  }\n}\n\nfunction estimateCombinationsToBeChecked(\n  helmets: IPermutatorArmor[],\n  gauntlets: IPermutatorArmor[],\n  chests: IPermutatorArmor[],\n  legs: IPermutatorArmor[]\n) {\n  let totalCalculations = 0;\n  const exoticHelmets = helmets.filter((d) => d.isExotic).length;\n  const legendaryHelmets = helmets.length - exoticHelmets;\n  const exoticGauntlets = gauntlets.filter((d) => d.isExotic).length;\n  const legendaryGauntlets = gauntlets.length - exoticGauntlets;\n  const exoticChests = chests.filter((d) => d.isExotic).length;\n  const legendaryChests = chests.length - exoticChests;\n  const exoticLegs = legs.filter((d) => d.isExotic).length;\n  const legendaryLegs = legs.length - exoticLegs;\n  totalCalculations += exoticHelmets * legendaryGauntlets * legendaryChests * legendaryLegs;\n  totalCalculations += legendaryHelmets * exoticGauntlets * legendaryChests * legendaryLegs;\n  totalCalculations += legendaryHelmets * legendaryGauntlets * exoticChests * legendaryLegs;\n  totalCalculations += legendaryHelmets * legendaryGauntlets * legendaryChests * exoticLegs;\n  totalCalculations += legendaryHelmets * legendaryGauntlets * legendaryChests * legendaryLegs;\n  return totalCalculations;\n}\n// endregion Validation and Preparation Functions\n\n// region Main Worker Event Handler\naddEventListener(\"message\", async ({ data }) => {\n  if (data.type != \"builderRequest\") return;\n\n  const threadSplit = data.threadSplit as { count: number; current: number };\n  const config = data.config as BuildConfiguration;\n  const anyStatFixed = Object.values(config.minimumStatTiers).some(\n    (v: FixableSelection<number>) => v.fixed\n  );\n  let items = data.items as IPermutatorArmor[];\n\n  if (threadSplit == undefined || config == undefined || items == undefined) {\n    return;\n  }\n\n  const startTime = Date.now();\n  console.time(`Total run thread#${threadSplit.current}`);\n  // toggle feature flags\n  config.onlyShowResultsWithNoWastedStats =\n    environment.featureFlags.enableZeroWaste && config.onlyShowResultsWithNoWastedStats;\n  if (!environment.featureFlags.enableModslotLimitation) {\n    config.statModLimits = {\n      maxMods: 5, // M: total mods allowed (0–5)\n      maxMajorMods: 5, // N: major mods allowed (0–maxMods)\n    };\n  }\n\n  let helmets = items\n    .filter((i) => i.slot == ArmorSlot.ArmorSlotHelmet)\n    .filter((k) => {\n      return (\n        !config.useFotlArmor ||\n        [\n          199733460, // titan masq\n          2545426109, // warlock\n          3224066584, // hunter\n        ].indexOf(k.hash) > -1\n      );\n    });\n  let gauntlets = items.filter((i) => i.slot == ArmorSlot.ArmorSlotGauntlet);\n  let chests = items.filter((i) => i.slot == ArmorSlot.ArmorSlotChest);\n  let legs = items.filter((i) => i.slot == ArmorSlot.ArmorSlotLegs);\n\n  // Support multithreading. find the largest set and split it by N.\n  if (threadSplit.count > 1) {\n    var splitEntry = (\n      [\n        [helmets, helmets.length],\n        [gauntlets, gauntlets.length],\n        [chests, chests.length],\n        [legs, legs.length],\n      ] as [IPermutatorArmor[], number][]\n    ).sort((a, b) => b[1] - a[1])[0][0];\n\n    var keepLength = Math.round(splitEntry.length / threadSplit.count);\n    var startIndex = keepLength * threadSplit.current; // we can delete everything before this\n    var endIndex = startIndex + keepLength; // we can delete everything after this\n    // if we have rounding issues, let the last thread do the rest\n    if (threadSplit.current == threadSplit.count - 1) endIndex = splitEntry.length;\n\n    // remove data at the end\n    splitEntry.splice(endIndex);\n    splitEntry.splice(0, startIndex);\n  }\n\n  let classItems = items.filter((i) => i.slot == ArmorSlot.ArmorSlotClass);\n  // Sort by Masterwork, descending\n  classItems = classItems.sort((a, b) => (b.masterworkLevel ?? 0) - (a.masterworkLevel ?? 0));\n\n  // Filter exotic class items based on selected exotic perks if they are not \"Any\"\n  if (config.selectedExoticPerks && config.selectedExoticPerks.length >= 2) {\n    const firstPerkFilter = config.selectedExoticPerks[0];\n    const secondPerkFilter = config.selectedExoticPerks[1];\n\n    if (firstPerkFilter !== ArmorPerkOrSlot.Any || secondPerkFilter !== ArmorPerkOrSlot.Any) {\n      classItems = classItems.filter((item) => {\n        if (!item.isExotic || !item.exoticPerkHash || item.exoticPerkHash.length < 2) {\n          return true; // Keep non-exotic items or items without proper perk data\n        }\n\n        const hasFirstPerk =\n          firstPerkFilter === ArmorPerkOrSlot.Any || item.exoticPerkHash.includes(firstPerkFilter);\n        const hasSecondPerk =\n          secondPerkFilter === ArmorPerkOrSlot.Any ||\n          item.exoticPerkHash.includes(secondPerkFilter);\n\n        return hasFirstPerk && hasSecondPerk;\n      });\n    }\n  }\n\n  if (\n    config.assumeEveryLegendaryIsArtifice ||\n    config.assumeEveryExoticIsArtifice ||\n    config.assumeClassItemIsArtifice\n  ) {\n    classItems = classItems.map((item) => {\n      if (\n        item.armorSystem == ArmorSystem.Armor2 &&\n        ((config.assumeEveryLegendaryIsArtifice && !item.isExotic) ||\n          (config.assumeEveryExoticIsArtifice && item.isExotic) ||\n          (config.assumeClassItemIsArtifice && !item.isExotic))\n      ) {\n        return { ...item, perk: ArmorPerkOrSlot.SlotArtifice };\n      }\n      return item;\n    });\n  }\n\n  // true if any armorPerks is not \"any\"\n  const doesNotRequireArmorPerks = config.armorRequirements.length == 0;\n\n  classItems = classItems.filter(\n    (item, index, self) =>\n      index ===\n      self.findIndex(\n        (i) =>\n          i.mobility === item.mobility &&\n          i.resilience === item.resilience &&\n          i.recovery === item.recovery &&\n          i.discipline === item.discipline &&\n          i.intellect === item.intellect &&\n          i.strength === item.strength &&\n          i.isExotic === item.isExotic &&\n          ((i.isExotic && config.assumeExoticsMasterworked) ||\n            (!i.isExotic && config.assumeLegendariesMasterworked) ||\n            // If there is any stat fixed, we check if the masterwork level is the same as the first item\n            (anyStatFixed && i.masterworkLevel === item.masterworkLevel) ||\n            // If there is no stat fixed, then we just use the masterwork level of the first item.\n            // As it is already sorted descending, we can just check if the masterwork level is the same\n            !anyStatFixed) &&\n          (doesNotRequireArmorPerks || i.perk === item.perk)\n      )\n  );\n  //*/\n\n  const exoticClassItems = classItems.filter((d) => d.isExotic);\n  const legendaryClassItems = classItems.filter((d) => !d.isExotic);\n  const exoticClassItemIsEnforced = exoticClassItems.some(\n    (item) => config.selectedExotics.indexOf(item.hash) > -1\n  );\n  let availableClassItemPerkTypes = new Set(classItems.map((d) => d.gearSetHash || d.perk));\n  // let availableClassItemPerkTypes1 = new Set(classItems.map((d) => d.gearSetHash));\n\n  // runtime variables\n  const runtime = {\n    maximumPossibleTiers: [0, 0, 0, 0, 0, 0],\n  };\n\n  if (classItems.length == 0) {\n    console.warn(\n      `Thread#${threadSplit.current} - No class items found with the current configuration.`\n    );\n    postMessage({\n      runtime: runtime,\n      results: [],\n      done: true,\n      checkedCalculations: 0,\n      estimatedCalculations: 0,\n      stats: {\n        permutationCount: 0,\n        itemCount: items.length - classItems.length,\n        totalTime: Date.now() - startTime,\n      },\n    });\n    return;\n  } else if (exoticClassItems.length > 0 && legendaryClassItems.length == 0) {\n    // If we do not have legendary class items, we can not use any exotic armor in other slots\n    helmets = helmets.filter((d) => !d.isExotic);\n    gauntlets = gauntlets.filter((d) => !d.isExotic);\n    chests = chests.filter((d) => !d.isExotic);\n    legs = legs.filter((d) => !d.isExotic);\n  }\n\n  const constantBonus = prepareConstantStatBonus(config);\n  const constantModslotRequirement = prepareConstantModslotRequirement(config);\n\n  const requiresAtLeastOneExotic = config.selectedExotics.indexOf(FORCE_USE_ANY_EXOTIC) > -1;\n\n  let results: IPermutatorArmorSet[] = [];\n  let resultsLength = 0;\n\n  let listedResults = 0;\n  let totalResults = 0;\n  let doNotOutput = false;\n\n  // contains the value of the total amount of combinations to be checked\n  let estimatedCalculations = estimateCombinationsToBeChecked(helmets, gauntlets, chests, legs);\n  let checkedCalculations = 0;\n  let lastProgressReportTime = 0;\n  console.info(`Estimated calculations for Thread#${threadSplit.current}`, estimatedCalculations);\n  // define the delay; it can be 75ms if the estimated calculations are low\n  // if the estimated calculations >= 1e6, then we will use 125ms\n  let progressBarDelay = estimatedCalculations >= 1e6 ? 125 : 75;\n\n  console.debug(\"DEBUG\", \"constantModslotRequirement\", constantModslotRequirement);\n\n  for (let [helmet, gauntlet, chest, leg] of generateArmorCombinations(\n    helmets,\n    gauntlets,\n    chests,\n    legs,\n    // if exotic class items are enforced, we can not use any other exotic armor piece\n    requiresAtLeastOneExotic && !exoticClassItemIsEnforced\n  )) {\n    checkedCalculations++;\n    /**\n     *  At this point we already have:\n     *  - Masterworked Exotic/Legendaries, if they must be masterworked (config.onlyUseMasterworkedExotics/config.onlyUseMasterworkedLegendaries)\n     *  - disabled items were already removed (config.disabledItems)\n     */\n    const slotCheckResult = checkSlots(\n      config,\n      constantModslotRequirement,\n      availableClassItemPerkTypes,\n      helmet,\n      gauntlet,\n      chest,\n      leg\n    );\n    if (!slotCheckResult.valid) continue;\n\n    const hasOneExotic = helmet.isExotic || gauntlet.isExotic || chest.isExotic || leg.isExotic;\n    // TODO This check should be in the generator\n    if (hasOneExotic && exoticClassItemIsEnforced) continue;\n\n    let classItemsToUse: IPermutatorArmor[] = classItems;\n    if (hasOneExotic) {\n      // if we have an exotic armor piece, we can not use the exotic class item\n      classItemsToUse = legendaryClassItems;\n    } else if (config.selectedExotics[0] == FORCE_USE_ANY_EXOTIC || exoticClassItemIsEnforced) {\n      // if we have no exotic armor piece, we can use the exotic class item\n      classItemsToUse = exoticClassItems;\n    }\n    if (slotCheckResult.requiredClassItemType != ArmorPerkOrSlot.Any) {\n      classItemsToUse = classItems.filter(\n        (item) =>\n          item.perk == slotCheckResult.requiredClassItemType ||\n          item.gearSetHash == slotCheckResult.requiredClassItemType\n      );\n    }\n    if (classItemsToUse.length == 0) {\n      // If we have no class items, we do not need to calculate the permutation\n      continue;\n    }\n\n    const result = handlePermutation(\n      runtime,\n      config,\n      helmet,\n      gauntlet,\n      chest,\n      leg,\n      classItemsToUse,\n      constantBonus,\n      doNotOutput\n    );\n    // Only add 50k to the list if the setting is activated.\n    // We will still calculate the rest so that we get accurate results for the runtime values\n    if (isIPermutatorArmorSet(result)) {\n      totalResults++;\n\n      results.push(result);\n      resultsLength++;\n      listedResults++;\n      doNotOutput =\n        doNotOutput ||\n        (config.limitParsedResults && listedResults >= 3e4 / threadSplit.count) ||\n        listedResults >= 1e6 / threadSplit.count;\n    }\n\n    if (totalResults % 5000 == 0 && lastProgressReportTime + progressBarDelay < Date.now()) {\n      lastProgressReportTime = Date.now();\n      postMessage({\n        checkedCalculations,\n        estimatedCalculations,\n        reachableTiers: runtime.maximumPossibleTiers,\n      });\n    }\n\n    if (resultsLength >= 5000) {\n      // @ts-ignore\n      postMessage({ runtime, results, done: false, checkedCalculations, estimatedCalculations });\n      results = [];\n      resultsLength = 0;\n    }\n  }\n  console.timeEnd(`Total run thread#${threadSplit.current}`);\n\n  // @ts-ignore\n  postMessage({\n    runtime,\n    results,\n    done: true,\n    checkedCalculations,\n    estimatedCalculations,\n    stats: {\n      permutationCount: totalResults,\n      itemCount: items.length - classItems.length,\n      totalTime: Date.now() - startTime,\n    },\n  });\n});\n// endregion Main Worker Event Handler\n\n// region Core Calculation Functions\nexport function getStatSum(\n  items: IDestinyArmor[]\n): [number, number, number, number, number, number] {\n  return [\n    items[0].mobility + items[1].mobility + items[2].mobility + items[3].mobility,\n    items[0].resilience + items[1].resilience + items[2].resilience + items[3].resilience,\n    items[0].recovery + items[1].recovery + items[2].recovery + items[3].recovery,\n    items[0].discipline + items[1].discipline + items[2].discipline + items[3].discipline,\n    items[0].intellect + items[1].intellect + items[2].intellect + items[3].intellect,\n    items[0].strength + items[1].strength + items[2].strength + items[3].strength,\n  ];\n}\n\nfunction applyMasterworkStats(\n  item: IPermutatorArmor,\n  config: BuildConfiguration,\n  stats: number[] = [0, 0, 0, 0, 0, 0]\n): void {\n  if (item.armorSystem == ArmorSystem.Armor2) {\n    if (\n      item.masterworkLevel == MAXIMUM_MASTERWORK_LEVEL ||\n      (item.isExotic && config.assumeExoticsMasterworked) ||\n      (!item.isExotic && config.assumeLegendariesMasterworked)\n    ) {\n      // Armor 2.0 Masterworked items give +10 to all stats\n      for (let i = 0; i < 6; i++) {\n        stats[i] += 2;\n      }\n    }\n  } else if (item.armorSystem == ArmorSystem.Armor3) {\n    let multiplier = item.masterworkLevel;\n    if (\n      (item.isExotic && config.assumeExoticsMasterworked) ||\n      (!item.isExotic && config.assumeLegendariesMasterworked)\n    )\n      multiplier = MAXIMUM_MASTERWORK_LEVEL;\n    if (multiplier == 0) return;\n\n    // item.archetypeStats contains three stat indices. The OTHER THREE get +1 per multiplier\n    for (let i = 0; i < 6; i++) {\n      if (item.archetypeStats.includes(i)) continue;\n      stats[i] += multiplier;\n    }\n  }\n}\n\nexport function handlePermutation(\n  runtime: any,\n  config: BuildConfiguration,\n  helmet: IPermutatorArmor,\n  gauntlet: IPermutatorArmor,\n  chest: IPermutatorArmor,\n  leg: IPermutatorArmor,\n  classItems: IPermutatorArmor[],\n  constantBonus: number[],\n  doNotOutput = false\n): never[] | IPermutatorArmorSet | null {\n  const items = [helmet, gauntlet, chest, leg];\n  const stats = getStatSum(items);\n  stats[1] += !items[2].isExotic && config.addConstent1Health ? 1 : 0;\n\n  for (let item of items) applyMasterworkStats(item, config, stats);\n\n  const statsWithoutMods = [stats[0], stats[1], stats[2], stats[3], stats[4], stats[5]];\n  stats[0] += constantBonus[0];\n  stats[1] += constantBonus[1];\n  stats[2] += constantBonus[2];\n  stats[3] += constantBonus[3];\n  stats[4] += constantBonus[4];\n  stats[5] += constantBonus[5];\n\n  for (let n: ArmorStat = 0; n < 6; n++) {\n    // Abort here if we are already above the limit, in case of fixed stat tiers\n    if (config.minimumStatTiers[n].fixed) {\n      if (stats[n] > config.minimumStatTiers[n].value * 10) return null;\n    }\n  }\n\n  // get the amount of armor with artifice slot\n  let availableArtificeCount = items.filter(\n    (d) =>\n      d.perk == ArmorPerkOrSlot.SlotArtifice ||\n      (d.armorSystem === ArmorSystem.Armor2 &&\n        ((config.assumeEveryLegendaryIsArtifice && !d.isExotic) ||\n          (config.assumeEveryExoticIsArtifice && d.isExotic)))\n  ).length;\n\n  // get distance\n  const distances = [\n    Math.max(0, config.minimumStatTiers[0].value * 10 - stats[0]),\n    Math.max(0, config.minimumStatTiers[1].value * 10 - stats[1]),\n    Math.max(0, config.minimumStatTiers[2].value * 10 - stats[2]),\n    Math.max(0, config.minimumStatTiers[3].value * 10 - stats[3]),\n    Math.max(0, config.minimumStatTiers[4].value * 10 - stats[4]),\n    Math.max(0, config.minimumStatTiers[5].value * 10 - stats[5]),\n  ];\n\n  if (config.onlyShowResultsWithNoWastedStats) {\n    for (let stat: ArmorStat = 0; stat < 6; stat++) {\n      const v = 10 - (stats[stat] % 10);\n      distances[stat] = Math.max(distances[stat], v < 10 ? v : 0);\n    }\n  }\n\n  // distances required to reduce wasted stat points :)\n  const optionalDistances = [0, 0, 0, 0, 0, 0];\n  if (config.tryLimitWastedStats)\n    for (let stat: ArmorStat = 0; stat < 6; stat++) {\n      if (\n        distances[stat] == 0 &&\n        !config.minimumStatTiers[stat].fixed &&\n        stats[stat] < 200 &&\n        stats[stat] % 10 > 0\n      ) {\n        optionalDistances[stat] = 10 - (stats[stat] % 10);\n      }\n    }\n\n  // Greedy class item selection with early termination\n  // Sort class items by their stat contribution to current gaps\n  const sortedClassItems = [...classItems].sort((a, b) => {\n    let scoreA = 0,\n      scoreB = 0;\n\n    // add 10 if the class item is Armor 3.0\n    if (a.armorSystem == ArmorSystem.Armor3) scoreA += 10;\n    if (b.armorSystem == ArmorSystem.Armor3) scoreB += 10;\n\n    // add 10 if the class item has an artifice slot\n    if (a.perk == ArmorPerkOrSlot.SlotArtifice) scoreA += 10;\n    if (b.perk == ArmorPerkOrSlot.SlotArtifice) scoreB += 10;\n\n    // vendor and collection rolls last\n    if (a.source === InventoryArmorSource.Inventory) scoreA += 5;\n    if (b.source === InventoryArmorSource.Inventory) scoreB += 5;\n\n    for (let i = 0; i < 6; i++) {\n      if (distances[i] > 0) {\n        scoreA += Math.min(\n          distances[i],\n          a.mobility * (i === 0 ? 1 : 0) +\n            a.resilience * (i === 1 ? 1 : 0) +\n            a.recovery * (i === 2 ? 1 : 0) +\n            a.discipline * (i === 3 ? 1 : 0) +\n            a.intellect * (i === 4 ? 1 : 0) +\n            a.strength * (i === 5 ? 1 : 0)\n        );\n        scoreB += Math.min(\n          distances[i],\n          b.mobility * (i === 0 ? 1 : 0) +\n            b.resilience * (i === 1 ? 1 : 0) +\n            b.recovery * (i === 2 ? 1 : 0) +\n            b.discipline * (i === 3 ? 1 : 0) +\n            b.intellect * (i === 4 ? 1 : 0) +\n            b.strength * (i === 5 ? 1 : 0)\n        );\n      }\n    }\n    return scoreB - scoreA; // Higher contribution first\n  });\n\n  // Try each class item with early termination\n  let finalResult: IPermutatorArmorSet | never[] = [];\n  for (const classItem of sortedClassItems) {\n    const adjustedStats = [...stats];\n    const tmpArtificeCount =\n      availableArtificeCount + (classItem.perk == ArmorPerkOrSlot.SlotArtifice ? 1 : 0);\n\n    adjustedStats[0] += classItem.mobility;\n    adjustedStats[1] += classItem.resilience;\n    adjustedStats[2] += classItem.recovery;\n    adjustedStats[3] += classItem.discipline;\n    adjustedStats[4] += classItem.intellect;\n    adjustedStats[5] += classItem.strength;\n    applyMasterworkStats(classItem, config, adjustedStats);\n\n    for (let n: ArmorStat = 0; n < 6; n++) {\n      // Abort here if we are already above the limit, in case of fixed stat tiers\n      if (config.minimumStatTiers[n].fixed) {\n        if (adjustedStats[n] > config.minimumStatTiers[n].value * 10) return null;\n      }\n    }\n\n    const adjustedStatsWithoutMods = [\n      statsWithoutMods[0] + classItem.mobility,\n      statsWithoutMods[1] + classItem.resilience,\n      statsWithoutMods[2] + classItem.recovery,\n      statsWithoutMods[3] + classItem.discipline,\n      statsWithoutMods[4] + classItem.intellect,\n      statsWithoutMods[5] + classItem.strength,\n    ];\n    applyMasterworkStats(classItem, config, adjustedStatsWithoutMods);\n\n    // Recalculate distances with class item included\n    const newDistances = [\n      Math.max(0, config.minimumStatTiers[0].value * 10 - adjustedStats[0]),\n      Math.max(0, config.minimumStatTiers[1].value * 10 - adjustedStats[1]),\n      Math.max(0, config.minimumStatTiers[2].value * 10 - adjustedStats[2]),\n      Math.max(0, config.minimumStatTiers[3].value * 10 - adjustedStats[3]),\n      Math.max(0, config.minimumStatTiers[4].value * 10 - adjustedStats[4]),\n      Math.max(0, config.minimumStatTiers[5].value * 10 - adjustedStats[5]),\n    ];\n\n    if (config.onlyShowResultsWithNoWastedStats) {\n      for (let stat: ArmorStat = 0; stat < 6; stat++) {\n        const v = 10 - (adjustedStats[stat] % 10);\n        newDistances[stat] = Math.max(newDistances[stat], v < 10 ? v : 0);\n      }\n    }\n\n    // Recalculate optional distances\n    const newOptionalDistances = [0, 0, 0, 0, 0, 0];\n    if (config.tryLimitWastedStats)\n      for (let stat: ArmorStat = 0; stat < 6; stat++) {\n        if (\n          newDistances[stat] == 0 &&\n          !config.minimumStatTiers[stat].fixed &&\n          adjustedStats[stat] < 200 &&\n          adjustedStats[stat] % 10 > 0\n        ) {\n          newOptionalDistances[stat] = 10 - (adjustedStats[stat] % 10);\n        }\n      }\n\n    const newDistanceSum =\n      newDistances[0] +\n      newDistances[1] +\n      newDistances[2] +\n      newDistances[3] +\n      newDistances[4] +\n      newDistances[5];\n    const newTotalOptionalDistances = newOptionalDistances.reduce((a, b) => a + b, 0);\n\n    if (newDistanceSum > 10 * 5 + 3 * tmpArtificeCount) continue;\n\n    let result: StatModifier[] | null;\n    if (newDistanceSum == 0 && newTotalOptionalDistances == 0) result = [];\n    else\n      result = get_mods_precalc(\n        config,\n        newDistances,\n        newOptionalDistances,\n        tmpArtificeCount,\n        config.modOptimizationStrategy\n      );\n\n    if (result !== null) {\n      // Perform Tier Availability Testing with this class item\n      performTierAvailabilityTesting(\n        runtime,\n        config,\n        adjustedStats,\n        newDistances,\n        tmpArtificeCount\n      );\n\n      // This may lead to issues later.\n      // The performTierAvailabilityTesting must be executed for each class item.\n      // Found a working combination - return immediately with this class item\n      if (finalResult instanceof Array && finalResult.length == 0) {\n        finalResult = tryCreateArmorSetWithClassItem(\n          runtime,\n          config,\n          helmet,\n          gauntlet,\n          chest,\n          leg,\n          classItem,\n          result,\n          adjustedStats,\n          adjustedStatsWithoutMods,\n          newDistances,\n          tmpArtificeCount,\n          doNotOutput\n        );\n      }\n    }\n  }\n\n  return finalResult;\n}\n\n// region Tier Availability Testing\nfunction performTierAvailabilityTesting(\n  runtime: any,\n  config: BuildConfiguration,\n  stats: number[],\n  distances: number[],\n  availableArtificeCount: number\n): void {\n  for (let stat = 0; stat < 6; stat++) {\n    if (runtime.maximumPossibleTiers[stat] < stats[stat]) {\n      runtime.maximumPossibleTiers[stat] = stats[stat];\n    }\n\n    if (stats[stat] >= 200) continue; // Already at max value, no need to test\n\n    const minTier = config.minimumStatTiers[stat as ArmorStat].value * 10;\n\n    // Binary search to find maximum possible value\n    let low = Math.max(runtime.maximumPossibleTiers[stat], minTier);\n    let high = 200;\n\n    while (low < high) {\n      // Try middle value, rounded to nearest 10 for tier optimization\n      const mid = Math.min(200, Math.ceil((low + high) / 2));\n\n      if (stats[stat] >= mid) {\n        // We can already reach this value naturally\n        low = mid + 1;\n        continue;\n      }\n\n      // Calculate distance needed to reach this value\n      const v = 10 - (stats[stat] % 10);\n      const testDistances = [...distances];\n      testDistances[stat] = Math.max(v < 10 ? v : 0, mid - stats[stat]);\n\n      // Check if this value is achievable with mods\n      const mods = get_mods_precalc(\n        config,\n        testDistances,\n        [0, 0, 0, 0, 0, 0],\n        availableArtificeCount,\n        ModOptimizationStrategy.None\n      );\n\n      if (mods != null) {\n        // This value is achievable, try higher\n        low = mid + 1;\n        runtime.maximumPossibleTiers[stat] = mid;\n      } else {\n        // This value is not achievable, try lower\n        high = mid - 1;\n      }\n    }\n\n    // Verify the final value\n    if (low > runtime.maximumPossibleTiers[stat] && low <= 200) {\n      const v = 10 - (stats[stat] % 10);\n      const testDistances = [...distances];\n      testDistances[stat] = Math.max(v < 10 ? v : 0, low - stats[stat]);\n      const mods = get_mods_precalc(\n        config,\n        testDistances,\n        [0, 0, 0, 0, 0, 0],\n        availableArtificeCount,\n        ModOptimizationStrategy.None\n      );\n      if (mods != null) {\n        runtime.maximumPossibleTiers[stat] = low;\n      }\n    }\n  }\n}\n\nfunction tryCreateArmorSetWithClassItem(\n  runtime: any,\n  config: BuildConfiguration,\n  helmet: IPermutatorArmor,\n  gauntlet: IPermutatorArmor,\n  chest: IPermutatorArmor,\n  leg: IPermutatorArmor,\n  classItem: IPermutatorArmor,\n  result: StatModifier[],\n  adjustedStats: number[],\n  statsWithoutMods: number[],\n  newDistances: number[],\n  availableArtificeCount: number,\n  doNotOutput: boolean\n): IPermutatorArmorSet | never[] {\n  if (doNotOutput) return [];\n\n  const usedArtifice = result.filter((d: StatModifier) => 0 == d % 3);\n  const usedMods = result.filter((d: StatModifier) => 0 != d % 3);\n\n  // Apply mods to stats for final calculation\n  const finalStats = [...adjustedStats];\n  for (let statModifier of result) {\n    const stat = Math.floor((statModifier - 1) / 3);\n    finalStats[stat] += STAT_MOD_VALUES[statModifier][1];\n  }\n\n  const waste1 = getWaste(finalStats);\n  if (config.onlyShowResultsWithNoWastedStats && waste1 > 0) return [];\n\n  return createArmorSet(\n    helmet,\n    gauntlet,\n    chest,\n    leg,\n    classItem,\n    usedArtifice,\n    usedMods,\n    finalStats,\n    statsWithoutMods\n  );\n}\n\n// region Mod Calculation Functions\nfunction get_mods_precalc(\n  config: BuildConfiguration,\n  distances: number[],\n  optionalDistances: number[],\n  availableArtificeCount: number,\n  optimize: ModOptimizationStrategy = ModOptimizationStrategy.None\n): StatModifier[] | null {\n  // check distances <= 65\n  const totalDistance =\n    distances[0] + distances[1] + distances[2] + distances[3] + distances[4] + distances[5];\n  if (totalDistance > 65) return null;\n\n  if (totalDistance == 0 && optionalDistances.every((d) => d == 0)) {\n    // no mods needed, return empty array\n    return [];\n  }\n\n  const modCombinations = config.onlyShowResultsWithNoWastedStats\n    ? precalculatedZeroWasteModCombinations\n    : precalculatedModCombinations;\n\n  // grab the precalculated mods for the distances\n  const precalculatedMods = [\n    modCombinations[distances[0]] || [[0, 0, 0, 0]], // mobility\n    modCombinations[distances[1]] || [[0, 0, 0, 0]], // resilience\n    modCombinations[distances[2]] || [[0, 0, 0, 0]], // recovery\n    modCombinations[distances[3]] || [[0, 0, 0, 0]], // discipline\n    modCombinations[distances[4]] || [[0, 0, 0, 0]], // intellect\n    modCombinations[distances[5]] || [[0, 0, 0, 0]], // strength\n  ];\n\n  // we handle locked exact stats as zero-waste in terms  of the mod selection\n  for (let i = 0; i < 6; i++) {\n    if (config.minimumStatTiers[i as ArmorStat].fixed && distances[i] > 0) {\n      precalculatedMods[i] = precalculatedZeroWasteModCombinations[distances[i]] || [[0, 0, 0, 0]];\n      // and now also remove every solution with >= 10 points of \"overshoot\"\n      precalculatedMods[i] = precalculatedMods[i].filter((d) => d[3] - distances[i] < 10);\n    }\n  }\n\n  // add optional distances to the precalculated mods\n  const limit = 3;\n  for (let i = 0; i < optionalDistances.length; i++) {\n    if (optionalDistances[i] > 0) {\n      const additionalCombosA = modCombinations[optionalDistances[i]].filter(\n        (d) =>\n          d[2] == 0 && // disallow major mods\n          d[3] % 10 > 0 && // we do not want to add exact stat tiers\n          (optionalDistances[i] + d[3]) % 10 < optionalDistances[i] // and the changes must have less waste than before\n      );\n      //(d) => d[3] % 10 > 0);\n      if (additionalCombosA != null) {\n        precalculatedMods[i] = additionalCombosA.slice(0, limit).concat(precalculatedMods[i]);\n      }\n    }\n  }\n\n  for (let i = 0; i < 6; i++) {\n    precalculatedMods[i] = precalculatedMods[i].filter(\n      (d) =>\n        d[2] <= config.statModLimits.maxMajorMods && d[1] + d[2] <= config.statModLimits.maxMods\n    );\n\n    if (precalculatedMods[i] == null || precalculatedMods[i].length == 0) {\n      // if there are no mods for this distance, we can not calculate anything\n      return null;\n    }\n  }\n\n  let bestMods: any = null;\n  let bestScore = 1000;\n\n  function score(entries: [number, number, number, number][]) {\n    if (optimize == ModOptimizationStrategy.ReduceUsedModSockets) {\n      const n1 = entries.reduce((a, b) => a + b[1] + b[2], 0);\n      return n1;\n    } else if (optimize == ModOptimizationStrategy.ReduceUsedModPoints) {\n      return entries.reduce((a, b, currentIndex) => a + 1 * b[1] + 3 * b[2], 0);\n    }\n    return entries.reduce((a, b) => a + b[3], 0);\n  }\n\n  function validate(entries: [number, number, number, number][]): boolean {\n    // sum up the stats\n    const sum = entries.reduce(\n      (a, b, i) => [a[0] + b[0], a[1] + b[1], a[2] + b[2], a[3] + b[3] - distances[i]],\n      [0, 0, 0, 0]\n    );\n\n    if (score(entries) > bestScore) return false;\n    if (sum[0] > availableArtificeCount) return false;\n    if (sum[1] + sum[2] > config.statModLimits.maxMods) return false;\n    if (sum[2] > config.statModLimits.maxMajorMods) return false;\n    if (sum[3] < 0) return false;\n\n    return true;\n  }\n\n  const mustExecuteOptimization = totalDistance > 0 && optimize != ModOptimizationStrategy.None;\n  root: for (let mobility of precalculatedMods[0]) {\n    if (!validate([mobility])) continue;\n    for (let resilience of precalculatedMods[1]) {\n      if (!validate([mobility, resilience])) continue;\n      for (let recovery of precalculatedMods[2]) {\n        if (!validate([mobility, resilience, recovery])) continue;\n        if (mustExecuteOptimization && score([mobility, resilience, recovery]) >= bestScore)\n          continue;\n        for (let discipline of precalculatedMods[3]) {\n          if (!validate([mobility, resilience, recovery, discipline])) continue;\n          if (\n            mustExecuteOptimization &&\n            score([mobility, resilience, recovery, discipline]) >= bestScore\n          )\n            continue;\n          for (let intellect of precalculatedMods[4]) {\n            if (!validate([mobility, resilience, recovery, discipline, intellect])) continue;\n            if (\n              mustExecuteOptimization &&\n              score([mobility, resilience, recovery, discipline, intellect]) >= bestScore\n            )\n              continue;\n            inner: for (let strength of precalculatedMods[5]) {\n              let mods = [mobility, resilience, recovery, discipline, intellect, strength];\n\n              if (!validate(mods)) continue;\n\n              // Fill optional distances\n              for (let m = 0; m < 6; m++)\n                if (optionalDistances[m] > 0 && mods[m][3] == 0 && bestMods != null) continue inner;\n\n              let scoreVal = score(mods);\n              if (scoreVal < bestScore) {\n                bestScore = scoreVal;\n                bestMods = mods;\n                if (!mustExecuteOptimization) {\n                  break root;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  if (bestMods === null) return null;\n\n  const usedMods = [];\n  for (let i = 0; i < bestMods.length; i++) {\n    for (let n = 0; n < bestMods[i][0]; n++) usedMods.push(3 + 3 * i);\n    for (let n = 0; n < bestMods[i][1]; n++) usedMods.push(1 + 3 * i);\n    for (let n = 0; n < bestMods[i][2]; n++) usedMods.push(2 + 3 * i);\n  }\n\n  return usedMods;\n}\n\nexport function getSkillTier(stats: number[]) {\n  return (\n    Math.floor(Math.min(200, stats[ArmorStat.StatWeapon]) / 10) +\n    Math.floor(Math.min(200, stats[ArmorStat.StatHealth]) / 10) +\n    Math.floor(Math.min(200, stats[ArmorStat.StatClass]) / 10) +\n    Math.floor(Math.min(200, stats[ArmorStat.StatGrenade]) / 10) +\n    Math.floor(Math.min(200, stats[ArmorStat.StatSuper]) / 10) +\n    Math.floor(Math.min(200, stats[ArmorStat.StatMelee]) / 10)\n  );\n}\n\nexport function getWaste(stats: number[]) {\n  return (\n    Math.max(0, stats[ArmorStat.StatWeapon] - 200) +\n    Math.max(0, stats[ArmorStat.StatHealth] - 200) +\n    Math.max(0, stats[ArmorStat.StatClass] - 200) +\n    Math.max(0, stats[ArmorStat.StatGrenade] - 200) +\n    Math.max(0, stats[ArmorStat.StatSuper] - 200) +\n    Math.max(0, stats[ArmorStat.StatMelee] - 200)\n  );\n}\n// endregion Core Calculation Functions\n","export const environment = {\n  \"version\": \"2.9.6\",\n  \"revision\": \"8d0cb90\",\n  \"production\": true,\n  \"beta\": false,\n  \"canary\": false,\n  \"apiKey\": \"9415df8eff46408aa9c0d51e4d69b94f\",\n  \"clientId\": \"37252\",\n  \"client_secret\": \"KnVcJPWr7C5y0loOfBoKSyQ-vWXR0JICrgb1aJLsLgg\",\n  \"offlineMode\": false,\n  \"highlight_project_id\": \"2d1yrx4d\",\n  \"featureFlags\": {\n    \"enableModslotLimitation\": true,\n    \"enableZeroWaste\": true,\n    \"enableGuardianGamesFeatures\": false\n  }\n};","import { isEqual as _isEqual } from \"lodash\";\n\nexport function getDifferences<T extends object>(\n  object1: T,\n  object2: T\n): {\n  changes: {\n    [key in keyof T]?: {\n      from: string;\n      to: string;\n    };\n  };\n} {\n  let differences: {\n    [key in keyof T]?: {\n      from: string;\n      to: string;\n    };\n  } = {};\n\n  // Loop through each key and compare the values\n  Object.keys(object1).forEach((key) => {\n    const typedKey = key as keyof T; // Type assertion for strict key typing\n    if (!_isEqual(object1[typedKey], object2[typedKey])) {\n      differences[typedKey] = {\n        from: JSON.stringify(object1[typedKey]),\n        to: JSON.stringify(object2[typedKey]),\n      };\n    }\n  });\n\n  return { changes: differences };\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { BehaviorSubject, Observable } from \"rxjs\";\nimport { isEqual as _isEqual } from \"lodash\";\nimport { getDifferences } from \"../data/commonFunctions\";\n\nexport interface Status {\n  cancelledCalculation: boolean;\n  calculatingPermutations: boolean;\n  calculatingResults: boolean;\n  updatingResultsTable: boolean;\n  updatingManifest: boolean;\n  updatingInventory: boolean;\n  updatingVendors: boolean;\n\n  apiError: boolean;\n  authError: boolean;\n}\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class StatusProviderService {\n  private __status: Status = {\n    cancelledCalculation: false,\n    calculatingResults: false,\n    calculatingPermutations: false,\n    updatingResultsTable: false,\n    updatingInventory: false,\n    updatingManifest: false,\n    updatingVendors: false,\n\n    apiError: false, // in case the api is inaccesible or disabled\n    authError: false, // in case the login tokens are invalid and can not be refreshed\n  };\n\n  private __last_Status: Status = structuredClone(this.__status);\n\n  private _status: BehaviorSubject<Status>;\n  public readonly status: Observable<Status>;\n\n  constructor() {\n    this._status = new BehaviorSubject<Status>(this.__status);\n    this.status = this._status.asObservable();\n  }\n\n  getStatus() {\n    return this.__status;\n  }\n\n  modifyStatus(cb: (status: Status) => void) {\n    cb(this.__status);\n    if (!_isEqual(this.__last_Status, this.__status))\n      console.debug(\"Status changed\", getDifferences(this.__last_Status, this.__status));\n    this.__last_Status = structuredClone(this.__status);\n    this._status.next(this.__status);\n  }\n\n  setApiError() {\n    if (this.__status.apiError) return;\n    this.modifyStatus((status) => {\n      status.apiError = true;\n    });\n  }\n\n  clearApiError() {\n    if (!this.__status.apiError) return;\n    this.modifyStatus((status) => {\n      status.apiError = false;\n    });\n  }\n\n  setAuthError() {\n    if (this.__status.authError) return;\n    this.modifyStatus((status) => {\n      status.authError = true;\n    });\n  }\n\n  clearAuthError() {\n    if (!this.__status.authError) return;\n    this.modifyStatus((status) => {\n      status.authError = false;\n    });\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { environment } from \"../../environments/environment\";\nimport { Router } from \"@angular/router\";\nimport { Observable, ReplaySubject } from \"rxjs\";\nimport { StatusProviderService } from \"./status-provider.service\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class AuthService {\n  private _logoutEvent: ReplaySubject<null>;\n  public readonly logoutEvent: Observable<null>;\n\n  constructor(\n    private http: HttpClient,\n    private router: Router,\n    private status: StatusProviderService\n  ) {\n    this._logoutEvent = new ReplaySubject(1);\n    this.logoutEvent = this._logoutEvent.asObservable();\n  }\n\n  get refreshTokenExpired() {\n    return this.refreshTokenExpiringAt < Date.now();\n  }\n\n  async autoRegenerateTokens() {\n    const timing = 1000 * 3600 * 0.5; // Refresh every half hour\n    console.debug(\"Refresh Token\", {\n      tokenInfo: {\n        /*refreshToken: this.refreshToken,*/\n        refreshTokenExpiringAt: this.refreshTokenExpiringAt,\n        lastRefresh: this.lastRefresh,\n        dateNow: Date.now(),\n      },\n    });\n\n    if (\n      this.refreshToken &&\n      Date.now() < this.refreshTokenExpiringAt &&\n      Date.now() > this.lastRefresh + timing\n    ) {\n      return await this.generateTokens(true);\n    }\n    return true;\n  }\n\n  async getCurrentMembershipData(): Promise<any> {\n    const item = JSON.parse(localStorage.getItem(\"auth-membershipInfo\") || \"null\");\n    if (item == null) {\n      const currentMembershipData = this.getCurrentMembershipData();\n      localStorage.setItem(\"auth-membershipInfo\", JSON.stringify(currentMembershipData));\n      return currentMembershipData;\n    } else return item;\n  }\n\n  async generateTokens(refresh = false): Promise<boolean> {\n    console.info(\"Generate auth tokens\", \"refresh based on refresh_token:\", refresh);\n    const CLIENT_ID = environment.clientId;\n    const CLIENT_SECRET = environment.client_secret;\n    const grant_type = \"authorization_code\";\n    const TOKEN = this.authCode;\n\n    let body = `grant_type=${grant_type}&code=${TOKEN}&client_id=${CLIENT_ID}&client_secret=${CLIENT_SECRET}`;\n    if (refresh) {\n      body = `grant_type=refresh_token&refresh_token=${this.refreshToken}&client_id=${CLIENT_ID}&client_secret=${CLIENT_SECRET}`;\n    }\n\n    return await this.http\n      .post<any>(`https://www.bungie.net/Platform/App/OAuth/Token/`, body, {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n          \"X-API-Key\": environment.apiKey,\n        },\n      })\n      .toPromise()\n      .then((value) => {\n        console.log(\"generateTokens\", value);\n        this.accessToken = value.access_token;\n        this.refreshToken = value.refresh_token;\n        this.refreshTokenExpiringAt = Date.now() + value.refresh_expires_in * 1000 - 10 * 1000;\n        this.lastRefresh = Date.now();\n        this.status.modifyStatus((s) => (s.authError = false));\n        return true;\n      })\n      .catch(async (err) => {\n        console.log({ err });\n        this.status.modifyStatus((s) => (s.authError = true));\n        return false;\n      });\n  }\n\n  isAuthenticated() {\n    return !!this.accessToken;\n  }\n\n  get authCode() {\n    return localStorage.getItem(\"code\");\n  }\n\n  set authCode(newCode: string | null) {\n    if (!newCode) {\n      console.info(\"Clearing auth code\");\n      localStorage.removeItem(\"code\");\n    } else {\n      console.info(\"Setting new auth code\");\n      localStorage.setItem(\"code\", \"\" + newCode);\n    }\n  }\n\n  get accessToken() {\n    return localStorage.getItem(\"accessToken\");\n  }\n\n  set accessToken(newCode: string | null) {\n    if (!newCode) {\n      console.info(\"Clearing access token\");\n      localStorage.removeItem(\"accessToken\");\n    } else {\n      console.info(\"Setting new access token\");\n      localStorage.setItem(\"accessToken\", \"\" + newCode);\n    }\n  }\n\n  get refreshToken() {\n    return localStorage.getItem(\"refreshToken\");\n  }\n\n  set refreshToken(newCode: string | null) {\n    if (!newCode) {\n      console.info(\"Clearing refresh token\");\n      localStorage.removeItem(\"refreshToken\");\n    } else {\n      console.info(\"Setting new refresh token\");\n      localStorage.setItem(\"refreshToken\", \"\" + newCode);\n    }\n  }\n\n  get refreshTokenExpiringAt(): number {\n    let l = localStorage.getItem(\"refreshTokenExpiringAt\") || \"0\";\n    return l ? Number.parseInt(l) : 0;\n  }\n\n  set refreshTokenExpiringAt(newCode: number | null) {\n    if (!newCode) {\n      console.info(\"Clearing refresh token\");\n      localStorage.removeItem(\"refreshTokenExpiringAt\");\n    } else {\n      console.info(\"Setting new refresh token\");\n      localStorage.setItem(\"refreshTokenExpiringAt\", \"\" + newCode);\n    }\n  }\n\n  get lastRefresh(): number {\n    let l = localStorage.getItem(\"lastRefresh\") || \"0\";\n    return l ? Number.parseInt(l) : 0;\n  }\n\n  set lastRefresh(newCode: number | null) {\n    if (!newCode) localStorage.removeItem(\"lastRefresh\");\n    else localStorage.setItem(\"lastRefresh\", newCode.toString());\n  }\n\n  clearManifestInfo() {\n    localStorage.removeItem(\"LastArmorUpdate\");\n    localStorage.removeItem(\"LastManifestUpdate\");\n  }\n\n  private clearLoginInfo() {\n    this.lastRefresh = null;\n    this.refreshTokenExpiringAt = null;\n    this.authCode = null;\n    this.accessToken = null;\n    this.refreshToken = null;\n  }\n\n  async logout() {\n    if (environment.offlineMode) {\n      console.debug(\"Offline mode, skipping logout\");\n      return;\n    }\n    try {\n      this._logoutEvent.next(null);\n      this.clearManifestInfo();\n      this.clearLoginInfo();\n    } finally {\n      await this.router.navigate([\"login\"]);\n    }\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { AuthService } from \"../../services/auth.service\";\n\n@Component({\n  selector: \"app-handle-bungie-login\",\n  templateUrl: \"./handle-bungie-login.component.html\",\n  styleUrls: [\"./handle-bungie-login.component.css\"],\n})\nexport class HandleBungieLoginComponent implements OnInit {\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private router: Router,\n    private loginService: AuthService\n  ) {}\n\n  ngOnInit(): void {\n    this.activatedRoute.queryParams.subscribe(async (params) => {\n      let code = params[\"code\"];\n      if (window.location.search.indexOf(\"?code=\") > -1) code = window.location.search.substr(6);\n\n      if (!code) return;\n\n      console.info({ code });\n\n      this.loginService.authCode = code;\n\n      console.info(\"Generate tokens with the new code\");\n      await this.loginService.generateTokens();\n\n      console.info(\"Now navigate to /\");\n      await this.router.navigate([\"/\"]);\n    });\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<mat-toolbar class=\"canary-warning\" color=\"primary\" *ngIf=\"is_canary\">\n  <span class=\"header-spacer\"></span>\n  You are using the <b>&nbsp;unstable&nbsp;</b> canary build. Some features may be unfinished or\n  vanish. Please report any issues you encounter.\n  <span class=\"header-spacer\"></span>\n</mat-toolbar>\n\n<mat-toolbar class=\"bungie-day\" color=\"accent\" style=\"display: none\">\n  <span class=\"header-spacer\"></span>\n\n  <img fxHide.xs src=\"../assets/bungie_foundation.png\" class=\"donordrive\" />\n  <a\n    href=\"https://tiltify.com/@mijago/d2armorpicker\"\n    target=\"_blank\"\n    title=\"Support the Bungie Foundation!\">\n    Please support us at the Bungie Foundation 2024 ❤\n  </a>\n  <span class=\"header-spacer\"></span>\n</mat-toolbar>\n\n<app-handle-bungie-login></app-handle-bungie-login>\n<router-outlet></router-outlet>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component } from \"@angular/core\";\nimport { environment } from \"../environments/environment\";\n\n@Component({\n  selector: \"app-root\",\n  templateUrl: \"./app.component.html\",\n  styleUrls: [\"./app.component.scss\"],\n})\nexport class AppComponent {\n  title = \"D2ArmorPicker\";\n  is_beta = environment.beta;\n  is_canary = environment.canary;\n\n  constructor() {\n    console.log(\"PRODUCTION?\", environment.production);\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div class=\"login-container\">\n  <mat-card class=\"login-card\">\n    <mat-card-header>\n      <div mat-card-avatar class=\"header-image\"></div>\n      <mat-card-title>D2 Armor Picker</mat-card-title>\n      <mat-card-subtitle\n        >Find the best possible armor combination for your desired stats.</mat-card-subtitle\n      >\n    </mat-card-header>\n\n    <mat-card-content>\n      <div\n        class=\"carousel-container\"\n        (mouseenter)=\"pauseCarousel()\"\n        (mouseleave)=\"resumeCarousel()\">\n        <div class=\"carousel-track\" [style.transform]=\"'translateX(' + -currentSlide * 100 + '%)'\">\n          <div class=\"carousel-slide\" *ngFor=\"let item of carouselItems\">\n            <img [src]=\"item.image\" [alt]=\"item.title\" class=\"carousel-image\" />\n            <div class=\"carousel-caption\">\n              <h3>{{ item.title }}</h3>\n              <p>{{ item.subtitle }}</p>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"carousel-indicators\">\n          <button\n            *ngFor=\"let item of carouselItems; let i = index\"\n            [class.active]=\"i === currentSlide\"\n            (click)=\"goToSlide(i)\"\n            class=\"indicator\">\n          </button>\n        </div>\n      </div>\n\n      <div class=\"login-actions\">\n        <button mat-raised-button color=\"primary\" class=\"login-button\" (click)=\"startLogin()\">\n          Sign in with Bungie\n        </button>\n      </div>\n    </mat-card-content>\n  </mat-card>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { environment } from \"../../../environments/environment\";\n\n@Component({\n  selector: \"app-login\",\n  templateUrl: \"./login.component.html\",\n  styleUrls: [\"./login.component.css\"],\n})\nexport class LoginComponent implements OnInit, OnDestroy {\n  currentSlide = 0;\n  private autoScrollInterval: any;\n  private readonly autoScrollDelay = 4000; // 4 Sekunden\n\n  carouselItems = [\n    {\n      image: \"/assets/carousel/stat-select.png\",\n      title: \"Stat Optimization\",\n      subtitle: \"Optimize your Guardian's stats as you see fit.\",\n    },\n    {\n      image: \"/assets/carousel/result-overview.png\",\n      title: \"Result Overview\",\n      subtitle: \"Get a clear overview of the possible results with your gear.\",\n    },\n    {\n      image: \"/assets/carousel/result-detail.png\",\n      title: \"Detailed Breakdown\",\n      subtitle:\n        \"See a detailed breakdown of how a specific combination can reach your desired stats.\",\n    },\n  ];\n\n  constructor() {}\n\n  ngOnInit() {\n    this.startAutoScroll();\n  }\n\n  ngOnDestroy() {\n    this.stopAutoScroll();\n  }\n\n  startAutoScroll() {\n    this.autoScrollInterval = setInterval(() => {\n      this.nextSlide();\n    }, this.autoScrollDelay);\n  }\n\n  stopAutoScroll() {\n    if (this.autoScrollInterval) {\n      clearInterval(this.autoScrollInterval);\n      this.autoScrollInterval = null;\n    }\n  }\n\n  pauseCarousel() {\n    this.stopAutoScroll();\n  }\n\n  resumeCarousel() {\n    this.startAutoScroll();\n  }\n\n  nextSlide() {\n    this.currentSlide = (this.currentSlide + 1) % this.carouselItems.length;\n  }\n\n  goToSlide(index: number) {\n    this.currentSlide = index;\n  }\n\n  startLogin() {\n    window.location.href = `https://www.bungie.net/en/OAuth/Authorize?client_id=${environment.clientId}&response_type=code&reauth=true`;\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from \"@angular/router\";\nimport { Observable } from \"rxjs\";\nimport { AuthService } from \"../services/auth.service\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class AuthenticatedGuard {\n  constructor(\n    public auth: AuthService,\n    public router: Router\n  ) {}\n  canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\n    if (!this.auth.isAuthenticated()) {\n      this.router.navigate([\"login\"]);\n      return false;\n    }\n    return true;\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from \"@angular/router\";\nimport { Observable } from \"rxjs\";\nimport { AuthService } from \"../services/auth.service\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class NotAuthenticatedGuard {\n  constructor(\n    public auth: AuthService,\n    public router: Router\n  ) {}\n  canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\n    if (this.auth.isAuthenticated()) {\n      this.router.navigate([\"/\"]);\n      return false;\n    }\n    return true;\n  }\n}\n","export interface StatModLimits {\n  maxMods: number; // total mods allowed (0–5)\n  maxMajorMods: number; // major mods allowed (0–maxMods)\n}\n/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { ArmorPerkOrSlot, ArmorStat } from \"./enum/armor-stat\";\nimport { ModOrAbility } from \"./enum/modOrAbility\";\nimport { EnumDictionary } from \"./types/EnumDictionary\";\n// import { ArmorSlot } from \"./enum/armor-slot\";\nimport { ModifierType } from \"./enum/modifierType\";\nimport { ModOptimizationStrategy } from \"./enum/mod-optimization-strategy\";\nimport { DestinyClass } from \"bungie-api-ts/destiny2/interfaces\";\n\nexport function getDefaultStatDict(\n  value: number\n): EnumDictionary<ArmorStat, FixableSelection<number>> {\n  return {\n    [ArmorStat.StatWeapon]: { fixed: false, value: value },\n    [ArmorStat.StatHealth]: { fixed: false, value: value },\n    [ArmorStat.StatClass]: { fixed: false, value: value },\n    [ArmorStat.StatGrenade]: { fixed: false, value: value },\n    [ArmorStat.StatSuper]: { fixed: false, value: value },\n    [ArmorStat.StatMelee]: { fixed: false, value: value },\n  };\n}\n\nexport interface FixableSelection<T> {\n  value: T;\n  fixed: boolean;\n}\n\nexport interface ArmorRequirementGearSet {\n  gearSetHash: number;\n}\nexport interface ArmorRequirementPerk {\n  perk: ArmorPerkOrSlot;\n}\nexport type ArmorRequirement = ArmorRequirementGearSet | ArmorRequirementPerk;\n\nexport class BuildConfiguration {\n  characterClass: DestinyClass = DestinyClass.Unknown;\n\n  // Add constant +1 strength\n  addConstent1Health = false;\n\n  assumeClassItemIsArtifice = false;\n  assumeEveryLegendaryIsArtifice = false;\n  assumeEveryExoticIsArtifice = false;\n\n  // contains a list of item instances IDs that shall not be used in builds\n  disabledItems: string[] = [];\n\n  minimumStatTiers: EnumDictionary<ArmorStat, FixableSelection<number>> = {\n    [ArmorStat.StatWeapon]: { fixed: false, value: 0 },\n    [ArmorStat.StatHealth]: { fixed: false, value: 0 },\n    [ArmorStat.StatClass]: { fixed: false, value: 0 },\n    [ArmorStat.StatGrenade]: { fixed: false, value: 0 },\n    [ArmorStat.StatSuper]: { fixed: false, value: 0 },\n    [ArmorStat.StatMelee]: { fixed: false, value: 0 },\n  };\n\n  // New compact stat mod limits (global, not per-slot)\n  statModLimits: StatModLimits = { maxMods: 5, maxMajorMods: 5 };\n\n  putArtificeMods = true;\n  useFotlArmor = true;\n  allowBlueArmorPieces = true;\n  // Allow armor 2.0, which is the legacy armor system\n  allowLegacyLegendaryArmor = true;\n  allowLegacyExoticArmor = true;\n  enforceFeaturedLegendaryArmor = false;\n  enforceFeaturedExoticArmor = false;\n\n  ignoreSunsetArmor = false;\n  includeVendorRolls = false;\n  includeCollectionRolls = false;\n  assumeLegendariesMasterworked = true;\n  assumeExoticsMasterworked = true;\n  onlyUseMasterworkedExotics = false;\n  onlyUseMasterworkedLegendaries = false;\n  modOptimizationStrategy: ModOptimizationStrategy = ModOptimizationStrategy.None;\n  limitParsedResults = true; // Limits the amount of results that are parsed. This looses some results, but solves memory issues\n  tryLimitWastedStats = false;\n  onlyShowResultsWithNoWastedStats = false;\n\n  selectedModElement: ModifierType = ModifierType.Stasis;\n\n  armorRequirements: ArmorRequirement[] = [];\n  enabledMods: ModOrAbility[] = [];\n  selectedExotics: number[] = [];\n  selectedExoticPerks: ArmorPerkOrSlot[] = [ArmorPerkOrSlot.Any, ArmorPerkOrSlot.Any];\n\n  static buildEmptyConfiguration(): BuildConfiguration {\n    return {\n      armorRequirements: [],\n      enabledMods: [],\n      disabledItems: [],\n      addConstent1Health: false,\n      assumeEveryLegendaryIsArtifice: false,\n      assumeEveryExoticIsArtifice: false,\n      assumeClassItemIsArtifice: false,\n      putArtificeMods: true,\n      useFotlArmor: false,\n      onlyUseMasterworkedExotics: false,\n      onlyUseMasterworkedLegendaries: false,\n      ignoreSunsetArmor: false,\n      includeCollectionRolls: false,\n      includeVendorRolls: false,\n      enforceFeaturedLegendaryArmor: false,\n      enforceFeaturedExoticArmor: false,\n      allowBlueArmorPieces: true,\n      allowLegacyLegendaryArmor: true,\n      allowLegacyExoticArmor: true,\n      assumeLegendariesMasterworked: true,\n      assumeExoticsMasterworked: true,\n      limitParsedResults: true,\n      modOptimizationStrategy: ModOptimizationStrategy.None,\n      tryLimitWastedStats: false,\n      onlyShowResultsWithNoWastedStats: false,\n      characterClass: DestinyClass.Unknown,\n      selectedModElement: ModifierType.Prismatic,\n      selectedExotics: [],\n      selectedExoticPerks: [ArmorPerkOrSlot.Any, ArmorPerkOrSlot.Any],\n      statModLimits: { maxMods: 5, maxMajorMods: 5 },\n      minimumStatTiers: getDefaultStatDict(0),\n    };\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Dexie from \"dexie\";\nimport { IManifestArmor } from \"./types/IManifestArmor\";\nimport { IInventoryArmor } from \"./types/IInventoryArmor\";\nimport { IManifestCollectible } from \"./types/IManifestCollectible\";\nimport { IVendorInfo } from \"./types/IVendorInfo\";\nimport { IVendorItemSubscreen } from \"./types/IVendorItemSubscreen\";\nimport { DestinyEquipableItemSetDefinition } from \"../services/bungie-api.service\";\nimport { DestinySandboxPerkDefinition } from \"bungie-api-ts/destiny2\";\n\nexport class Database extends Dexie {\n  manifestArmor!: Dexie.Table<IManifestArmor, number>;\n  inventoryArmor!: Dexie.Table<IInventoryArmor, number>;\n  equipableItemSetDefinition!: Dexie.Table<DestinyEquipableItemSetDefinition, number>;\n  sandboxPerkDefinition!: Dexie.Table<DestinySandboxPerkDefinition, number>;\n\n  // Maps the collectible hash to the inventory item hash\n  manifestCollectibles!: Dexie.Table<IManifestCollectible>;\n  // Maps the vendor id to the vendor name\n  vendorNames!: Dexie.Table<IVendorInfo, number>;\n  vendorItemSubscreen!: Dexie.Table<IVendorItemSubscreen, number>;\n\n  constructor() {\n    super(\"d2armorpicker-v2\");\n    this.version(31).stores({\n      manifestArmor: \"id++, hash, isExotic\",\n      inventoryArmor:\n        \"id++, itemInstanceId, isExotic, hash, name, masterworked, clazz, slot, source, gearSetHash, perk, [clazz+gearSetHash]\",\n      sandboxPerkDefinition: \"id++, hash\",\n      equipableItemSetDefinition: \"id++, hash, setPerks, setItems\",\n      manifestCollectibles: \"id++, hash\",\n      vendorNames: \"id++, vendorId\",\n      vendorItemSubscreen: \"itemHash\",\n    });\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport enum ChangelogEntryType {\n  ADD,\n  REMOVE,\n  MODIFIED,\n}\n\nexport interface ChangelogEntry {\n  type: ChangelogEntryType;\n  text: string;\n  issues?: string[] | undefined;\n}\n\nexport const CHANGELOG_DATA: {\n  version: string;\n  date: string;\n  clearManifest?: boolean;\n  entries: ChangelogEntry[];\n}[] = [\n  {\n    version: \"2.9.6\",\n    date: \"July 31, 2025\",\n    clearManifest: true,\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added gearset selection feature, allowing users to easily select and combine gearsets.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Simplified the modslot configuration.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Simplified the mod cost selection. You now only select how many mods the app is allowed to place, as well as how many 'major' mods you want to use, and the app will do the rest of the work.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Drastically improved performance of the calculation algorithm, especially for large inventories.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Refactored code to remove unused functions and improve performance.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Ensured correct handling of class item artifice assumptions and perk updates.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.9.5\",\n    date: \"July 31, 2025\",\n    clearManifest: true,\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a new panel that shows the current status: initializing, calculating, or ready.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a 'Cancel Calculation' button to stop the calculation process.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Split the 'Enforce featured armor only' setting into two separate settings: one for legendary armor and one for exotic armor.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Split the 'Include legacy armor' setting into two separate settings: one for legendary armor and one for exotic armor.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Adapted the visible order of the stats so that they reflect the current state of the game.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Completely reworked the detection of masterworks on items.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"During calculation, the algorithm now combines the (exotic) class items with the same stats, no matter which perks they have. This reduces the calculation time drastically. Selecting perks will still enforce these (exotic) class items.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Adjusted mod costs.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed armor perk filtering.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixing a value to a constant will now work correctly again.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Modified the 'Assume class item is artifice' check to only work on Armor 2.0 items.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.9.4\",\n    date: \"July 24, 2025\",\n    clearManifest: true,\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added the 'Collective Psyche' armor perk to the available armor perks and updated related mappings.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Artifice assumptions now only affect legacy (armor 2.0) items. It will also be disabled when you choose not to allow legacy armor.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Armor perk seleciton now defaults to non-fixed. UI Rework follows in the future.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed the status chip to correctly display when an exotic is selected.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Improved handling for cases where no class items are available. Yes, there was a guardian who deleted every legendary class item. Hehe.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Adapted modslot costs for the new season. The costs are now 1 for minor and 3 for major mods.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.9.3\",\n    date: \"July 22, 2025\",\n    clearManifest: true,\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a new setting to enforce featured armor only. This will filter out all non-featured armor from the results.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Class item selection is now even more robust.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.9.2\",\n    date: \"July 18, 2025\",\n    clearManifest: true,\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added the 'Gearset' armor to the Modslot selection. This allows you to buildcraft with them. I'll add a nicer UI later.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a button to import the currently equipped subclass and fragments.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a filter to disable legacy armor.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a button to import the currently equipped exotic.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Updated the vendor API to support the new gearset armor perk.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Improved visibility of the text input for the stats. It now has a border and is more visible.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Minor bugfixes and performance improvements.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.9.1c\",\n    date: \"July 16, 2025\",\n    clearManifest: true,\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a new Card-based view mode. You can switch between the Card view and the old Table view.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Perk filter for exotic class items.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Reworked the input to be a slider to allow for more precise input of the stats between tiers. Usability may be improved, feedback is welcome! You can click the text on the right to set the value manually.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The table now shows a 'Total' column instead of the 'Tiers' column.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Renamed the stats.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Reworked the Algorithm to select and utilize class items.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Reworked the result table to correctly display the selected class item.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed the 'Move items to inventory' button. It still will only work when you have space in the inventory.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"Removed 3x100 and 4x100 buttons. We do not need these anymore. Maybe I add another feature like this later when a use case arises.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"Removed the setting to assume that all legendary class items are masterworked. This is included in the other masterwork assumption settings.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"Removed the Wasted Stats column.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"Removed now-invalid pages (Clustering, Theorizer, Investigator).\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"Removed old features that were not updated for a long time and are not used anymore.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"Removed the feature 'Replace the tier selection with text fields for exact stat values', as this is now the default behavior.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.7.4\",\n    date: \"March 15, 2025\",\n    clearManifest: false,\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed parent vendor logic. (nznaza)\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed order of exotics in armor selection to be alphabetical. (nznaza)\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Filter out vendor items that are reported by the API but can not be bought. (ciaran)\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.7.3\",\n    date: \"March 10, 2025\",\n    clearManifest: true,\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Added Overflowing Corruption as an armor perk option. (nznaza)\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Added None as an armor perk option. (nznaza)\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: 'Removed \"Ignore artifice slot in exotics, as None armor perk filter\" as None perk covers the same function. (nznaza)',\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed exotic class item showing with incorrect armor perk. (nznaza)\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Changed query when opening DIM to be more precise. (nznaza)\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed class item was not showing Armor Perk. (nznaza) Thanks Mojo\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.7.2\",\n    date: \"February 5, 2025\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Hotfix for the invalid data the BungieAPI is returning after the most recent Update. Thanks nznaza for fixing it!\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.7.1\",\n    date: \"January 29, 2025\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Some users could not log in properly due to crossplay issues. Thanks nznaza for fixing it!\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.7.0\",\n    date: \"December 09, 2024\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Some UI reworks. Please give us feedback whether you like it or not, so we can improve it further! Thanks nznaza!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Updated dependencies. Thanks nznaza!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Added error tacking so that we can better identify and fix issues. Thanks nznaza!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixes for the exotic class items and duplicate entries. Thanks nznaza!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Many - AND I REALLY MEAN MANY - internal code optimizations, both structural and logically. Thanks nznaza (this guardian deserves a medal)!\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.6.6\",\n    date: \"November 9, 2024\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed an issue that lead to duplicated collection roll entries, thus drastically impacting the performance of the application.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed the artifice modslot for the new season. Again.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"You will be logged when your auth token is invalid. We disabled this a while ago, but it is now re-enabled. Thanks to nznaza!\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.6.5\",\n    date: \"October 20, 2024\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Added 'Eido's Apprentice Perk'.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.6.4\",\n    date: \"July 30, 2024\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed an issue with the vendor api. Thanks to nznaza!\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.6.3\",\n    date: \"July 16, 2024\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Minor bugfix for issues with the manifest retrieval. This should fix issues where the items or characters are not loading correctly.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Updated the 'Download Results as JSON' button to reflect required changes for Final Shape.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.6.2\",\n    date: \"July 7, 2024\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added option to ignore existing exotic artifice slots. This is useful for the exotic class item.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Prismatic fragments are now correctly added to the DIM export.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The 'Ignored Items' section is now filtered by the selected class, grouped into armor slots and ordered by item type.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Minor change for the vendor API handling. Thanks nznaza!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Minor change for the manifest API handling.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Mostly minor bugfixes and code improvements.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.6.1\",\n    date: \"June 17, 2024\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Add exotic class items.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added Salvation's Edge Raid modslot and the Echoes of Glory perk.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Changed the way minor mods are displayed. Minor mods are now 25% smaller.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Corrected the description of Facet of Grace.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Added Whisper of Torment, as it now has a -10 in Discipline.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"Removed old armor modslots (and perks) that no longer exist or function.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.6.0\",\n    date: \"June 4, 2024\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added prismatic fragments.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a progressbar that shows the progress of the calculation process.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added an advanced setting to replace the stat selection boxes with text fields. While it does not look quite nice (as of now), it will allow you to select any value you want. Go get your 6x69 builds done (but don't forget, D2AP still does not add fragments by itself ....YET?!? BUT VERY SOON!)!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added an 'Assume every exotic has an artifice slot' setting in preparation for the changes in the upcoming expansion. Real artifice exotics should work out-of-the-box at the first day of the expansion, BUT it may happen that I need to update some internal structures. Have fun exploring your options, though!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added an 'Assume every legendary class item is an artifice armor' setting to allow finer control over the artifice armor assumption.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"You will no longer be logged out when the API is offline. The app will use the last known data until the API is back online.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Reworked how calculation workers are spawned, thus improving performance. Thanks to nznaza.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Improved Mod optimisation, leading in drastically reduced runtime when paired with 'Add mods to reduce waste'.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Improved 'Reduce Waste' optimisation. Smarter, better, faster, stronger.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Changing the configuration during a running calculation now restarts the calculation process. Outdated results are a thing of the past!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The amount of workers is now variable and depends on the workload at hand. This should help the insane armor hoarders to reduce the calculation time.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Prepared the vendor API for upcoming Bungie API changes. Thanks to nznaza.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Added 'Exotic Cipher' to the resource overview and removed legendary shards.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Modified the inventory update procedure to be more efficient. This may result in a few hiccups in the first stage - if you encounter any issues, please let me know!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Vendor data is now updated asynchronously. This means that the page will load faster, but the vendor data may be outdated for a few seconds.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The progress notifications are now color-coded and on the right. If there are multiple notifications, then they are stacked.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The display of the used mods is now color-coded to make it easier to distinguish between the different mod types in a single glance.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Locked locks are now red. Mainly because adisypher wouldn't stop asking.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Minor bugfixes and performance optimisation.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.5.4\",\n    date: \"April 10, 2024\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed a minor issue where the vendor api may be disabled and block the entire page.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.5.3\",\n    date: \"April 5, 2024\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Adapted the logic to parse the new Clarity data format. Thanks to ciarán!\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.5.2\",\n    date: \"November 29, 2023\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Split the 'Assume all items are masterworked' switch into 'legendary' and 'exotic' switches. Thanks to Mojo!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added the 'Ascendant Protector' Perk. Thanks to Mojo!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed artifice mods, again. Thanks to Mojo!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed 'Ghost Items' from the vendor import. Thanks to ciarán!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Updated the values and descriptions for Subclass Fragments. Thanks to ciarán!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Artifice Mods are now correctly added to the DIM export. Thanks to nznaza!\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.5.1\",\n    date: \"October 29, 2023\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added the 'Exhumed Excess' Perk. The modslot limitations are now ordered. Thanks to Mojo!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Added a solution for the stat distances 63, 64 and 65. You probably won't ever see it, as this is 'five artifice and five major mods'.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"'Fix wasted points' is now ignored for stats that are locked.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.5.0\",\n    date: \"October 14, 2023\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"The stat cooldowns and values are now automatically updated from the Clarity database. Thanks to ciarán!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"The new modslots/perks are now available in the dropdown.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The stat cooldowns now show icons. Thanks to ciarán!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The fragments now show their icons. Thanks to ciarán!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Minor internal updates for DIM references. Thanks to bhollis!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Improved the wasted stats selection, again!\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.4.2\",\n    date: \"July 11, 2023\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added the ability to use collection roll armor. This is disabled by default. Thanks to ciarán!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added the ability to use vendor armor, including Xur. This is disabled by default. Thanks to ciarán!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added the ability to select the optimisation strategy. You can now choose between 'Reduce waste', 'Reduce used mods' and 'Reduce used modslots'. The default is 'Reduce waste'.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Re-added the reduce wasted stats feature. It is now disabled by default. It is a bit slower and not really necessary for most people.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Zero Waste is no longer dependent on the 'Reduce wasted stats' setting. In fact, it practically overwrites it.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"Removed the 'Extra optimisation steps' setting. It is now always enabled.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.4.0\",\n    date: \"May 23, 2023\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Rewrote the internal algorithm. It makes stuff faster and gives better results.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a 'Perform further optimisation' setting. This will give you better results, but it will take a bit longer.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added Icons to the Stat Selection to make it easier to see which row is which perk.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added button to download results as JSON.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added Sonar Amplifier perk.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Enabled Modslot limitation.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Enabled the 3x100 and 4x100 buttons.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Enabled Zero-Waste mode.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Temporarily disabled 'Reduce Wasted Stats'. It will be back soon.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.3.2\",\n    date: \"May 7, 2023\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Feature: Added 'Guardian Games' class item type to the dropdown. \",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Reformatted every file in the codebase and improved the code workflow. You should not really see this on your end, but it will allow everyone to easily contribute to this open source project!\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.3.1\",\n    date: \"April 2, 2023\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Feature: Added the possibility to only show builds that contain an exotic.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added 'Root of Nightmares' modslot filter.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added 'Queen's Favor' seasonal perk filter.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added text indicating that only fragments that affect stats are shown.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed deprecated mods being sent when opening the loadout in DIM. Also adds artifice mods now.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed an issue where the tool did not put artifice mods on the class item if you forced the class item to be artifice.....\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed an issue where the default selection was the titan class, even if you had no titan characters.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.3.0\",\n    date: \"March 14, 2023\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Automatically adds artifice mods to your armor. This replaces minor and major mods where possible.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added the amount of used artifice mods to the result table overview (next to the mods). They are not calculated into the 'mod cost' column.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added new fragments, including Strand.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Adapted modslot cost of Resilience and Recovery mods.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Introduced more modules for asynchronous loading. This is more a speed improvement than a feature.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Reduced the maximum limit of reported results from 50,000 to 30,000. Note that D2AP still calculates every result, it just does not report them. This is a major speedup, and you usually should not even realize the change.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Increased the visual contrast of major mods in the results table. This means it is now easier to distinguish major from minor mods.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"Removed the elemental affinity completely.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"DISABLED the 'Zero Waste' feature. It will be re-enabled in the future.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"DISABLED the 'Modslot Limitation' feature. It will be re-enabled in the future.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.16\",\n    date: \"December 7, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added Ember of Torches (with -10 Discipline).\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added Retrofit mods (mobility and resilience).\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added armor perk 'Seraph Sensor Array' to the dropdown.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a Game2Give message. Let's support the little lights together!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed artifice modslot.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Membership data is cached longer to make things faster and to ease the Bungie API.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.15\",\n    date: \"October 18, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added FOTL masks.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.13\",\n    date: \"September 23, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added an advanced setting to replace the 'Tiers' column with a 'Max Tiers' column. This is adds the amount of open modslots to the column, but ignores mod limitations at the moment. A T32 build without mods will now show T37.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.12\",\n    date: \"September 11, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Changed the layout to force the settings (left) and results (right) to be next to each other. This means that the page is more mobile approachable. This is also the first step to a more flexible layout.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.11\",\n    date: \"September 10, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a display for your owned upgrade materials in the character overview.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a notification to warn you when you create a modslot limitation that yields no results. Note that this will not (yet) show invalid combinations over all armor, just for the given slot you selected it in.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Reduced size of exotic icons so that the left side will not grow on Titan class.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The 'Performance Optimisation' settings will now always re-enable after a reload to prevent your browser being stuck in a crash-loop. (This is for you, iOS Safari users)\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Changed wording of the 'Performance Optimisation' setting to prevent people from using it incorrectly.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.10\",\n    date: \"September 2, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Updated Artifice Modslot Hash after the most recent hotfix.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.9\",\n    date: \"September 1, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Tooltips do now not obstruct the clicks of stats. This fixes the iOS stat selection issue.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.8c\",\n    date: \"August 24, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The manifest is now (again) automatically updated on version changes. This fixes your artifice problems at the beginning of a new season.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Added subclass hashes for Arc. This means that it now transfers to DIM.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.8b\",\n    date: \"August 24, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed Artifice modslots. You might need to wait a bit, alternatively delete the database (Account section) or re-log.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.8a\",\n    date: \"August 23, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Updated grenade and melee cooldowns for arc.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.8\",\n    date: \"August 23, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added Arc 3.0 fragments.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed tooltip issues on iOS devices.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed an infinite loading issue.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.7\",\n    date: \"June 25, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a link to my Discord bot Crayon.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed an issue where a large number of stored configurations would drastically slow down the app.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.6\",\n    date: \"June 8, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed an issue where the elemental selection would not give the correct results under very specific conditions.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.5\",\n    date: \"June 7, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added all of the new ability cooldowns.\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Completely reworked the ability cooldown tooltips. They now show the difference to the currently selected tier.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.4\",\n    date: \"June 3, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed the export to DIM. Thanks to bhollis for the fix!\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The manifest now automatically updates when Bungie updated it too, except just after a fixed timespan.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.3\",\n    date: \"May 24, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added Solar 3.0\",\n        issues: [],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Adapted artifice armor to the new Season.\",\n        issues: [],\n      },\n    ],\n  },\n  {\n    version: \"2.2.2\",\n    date: \"Mar 9, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"See what mods do by hovering over their name.\",\n        issues: [\"D2AP-41\"],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added Vow of the Disciple armor.\",\n        issues: [\"D2AP-35\"],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added 'Uniformed Officer' armor.\",\n        issues: [\"D2AP-35\"],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed Scatter grenades being Tier 3 (were T4 before).\",\n        issues: [\"D2AP-39\"],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Changed the color of the login button.\",\n        issues: [\"D2AP-37\"],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"When a selected character class does not exist, the tool will now select the first available class as default.\",\n      },\n    ],\n  },\n  {\n    version: \"2.2.1\",\n    date: \"Feb 22, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a switch to select between Stasis and Void 3.0 fragments. Stasis is enabled per default to ensure backwards compatibility of saved configurations.\",\n        issues: [\"D2AP-10\"],\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a debug section to the (new) account settings page. The account settings page does not do much yet, I just wanted to deploy the debug functions.\",\n        issues: [\"D2AP-23\"],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Modified super cooldowns for Witch Queen.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Added a minor text to the exotic overview that explains that exotics not in the inventory are shown in grayscale. You can also no longer select those.\",\n        issues: [\"D2AP-17\"],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Minor changes in how the database behaves on logout. It now deletes the inventory when you log out, but still keeps the manifest.\",\n        issues: [\"D2AP-27\"],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Users are now logged out when the Bungie.Net API is down.\",\n        issues: [\"D2AP-34\"],\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed Charge Harvester and Echo of Persistence incorrectly reducing Discipline instead of recovery when used on a Warlock.\",\n      },\n    ],\n  },\n  {\n    version: \"2.2.0\",\n    date: \"Feb 09, 2022\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added the ability to select armor perks and 5th slots. Just like the elements you can optionally enforce it to be on a certain slot. Useful if you want to build Iron Banner armor or utilize artifice modslots.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added the ability to limit the available points on each armor item for stat mods. This allows you to limit the kind of stat mods that are usable. You can now say 'do not use major intellect mods'.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added the ability to lock stat tiers. Previously you could only set 'Use Tier 3 or higher', now you can optionally set 'Enforce Tier 3'. This is useful for example if you want to enforce T3 mobility on a Titan.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a summary of important configuration choices to the result header to improve readability.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a button to open the DIM Loadout Builder with the current settings.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added an option that forces the correct element on non-masterworked armor pieces. This is per default enabled.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added cooldowns for class abilities (Dodge, Barricade, Rift).\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added visual indicators for minor and major mods in the overview table. The whole visualization is also more compact now.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added visual cursor indicator to every clickable input, e.g. in the exotic, element and perk/mod selection.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a (very basic) item tooltip.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Show the required material cost for each item. Note that this ignores your class item.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a stat summary table to the stat detail view. This allows you to easily share a stat distribution with others.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added 'Clear this section' button to each configuration section.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added support for your class items. You won't see a lot of this, except when you use the slot and element limitation in specific ways.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Detailed information is now in expandable containers to improve readability.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Show the seasonal icon for every item too.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added info text to the table headers.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"The character selection now shows the existing characters - and their emblems too!\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added Discord and another Ko-Fi link. You can find them in the character selection.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a changelog popup right at the start of the page. It only appears when a new update occured. You can always trigger it by clicking the current version number.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Now utilizes three webworkers instead of one. The process is simple, but generally speeds up the results by a huge margin.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added an Armor Investigation tab for data scientists.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a sidenav for smaller devices and reworked the top menubar.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"The detailed result table now shows the perk of an selected item, if it has one. This also applies to class items, if necessary.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Hovering over exotics in the exotic selection now displays their perk description.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added an advanced setting to disable white, green and blue armor.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added an advanced setting to ignore sunset armor.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Changed the word 'Permutation' to 'Combination' wherever it has been used.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Clicking on a setting that is already set does not re-trigger the calculation now. For example, selecting T3 recovery when it is already at T3 now does nothing.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The default for all stats is now tier 0 instead of tier 1, to make it consistent with the clear buttons.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The default setting for 'ignore non masterworked elements' is now 'off'.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The 'time required' number now measures the time from before the webworkers are spawned until all webworkers are done. Previously it only monitored the time required INSIDE the webworker, so it may show slower times.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed the width of the 'Exotic' header in the results table. This means that it is now farther away from the 'Mobility' column.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Completely reworked the elemental affinity selection. Per default it is now not fixed to a certain armor slot, but using a toggle button you can simply do so again.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The results header now screams at you in bright red letters when no results are found.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The alternating rows of the results details table have now a lighter color to make it easier to read.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed ability cooldowns for melee and grenade at tier 7 and tier 8.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Cooldowns now are shown in MM:SS instead of plain seconds.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Completely rewrote the core logic of D2ArmorPicker for the changes mentioned above.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Exotics you do not have in your vault or inventory are now greyed out.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed an issue where exotics were not shown at your first login.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Changed the color of important buttons so that they are easier to read.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The icons of items in the results are now loaded asynchronous from their hashes. This saves a lot of memory, as I do not have to send two icon URLs for each item - for each result. I will further improve this in a later version.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Maximum table output is now limited to 50 results (instead of 200). It still defaults to 20.}\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Completely reworked the visuals of the changelog. It is now more pleasing to the eye.\",\n      },\n    ] as ChangelogEntry[],\n  },\n  {\n    version: \"2.1.4\",\n    date: \"Dec 29, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Item stats are now built from their plugs and InvestmentStats (in case of some exotics). This fixes potentially invalid item stats when you use mods like Powerful Friends or Protective Light. A big thanks to u/deangaudet for reminding me that the API also reports the plugs of an item.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Only save necessary item types of the manifest (namely mods and armor). Also, save twhe investmentStats now.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Sped up the item update step.\",\n      },\n    ],\n  },\n  {\n    version: \"2.1.3\",\n    date: \"Dec 16, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Added new stat cooldowns\",\n      },\n    ],\n  },\n  {\n    version: \"2.1.2\",\n    date: \"Dec 1, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The changelog is now in a scrollable box.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Changed buymeacoffee to a ko-fi link. This way we can keep the PayPal support!\",\n      },\n    ],\n  },\n  {\n    version: \"2.1.1\",\n    date: \"Nov 3, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"Removed the HALLOWEEN SPECIAL feature. Maybe something like this will return some day?\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added tooltip to the item icons in the detailed overview to show the name of the item.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed an issue where the list of exotics did not load at the first login.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Saved configurations now contain the current software version for future reference.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Minor code quality improvements\",\n      },\n    ],\n  },\n  {\n    version: \"2.1.0 (major)\",\n    date: \"Oct 29, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.REMOVE,\n        text: \"Completely removed V1 of the tool. If you had any problems with V2, you had over three months to report them.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"The stat selection now displays which stat tiers are added by stat mods (PF/RL) or stasis fragments in the configuration.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"You can now export (and import) individual configurations as well as all stored configurations at once.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a navigation bar to the title bar. On smaller screens it is replaced by two buttons in the character selection.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added more details to the last step of the 'What to do now?' section. It now lists the fragments and mods you selected.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Optimized code and reduced overall page size.\",\n      },\n    ],\n  },\n  {\n    version: \"2.0.16\",\n    date: \"Oct 26, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text:\n          \"Completely rewrote the core logic in order to fix the memory issues. \" +\n          \"The tool will now no longer crash when you have many armor items, but it's slightly slower than the previous approach. \" +\n          \"I tested it with 600 items - it works and does not crash, but takes up to a minute. \" +\n          \"Make sure to never get that much armor and to lock an exotic right away.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The rewrite also fixed the issue where the tool did not work in Safari, or more generally, on Mac and iPhone.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"The rewrite also fixed an issue where items could not be found when an result update was triggered while the inventory was updated.\",\n      },\n    ],\n  },\n  {\n    version: \"2.0.15\",\n    date: \"Oct 24, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Updated the visual display of the cluster page. It displays the stats in a better way now.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed an issue with login, where you were automatically logged in again and could not switch accounts.\",\n      },\n    ],\n  },\n  {\n    version: \"2.0.14\",\n    date: \"Oct 21, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Updated URLs to the mobility, resilience and recovery images, as Bungie decided to change their URLs in today's hotfix.\",\n      },\n    ],\n  },\n  {\n    version: \"2.0.13\",\n    date: \"Oct 20, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a chart to the armor clustering page, showing each clusters average stats.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Stats over 100 are now seen as wasted.\",\n      },\n    ],\n  },\n  {\n    version: \"2.0.12\",\n    date: \"Oct 18, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added an experimental armor clustering feature.\",\n      },\n    ],\n  },\n  {\n    version: \"2.0.11\",\n    date: \"Oct 13, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"HALLOWEEN SPECIAL! Added (temporary) filter for halloween masks! This will be removed after the event.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fix: Clear the results if you switch character and no possible permutations can be found.\",\n      },\n    ],\n  },\n  {\n    version: \"2.0.10\",\n    date: \"Oct 10, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added 'Equip Items' button to the detailed item overview.\",\n      },\n    ],\n  },\n  {\n    version: \"2.0.9\",\n    date: \"Oct 6, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a detailed description of the steps required to build a selected result.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added a button to disable all four armor pieces at once.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Fixed an issue where the permutations were not updated after 'Ignore armor elemental affinities on masterworked armor' was changed.\",\n      },\n    ],\n  },\n  {\n    version: \"2.0.8\",\n    date: \"Oct 5, 2021\",\n    entries: [\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added this changelog to the help page.\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Added 'Move to Inventory' button (beta).\",\n      },\n      {\n        type: ChangelogEntryType.ADD,\n        text: \"Split up 'Assume items are masterworked' into three settings: Class Items, Legendaries, Exotics\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"'Try to optimize wasted stats' is now active per default.\",\n      },\n      {\n        type: ChangelogEntryType.MODIFIED,\n        text: \"Introduced an item buffer in the results component to further reduce memory usage.\",\n      },\n    ],\n  },\n];\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component } from \"@angular/core\";\nimport { ChangelogService } from \"../../../../services/changelog.service\";\n\n@Component({\n  selector: \"app-changelog-dialog\",\n  templateUrl: \"./changelog-dialog.component.html\",\n  styleUrls: [\"./changelog-dialog.component.css\"],\n})\nexport class ChangelogDialogComponent {\n  constructor(public changelog: ChangelogService) {}\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<h2 mat-dialog-title class=\"title\"\n  >D2ArmorPicker Changelog for Version {{ changelog.changelogData[0].version }}</h2\n>\n<mat-dialog-content class=\"mat-typography\">\n  <div>\n    Hi! There has been a new version of D2ArmorPicker! The following list shows all the relevant\n    changes. Note that you can always look at the changelogs in the Help tab.\n  </div>\n\n  <app-changelog-list></app-changelog-list>\n</mat-dialog-content>\n<mat-dialog-actions align=\"end\">\n  <button [mat-dialog-close]=\"true\" cdkFocusInitial color=\"primary\" mat-raised-button\n    >Thanks, I saw it!</button\n  >\n</mat-dialog-actions>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { CHANGELOG_DATA } from \"../data/changelog\";\nimport { ChangelogDialogComponent } from \"../components/authenticated-v2/components/changelog-dialog/changelog-dialog.component\";\nimport { MatDialog } from \"@angular/material/dialog\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class ChangelogService {\n  constructor(public dialog: MatDialog) {}\n\n  setChangelogSeenFlag() {\n    return localStorage.setItem(\"last-changelog-version\", this.changelogData[0].version);\n  }\n\n  get lastViewedChangelog() {\n    return localStorage.getItem(\"last-changelog-version\");\n  }\n\n  get mustShowChangelog() {\n    return this.changelogData[0].version !== this.lastViewedChangelog;\n  }\n\n  get wipeManifest() {\n    return (\n      this.changelogData[0].version !== this.lastViewedChangelog &&\n      (this.changelogData[0].clearManifest ?? false)\n    );\n  }\n\n  get changelogData() {\n    return CHANGELOG_DATA;\n  }\n\n  openChangelogDialog() {\n    const dialogRef = this.dialog.open(ChangelogDialogComponent);\n    dialogRef.afterClosed().subscribe((result) => {\n      this.setChangelogSeenFlag();\n    });\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { AuthService } from \"./auth.service\";\nimport { Database } from \"../data/database\";\nimport { IManifestArmor } from \"../data/types/IManifestArmor\";\nimport { environment } from \"../../environments/environment\";\nimport { ChangelogService } from \"./changelog.service\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class DatabaseService extends Database {\n  constructor(\n    private auth: AuthService,\n    private changelog: ChangelogService\n  ) {\n    super();\n\n    if (this.changelog.wipeManifest) {\n      console.log(\"Wiping manifest due to changelog request\");\n      this.auth.clearManifestInfo();\n    }\n\n    this.version(this.verno).upgrade(async (tx) => {\n      this.auth.clearManifestInfo();\n    });\n\n    this.auth.logoutEvent.subscribe(async (k) => {\n      await this.clearDatabase();\n    });\n  }\n\n  private initialize() {\n    this.open();\n    this.auth.clearManifestInfo();\n  }\n\n  async writeManifestArmor(items: IManifestArmor[], version: string) {\n    await this.manifestArmor.clear();\n    await this.manifestArmor.bulkPut(items);\n    localStorage.setItem(\"LastManifestUpdate\", Date.now().toString());\n    localStorage.setItem(\"last-manifest-db-name\", this.manifestArmor.db.name);\n    localStorage.setItem(\"last-manifest-revision\", environment.revision);\n    localStorage.setItem(\"last-manifest-version\", version);\n  }\n\n  private async clearDatabase() {\n    localStorage.removeItem(\"LastManifestUpdate\");\n    localStorage.removeItem(\"LastArmorUpdate\");\n    localStorage.removeItem(\"last-manifest-revision\");\n    localStorage.removeItem(\"last-manifest-db-name\");\n    await this.inventoryArmor.clear();\n  }\n\n  async resetDatabase(initialize = true) {\n    localStorage.removeItem(\"LastManifestUpdate\");\n    localStorage.removeItem(\"last-manifest-revision\");\n    localStorage.removeItem(\"last-manifest-db-name\");\n    localStorage.removeItem(\"vendor-next-refresh-time\");\n\n    localStorage.removeItem(\"LastArmorUpdate\");\n    localStorage.removeItem(\"last-armor-db-name\");\n\n    await this.delete();\n    if (initialize) this.initialize();\n  }\n\n  /**\n   * Returns the information about the current cached manifest version,\n   * if it exists and is still valid.\n   */\n  lastManifestUpdate(): { updatedAt: number; version: string } | undefined {\n    const lastManifestUpdate = localStorage.getItem(\"LastManifestUpdate\");\n    const lastManifestVersion = localStorage.getItem(\"last-manifest-version\");\n\n    const lastManifestRevision = localStorage.getItem(\"last-manifest-revision\");\n    const lastManifestDbName = localStorage.getItem(\"last-manifest-db-name\");\n\n    if (\n      !lastManifestUpdate ||\n      !lastManifestRevision ||\n      !lastManifestDbName ||\n      !lastManifestVersion\n    ) {\n      return;\n    }\n\n    if (localStorage.getItem(\"last-manifest-revision\") !== environment.revision) {\n      return;\n    }\n\n    if (lastManifestDbName !== this.inventoryArmor.db.name) {\n      return;\n    }\n\n    const lastUpdate = parseInt(lastManifestUpdate);\n\n    return {\n      updatedAt: lastUpdate,\n      version: lastManifestVersion,\n    };\n  }\n\n  // Database migration helper for exoticPerkHash field\n  // When loading existing data, convert single values to arrays\n  migrateExoticPerkHash(item: any): void {\n    if (item.exoticPerkHash !== undefined && item.exoticPerkHash !== null) {\n      // If it's already an array, leave it as is\n      if (Array.isArray(item.exoticPerkHash)) {\n        return;\n      }\n\n      // If it's a single value, convert to array\n      if (typeof item.exoticPerkHash === \"number\") {\n        item.exoticPerkHash = [item.exoticPerkHash];\n      } else {\n        // If it's null or undefined, set to empty array\n        item.exoticPerkHash = [];\n      }\n    } else {\n      item.exoticPerkHash = [];\n    }\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { BuildConfiguration } from \"../data/buildConfiguration\";\nimport { BehaviorSubject, Observable } from \"rxjs\";\nimport { ModOrAbility } from \"../data/enum/modOrAbility\";\nimport * as lzutf8 from \"lzutf8\";\nimport { CompressionOptions, DecompressionOptions } from \"lzutf8\";\nimport { environment } from \"../../environments/environment\";\nimport { EnumDictionary } from \"../data/types/EnumDictionary\";\nimport { ArmorStat } from \"../data/enum/armor-stat\";\n// import { ArmorSlot } from \"../data/enum/armor-slot\";\nimport { ModInformation } from \"../data/ModInformation\";\nimport { isEqual as _isEqual } from \"lodash\";\n\nexport interface StoredConfiguration {\n  version: string;\n  name: string;\n  configuration: BuildConfiguration;\n}\n\nconst lzCompOptions = {\n  outputEncoding: \"Base64\",\n} as CompressionOptions;\n\nconst lzDecompOptions = {\n  inputEncoding: \"Base64\",\n  outputEncoding: \"String\",\n} as DecompressionOptions;\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class ConfigurationService {\n  private __configuration: BuildConfiguration;\n  private __LastConfiguration: BuildConfiguration;\n\n  get readonlyConfigurationSnapshot() {\n    return Object.assign(this.__configuration, {});\n  }\n\n  private _configuration: BehaviorSubject<BuildConfiguration>;\n  public readonly configuration: Observable<BuildConfiguration>;\n\n  private _storedConfigurations: BehaviorSubject<StoredConfiguration[]>;\n  public readonly storedConfigurations: Observable<StoredConfiguration[]>;\n\n  constructor() {\n    this.__configuration = this.loadCurrentConfiguration();\n    this.__LastConfiguration = this.loadCurrentConfiguration();\n\n    this._configuration = new BehaviorSubject(this.__configuration);\n    this.configuration = this._configuration.asObservable();\n\n    this._storedConfigurations = new BehaviorSubject(this.listSavedConfigurations());\n    this.storedConfigurations = this._storedConfigurations.asObservable();\n  }\n\n  modifyConfiguration(cb: (configuration: BuildConfiguration) => void) {\n    cb(this.__configuration);\n    if (_isEqual(this.__configuration, this.__LastConfiguration)) return;\n    this.__LastConfiguration = structuredClone(this.__configuration);\n    this.saveCurrentConfiguration(this.__configuration);\n  }\n\n  saveConfiguration(name: string, config: BuildConfiguration) {\n    let list = this.listSavedConfigurations();\n    let c = this.listSavedConfigurations()\n      .map((value, index): [StoredConfiguration, number] => [value, index])\n      .filter((c) => c[0].name == name)[0];\n    if (!!c) {\n      list.splice(c[1], 1);\n    }\n    list.push({\n      configuration: config,\n      name: name,\n      version: environment.version,\n    });\n    list = list.sort((a, b) => {\n      if (a.name < b.name) return -1;\n      else if (a.name > b.name) return 1;\n      return 0;\n    });\n\n    const compressed = lzutf8.compress(JSON.stringify(list), lzCompOptions);\n    localStorage.setItem(\"storedConfigurations\", compressed);\n    this._storedConfigurations.next(list);\n  }\n\n  doesSavedConfigurationExist(name: string) {\n    return this.listSavedConfigurations().filter((c) => c.name == name).length > 0;\n  }\n\n  loadSavedConfiguration(name: string): boolean {\n    let c = this.listSavedConfigurations().filter((c) => c.name == name)[0];\n    if (!c) return false;\n    this.saveCurrentConfiguration(c.configuration);\n    return true;\n  }\n\n  checkAndFixOldSavedConfigurations(c: StoredConfiguration) {\n    c.configuration = Object.assign(BuildConfiguration.buildEmptyConfiguration(), c.configuration);\n    if (c.configuration.hasOwnProperty(\"minimumStatTier\")) {\n      let tiers = (c.configuration as any).minimumStatTier as EnumDictionary<ArmorStat, number>;\n      c.configuration.minimumStatTiers[ArmorStat.StatWeapon].value = tiers[ArmorStat.StatWeapon];\n      c.configuration.minimumStatTiers[ArmorStat.StatHealth].value = tiers[ArmorStat.StatHealth];\n      c.configuration.minimumStatTiers[ArmorStat.StatClass].value = tiers[ArmorStat.StatClass];\n      c.configuration.minimumStatTiers[ArmorStat.StatGrenade].value = tiers[ArmorStat.StatGrenade];\n      c.configuration.minimumStatTiers[ArmorStat.StatSuper].value = tiers[ArmorStat.StatSuper];\n      c.configuration.minimumStatTiers[ArmorStat.StatMelee].value = tiers[ArmorStat.StatMelee];\n      delete (c.configuration as any).minimumStatTier;\n    }\n\n    if (c.configuration.hasOwnProperty(\"selectedExoticHash\")) {\n      c.configuration.selectedExotics = [(c.configuration as any).selectedExoticHash];\n      delete (c.configuration as any).selectedExoticHash;\n    }\n\n    // remove mods that no longer exist\n    c.configuration.enabledMods = c.configuration.enabledMods.filter((v) => !!ModInformation[v]);\n\n    // Always reset risky mods on reload\n    c.configuration.limitParsedResults = true;\n    c.configuration.addConstent1Health = false;\n  }\n\n  listSavedConfigurations(): StoredConfiguration[] {\n    let item;\n    try {\n      item = localStorage.getItem(\"storedConfigurations\") || \"[]\";\n      if (item.substr(0, 1) != \"[\") item = lzutf8.decompress(item, lzDecompOptions);\n    } catch (e) {\n      item = [];\n    }\n\n    let result = (JSON.parse(item) || []) as StoredConfiguration[];\n    result = result.sort((a, b) => {\n      if (a.name < b.name) return -1;\n      else if (a.name > b.name) return 1;\n      return 0;\n    });\n    result.forEach((c) => this.checkAndFixOldSavedConfigurations(c));\n    return result;\n  }\n\n  deleteStoredConfiguration(name: string) {\n    let list = this.listSavedConfigurations();\n    let c = this.listSavedConfigurations()\n      .map((value, index): [StoredConfiguration, number] => [value, index])\n      .filter((c) => c[0].name == name)[0];\n    if (!!c) {\n      list.splice(c[1], 1);\n    }\n    localStorage.setItem(\n      \"storedConfigurations\",\n      lzutf8.compress(JSON.stringify(list), lzCompOptions)\n    );\n    this._storedConfigurations.next(list);\n  }\n\n  saveCurrentConfigurationToName(name: string) {\n    this.saveConfiguration(name, this.__configuration);\n  }\n\n  saveCurrentConfiguration(configuration: BuildConfiguration) {\n    console.debug(\"Writing configuration\", { configuration: configuration });\n    // deep copy it\n    this.__configuration = Object.assign(\n      BuildConfiguration.buildEmptyConfiguration(),\n      configuration\n    );\n    this.__configuration.enabledMods = ([] as ModOrAbility[]).concat(\n      this.__configuration.enabledMods\n    );\n    this.__configuration.minimumStatTiers = Object.assign(\n      {},\n      this.__configuration.minimumStatTiers\n    );\n\n    const compressed = lzutf8.compress(JSON.stringify(this.__configuration), lzCompOptions);\n    localStorage.setItem(\"currentConfig\", compressed);\n    this._configuration.next(Object.assign({}, this.__configuration));\n  }\n\n  loadCurrentConfiguration() {\n    let config;\n    try {\n      config = localStorage.getItem(\"currentConfig\") || \"{}\";\n      if (config.substr(0, 1) != \"{\") config = lzutf8.decompress(config, lzDecompOptions);\n    } catch (e) {\n      config = {};\n    }\n\n    var dummy: StoredConfiguration = {\n      name: \"dummy\",\n      version: \"1\",\n      configuration: JSON.parse(config),\n    };\n    this.checkAndFixOldSavedConfigurations(dummy);\n    return dummy.configuration;\n  }\n\n  getCurrentConfigBase64Compressed(): string {\n    let config = localStorage.getItem(\"currentConfig\") || \"{}\";\n    if (config.substr(0, 1) == \"{\") config = lzutf8.compress(config, { outputEncoding: \"Base64\" });\n    return config;\n  }\n\n  getAllStoredConfigurationsBase64Compressed(): string {\n    let item = localStorage.getItem(\"storedConfigurations\") || \"[]\";\n    if (item.substr(0, 1) == \"[\") item = lzutf8.compress(item, { outputEncoding: \"Base64\" });\n    return item;\n  }\n\n  getStoredConfigurationBase64Compressed(name: string): string {\n    let c = this.listSavedConfigurations().filter((c) => c.name == name)[0];\n    if (!c) return \"\";\n    return lzutf8.compress(JSON.stringify(c), { outputEncoding: \"Base64\" });\n  }\n\n  resetCurrentConfiguration() {\n    this.saveCurrentConfiguration(BuildConfiguration.buildEmptyConfiguration());\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<mat-card appearance=\"outlined\" id=\"card-results\">\n  <mat-card-header>\n    <mat-card-title>Results</mat-card-title>\n  </mat-card-header>\n  <mat-card-content>\n    <div>\n      <div class=\"info-stats-container\">\n        <div class=\"info-stat-card\">\n          <span class=\"info-stat-label\">Items Used</span>\n          <span class=\"info-stat-value\">{{ this.itemCount | number }}</span>\n        </div>\n        <div class=\"info-stat-card\">\n          <span class=\"info-stat-label\">Combinations generated</span>\n          <div class=\"info-stat-value-container\">\n            <span class=\"info-stat-value\">{{ this.totalResults | number }}</span>\n            <mat-icon\n              #tooltip=\"matTooltip\"\n              *ngIf=\"this.parsedResults !== this.totalResults && this.parsedResults === 5e4\"\n              class=\"report-problem-icon\"\n              matTooltip=\"Note: To speed up the whole process, only {{\n                this.parsedResults | number\n              }} results are listed in this table.\n                          If you need more entries, disable the limitation in the advanced settings.\"\n              >report_problem\n            </mat-icon>\n            <mat-icon\n              #tooltip=\"matTooltip\"\n              *ngIf=\"this.parsedResults !== this.totalResults && this.parsedResults === 1e6\"\n              class=\"report-problem-icon\"\n              matTooltip=\"Note: To prevent Out-Of-Memory crashes, only {{\n                this.parsedResults | number\n              }} results are listed in this table.\n                                  You should narrow down your settings a bit.\"\n              >report_problem\n            </mat-icon>\n          </div>\n        </div>\n        <div class=\"info-stat-card\">\n          <span class=\"info-stat-label\">Time required</span>\n          <span class=\"info-stat-value\">{{ this.totalTime | number }}ms</span>\n        </div>\n        <div class=\"view-mode-toggle\">\n          <mat-button-toggle-group\n            [value]=\"viewMode\"\n            (change)=\"onViewModeChange($event)\"\n            aria-label=\"View Mode\">\n            <mat-button-toggle value=\"cards\">\n              <mat-icon>view_module</mat-icon>\n              Cards\n            </mat-button-toggle>\n            <mat-button-toggle value=\"table\">\n              <mat-icon>table_view</mat-icon>\n              Table\n            </mat-button-toggle>\n          </mat-button-toggle-group>\n        </div>\n      </div>\n\n      <div class=\"config-summary-container\">\n        <h4 class=\"config-summary-title\">Summary of important configuration choices</h4>\n        <mat-chip-listbox\n          aria-label=\"Configuration Summary\"\n          class=\"config-summary-chips\"\n          [selectable]=\"false\">\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"_config_selectedExotics.indexOf(-1) > -1\"\n            disableRipple\n            matTooltip=\"This setting enforces that all exotics are ignored.\"\n            >No Exotic\n          </mat-chip-option>\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"\n              _config_selectedExotics.length >= 1 && _config_selectedExotics.indexOf(-1) === -1\n            \"\n            disableRipple\n            matTooltip=\"This setting enforces that only one specific exotic is used.\"\n            >Exotic\n          </mat-chip-option>\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"_config_tryLimitWastedStats\"\n            disableRipple\n            matTooltip=\"The tool will add minor stat mods to reduce wasted stats.\"\n            >Reduce wasted stats\n          </mat-chip-option>\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"_config_modslotLimitation\"\n            disableRipple\n            matTooltip=\"This setting limits available stat mod types, like major Super or Class.\"\n            >Stat Mod Limitation\n          </mat-chip-option>\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"_config_armorPerkLimitation\"\n            disableRipple\n            matTooltip=\"This setting enforces an specific armor perk or modslot for a specific armor slot.\">\n            Armor Perk or Slot\n          </mat-chip-option>\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"_config_onlyShowResultsWithNoWastedStats\"\n            disableRipple\n            matTooltip=\"This setting means that only builds with no wasted stats are shown.\"\n            selected\n            >Zero Waste\n          </mat-chip-option>\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"\n              (_config_assumeEveryLegendaryIsArtifice && _config_legacyArmor) ||\n              _config_assumeEveryExoticIsArtifice\n            \"\n            disableRipple\n            matTooltip=\"Some legacy items are assumed to have an artifice slot.\"\n            color=\"warn\">\n            <mat-icon inline style=\"height: 100%\">report_problem</mat-icon>\n            &nbsp;Legacy Artifice Assumptions&nbsp;\n            <mat-icon inline style=\"height: 100%\">report_problem</mat-icon>\n          </mat-chip-option>\n\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"_config_onlyUseMasterworkedExotics\"\n            disableRipple\n            matTooltip=\"This setting means that only exotic armor pieces that are already masterworked are used.\"\n            selected>\n            Masterworked Exotics Only\n          </mat-chip-option>\n\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"_config_onlyUseMasterworkedLegendaries\"\n            disableRipple\n            matTooltip=\"This setting means that only legendary armor pieces are already masterworked are used.\"\n            selected>\n            Masterworked Legendaries Only\n          </mat-chip-option>\n\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"\n              !_config_onlyUseMasterworkedExotics &&\n              !_config_onlyUseMasterworkedLegendaries &&\n              (_config_assumeLegendariesMasterworked || _config_assumeExoticsMasterworked)\n            \"\n            disableRipple\n            matTooltip=\"Some masterwork assumptions are in place. This means that you may have to masterwork items. Look at your advanced settings to see which ones are activated.\">\n            Masterwork Assumption\n          </mat-chip-option>\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"_config_enforceFeaturedArmor\"\n            disableRipple\n            matTooltip=\"This setting enforces that only featured armor pieces (from specific activities or vendors) are used in builds.\"\n            selected>\n            Featured Armor Only\n          </mat-chip-option>\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"_config_includeCollectionRolls\"\n            disableRipple\n            matTooltip=\"Collection Exotic rolls will be included in the search.\">\n            Include Collection Rolls\n          </mat-chip-option>\n          <mat-chip-option\n            #tooltip=\"matTooltip\"\n            *ngIf=\"_config_includeVendorRolls\"\n            disableRipple\n            matTooltip=\"Currently available Vendor items will be included in the search.\">\n            Include Vendor Items\n          </mat-chip-option>\n        </mat-chip-listbox>\n      </div>\n\n      <div class=\"initializing-container\" *ngIf=\"initializing\">\n        <mat-icon class=\"rotate\">hourglass_top</mat-icon>\n        <h3>Initializing...</h3>\n        <p>Please wait while the application is loading your data.</p>\n        <p>\n          This may take a while, depending on your settings and the number of items you have.\n          <br />\n          Please be patient.\n        </p></div\n      >\n\n      <div\n        class=\"progress-bar-container\"\n        *ngIf=\"_results.length === 0 && isCalculatingPermutations && !initializing\">\n        <mat-icon class=\"rotate\"> hourglass_top </mat-icon>\n        <h3>Calculating permutations...</h3>\n        <mat-progress-bar\n          [value]=\"computationProgress\"\n          aria-label=\"Calculating permutations...\"></mat-progress-bar>\n        <p>\n          This may take a while, depending on your settings and the number of items you have.\n          <br />\n          Please be patient.\n        </p>\n\n        <br />\n        <button\n          mat-raised-button\n          color=\"warn\"\n          matTooltip=\"Cancel the current calculation. This is useful if you want to change your settings or if the calculation takes too long.\"\n          (click)=\"cancelCalculation()\"\n          [disabled]=\"!isCalculatingPermutations\">\n          Cancel Calculation\n        </button>\n      </div>\n\n      <!-- Cancelled Message -->\n      <div class=\"cancelled-message\" *ngIf=\"_results.length === 0 && cancelledCalculation\">\n        <mat-icon>cancel</mat-icon>\n        <h3>You cancelled the calculation process</h3>\n        <p>\n          The calculation has been cancelled. You can try again with different settings.\n          <br />\n          If you want to continue, just change anything in your settings.\n        </p>\n      </div>\n\n      <!-- No results message -->\n      <div\n        class=\"no-results\"\n        *ngIf=\"\n          _results.length === 0 &&\n          !isCalculatingPermutations &&\n          !initializing &&\n          !cancelledCalculation\n        \">\n        <mat-icon>search_off</mat-icon>\n        <h3>No results found</h3>\n        <p>Try adjusting your filters or search criteria.</p>\n        <div id=\"common-issues\">\n          <p>Common issues:</p>\n          <ul>\n            <li> Desired stats may simply not be possible with your current configuration. </li>\n            <li>Make sure that you have at least one legendary item per slot.</li>\n            <li *ngIf=\"_config_enforceFeaturedArmor\">\n              You enforced that only featured armor is used. Do you have at least one piece of\n              featured armor for each slot?\n            </li>\n            <li *ngIf=\"!_config_legacyArmor\">\n              Maybe you wanted to include legacy (Armor 2.0) armor too?\n            </li>\n            <li *ngIf=\"!_config_includeVendorRolls\"> Maybe you wanted to include vendor items? </li>\n            <li *ngIf=\"!_config_includeCollectionRolls\">\n              Maybe you wanted to include exotics in the collection?\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <!-- Results Content -->\n      <div *ngIf=\"_results.length > 0\">\n        <!-- Card View -->\n        <app-results-card-view *ngIf=\"viewMode === 'cards'\" [results]=\"_results\">\n        </app-results-card-view>\n\n        <!-- Table View -->\n        <table\n          *ngIf=\"viewMode === 'table'\"\n          [dataSource]=\"tableDataSource\"\n          class=\"result-table\"\n          mat-table\n          matSort\n          matSortActive=\"Mods\"\n          matSortDirection=\"asc\"\n          multiTemplateDataRows>\n          <!--- Note that these columns can be defined in any order.\n           The actual rendered columns are set as a property on the row definition\" -->\n          <!-- Name Column -->\n          <ng-container matColumnDef=\"weapon\">\n            <th\n              *matHeaderCellDef\n              mat-header-cell\n              mat-sort-header=\"Weapon\"\n              matTooltip=\"The weapon Stat of this armor combination.\"\n              >Weapon\n            </th>\n            <td *matCellDef=\"let element\" class=\"statColumn\" mat-cell\n              >{{ element.stats[ArmorStat.StatWeapon] }}\n              <app-stat-icon [stat]=\"ArmorStat.StatWeapon\" class=\"statIcon\"></app-stat-icon>\n            </td>\n          </ng-container>\n\n          <!-- Name Column -->\n          <ng-container matColumnDef=\"health\">\n            <th\n              *matHeaderCellDef\n              mat-header-cell\n              mat-sort-header=\"Health\"\n              matTooltip=\"The  stat of this armor combination.\">\n              Health\n            </th>\n            <td *matCellDef=\"let element\" class=\"statColumn\" mat-cell\n              >{{ element.stats[ArmorStat.StatHealth] }}\n              <app-stat-icon [stat]=\"ArmorStat.StatHealth\" class=\"statIcon\"></app-stat-icon>\n            </td>\n          </ng-container>\n\n          <!-- Name Column -->\n          <ng-container matColumnDef=\"class\">\n            <th\n              *matHeaderCellDef\n              mat-header-cell\n              mat-sort-header=\"Class\"\n              matTooltip=\"The class stat of this armor combination.\">\n              Class\n            </th>\n            <td *matCellDef=\"let element\" class=\"statColumn\" mat-cell\n              >{{ element.stats[ArmorStat.StatClass] }}\n              <app-stat-icon [stat]=\"ArmorStat.StatClass\" class=\"statIcon\"></app-stat-icon>\n            </td>\n          </ng-container>\n\n          <!-- Name Column -->\n          <ng-container matColumnDef=\"grenade\">\n            <th\n              *matHeaderCellDef\n              mat-header-cell\n              mat-sort-header=\"Grenade\"\n              matTooltip=\"The grenade stat of this armor combination.\">\n              Grenade\n            </th>\n            <td *matCellDef=\"let element\" class=\"statColumn\" mat-cell\n              >{{ element.stats[ArmorStat.StatGrenade] }}\n              <app-stat-icon [stat]=\"ArmorStat.StatGrenade\" class=\"statIcon\"></app-stat-icon>\n            </td>\n          </ng-container>\n\n          <!-- Name Column -->\n          <ng-container matColumnDef=\"super\">\n            <th\n              *matHeaderCellDef\n              mat-header-cell\n              mat-sort-header=\"Super\"\n              matTooltip=\"The super stat of this armor combination.\">\n              Super\n            </th>\n            <td *matCellDef=\"let element\" class=\"statColumn\" mat-cell\n              >{{ element.stats[ArmorStat.StatSuper] }}\n              <app-stat-icon [stat]=\"ArmorStat.StatSuper\" class=\"statIcon\"></app-stat-icon>\n            </td>\n          </ng-container>\n\n          <!-- Name Column -->\n          <ng-container matColumnDef=\"melee\">\n            <th\n              *matHeaderCellDef\n              mat-header-cell\n              mat-sort-header=\"Melee\"\n              matTooltip=\"The melee stat of this armor combination.\"\n              >Melee\n            </th>\n            <td *matCellDef=\"let element\" class=\"statColumn\" mat-cell\n              >{{ element.stats[ArmorStat.StatMelee] }}\n              <app-stat-icon [stat]=\"ArmorStat.StatMelee\" class=\"statIcon\"></app-stat-icon>\n            </td>\n          </ng-container>\n\n          <!-- Name Column -->\n          <ng-container matColumnDef=\"mods\">\n            <th\n              *matHeaderCellDef\n              mat-header-cell\n              mat-sort-header=\"Mods\"\n              matTooltip=\"The amount of mods required for each combination. Sorting after this takes the mod cost into account.\">\n              Used Mods\n            </th>\n            <td *matCellDef=\"let element\" mat-cell>\n              <app-table-mod-display\n                [mods]=\"element.mods\"\n                [artifice]=\"element.artifice\"\n                class=\"modPreview\"></app-table-mod-display>\n            </td>\n          </ng-container>\n\n          <!-- Name Column -->\n          <ng-container matColumnDef=\"exotic\">\n            <th *matHeaderCellDef mat-header-cell style=\"text-align: center\">Exotic</th>\n            <td *matCellDef=\"let element\" mat-cell>\n              <div class=\"itemDiv\">\n                <img\n                  *ngIf=\"element.exotic !== undefined\"\n                  #tooltip=\"matTooltip\"\n                  class=\"itemIcon\"\n                  matTooltip=\"{{ element.exotic.name }}\"\n                  src=\"https://bungie.net/{{ element.exotic.icon }}\" />\n                <img\n                  *ngIf=\"element.exotic !== undefined\"\n                  class=\"itemIconWatermark\"\n                  src=\"https://bungie.net/{{ element.exotic.watermark }}\" />\n                <img\n                  *ngIf=\"element.exotic === undefined\"\n                  class=\"itemIcon\"\n                  src=\"https://www.bungie.net/common/destiny2_content/icons/b4d05ef69d0c3227a7d4f7f35bbc2848.png\" />\n              </div>\n            </td>\n          </ng-container>\n\n          <!-- Vendor/Collection Column -->\n          <ng-container matColumnDef=\"source\">\n            <th *matHeaderCellDef mat-header-cell>Sources</th>\n            <td *matCellDef=\"let element\" mat-cell>\n              <span class=\"source-column\">\n                <img\n                  *ngIf=\"!!element.usesCollectionRoll\"\n                  matTooltip=\"This build uses a collection exotic. You have to collect it before you can use it.\"\n                  class=\"collectionIcon\"\n                  src=\"https://www.bungie.net/common/destiny2_content/icons/1d01287dd47af97fef16fa6acbac23ba.png\" />\n                <img\n                  *ngIf=\"!!element.usesVendorRoll\"\n                  matTooltip=\"This build uses a vendor item. You have to collect it before you can use it.\"\n                  class=\"vendorIcon\"\n                  src=\"https://www.bungie.net/common/destiny2_content/icons/8ef4b5bd32277dba9aee7c368404ad5d.jpg\" />\n              </span>\n            </td>\n          </ng-container>\n\n          <!-- Name Column -->\n          <ng-container matColumnDef=\"dropdown\">\n            <th *matHeaderCellDef mat-header-cell></th>\n            <td *matCellDef=\"let element\" mat-cell>\n              <mat-icon\n                *ngIf=\"expandedElement !== element\"\n                matTooltip=\"Click to show details for this build.\">\n                expand_more\n              </mat-icon>\n              <mat-icon\n                *ngIf=\"expandedElement === element\"\n                matTooltip=\"Click to hide details for this build.\">\n                expand_less\n              </mat-icon>\n            </td>\n          </ng-container>\n\n          <!-- Total Column -->\n          <ng-container matColumnDef=\"total\">\n            <th\n              *matHeaderCellDef\n              mat-header-cell\n              mat-sort-header=\"Total\"\n              matTooltip=\"The total sum of all stats in this armor combination.\"\n              >Total\n            </th>\n            <td *matCellDef=\"let element\" mat-cell>\n              {{ getTotalStats(element) }}\n            </td>\n          </ng-container>\n\n          <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->\n          <ng-container matColumnDef=\"expandedDetail\">\n            <td *matCellDef=\"let element\" [attr.colspan]=\"shownColumns.length\" mat-cell>\n              <div\n                [@detailExpand]=\"element === expandedElement ? 'expanded' : 'collapsed'\"\n                class=\"result-element-detail\">\n                <app-expanded-result-content [element]=\"element\"></app-expanded-result-content>\n              </div>\n            </td>\n          </ng-container>\n\n          <tr *matHeaderRowDef=\"shownColumns\" mat-header-row></tr>\n          <tr\n            (click)=\"expandedElement = expandedElement === element ? null : element\"\n            *matRowDef=\"let element; columns: shownColumns\"\n            [class.example-expanded-row]=\"expandedElement === element\"\n            class=\"result-element-row\"\n            mat-row>\n          </tr>\n          <tr\n            *matRowDef=\"let row; columns: ['expandedDetail']\"\n            class=\"result-detail-row\"\n            mat-row></tr>\n        </table>\n      </div>\n      <mat-paginator\n        [style.display]=\"viewMode === 'table' ? 'block' : 'none'\"\n        [pageSizeOptions]=\"[25, 50, 75, 100]\"\n        aria-label=\"Select page of periodic elements\"\n        pageSize=\"25\"\n        showFirstLastButtons>\n      </mat-paginator>\n    </div>\n  </mat-card-content>\n  <mat-card-actions *ngIf=\"totalResults > 0\">\n    <span class=\"flex-spacer\"></span>\n\n    <button mat-raised-button color=\"primary\" (click)=\"saveBuilds()\"\n      >Download results as JSON</button\n    >\n  </mat-card-actions>\n</mat-card>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { AfterViewInit, Component, OnDestroy, ViewChild } from \"@angular/core\";\nimport { InventoryService } from \"../../../services/inventory.service\";\nimport { MatTableDataSource } from \"@angular/material/table\";\nimport { ConfigurationService } from \"../../../services/configuration.service\";\nimport { ArmorPerkOrSlot, ArmorStat, StatModifier } from \"../../../data/enum/armor-stat\";\nimport { MatPaginator } from \"@angular/material/paginator\";\nimport { MatSort } from \"@angular/material/sort\";\nimport { StatusProviderService } from \"../../../services/status-provider.service\";\nimport { animate, state, style, transition, trigger } from \"@angular/animations\";\nimport { DestinyClass } from \"bungie-api-ts/destiny2\";\nimport { ArmorSlot } from \"../../../data/enum/armor-slot\";\nimport { BuildConfiguration } from \"../../../data/buildConfiguration\";\nimport { Subject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { InventoryArmorSource } from \"src/app/data/types/IInventoryArmor\";\nimport { MAXIMUM_STAT_MOD_AMOUNT } from \"src/app/data/constants\";\n\nexport interface ResultDefinition {\n  exotic:\n    | undefined\n    | {\n        icon: string;\n        name: string;\n        hash: string;\n      };\n  artifice: number[];\n  mods: number[];\n  stats: number[];\n  statsNoMods: number[];\n  items: ResultItem[];\n  tiers: number;\n  waste: number;\n  modCost: number;\n  modCount: number;\n  loaded: boolean;\n  usesCollectionRoll?: boolean;\n  usesVendorRoll?: boolean;\n}\n\nexport enum ResultItemMoveState {\n  TRANSFER_NONE,\n  WAITING_FOR_TRANSFER,\n  TRANSFERRING,\n  TRANSFERRED,\n  ERROR_DURING_TRANSFER,\n}\n\nexport interface ResultItem {\n  energyLevel: number;\n  hash: number;\n  itemInstanceId: string;\n  tier: number; // 0 = exotic, 1-5 = legendary\n  name: string;\n  exotic: boolean;\n  masterworked: boolean;\n  armorSystem: number; // 2 = Armor 2.0, 3 = Armor 3.0\n  masterworkLevel: number; // 0-5, 5 = full masterwork\n  archetypeStats: ArmorStat[]; // [Mobility, Resilience, Recovery, Discipline, Intellect, Strength]\n  stats: number[];\n  slot: ArmorSlot;\n  perk: ArmorPerkOrSlot;\n  transferState: ResultItemMoveState;\n  statsNoMods: number[];\n  source: InventoryArmorSource;\n}\n\n@Component({\n  selector: \"app-results\",\n  templateUrl: \"./results.component.html\",\n  styleUrls: [\"./results.component.scss\"],\n  animations: [\n    trigger(\"detailExpand\", [\n      state(\"collapsed, void\", style({ height: \"0px\" })),\n      state(\"expanded\", style({ height: \"*\" })),\n      transition(\"expanded <=> collapsed\", animate(\"225ms cubic-bezier(0.4, 0.0, 0.2, 1)\")),\n      transition(\"expanded <=> void\", animate(\"225ms cubic-bezier(0.4, 0.0, 0.2, 1)\")),\n    ]),\n  ],\n})\nexport class ResultsComponent implements AfterViewInit, OnDestroy {\n  ArmorStat = ArmorStat;\n  public StatModifier = StatModifier;\n\n  _results: ResultDefinition[] = [];\n  _config_assumeLegendariesMasterworked: Boolean = false;\n  _config_assumeExoticsMasterworked: Boolean = false;\n\n  _config_selectedExotics: number[] = [];\n  _config_tryLimitWastedStats: boolean = false;\n  _config_onlyUseMasterworkedExotics: Boolean = false;\n  _config_onlyUseMasterworkedLegendaries: Boolean = false;\n  _config_includeCollectionRolls: Boolean = false;\n  _config_includeVendorRolls: Boolean = false;\n  _config_onlyShowResultsWithNoWastedStats: Boolean = false;\n  _config_assumeEveryLegendaryIsArtifice: Boolean = false;\n  _config_assumeEveryExoticIsArtifice: Boolean = false;\n  _config_enforceFeaturedArmor: Boolean = false;\n  _config_modslotLimitation: boolean = false;\n  _config_armorPerkLimitation: boolean = false;\n\n  tableDataSource = new MatTableDataSource<ResultDefinition>();\n  @ViewChild(MatPaginator) paginator: MatPaginator | null = null;\n  @ViewChild(MatSort) sort: MatSort | null = null;\n  expandedElement: ResultDefinition | null = null;\n  shownColumns = [\n    \"exotic\",\n    \"health\",\n    \"melee\",\n    \"grenade\",\n    \"super\",\n    \"class\",\n    \"weapon\",\n    \"total\",\n    \"mods\",\n    \"dropdown\",\n  ];\n\n  // info values\n  selectedClass: DestinyClass = DestinyClass.Unknown;\n  totalTime: number = 0;\n  itemCount: number = 0;\n  totalResults: number = 0;\n  parsedResults: number = 0;\n  viewMode: \"table\" | \"cards\" = \"table\";\n  _config_legacyArmor: any;\n  computationProgress: number = 0;\n  isCalculatingPermutations: boolean = false;\n  initializing: boolean = true; // Flag to indicate if the page is still initializing\n  cancelledCalculation: boolean = false;\n\n  constructor(\n    private inventory: InventoryService,\n    public configService: ConfigurationService,\n    public status: StatusProviderService\n  ) {\n    // Load saved view mode from localStorage\n    const savedViewMode = localStorage.getItem(\"d2ap-view-mode\") as \"table\" | \"cards\";\n    if (savedViewMode) {\n      this.viewMode = savedViewMode;\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.tableDataSource.paginator = this.paginator;\n    this.tableDataSource.sort = this.sort;\n    this.tableDataSource.sortingDataAccessor = (data, sortHeaderId) => {\n      switch (sortHeaderId) {\n        case \"Weapon\":\n          return data.stats[ArmorStat.StatWeapon];\n        case \"Health\":\n          return data.stats[ArmorStat.StatHealth];\n        case \"Class\":\n          return data.stats[ArmorStat.StatClass];\n        case \"Grenade\":\n          return data.stats[ArmorStat.StatGrenade];\n        case \"Super\":\n          return data.stats[ArmorStat.StatSuper];\n        case \"Melee\":\n          return data.stats[ArmorStat.StatMelee];\n        case \"Tiers\":\n          return data.tiers;\n        case \"Total\":\n          return data.stats.reduce((sum, stat) => sum + stat, 0);\n        case \"Mods\":\n          return (\n            +100 * data.modCount +\n            //+ 40 * data.artifice.length\n            data.modCost\n          );\n      }\n      return 0;\n    };\n\n    this.status.status.pipe(takeUntil(this.ngUnsubscribe)).subscribe((s) => {\n      this.isCalculatingPermutations = s.calculatingPermutations || s.calculatingResults;\n\n      if (this.isCalculatingPermutations) {\n        this.initializing = false;\n      }\n      this.cancelledCalculation = s.cancelledCalculation;\n    });\n\n    this.inventory.calculationProgress.subscribe((progress) => {\n      this.computationProgress = progress;\n    });\n    //\n    this.configService.configuration\n      .pipe(takeUntil(this.ngUnsubscribe))\n      .subscribe((c: BuildConfiguration) => {\n        this.selectedClass = c.characterClass;\n        this._config_assumeLegendariesMasterworked = c.assumeLegendariesMasterworked;\n        this._config_assumeExoticsMasterworked = c.assumeExoticsMasterworked;\n        this._config_tryLimitWastedStats = c.tryLimitWastedStats;\n\n        this._config_legacyArmor = c.allowLegacyLegendaryArmor || c.allowLegacyExoticArmor;\n        this._config_onlyUseMasterworkedExotics = c.onlyUseMasterworkedExotics;\n        this._config_onlyUseMasterworkedLegendaries = c.onlyUseMasterworkedLegendaries;\n        this._config_includeCollectionRolls = c.includeCollectionRolls;\n        this._config_includeVendorRolls = c.includeVendorRolls;\n        this._config_onlyShowResultsWithNoWastedStats = c.onlyShowResultsWithNoWastedStats;\n        this._config_assumeEveryLegendaryIsArtifice = c.assumeEveryLegendaryIsArtifice;\n        this._config_assumeEveryExoticIsArtifice = c.assumeEveryExoticIsArtifice;\n        this._config_enforceFeaturedArmor =\n          c.enforceFeaturedLegendaryArmor || c.enforceFeaturedExoticArmor;\n        this._config_selectedExotics = c.selectedExotics;\n        this._config_armorPerkLimitation = c.armorRequirements.length > 0;\n        this._config_modslotLimitation = c.statModLimits.maxMajorMods < MAXIMUM_STAT_MOD_AMOUNT;\n\n        let columns = [\n          \"exotic\",\n          \"health\",\n          \"melee\",\n          \"grenade\",\n          \"super\",\n          \"class\",\n          \"weapon\",\n          \"total\",\n          \"mods\",\n        ];\n        if (c.includeVendorRolls || c.includeCollectionRolls) columns.push(\"source\");\n        columns.push(\"dropdown\");\n        this.shownColumns = columns;\n      });\n\n    this.inventory.armorResults.pipe(takeUntil(this.ngUnsubscribe)).subscribe(async (value) => {\n      if (value.results.length > 0 && this.initializing) {\n        this.initializing = false;\n      }\n      this._results = value.results;\n      this.itemCount = value.itemCount;\n      this.totalTime = value.totalTime;\n      this.totalResults = value.totalResults;\n      this.parsedResults = this._results.length;\n\n      this.status.modifyStatus((s) => (s.updatingResultsTable = true));\n      await this.updateData();\n      this.status.modifyStatus((s) => (s.updatingResultsTable = false));\n    });\n  }\n\n  cancelCalculation() {\n    this.inventory.cancelCalculation();\n  }\n\n  async updateData() {\n    console.info(\"Table total results:\", this._results.length);\n    console.time(\"Update Table Data\");\n    this.tableDataSource.paginator = this.paginator;\n    this.tableDataSource.sort = this.sort;\n    this.tableDataSource.data = this._results;\n\n    // Ensure sorting is properly initialized after data update\n    if (this.viewMode === \"table\") {\n      setTimeout(() => {\n        this.initializeTableSorting();\n      }, 50);\n    }\n\n    console.timeEnd(\"Update Table Data\");\n  }\n\n  getTotalStats(element: ResultDefinition): number {\n    return (\n      element.stats[0] +\n      element.stats[1] +\n      element.stats[2] +\n      element.stats[3] +\n      element.stats[4] +\n      element.stats[5]\n    );\n  }\n\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n\n  saveBuilds() {\n    let jsonData = {\n      configCompressed: this.configService.getCurrentConfigBase64Compressed(),\n      config: this.configService.readonlyConfigurationSnapshot,\n      results: this._results.map((r) => {\n        let p = Object.assign({}, r);\n        p.items = p.items.map((i) => {\n          return { hash: i.hash, instance: i.itemInstanceId } as any;\n        });\n        delete p.exotic;\n        return p;\n      }),\n    };\n\n    // download the file\n    let a = document.createElement(\"a\");\n    a.download = \"builds.json\";\n    const url = window.URL.createObjectURL(new Blob([JSON.stringify(jsonData, null, 2)]));\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.setAttribute(\"download\", \"d2ap_results.json\");\n    document.body.appendChild(link);\n    link.click();\n  }\n\n  onViewModeChange(event: any) {\n    this.viewMode = event.value;\n    localStorage.setItem(\"d2ap-view-mode\", this.viewMode);\n\n    // Reinitialize table sorting when switching to table view\n    if (this.viewMode === \"table\") {\n      // Use a longer timeout to ensure DOM is fully rendered\n      setTimeout(() => {\n        this.initializeTableSorting();\n      }, 100);\n    }\n  }\n\n  private initializeTableSorting() {\n    if (this.sort && this.tableDataSource) {\n      this.tableDataSource.sort = this.sort;\n      // Force sort to re-evaluate the current sort state\n      if (this.sort.active) {\n        this.sort.sortChange.emit({\n          active: this.sort.active,\n          direction: this.sort.direction,\n        });\n      }\n    }\n  }\n}\n","// Enum mapping spirit names to their hash values\nexport enum ExoticClassItemSpirits {\n  SpiritOfTheSwarm = 183430246,\n  SpiritOfTheClaw = 183430247,\n  SpiritOfTheStag = 183430248,\n  SpiritOfStarfire = 183430249,\n  SpiritOfApotheosis = 183430250,\n  SpiritOfVesper = 183430251,\n  SpiritOfTheNecrotic = 183430252,\n  SpiritOfOsmiomancy = 183430253,\n  SpiritOfHarmony = 183430254,\n  SpiritOfTheFilaments = 183430255,\n  SpiritOfCompetition = 302488496,\n  SpiritOfTheAssassin = 1476923952,\n  SpiritOfInmostLight = 1476923953,\n  SpiritOfTheOphidian = 1476923954,\n  SpiritOfTheStarEater = 1476923955,\n  SpiritOfSynthoceps = 1476923956,\n  SpiritOfVerity = 1476923957,\n  SpiritOfTheArmamentarium = 3573490500,\n  SpiritOfAlphaLupi = 3573490501,\n  SpiritOfContact = 3573490504,\n  SpiritOfTheBear = 3573490505,\n  SpiritOfTheHorn = 3573490506,\n  SpiritOfScars = 3573490507,\n  SpiritOfHoarfrost = 3573490508,\n  SpiritOfSeverance = 3573490509,\n  SpiritOfTheAbeyant = 3573490510,\n  SpiritOfTheEternalWarrior = 3573490511,\n  SpiritOfTheCoyote = 3751917990,\n  SpiritOfTheWormhusk = 3751917991,\n  SpiritOfTheLiar = 3751917992,\n  SpiritOfTheGyrfalcon = 3751917993,\n  SpiritOfTheCyrtarachne = 3751917994,\n  SpiritOfRenewal = 3751917995,\n  SpiritOfCaliban = 3751917996,\n  SpiritOfTheFoetracer = 3751917997,\n  SpiritOfGalanor = 3751917998,\n  SpiritOfTheDragon = 3751917999,\n}\n\n// Map of exotic class item perk hashes to their display names\nexport const ExoticClassItemPerkNames: Record<ExoticClassItemSpirits, string> = {\n  [ExoticClassItemSpirits.SpiritOfTheSwarm]: \"Spirit of the Swarm\",\n  [ExoticClassItemSpirits.SpiritOfTheClaw]: \"Spirit of the Claw\",\n  [ExoticClassItemSpirits.SpiritOfTheStag]: \"Spirit of the Stag\",\n  [ExoticClassItemSpirits.SpiritOfStarfire]: \"Spirit of Starfire\",\n  [ExoticClassItemSpirits.SpiritOfApotheosis]: \"Spirit of Apotheosis\",\n  [ExoticClassItemSpirits.SpiritOfVesper]: \"Spirit of Vesper\",\n  [ExoticClassItemSpirits.SpiritOfTheNecrotic]: \"Spirit of the Necrotic\",\n  [ExoticClassItemSpirits.SpiritOfOsmiomancy]: \"Spirit of Osmiomancy\",\n  [ExoticClassItemSpirits.SpiritOfHarmony]: \"Spirit of Harmony\",\n  [ExoticClassItemSpirits.SpiritOfTheFilaments]: \"Spirit of the Filaments\",\n  [ExoticClassItemSpirits.SpiritOfCompetition]: \"Spirit of Competition\",\n  [ExoticClassItemSpirits.SpiritOfTheAssassin]: \"Spirit of the Assassin\",\n  [ExoticClassItemSpirits.SpiritOfInmostLight]: \"Spirit of Inmost Light\",\n  [ExoticClassItemSpirits.SpiritOfTheOphidian]: \"Spirit of the Ophidian\",\n  [ExoticClassItemSpirits.SpiritOfTheStarEater]: \"Spirit of the Star-Eater\",\n  [ExoticClassItemSpirits.SpiritOfSynthoceps]: \"Spirit of Synthoceps\",\n  [ExoticClassItemSpirits.SpiritOfVerity]: \"Spirit of Verity\",\n  [ExoticClassItemSpirits.SpiritOfTheArmamentarium]: \"Spirit of the Armamentarium\",\n  [ExoticClassItemSpirits.SpiritOfAlphaLupi]: \"Spirit of Alpha Lupi\",\n  [ExoticClassItemSpirits.SpiritOfContact]: \"Spirit of Contact\",\n  [ExoticClassItemSpirits.SpiritOfTheBear]: \"Spirit of the Bear\",\n  [ExoticClassItemSpirits.SpiritOfTheHorn]: \"Spirit of the Horn\",\n  [ExoticClassItemSpirits.SpiritOfScars]: \"Spirit of Scars\",\n  [ExoticClassItemSpirits.SpiritOfHoarfrost]: \"Spirit of Hoarfrost\",\n  [ExoticClassItemSpirits.SpiritOfSeverance]: \"Spirit of Severance\",\n  [ExoticClassItemSpirits.SpiritOfTheAbeyant]: \"Spirit of the Abeyant\",\n  [ExoticClassItemSpirits.SpiritOfTheEternalWarrior]: \"Spirit of the Eternal Warrior\",\n  [ExoticClassItemSpirits.SpiritOfTheCoyote]: \"Spirit of the Coyote\",\n  [ExoticClassItemSpirits.SpiritOfTheWormhusk]: \"Spirit of the Wormhusk\",\n  [ExoticClassItemSpirits.SpiritOfTheLiar]: \"Spirit of the Liar\",\n  [ExoticClassItemSpirits.SpiritOfTheGyrfalcon]: \"Spirit of the Gyrfalcon\",\n  [ExoticClassItemSpirits.SpiritOfTheCyrtarachne]: \"Spirit of the Cyrtarachne\",\n  [ExoticClassItemSpirits.SpiritOfRenewal]: \"Spirit of Renewal\",\n  [ExoticClassItemSpirits.SpiritOfCaliban]: \"Spirit of Caliban\",\n  [ExoticClassItemSpirits.SpiritOfTheFoetracer]: \"Spirit of the Foetracer\",\n  [ExoticClassItemSpirits.SpiritOfGalanor]: \"Spirit of Galanor\",\n  [ExoticClassItemSpirits.SpiritOfTheDragon]: \"Spirit of the Dragon\",\n};\n","import { Injectable } from \"@angular/core\";\nimport { HttpClientConfig } from \"bungie-api-ts/destiny2\";\nimport { AuthService } from \"./auth.service\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { environment } from \"../../environments/environment\";\nimport { StatusProviderService } from \"./status-provider.service\";\nimport { retry } from \"rxjs/operators\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class HttpClientService {\n  constructor(\n    private authService: AuthService,\n    private http: HttpClient,\n    private status: StatusProviderService\n  ) {}\n\n  async $httpWithoutBearerToken(config: HttpClientConfig) {\n    return this.$http(config, false, true, false, 2);\n  }\n  async $httpWithoutApiKey(config: HttpClientConfig) {\n    return this.$http(config, false, false, false, 2);\n  }\n\n  async $httpPost(config: HttpClientConfig) {\n    return this.http\n      .post<any>(config.url, config.body, {\n        params: config.params,\n        headers: {\n          \"X-API-Key\": environment.apiKey,\n          Authorization: \"Bearer \" + this.authService.accessToken,\n        },\n      })\n      .pipe(retry(2))\n      .toPromise()\n      .catch(async (err) => {\n        console.error(err);\n      });\n  }\n\n  async $http(\n    config: HttpClientConfig,\n    logoutOnFailure: boolean,\n    apiKey = true,\n    bearerToken = true,\n    retryCount = 2\n  ) {\n    let options = {\n      params: config.params,\n      headers: {} as any,\n    };\n    if (apiKey) options.headers[\"X-API-Key\"] = environment.apiKey;\n\n    if (bearerToken) options.headers[\"Authorization\"] = \"Bearer \" + this.authService.accessToken;\n\n    return this.http\n      .get<any>(config.url, options)\n      .pipe(retry(retryCount))\n      .toPromise()\n      .then((res) => {\n        // Clear API error, if it was set\n        this.status.clearApiError();\n        return res;\n      })\n      .catch(async (err) => {\n        console.error(err);\n        if (environment.offlineMode) {\n          console.debug(\"Offline mode, ignoring API error\");\n          return;\n        }\n        if (err.error?.ErrorStatus == \"SystemDisabled\") {\n          console.info(\"System is disabled. Revoking auth, must re-login\");\n          this.status.setApiError();\n        }\n        // if error 500, log out\n        else if (err.status == 500) {\n          console.info(\"Auth Error, probably expired token\");\n          if (logoutOnFailure) {\n            this.status.setAuthError();\n            this.authService.logout();\n          }\n        }\n        if (err.ErrorStatus != \"Internal Server Error\") {\n          console.info(\"API-Error\");\n          //this.status.setApiError();\n        }\n      });\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport {\n  DestinyComponentType,\n  getProfile,\n  DestinyClass,\n  BungieMembershipType,\n} from \"bungie-api-ts/destiny2\";\nimport { AuthService } from \"./auth.service\";\nimport { GroupUserInfoCard } from \"bungie-api-ts/groupv2\";\nimport { getMembershipDataForCurrentUser } from \"bungie-api-ts/user\";\nimport { HttpClientService } from \"./http-client.service\";\nimport { StatusProviderService } from \"./status-provider.service\";\nimport { H } from \"highlight.run\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class MembershipService {\n  constructor(\n    private http: HttpClientService,\n    private status: StatusProviderService,\n    private auth: AuthService\n  ) {\n    this.auth.logoutEvent.subscribe((k) => this.clearCachedData());\n  }\n\n  private clearCachedData() {\n    localStorage.removeItem(\"auth-membershipInfo\");\n    localStorage.removeItem(\"auth-membershipInfo-date\");\n  }\n\n  async getMembershipDataForCurrentUser(): Promise<GroupUserInfoCard> {\n    var membershipData: GroupUserInfoCard = JSON.parse(\n      localStorage.getItem(\"auth-membershipInfo\") || \"null\"\n    );\n    var membershipDataAge = JSON.parse(localStorage.getItem(\"auth-membershipInfo-date\") || \"0\");\n    if (membershipData && Date.now() - membershipDataAge < 1000 * 60 * 60 * 24) {\n      H.identify(`I${membershipData.membershipId}T${membershipData.membershipType}`, {\n        highlightDisplayName: `${membershipData.displayName}(I${membershipData.membershipId}T${membershipData.membershipType})`,\n        avatar: `https://bungie.net${membershipData.iconPath}`,\n        bungieGlobalDisplayName: membershipData.bungieGlobalDisplayName,\n        bungieGlobalDisplayNameCode: membershipData.bungieGlobalDisplayNameCode ?? -1,\n        membershipType: membershipData.membershipType,\n        applicableMembershipTypes: JSON.stringify(membershipData.applicableMembershipTypes),\n      });\n      return membershipData;\n    }\n\n    console.info(\"BungieApiService\", \"getMembershipDataForCurrentUser\");\n    let response = await getMembershipDataForCurrentUser((d) => this.http.$http(d, true));\n    let memberships = response?.Response.destinyMemberships;\n    console.info(\"Memberships:\", memberships);\n    memberships = memberships.filter(\n      (m) =>\n        (m.crossSaveOverride == 0 &&\n          m.membershipType != BungieMembershipType.TigerStadia) /*stadia is dead, ignore it*/ ||\n        m.crossSaveOverride == m.membershipType\n    );\n    console.info(\"Filtered Memberships:\", memberships);\n\n    let result = null;\n    if (memberships?.length == 1) {\n      // This guardian only has one account linked, so we can proceed as normal\n      result = memberships?.[0];\n    } else {\n      // This guardian has multiple accounts linked.\n      // Fetch the last login time for each account, and use the one that was most recently used, default to primaryMembershipId\n      let lastLoggedInProfileIndex: any = memberships.findIndex(\n        (x) => x.membershipId == response?.Response.primaryMembershipId\n      );\n      let lastPlayed = 0;\n      for (let id in memberships) {\n        const membership = memberships?.[id];\n        const profile = await getProfile((d) => this.http.$http(d, false), {\n          components: [DestinyComponentType.Profiles],\n          membershipType: membership.membershipType,\n          destinyMembershipId: membership.membershipId,\n        });\n        if (!!profile && profile.Response?.profile.data?.dateLastPlayed) {\n          let date = Date.parse(profile.Response?.profile.data?.dateLastPlayed);\n          if (date > lastPlayed) {\n            lastPlayed = date;\n            lastLoggedInProfileIndex = id;\n          }\n        }\n      }\n      if (lastLoggedInProfileIndex < 0) {\n        console.error(\"PrimaryMembershipId was not found\");\n        lastLoggedInProfileIndex = 0;\n        this.status.setAuthError();\n        //this.authService.logout();\n      }\n      result = memberships?.[lastLoggedInProfileIndex];\n      console.info(\n        \"getMembershipDataForCurrentUser\",\n        \"Selected membership data for the last logged in membership.\"\n      );\n    }\n\n    localStorage.setItem(\"auth-membershipInfo\", JSON.stringify(result));\n    localStorage.setItem(\"auth-membershipInfo-date\", JSON.stringify(Date.now()));\n    H.identify(`I${result.membershipId}T${result.membershipType}`, {\n      highlightDisplayName: `${result.displayName}(I${result.membershipId}T${result.membershipType})`,\n      avatar: `https://bungie.net${result.iconPath}`,\n      bungieGlobalDisplayName: result.bungieGlobalDisplayName,\n      bungieGlobalDisplayNameCode: result.bungieGlobalDisplayNameCode ?? -1,\n      membershipType: result.membershipType,\n      applicableMembershipTypes: JSON.stringify(result.applicableMembershipTypes),\n    });\n    return result;\n  }\n\n  async getCharacters() {\n    let destinyMembership = await this.getMembershipDataForCurrentUser();\n    if (!destinyMembership) {\n      if (!this.status.getStatus().apiError) this.status.setAuthError();\n      return [];\n    }\n    this.status.clearAuthError();\n    this.status.clearApiError();\n\n    const profile = await getProfile((d) => this.http.$http(d, true), {\n      components: [DestinyComponentType.Characters],\n      membershipType: destinyMembership.membershipType,\n      destinyMembershipId: destinyMembership.membershipId,\n    });\n\n    if (!!profile?.Response.characters.data) this.status.clearApiError();\n\n    return (\n      Object.values(profile?.Response.characters.data || {}).map((d) => {\n        return {\n          characterId: d.characterId,\n          clazz: d.classType as DestinyClass,\n          emblemUrl: d.emblemBackgroundPath,\n          lastPlayed: Date.parse(d.dateLastPlayed),\n        };\n      }) || []\n    );\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport {\n  DestinyComponentType,\n  DestinyInventoryItemDefinition,\n  DestinyItemType,\n  DestinyCollectibleState,\n  equipItem,\n  getDestinyManifest,\n  getDestinyManifestSlice,\n  getItem,\n  getProfile,\n  transferItem,\n  DestinyManifestSlice,\n  DestinyCollectiblesComponent,\n  DestinyItemInvestmentStatDefinition,\n  DestinyClass,\n  DestinyItemComponent,\n  DestinyManifestComponentName,\n  AllDestinyManifestComponents,\n} from \"bungie-api-ts/destiny2\";\nimport { DatabaseService } from \"./database.service\";\nimport { environment } from \"../../environments/environment\";\nimport { ArmorSystem, IManifestArmor } from \"../data/types/IManifestArmor\";\nimport {\n  IInventoryArmor,\n  InventoryArmorSource,\n  createArmorItem,\n  applyInvestmentStats,\n  getInvestmentStats,\n} from \"../data/types/IInventoryArmor\";\nimport { ArmorSlot } from \"../data/enum/armor-slot\";\nimport {\n  ArmorPerkOrSlot,\n  ArmorPerkSocketHashes,\n  ArmorStat,\n  ArmorStatHashes,\n  MapAlternativeSocketTypeToArmorPerkOrSlot,\n  MapAlternativeToArmorPerkOrSlot,\n} from \"../data/enum/armor-stat\";\nimport { ConfigurationService } from \"./configuration.service\";\nimport { IManifestCollectible } from \"../data/types/IManifestCollectible\";\nimport { MembershipService } from \"./membership.service\";\nimport { HttpClientService } from \"./http-client.service\";\nimport { IVendorInfo } from \"../data/types/IVendorInfo\";\nimport { StatusProviderService } from \"./status-provider.service\";\nimport { IVendorItemSubscreen } from \"../data/types/IVendorItemSubscreen\";\nimport {\n  ResultDefinition,\n  ResultItemMoveState,\n} from \"../components/authenticated-v2/results/results.component\";\nimport { ExoticClassItemPerkNames } from \"../data/exotic-class-item-spirits\";\nimport { SubclassHashes } from \"../data/enum/armor-stat\";\nimport { ModInformation } from \"../data/ModInformation\";\nimport { Subject, Observable } from \"rxjs\";\n\n// TODO :Remove once DIM API is updated\n\nexport interface DestinyEquipableItemSetDefinition {\n  displayProperties: {\n    name: string;\n    description: string;\n    hasIcon: boolean;\n  };\n  setItems: number[];\n  setPerks: Array<{\n    requiredSetCount: number;\n    sandboxPerkHash: number;\n  }>;\n  hash: number;\n  index: number;\n  redacted: boolean;\n  blacklisted: boolean;\n}\n\nfunction collectInvestmentStats(\n  r: IInventoryArmor,\n  itemInvestmentStats: DestinyItemInvestmentStatDefinition[],\n  plugHashes: (number | undefined)[],\n  mods: Record<string, IManifestArmor>\n) {\n  const investmentStats: { [id: number]: number } = {\n    2996146975: 0,\n    392767087: 0,\n    1943323491: 0,\n    1735777505: 0,\n    144602215: 0,\n    4244567218: 0,\n  };\n\n  // Intrinsics\n  for (let newStats of itemInvestmentStats) {\n    if (newStats.statTypeHash in investmentStats)\n      investmentStats[newStats.statTypeHash] += newStats.value;\n  }\n\n  const plugs = [plugHashes[6], plugHashes[7], plugHashes[8], plugHashes[9]];\n  if (r.isExotic && r.slot === ArmorSlot.ArmorSlotClass) {\n    plugs.push(plugHashes[10]); // Exotic class item perk\n    plugs.push(plugHashes[11]); // Exotic class item perk\n  }\n  r.statPlugHashes = plugs;\n  var plm = plugs.map((k) => mods[k || \"\"]).filter((k) => k != null);\n  for (let entry of plm) {\n    for (let newStats of entry.investmentStats) {\n      if (newStats.statTypeHash in investmentStats)\n        investmentStats[newStats.statTypeHash] += newStats.value;\n    }\n  }\n\n  applyInvestmentStats(r, investmentStats);\n\n  // TODO: THIS IS A QUICK HACK: FIX THIS\n  const investmentStatsOverZero = Object.entries(investmentStats).filter(([_, value]) => value > 0);\n  if (investmentStatsOverZero.length > 3) return;\n  r.archetypeStats = [];\n  const stats = [\n    ArmorStat.StatWeapon,\n    ArmorStat.StatHealth,\n    ArmorStat.StatClass,\n    ArmorStat.StatGrenade,\n    ArmorStat.StatSuper,\n    ArmorStat.StatMelee,\n  ];\n  for (let i = 0; i < stats.length; i++) {\n    const stat = stats[i];\n    const statHash = ArmorStatHashes[stat];\n    if (investmentStatsOverZero.find(([hash, _]) => parseInt(hash) == statHash)) {\n      r.archetypeStats.push(i);\n    }\n  }\n}\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class BungieApiService {\n  /**\n   * Emits after a manifest update.\n   */\n  private manifestUpdatedSubject = new Subject<void>();\n  private manifestAlreadyUpdated = false;\n\n  /**\n   * Observable that emits when the manifest is updated.\n   */\n  public get manifestUpdated$(): Observable<void> {\n    return this.manifestUpdatedSubject.asObservable();\n  }\n\n  constructor(\n    private status: StatusProviderService,\n    private http: HttpClientService,\n    private db: DatabaseService,\n    private config: ConfigurationService,\n    private membership: MembershipService\n  ) {}\n\n  async transferItem(\n    itemInstanceId: string,\n    targetCharacter: string,\n    equip = false\n  ): Promise<boolean> {\n    let destinyMembership = await this.membership.getMembershipDataForCurrentUser();\n    if (!destinyMembership) {\n      if (!this.status.getStatus().apiError) this.status.setAuthError();\n      return false;\n    }\n    this.status.clearAuthError();\n    this.status.clearApiError();\n\n    let r1 = await getItem((d) => this.http.$http(d, false), {\n      membershipType: destinyMembership.membershipType,\n      destinyMembershipId: destinyMembership.membershipId,\n      itemInstanceId: itemInstanceId,\n      components: [DestinyComponentType.ItemCommonData],\n    });\n\n    let transferResult = false;\n\n    if (!r1) return false;\n    if (r1.Response.characterId != targetCharacter) {\n      if (r1.Response.item.data?.location != 2) {\n        await this.moveItemToVault(r1.Response.item.data?.itemInstanceId || \"\");\n        r1 = await getItem((d) => this.http.$http(d, false), {\n          membershipType: destinyMembership.membershipType,\n          destinyMembershipId: destinyMembership.membershipId,\n          itemInstanceId: itemInstanceId,\n          components: [DestinyComponentType.ItemCommonData],\n        });\n      }\n\n      const payload = {\n        characterId: targetCharacter,\n        membershipType: destinyMembership.membershipType,\n        itemId: r1?.Response.item.data?.itemInstanceId || \"\",\n        itemReferenceHash: r1?.Response.item.data?.itemHash || 0,\n        stackSize: 1,\n        transferToVault: false,\n      };\n\n      transferResult = !!(await transferItem((d) => this.http.$httpPost(d), payload));\n    }\n    if (equip) {\n      let equipPayload = {\n        characterId: targetCharacter,\n        membershipType: destinyMembership.membershipType,\n        stackSize: 1,\n        itemId: r1?.Response.item.data?.itemInstanceId || \"\",\n        itemReferenceHash: r1?.Response.item.data?.itemHash || 0,\n      };\n      transferResult = !!(await equipItem((d) => this.http.$httpPost(d), equipPayload));\n    }\n\n    return transferResult;\n  }\n\n  async moveItemToVault(itemInstanceId: string) {\n    console.info(\"moveItemToVault\", itemInstanceId);\n    let destinyMembership = await this.membership.getMembershipDataForCurrentUser();\n    if (!destinyMembership) {\n      if (!this.status.getStatus().apiError) this.status.setAuthError();\n      return;\n    }\n    this.status.clearAuthError();\n    this.status.clearApiError();\n\n    const r1 = await getItem((d) => this.http.$http(d, false), {\n      membershipType: destinyMembership.membershipType,\n      destinyMembershipId: destinyMembership.membershipId,\n      itemInstanceId: itemInstanceId,\n      components: [DestinyComponentType.ItemCommonData],\n    });\n\n    const payload = {\n      characterId: r1?.Response.characterId || \"\",\n      membershipType: destinyMembership.membershipType,\n      itemId: r1?.Response.item.data?.itemInstanceId || \"\",\n      itemReferenceHash: r1?.Response.item.data?.itemHash || 0,\n      stackSize: 1,\n      transferToVault: true,\n    };\n\n    await transferItem((d) => this.http.$httpPost(d), payload);\n  }\n\n  // Collect the list of unlocked exotic armor pieces\n  private async getUnlockedExoticArmor(\n    characterCollectibles: Record<string, DestinyCollectiblesComponent>\n  ): Promise<Set<number>> {\n    const manifestExoticArmorItemHashes = (await this.db.manifestCollectibles.toArray()).reduce(\n      (acc, cur) => {\n        acc[cur.hash] = cur.itemHash;\n        return acc;\n      },\n      {} as Record<number, number>\n    );\n\n    const itemHashes = Object.values(characterCollectibles)\n      .flatMap((char) => Object.entries(char.collectibles ?? {}))\n      .filter(([hash, { state }]) => {\n        return (\n          (state & DestinyCollectibleState.NotAcquired) === 0 &&\n          manifestExoticArmorItemHashes[parseInt(hash)]\n        );\n      })\n      .map(([hash, _]) => manifestExoticArmorItemHashes[parseInt(hash)]);\n\n    return new Set(itemHashes);\n  }\n\n  async updateArmorItems(force = false) {\n    if (environment.offlineMode) {\n      console.info(\"BungieApiService\", \"updateArmorItems\", \"offline mode, skipping\");\n      return;\n    }\n\n    if (!force && localStorage.getItem(\"LastArmorUpdate\"))\n      if (localStorage.getItem(\"last-armor-db-name\") == this.db.inventoryArmor.db.name)\n        if (\n          Date.now() - Number.parseInt(localStorage.getItem(\"LastArmorUpdate\") || \"0\") <\n          (1000 * 3600) / 2\n        )\n          return;\n    let destinyMembership = await this.membership.getMembershipDataForCurrentUser();\n    if (!destinyMembership) {\n      if (!this.status.getStatus().apiError) this.status.setAuthError();\n      return [];\n    }\n    this.status.clearAuthError();\n    this.status.clearApiError();\n\n    console.info(\"BungieApiService\", \"Requesting Profile\");\n    let profile = await getProfile((d) => this.http.$http(d, true), {\n      components: [\n        DestinyComponentType.CharacterEquipment,\n        DestinyComponentType.CharacterInventories,\n        DestinyComponentType.ProfileCurrencies,\n        DestinyComponentType.ProfileInventories,\n        DestinyComponentType.ItemStats,\n        DestinyComponentType.ItemInstances,\n        DestinyComponentType.ItemPerks,\n        DestinyComponentType.ItemSockets,\n        DestinyComponentType.ItemPlugStates,\n        DestinyComponentType.Collectibles,\n      ],\n      membershipType: destinyMembership.membershipType,\n      destinyMembershipId: destinyMembership.membershipId,\n    });\n\n    const unlockedExoticArmorItemHashes = await this.getUnlockedExoticArmor(\n      profile.Response.characterCollectibles.data ?? {}\n    );\n\n    let allItems = profile.Response.profileInventory.data?.items || [];\n    for (let charI in profile.Response.characterEquipment.data) {\n      let i = profile.Response.characterEquipment.data[charI].items;\n      allItems = allItems.concat(i);\n    }\n    for (let charI in profile.Response.characterInventories.data) {\n      let i = profile.Response.characterInventories.data[charI].items;\n      allItems = allItems.concat(i);\n    }\n\n    // get amount of materials\n    // 3853748946 enhancement core\n    // 4257549984 enhancement prism\n    // 4257549985 Ascendant Shard\n    // 3467984096 Exotic Cipher\n    var materials = allItems\n      .filter((k) => [3853748946, 4257549984, 4257549985, 3467984096].indexOf(k.itemHash!) > -1)\n      .reduce((previousValue, currentValue) => {\n        if (!(currentValue.itemHash.toString() in previousValue)) {\n          previousValue[currentValue.itemHash] = 0;\n        }\n        previousValue[currentValue.itemHash] += currentValue.quantity;\n        return previousValue;\n      }, {} as any);\n    let glimmerEntry =\n      profile.Response.profileCurrencies.data?.items.filter((k) => k.itemHash == 3159615086) || [];\n    if (glimmerEntry.length > 0) materials[\"3159615086\"] = glimmerEntry[0].quantity;\n    else materials[\"3159615086\"] = 0;\n    localStorage.setItem(\"stored-materials\", JSON.stringify(materials));\n\n    // Collect a list of all armor item hashes that we need to look up in the manifest\n    const idSet = new Set(allItems.map((d) => d.itemHash));\n    // Add all exotics owned by the player, as they can always be found from collections\n    unlockedExoticArmorItemHashes.forEach((id) => idSet.add(id));\n\n    // Do not search directly in the DB, as it is VERY slow.\n    let manifestArmor = await this.db.manifestArmor.toArray();\n    const validManifestArmor = manifestArmor.filter((d) => idSet.has(d.hash));\n    const modsData = manifestArmor.filter((d) => d.itemType == 19);\n    const validManifestArmorMap = Object.fromEntries(validManifestArmor.map((_) => [_.hash, _]));\n    const modsMap = Object.fromEntries(modsData.map((_) => [_.hash, _]));\n\n    let filteredItems = allItems\n      //.filter(d => ids.indexOf(d.itemHash) > -1)\n      .filter((d) => !!d.itemInstanceId)\n      .filter((d) => d.bucketHash !== 3284755031) // Filter out subclasses\n      .filter((d) => {\n        let statData = profile.Response.itemComponents.stats.data || {};\n        let stats = statData[d.itemInstanceId || \"\"]?.stats || {};\n        return !!stats[392767087];\n      })\n      .filter((d: DestinyItemComponent) => {\n        // remove sunset items\n        let instanceData = profile.Response.itemComponents.instances.data || {};\n        let instance = instanceData[d.itemInstanceId || \"\"] || {};\n        return !!instance.energy;\n      })\n      .map((d) => {\n        let instanceData = profile.Response.itemComponents.instances.data || {};\n        let instance = instanceData[d.itemInstanceId || \"\"] || {};\n\n        if (!validManifestArmorMap[d.itemHash]) {\n          console.warn(\"Missing manifest item for item hash\", d.itemHash);\n          return null;\n        }\n        let armorItem = createArmorItem(\n          validManifestArmorMap[d.itemHash],\n          d.itemInstanceId || \"\",\n          InventoryArmorSource.Inventory\n        );\n        // 3.0\n        // TODO replace the (as any) once DIM Api is updated\n\n        if (!!(instance as any).gearTier) {\n          armorItem.armorSystem = ArmorSystem.Armor3;\n          armorItem.tier = (instance as any).gearTier;\n        } else if (armorItem.isExotic && armorItem.slot === ArmorSlot.ArmorSlotClass) {\n          armorItem.armorSystem = ArmorSystem.Armor3;\n        } else {\n          armorItem.armorSystem = ArmorSystem.Armor2;\n        }\n\n        if (armorItem.isExotic && armorItem.slot === ArmorSlot.ArmorSlotClass) {\n          armorItem.exoticPerkHash = [];\n          const sockets =\n            profile.Response.itemComponents.sockets.data?.[d.itemInstanceId!]?.sockets || [];\n          for (const socket of sockets) {\n            if (\n              socket.plugHash &&\n              Object.keys(ExoticClassItemPerkNames).map(Number).includes(socket.plugHash)\n            ) {\n              armorItem.exoticPerkHash.push(socket.plugHash);\n            }\n          }\n        }\n\n        armorItem.energyLevel = !!instance.energy ? instance.energy.energyCapacity : 0;\n        const sockets = profile.Response.itemComponents.sockets.data || {};\n        const socketsList =\n          sockets[d.itemInstanceId!]?.sockets.map((socket) => socket.plugHash) ?? [];\n        collectInvestmentStats(\n          armorItem,\n          validManifestArmorMap[d.itemHash]?.investmentStats ?? [],\n          socketsList,\n          modsMap\n        );\n\n        if (armorItem.isExotic && armorItem.slot === ArmorSlot.ArmorSlotClass) {\n          let statData = profile.Response.itemComponents.stats.data || {};\n          let stats = statData[d.itemInstanceId || \"\"]?.stats || {};\n          for (let n = 0; n < 7; n++) {\n            const sock = sockets[d.itemInstanceId!]?.sockets[n];\n            if (!sock || !sock.plugHash) continue;\n            const mod = modsMap[sock.plugHash];\n            if (!mod) continue;\n            if (mod.investmentStats.length == 0) continue;\n            for (const stat of mod.investmentStats) {\n              if (stat.statTypeHash in stats) {\n                (stats[stat.statTypeHash] as any).value -= stat.value;\n              }\n            }\n          }\n          // Sort the stats by value in descending order and get the third highest value\n          const sortedStats = Object.entries(stats)\n            .map(([hash, statObj]) => ({ hash: parseInt(hash), value: (statObj as any).value }))\n            .sort((a, b) => b.value - a.value);\n\n          if (sortedStats.length >= 3) {\n            const thirdHighestStatHash = sortedStats[2].hash;\n            // Use thirdHighestStatHash as needed\n            armorItem.archetypeStats.push(\n              Object.values(ArmorStatHashes).indexOf(thirdHighestStatHash)\n            );\n\n            const investmentStat = getInvestmentStats(armorItem);\n            // TODO: This must be tiered\n            investmentStat[thirdHighestStatHash] += 13;\n            applyInvestmentStats(armorItem, investmentStat);\n          }\n        }\n\n        for (let socket of socketsList) {\n          if (!socket) continue;\n          // grab the mod instance\n          const mod = modsMap[socket];\n          if (!mod || mod.name !== \"Upgrade Armor\") continue;\n          const mmod = mod.investmentStats.find(\n            (k: DestinyItemInvestmentStatDefinition) =>\n              k.statTypeHash == ArmorStatHashes[ArmorStat.StatWeapon]\n          );\n          if (mmod) {\n            if (armorItem.armorSystem == ArmorSystem.Armor3) armorItem.masterworkLevel = mmod.value;\n            else if (armorItem.armorSystem == ArmorSystem.Armor2) {\n              armorItem.masterworkLevel = mmod.value == 2 ? 5 : 0;\n            }\n          }\n        }\n\n        if (armorItem.perk == ArmorPerkOrSlot.SlotArtifice) {\n          // Take a look if it really has the artifice perk\n          let statData = profile.Response.itemComponents.perks.data || {};\n          let perks = (statData[d.itemInstanceId || \"\"] || {})[\"perks\"] || [];\n          const hasPerk = perks.filter((p) => p.perkHash == 229248542).length > 0;\n          if (!hasPerk) armorItem.perk = ArmorPerkOrSlot.None;\n        } else if (armorItem.isExotic && armorItem.slot !== ArmorSlot.ArmorSlotClass) {\n          // 720825311 is \"UNLOCKED exotic artifice slot\"\n          // 1656746282 is \"LOCKED exotic artifice slot\"\n          const hasPerk = socketsList.filter((d) => d == 720825311).length > 0;\n          if (hasPerk) {\n            armorItem.perk = ArmorPerkOrSlot.SlotArtifice;\n          }\n        }\n\n        return armorItem as IInventoryArmor;\n      })\n      .filter(Boolean) as IInventoryArmor[];\n\n    // Now add the collection rolls for exotics\n    const collectionRollItems = Array.from(unlockedExoticArmorItemHashes)\n      .map((exoticItemHash) => {\n        const manifestArmorItem = validManifestArmorMap[exoticItemHash];\n        if (!manifestArmorItem) {\n          console.error(\"Couldn't find manifest item for exotic\", exoticItemHash);\n          return null;\n        }\n\n        const collectionItem = createArmorItem(\n          manifestArmorItem,\n          `c${manifestArmorItem.hash}`,\n          InventoryArmorSource.Collections\n        );\n\n        collectInvestmentStats(\n          collectionItem,\n          manifestArmorItem.investmentStats,\n          manifestArmorItem.socketEntries.map((s) => s.singleInitialItemHash),\n          modsMap\n        );\n\n        return collectionItem;\n      })\n      .filter(Boolean) as IInventoryArmor[];\n\n    filteredItems = filteredItems.concat(collectionRollItems);\n    //    filteredItems = filteredItems.filter(\n    //      (k) => !k[\"statPlugHashes\"] || k[\"statPlugHashes\"][0] != null\n    //    );\n\n    await this.updateDatabaseItems(filteredItems);\n\n    localStorage.setItem(\"LastArmorUpdate\", Date.now().toString());\n    localStorage.setItem(\"last-armor-db-name\", this.db.inventoryArmor.db.name);\n\n    this.status.clearApiError();\n    return filteredItems;\n  }\n\n  private async updateDatabaseItems(newItems: IInventoryArmor[]) {\n    await this.db.inventoryArmor.filter((d) => d.source == InventoryArmorSource.Inventory).delete();\n    await this.db.inventoryArmor\n      .filter((d) => d.source == InventoryArmorSource.Collections)\n      .delete();\n    const dbItems = await this.db.inventoryArmor.toArray();\n    // get the IDs of all items with no source\n    const ids_noSource = dbItems\n      .filter((d) => d.source == null || d.source == undefined)\n      .map((d) => d.id);\n    await this.db.inventoryArmor.bulkDelete(ids_noSource);\n\n    await this.db.inventoryArmor.bulkAdd(newItems);\n    return;\n  }\n  /*\n    // get all items from the database. This saves us from having to do a lot of slow (!) queries.\n    const dbItems = await this.db.inventoryArmor.toArray();\n\n    const newItemInstanceIds = new Set(newItems.map((d) => d.itemInstanceId));\n    // get the IDs of all items with no source\n    const ids_noSource = dbItems\n      .filter((d) => d.source == null || d.source == undefined)\n      .map((d) => d.id);\n    // get the IDs of all items that are not in the new inventory (and thus should be deleted)\n    const ids_deleted = dbItems\n      .filter((d) => !newItemInstanceIds.has(d.itemInstanceId))\n      .filter((d) => d.source != InventoryArmorSource.Vendor)\n      .map((d) => d.id);\n\n    // get the IDs that are in both, the db and the new inventory, and thus should be updated\n    let entries_existing = dbItems.filter((d) => newItemInstanceIds.has(d.itemInstanceId));\n    // now filter these that actually have changed\n    entries_existing = entries_existing.filter((d) => {\n      let c = newItems.find((k) => k.itemInstanceId == d.itemInstanceId);\n      if (!c) return false;\n      // if masterwork, energy, etc change, return true\n      if (c.masterworked != d.masterworked) return true;\n      if (c.energyLevel != d.energyLevel) return true;\n      if (c.perk != d.perk) return true;\n      return false;\n    });\n\n    // delete the entries\n    const idsToDelete = ids_noSource.concat(ids_deleted);\n    if (idsToDelete.length > 0) await this.db.inventoryArmor.bulkDelete(idsToDelete);\n\n    // update the entries\n    if (entries_existing.length > 0) {\n      await this.db.inventoryArmor.bulkUpdate(\n        entries_existing.map((d) => {\n          return {\n            key: d.id,\n            changes: {\n              masterworked: d.masterworked,\n              energyLevel: d.energyLevel,\n              perk: d.perk,\n              updated_at: Date.now(),\n            },\n          };\n        })\n      );\n    }\n\n    // add the entries\n    const entriesToAdd = newItems.filter(\n      (d) => !dbItems.find((k) => k.itemInstanceId == d.itemInstanceId)\n    );\n    if (entriesToAdd.length > 0) await this.db.inventoryArmor.bulkAdd(entriesToAdd);\n  }\n    */\n\n  private getArmorPerk(v: DestinyInventoryItemDefinition): ArmorPerkOrSlot {\n    // Guardian Games\n    if (\n      environment.featureFlags.enableGuardianGamesFeatures &&\n      (v.hash === 1013401891 || v.hash === 366019830 || v.hash == 537041732)\n    )\n      return ArmorPerkOrSlot.GuardianGamesClassItem;\n\n    const scks = v.sockets?.socketEntries ?? [];\n\n    // Is this necessary? the singleInitialItemHash is also being checked\n    if (scks.find((d) => d.reusablePlugSetHash == 1402)) return ArmorPerkOrSlot.SlotArtifice;\n    if (scks.find((d) => d.reusablePlugSetHash == 1403)) return ArmorPerkOrSlot.SlotArtifice;\n    if (scks.find((d) => d.reusablePlugSetHash == 1460)) return ArmorPerkOrSlot.SlotArtifice;\n\n    for (const socket of scks) {\n      let socketHash = socket.singleInitialItemHash;\n      if (!socketHash) continue;\n\n      // Map the socket hash to another perk, if necessary (mostly if the perk exists multiple times)\n      socketHash = MapAlternativeToArmorPerkOrSlot[socketHash] || socketHash;\n\n      // find the key of ArmorPerkSocketHashes that matches the socketHash\n      const slotType = Object.entries(ArmorPerkSocketHashes).find(\n        (kvpair) => kvpair[1] == socketHash\n      );\n      if (slotType) {\n        return parseInt(slotType[0]) as ArmorPerkOrSlot;\n      }\n    }\n\n    for (const socket of scks) {\n      let socketTypeHash = socket.socketTypeHash;\n      if (!socketTypeHash) continue;\n      let perk = MapAlternativeSocketTypeToArmorPerkOrSlot[socketTypeHash] || ArmorPerkOrSlot.None;\n      // find the key of ArmorPerkSocketHashes that matches the socketHash\n      if (perk != ArmorPerkOrSlot.None) {\n        return perk;\n      }\n    }\n\n    return ArmorPerkOrSlot.None;\n  }\n\n  private async updateVendorNames(\n    manifestTables: DestinyManifestSlice<\"DestinyVendorDefinition\"[]>\n  ) {\n    const vendors = manifestTables.DestinyVendorDefinition;\n\n    // get values\n    const vendorInfo: IVendorInfo[] = Object.values(vendors).map((v) => {\n      return {\n        vendorId: v.hash,\n        vendorName: v.displayProperties.name,\n        vendorDescription: v.displayProperties.description,\n        vendorIdentifier: v.vendorIdentifier,\n      } as IVendorInfo;\n    });\n\n    await this.db.vendorNames.clear();\n    await this.db.vendorNames.bulkAdd(vendorInfo);\n  }\n\n  private async updateVendorItemSubScreens(\n    manifestTables: DestinyManifestSlice<\"DestinyInventoryItemDefinition\"[]>\n  ) {\n    const items = Object.values(manifestTables.DestinyInventoryItemDefinition);\n\n    let vendorItemSubscreen = items\n      .filter((x) => x.preview?.previewVendorHash != undefined && x.preview?.previewVendorHash != 0)\n      .map((x) => {\n        return {\n          itemHash: x.hash,\n          vendorHash: x.preview!.previewVendorHash,\n        } as IVendorItemSubscreen;\n      });\n    await this.db.vendorItemSubscreen.clear();\n    await this.db.vendorItemSubscreen.bulkPut(vendorItemSubscreen);\n  }\n\n  private async updateAbilities(\n    manifestTables: DestinyManifestSlice<\"DestinyInventoryItemDefinition\"[]>\n  ) {\n    const allAbilities = Object.values(manifestTables.DestinyInventoryItemDefinition).filter(\n      (item) => {\n        // e.g. \"hunter.arc.supers\", \"shared.arc.grenades\"\n        return item.plug?.plugCategoryIdentifier?.match(\n          /\\.(supers|grenades|class_abilities|melee|aspects|fragments)$/\n        );\n      }\n    );\n\n    localStorage.setItem(\"allAbilities\", JSON.stringify(allAbilities));\n  }\n\n  // Collect the data for exotic armor collectibles\n  // this allows us to map a collection entry hash to the associated armor inventory item hash\n  private async updateExoticCollectibles(\n    manifestTables: DestinyManifestSlice<\n      (\"DestinyCollectibleDefinition\" | \"DestinyInventoryItemDefinition\")[]\n    >\n  ) {\n    const exoticArmorCollectibles: IManifestCollectible[] = Object.entries(\n      manifestTables.DestinyCollectibleDefinition\n    )\n      .filter(([k, v]) => {\n        const item = manifestTables.DestinyInventoryItemDefinition[v.itemHash];\n        return item?.inventory?.tierType == 6 && item?.itemType == DestinyItemType.Armor;\n      })\n      .map(([k, v]) => {\n        return {\n          hash: parseInt(k),\n          itemHash: v.itemHash,\n        };\n      });\n\n    console.log(\"Storing\", exoticArmorCollectibles.length, \"exotic armor hashes\");\n    await this.db.manifestCollectibles.clear();\n    await this.db.manifestCollectibles.bulkPut(exoticArmorCollectibles);\n  }\n\n  async updateManifest(force = false) {\n    if (environment.offlineMode) {\n      console.info(\"BungieApiService\", \"updateManifest\", \"offline mode, skipping\");\n      if (!this.manifestAlreadyUpdated) {\n        this.manifestAlreadyUpdated = true;\n        this.manifestUpdatedSubject.next();\n      }\n      return;\n    }\n\n    const manifestCache = this.db.lastManifestUpdate();\n\n    let destinyManifest = null;\n    if (manifestCache && !force) {\n      if (Date.now() - manifestCache.updatedAt > 1000 * 3600 * 0.25) {\n        destinyManifest = await getDestinyManifest((d) => this.http.$httpWithoutBearerToken(d));\n        const version = destinyManifest.Response.version;\n        if (manifestCache.version == version) {\n          console.info(\"bungieApiService - updateManifest\", \"Manifest is last version\");\n          if (!this.manifestAlreadyUpdated) {\n            this.manifestAlreadyUpdated = true;\n            this.manifestUpdatedSubject.next();\n          }\n          return;\n        }\n      }\n\n      if (Date.now() - manifestCache.updatedAt < 1000 * 3600 * 24) {\n        console.info(\"bungieApiService - updateManifest\", \"Manifest is less than a day old\");\n        if (!this.manifestAlreadyUpdated) {\n          this.manifestAlreadyUpdated = true;\n          this.manifestUpdatedSubject.next();\n        }\n        return;\n      }\n    }\n\n    if (destinyManifest == null) {\n      destinyManifest = await getDestinyManifest((d) => this.http.$httpWithoutBearerToken(d));\n    }\n\n    const manifestVersion = destinyManifest.Response.version;\n\n    const manifestTables = await getDestinyManifestSlice((d) => this.http.$httpWithoutApiKey(d), {\n      destinyManifest: destinyManifest.Response,\n      tableNames: [\n        \"DestinyInventoryItemDefinition\",\n        \"DestinyCollectibleDefinition\",\n        \"DestinyVendorDefinition\",\n        \"DestinySocketTypeDefinition\",\n        \"DestinyEquipableItemSetDefinition\",\n        \"DestinySandboxPerkDefinition\",\n      ] as any as DestinyManifestComponentName[],\n      language: \"en\",\n    });\n\n    const enManifestTables = await getDestinyManifestSlice((d) => this.http.$httpWithoutApiKey(d), {\n      destinyManifest: destinyManifest.Response,\n      tableNames: [\"DestinyCollectibleDefinition\", \"DestinyPresentationNodeDefinition\"],\n      language: \"en\",\n    });\n\n    await this.updateExoticCollectibles(manifestTables);\n    await this.updateVendorNames(manifestTables);\n    await this.updateAbilities(manifestTables);\n    await this.updateVendorItemSubScreens(manifestTables);\n    await this.updateEquipableItemSetDefinitions(manifestTables);\n    await this.updateSandboxPerks(manifestTables);\n\n    // NOTE: This is also storing emotes, as these have itemType 19 (mods)\n    let entries = Object.entries(manifestTables.DestinyInventoryItemDefinition)\n      .filter(([k, v]) => {\n        if (v.itemType == 19) return true; // mods\n        if (v.itemType == 16 && v.itemCategoryHashes && v.itemCategoryHashes.indexOf(50) > -1)\n          return true; // subclasses\n        if (v.itemType == 2) return true; // armor\n        if (v.inventory?.bucketTypeHash == 3448274439) return true; // helmets, required for festival masks\n        if (v.inventory?.bucketTypeHash == 3551918588) return true; // gauntlets\n        if (v.inventory?.bucketTypeHash == 14239492) return true; // chest\n        if (v.inventory?.bucketTypeHash == 20886954) return true; // leg\n        if (v.inventory?.bucketTypeHash == 1585787867 && v.inventory.tierType == 6) return true; // exotic class items\n        return false;\n      })\n      .map(([k, v]) => {\n        let slot = ArmorSlot.ArmorSlotNone;\n        if (\n          v.inventory?.bucketTypeHash == 3448274439 ||\n          (v.itemCategoryHashes?.indexOf(45) || -1) > -1\n        )\n          slot = ArmorSlot.ArmorSlotHelmet;\n        if (\n          v.inventory?.bucketTypeHash == 3551918588 ||\n          (v.itemCategoryHashes?.indexOf(46) || -1) > -1\n        )\n          slot = ArmorSlot.ArmorSlotGauntlet;\n        if (\n          v.inventory?.bucketTypeHash == 14239492 ||\n          (v.itemCategoryHashes?.indexOf(47) || -1) > -1\n        )\n          slot = ArmorSlot.ArmorSlotChest;\n        if (\n          v.inventory?.bucketTypeHash == 20886954 ||\n          (v.itemCategoryHashes?.indexOf(48) || -1) > -1\n        )\n          slot = ArmorSlot.ArmorSlotLegs;\n        if (\n          v.inventory?.bucketTypeHash == 1585787867 ||\n          (v.itemCategoryHashes?.indexOf(49) || -1) > -1\n        )\n          slot = ArmorSlot.ArmorSlotClass;\n\n        const isArmor2 =\n          (\n            v.sockets?.socketEntries.filter((d) => {\n              return (\n                d.socketTypeHash == 2512726577 || // general\n                d.socketTypeHash == 1108765570 || // arms\n                d.socketTypeHash == 959256494 || // chest\n                d.socketTypeHash == 2512726577 || // class\n                d.socketTypeHash == 3219375296 || // legs\n                d.socketTypeHash == 968742181 // head\n              );\n            }) || []\n          ).length > 0;\n\n        const isExotic = v.inventory?.tierType == 6;\n        let exoticPerkHash: number[] = [];\n        if (isExotic) {\n          const perks =\n            v.sockets?.socketEntries\n              .filter((s) => s.socketTypeHash == 965959289)\n              .map((d) => d.singleInitialItemHash) || [];\n          exoticPerkHash = perks.filter((p) => p !== undefined && p !== null);\n        }\n\n        var sunsetPowerCaps = [\n          1862490585, // 1260\n          1862490584, // 1060\n          1862490584, // 1060\n          1862490583, // 1060\n          2471437758, // 1010\n        ];\n        // if every entry is sunset, so is this item.\n        var isSunset =\n          v.quality?.versions.filter((k) => sunsetPowerCaps.includes(k.powerCapHash)).length ==\n          v.quality?.versions.length;\n\n        var clasz = v.classType;\n        if (clasz == DestinyClass.Unknown && isArmor2) {\n          if (v.collectibleHash != undefined) {\n            let presentationParentNode =\n              enManifestTables.DestinyCollectibleDefinition[v.collectibleHash].parentNodeHashes;\n            if (presentationParentNode !== undefined) {\n              if (\n                presentationParentNode.findIndex(\n                  (x) =>\n                    enManifestTables.DestinyPresentationNodeDefinition[x].displayProperties.name ==\n                    \"Warlock\"\n                ) != -1\n              )\n                clasz = DestinyClass.Warlock;\n              if (\n                presentationParentNode.findIndex(\n                  (x) =>\n                    enManifestTables.DestinyPresentationNodeDefinition[x].displayProperties.name ==\n                    \"Titan\"\n                ) != -1\n              )\n                clasz = DestinyClass.Titan;\n              if (\n                presentationParentNode.findIndex(\n                  (x) =>\n                    enManifestTables.DestinyPresentationNodeDefinition[x].displayProperties.name ==\n                    \"Hunter\"\n                ) != -1\n              )\n                clasz = DestinyClass.Hunter;\n            }\n          }\n\n          if (clasz == DestinyClass.Unknown && isArmor2) {\n            v.sockets?.socketEntries.forEach((a) => {\n              let socketDef = manifestTables.DestinySocketTypeDefinition[a.socketTypeHash];\n              if (socketDef !== undefined) {\n                if (\n                  socketDef.plugWhitelist.findIndex((x) =>\n                    x.categoryIdentifier.includes(\"warlock\")\n                  ) != -1\n                ) {\n                  clasz = DestinyClass.Warlock;\n                  return;\n                }\n                if (\n                  socketDef.plugWhitelist.findIndex((x) =>\n                    x.categoryIdentifier.includes(\"titan\")\n                  ) != -1\n                ) {\n                  clasz = DestinyClass.Titan;\n                  return;\n                }\n                if (\n                  socketDef.plugWhitelist.findIndex((x) =>\n                    x.categoryIdentifier.includes(\"hunter\")\n                  ) != -1\n                ) {\n                  clasz = DestinyClass.Hunter;\n                  return;\n                }\n              }\n            });\n          }\n        }\n\n        const isFeatured = !!(v as any)?.isFeaturedItem;\n        return {\n          hash: v.hash,\n          icon: v.displayProperties.icon,\n          watermarkIcon: isFeatured ? (v as any).iconWatermarkFeatured : v.iconWatermark,\n          name: v.displayProperties.name,\n          description: v.displayProperties.description,\n          clazz: clasz,\n          armorSystem: isArmor2 ? 2 : 1, // TODO: There may be a smarter way\n          slot: slot,\n          isExotic: isExotic ? 1 : 0,\n          isSunset: isSunset,\n          rarity: v.inventory?.tierType,\n          exoticPerkHash: exoticPerkHash,\n          itemType: v.itemType,\n          itemSubType: v.itemSubType,\n          investmentStats: v.investmentStats,\n          // TODO: fix as soon as DIM Api is updated\n          perk: this.getArmorPerk(v),\n          gearSetHash: this.getGearSet(\n            v,\n            (manifestTables as any).DestinyEquipableItemSetDefinition\n          ),\n          socketEntries: v.sockets?.socketEntries ?? [],\n          isFeatured: isFeatured,\n        } as IManifestArmor;\n      });\n\n    await this.db.writeManifestArmor(entries, manifestVersion);\n    this.manifestUpdatedSubject.next();\n    return manifestTables;\n  }\n  getGearSet(\n    v: DestinyInventoryItemDefinition,\n    itemSetDefinitions: DestinyEquipableItemSetDefinition[]\n  ) {\n    for (const itemSet of Object.values(itemSetDefinitions)) {\n      if (itemSet.setItems.indexOf(v.hash) > -1) {\n        return itemSet.hash;\n      }\n    }\n    return null;\n  }\n  updateSandboxPerks(manifestTables: DestinyManifestSlice<\"DestinySandboxPerkDefinition\"[]>) {\n    const sandboxPerks = manifestTables.DestinySandboxPerkDefinition;\n    if (!sandboxPerks) {\n      console.warn(\"No sandbox perks found in manifest\");\n      return;\n    }\n\n    const mappedSandboxPerks = Object.entries(sandboxPerks).map(([key, value]) => {\n      return value;\n    });\n\n    this.db.sandboxPerkDefinition.clear();\n    this.db.sandboxPerkDefinition.bulkPut(mappedSandboxPerks);\n  }\n  updateEquipableItemSetDefinitions(\n    manifestTables: DestinyManifestSlice<(keyof AllDestinyManifestComponents)[]>\n  ) {\n    const equipableItemSetDefinitions = (manifestTables as any)\n      .DestinyEquipableItemSetDefinition as { [key: string]: DestinyEquipableItemSetDefinition };\n    if (!equipableItemSetDefinitions) {\n      console.warn(\"No equipable item set definitions found in manifest\");\n      return;\n    }\n    this.db.equipableItemSetDefinition.clear();\n\n    const mapped = Object.entries(equipableItemSetDefinitions).map(([key, value]) => {\n      return value as DestinyEquipableItemSetDefinition;\n    });\n    this.db.equipableItemSetDefinition.bulkPut(mapped);\n  }\n\n  async moveItem(\n    itemInstanceId: string,\n    sourceCharacterId: string,\n    targetCharacterId: string\n  ): Promise<boolean> {\n    let destinyMembership = await this.membership.getMembershipDataForCurrentUser();\n    if (!destinyMembership) {\n      if (!this.status.getStatus().apiError) this.status.setAuthError();\n      return false;\n    }\n    this.status.clearAuthError();\n    this.status.clearApiError();\n\n    const item = await getItem((d) => this.http.$http(d, false), {\n      membershipType: destinyMembership.membershipType,\n      destinyMembershipId: destinyMembership.membershipId,\n      itemInstanceId: itemInstanceId,\n      components: [DestinyComponentType.ItemCommonData],\n    });\n\n    if (!item) return false;\n\n    // If the item is already on the target character, do nothing\n    if (item.Response.characterId === targetCharacterId) return true;\n\n    // If the item is not in the vault, move it to the vault first\n    if (item.Response.item.data?.location !== 2) {\n      await this.moveItemToVault(itemInstanceId);\n    }\n\n    // Now transfer from vault to the target character\n    return this.transferItem(itemInstanceId, targetCharacterId);\n  }\n\n  async swapItems(\n    itemInstanceId1: string,\n    itemInstanceId2: string,\n    characterId: string\n  ): Promise<boolean> {\n    let destinyMembership = await this.membership.getMembershipDataForCurrentUser();\n    if (!destinyMembership) {\n      if (!this.status.getStatus().apiError) this.status.setAuthError();\n      return false;\n    }\n    this.status.clearAuthError();\n    this.status.clearApiError();\n\n    // Get both items\n    const item1 = await getItem((d) => this.http.$http(d, false), {\n      membershipType: destinyMembership.membershipType,\n      destinyMembershipId: destinyMembership.membershipId,\n      itemInstanceId: itemInstanceId1,\n      components: [DestinyComponentType.ItemCommonData],\n    });\n    const item2 = await getItem((d) => this.http.$http(d, false), {\n      membershipType: destinyMembership.membershipType,\n      destinyMembershipId: destinyMembership.membershipId,\n      itemInstanceId: itemInstanceId2,\n      components: [DestinyComponentType.ItemCommonData],\n    });\n\n    if (!item1 || !item2) return false;\n\n    // If both items are on the same character, we can't really swap them in-place\n    // So we'll move item1 to vault and then transfer item2 to the character\n    if (item1.Response.characterId === item2.Response.characterId) {\n      await this.moveItemToVault(itemInstanceId1);\n      // Item2 is already on the target character, so we're done\n      return true;\n    }\n\n    // Otherwise, move item 1 to vault (if not already there) and then transfer item 2 to item 1's previous location\n    await this.moveItemToVault(itemInstanceId1);\n\n    return this.transferItem(itemInstanceId2, item1.Response.characterId || \"\");\n  }\n\n  async equipItemById(itemInstanceId: string, characterId: string): Promise<boolean> {\n    let destinyMembership = await this.membership.getMembershipDataForCurrentUser();\n    if (!destinyMembership) {\n      if (!this.status.getStatus().apiError) this.status.setAuthError();\n      return false;\n    }\n    this.status.clearAuthError();\n    this.status.clearApiError();\n\n    const item = await getItem((d) => this.http.$http(d, false), {\n      membershipType: destinyMembership.membershipType,\n      destinyMembershipId: destinyMembership.membershipId,\n      itemInstanceId: itemInstanceId,\n      components: [DestinyComponentType.ItemCommonData],\n    });\n\n    if (!item) return false;\n\n    const payload = {\n      characterId: characterId,\n      membershipType: destinyMembership.membershipType,\n      stackSize: 1,\n      itemId: item.Response.item.data?.itemInstanceId || \"\",\n      itemReferenceHash: item.Response.item.data?.itemHash || 0,\n    };\n\n    return !!(await equipItem((d) => this.http.$httpPost(d), payload));\n  }\n\n  /**\n   * Gets the character ID for the configured character class\n   */\n  async getCharacterIdForCurrentClass(): Promise<string | null> {\n    const config = this.config.readonlyConfigurationSnapshot;\n    let characters = await this.membership.getCharacters();\n    characters = characters.filter((c: any) => c.clazz == config.characterClass);\n\n    if (characters.length == 0) {\n      return null;\n    }\n\n    return characters[0].characterId;\n  }\n\n  /**\n   * Moves all items from a result to the character's inventory\n   * @param result The result definition containing items to move\n   * @param equip Whether to equip the items after moving them\n   * @returns Promise<{success: boolean, allSuccessful: boolean}>\n   */\n  async moveResultItems(\n    result: ResultDefinition,\n    equip = false\n  ): Promise<{ success: boolean; allSuccessful: boolean }> {\n    // Set all items to waiting state\n    for (let item of (result?.items || []).flat()) {\n      item.transferState = ResultItemMoveState.WAITING_FOR_TRANSFER;\n    }\n\n    const characterId = await this.getCharacterIdForCurrentClass();\n    if (!characterId) {\n      // Reset transfer states on error\n      for (let item of (result?.items || []).flat()) {\n        item.transferState = ResultItemMoveState.ERROR_DURING_TRANSFER;\n      }\n      return { success: false, allSuccessful: false };\n    }\n\n    let allSuccessful = true;\n    // Sort items so exotics are moved last (they might need special handling)\n    const items = (result?.items || []).flat().sort((i) => (i.exotic ? 1 : -1));\n\n    for (let item of items) {\n      item.transferState = ResultItemMoveState.TRANSFERRING;\n      const success = await this.transferItem(item.itemInstanceId, characterId, equip);\n      item.transferState = success\n        ? ResultItemMoveState.TRANSFERRED\n        : ResultItemMoveState.ERROR_DURING_TRANSFER;\n\n      if (!success) {\n        allSuccessful = false;\n      }\n    }\n\n    return { success: true, allSuccessful };\n  }\n\n  /**\n   * Imports currently equipped exotic armor and updates the configuration accordingly\n   */\n  async importCurrentlyEquippedExotic(): Promise<boolean> {\n    if (environment.offlineMode) {\n      console.info(\"BungieApiService\", \"importCurrentlyEquippedExotic\", \"offline mode, skipping\");\n      return false;\n    }\n\n    let destinyMembership = await this.membership.getMembershipDataForCurrentUser();\n    if (!destinyMembership) {\n      if (!this.status.getStatus().apiError) this.status.setAuthError();\n      return false;\n    }\n    this.status.clearAuthError();\n    this.status.clearApiError();\n\n    const characterId = await this.getCharacterIdForCurrentClass();\n    if (!characterId) {\n      console.warn(\"No character found for current class\");\n      return false;\n    }\n\n    console.info(\"BungieApiService\", \"Importing equipped exotic for character\", characterId);\n\n    let profile = await getProfile((d) => this.http.$http(d, true), {\n      components: [\n        DestinyComponentType.CharacterEquipment,\n        DestinyComponentType.ItemSockets,\n        DestinyComponentType.ItemInstances,\n      ],\n      membershipType: destinyMembership.membershipType,\n      destinyMembershipId: destinyMembership.membershipId,\n    });\n\n    const characterEquipment = profile.Response.characterEquipment.data?.[characterId];\n    if (!characterEquipment) {\n      console.warn(\"No equipment data found for character\");\n      return false;\n    }\n\n    const manifestArmor = await this.db.manifestArmor.toArray();\n    const manifestArmorMap = Object.fromEntries(manifestArmor.map((_) => [_.hash, _]));\n\n    let updatedConfig = false;\n\n    // Import exotic armor\n    const exoticArmor = characterEquipment.items.find((item) => {\n      const manifest = manifestArmorMap[item.itemHash];\n      return manifest && manifest.isExotic === 1 && manifest.itemType === 2; // Armor type\n    });\n\n    if (exoticArmor) {\n      const manifestItem = manifestArmorMap[exoticArmor.itemHash];\n      if (manifestItem) {\n        // Find all variants of this exotic armor piece\n        const exoticVariants = manifestArmor\n          .filter(\n            (armor) =>\n              armor.isExotic === 1 &&\n              armor.itemType === 2 &&\n              armor.name === manifestItem.name &&\n              armor.clazz === manifestItem.clazz &&\n              armor.slot === manifestItem.slot\n          )\n          .map((armor) => armor.hash);\n\n        this.config.modifyConfiguration((config) => {\n          config.selectedExotics = exoticVariants;\n        });\n        updatedConfig = true;\n\n        // Handle exotic class item perks if applicable\n        if (manifestItem.slot === ArmorSlot.ArmorSlotClass) {\n          const sockets =\n            profile.Response.itemComponents.sockets.data?.[exoticArmor.itemInstanceId!];\n          if (sockets) {\n            const exoticPerks = this.extractExoticClassItemPerks(sockets.sockets);\n            if (exoticPerks.length > 0) {\n              this.config.modifyConfiguration((config) => {\n                config.selectedExoticPerks = [\n                  exoticPerks[0] || ArmorPerkOrSlot.Any,\n                  exoticPerks[1] || ArmorPerkOrSlot.Any,\n                ];\n              });\n            }\n          }\n        }\n      }\n    }\n\n    return updatedConfig;\n  }\n\n  /**\n   * Imports currently equipped subclass and fragments and updates the configuration accordingly\n   */\n  async importCurrentlyEquippedSubclass(): Promise<boolean> {\n    if (environment.offlineMode) {\n      console.info(\"BungieApiService\", \"importCurrentlyEquippedSubclass\", \"offline mode, skipping\");\n      return false;\n    }\n\n    let destinyMembership = await this.membership.getMembershipDataForCurrentUser();\n    if (!destinyMembership) {\n      if (!this.status.getStatus().apiError) this.status.setAuthError();\n      return false;\n    }\n    this.status.clearAuthError();\n    this.status.clearApiError();\n\n    const characterId = await this.getCharacterIdForCurrentClass();\n    if (!characterId) {\n      console.warn(\"No character found for current class\");\n      return false;\n    }\n\n    console.info(\"BungieApiService\", \"Importing equipped subclass for character\", characterId);\n\n    let profile = await getProfile((d) => this.http.$http(d, true), {\n      components: [\n        DestinyComponentType.CharacterEquipment,\n        DestinyComponentType.ItemSockets,\n        DestinyComponentType.ItemInstances,\n      ],\n      membershipType: destinyMembership.membershipType,\n      destinyMembershipId: destinyMembership.membershipId,\n    });\n\n    const characterEquipment = profile.Response.characterEquipment.data?.[characterId];\n    if (!characterEquipment) {\n      console.warn(\"No equipment data found for character\");\n      return false;\n    }\n\n    let updatedConfig = false;\n\n    // Import subclass and fragments\n    const subclass = characterEquipment.items.find((item) => item.bucketHash === 3284755031); // Subclass bucket\n    if (subclass) {\n      const configClass = this.config.readonlyConfigurationSnapshot\n        .characterClass as keyof typeof SubclassHashes;\n      let subclassKey: string | null = null;\n      if (SubclassHashes[configClass]) {\n        for (const [key, hash] of Object.entries(SubclassHashes[configClass])) {\n          if (hash === subclass.itemHash) {\n            subclassKey = key;\n            break;\n          }\n        }\n      }\n      if (subclassKey) {\n        this.config.modifyConfiguration((config) => {\n          config.selectedModElement = Number(subclassKey);\n          config.enabledMods = [];\n        });\n        updatedConfig = true;\n      }\n    }\n\n    // fragments\n    if (subclass && subclass.itemInstanceId) {\n      const sockets = profile.Response.itemComponents.sockets.data?.[subclass.itemInstanceId];\n      if (sockets) {\n        const fragmentHashes = sockets.sockets\n          .filter((socket) => socket.plugHash && socket.plugHash !== 0)\n          .map((socket) => socket.plugHash)\n          .map((plugHash) => {\n            const modKey = Object.entries(ModInformation).find(\n              ([_, info]) => info.hash === plugHash\n            )?.[0];\n            return modKey ? Number(modKey) : undefined;\n          })\n          .filter(Boolean);\n        if (fragmentHashes && fragmentHashes.length > 0) {\n          this.config.modifyConfiguration((config) => {\n            console.debug(\"BungieApiService\", \"Importing fragments\", fragmentHashes);\n            config.enabledMods = fragmentHashes as number[];\n          });\n          updatedConfig = true;\n        }\n      }\n    }\n\n    return updatedConfig;\n  }\n\n  private extractExoticClassItemPerks(sockets: any[]): ArmorPerkOrSlot[] {\n    const perks: ArmorPerkOrSlot[] = [];\n\n    for (const socket of sockets) {\n      if (\n        socket.plugHash &&\n        Object.keys(ExoticClassItemPerkNames).map(Number).includes(socket.plugHash)\n      ) {\n        // Map the exotic perk hash to ArmorPerkOrSlot if needed\n        // For now, we'll return the hash directly as it should match the enum\n        perks.push(socket.plugHash as ArmorPerkOrSlot);\n      }\n    }\n\n    return perks;\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport {\n  getVendors,\n  getVendor,\n  DestinyComponentType,\n  DestinyItemType,\n  DestinyVendorItemState,\n} from \"bungie-api-ts/destiny2\";\nimport { MembershipService } from \"./membership.service\";\nimport { GroupUserInfoCard } from \"bungie-api-ts/groupv2\";\nimport { ArmorSystem, IManifestArmor } from \"../data/types/IManifestArmor\";\nimport {\n  IInventoryArmor,\n  InventoryArmorSource,\n  createArmorItem,\n  applyInvestmentStats,\n} from \"../data/types/IInventoryArmor\";\nimport { HttpClientService } from \"./http-client.service\";\nimport { DatabaseService } from \"./database.service\";\nimport { AuthService } from \"./auth.service\";\nimport { intersection as _intersection } from \"lodash\";\n\nconst VENDOR_NEXT_REFRESH_KEY = \"vendor-next-refresh-time\";\n\ninterface VendorWithParent {\n  vendorHash: number;\n  parentHash: number;\n}\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class VendorsService {\n  constructor(\n    private membership: MembershipService,\n    private http: HttpClientService,\n    private db: DatabaseService,\n    private auth: AuthService\n  ) {\n    this.auth.logoutEvent.subscribe((k) => this.clearCachedData());\n  }\n\n  private clearCachedData() {\n    localStorage.removeItem(VENDOR_NEXT_REFRESH_KEY);\n    this.db.inventoryArmor.where({ source: InventoryArmorSource.Vendor }).delete();\n  }\n\n  private async getVendorArmorItemsForCharacter(\n    manifestItems: Record<number, IManifestArmor>,\n    destinyMembership: GroupUserInfoCard,\n    characterId: string\n  ): Promise<{\n    items: IInventoryArmor[];\n    nextRefreshDate: number;\n  }> {\n    const vendorsResponse = await getVendors((d) => this.http.$http(d, false), {\n      components: [DestinyComponentType.Vendors, DestinyComponentType.VendorSales],\n      characterId,\n      membershipType: destinyMembership.membershipType,\n      destinyMembershipId: destinyMembership.membershipId,\n      filter: 0,\n    });\n\n    const allVendors = Object.entries(vendorsResponse.Response.vendors.data!);\n    const allVendorsMap = new Map(allVendors);\n\n    let vendorsWithParent: VendorWithParent[] = (\n      await Promise.all(\n        Object.entries(vendorsResponse.Response.sales.data!).map(async ([_vendorHash, sales]) => {\n          let items = Object.values(sales.saleItems).map((x) => x.itemHash);\n          let subscreenItem = (await this.db.vendorItemSubscreen.bulkGet(items)).filter(\n            (x) => x != undefined\n          );\n          let vendors = subscreenItem.map((item) => {\n            return { vendorHash: item!.vendorHash, parentHash: parseInt(_vendorHash) };\n          });\n          return vendors;\n        })\n      )\n    ).flat();\n    const enabledVendors = allVendors\n      .filter(([_vendorHash, vendor]) => vendor.enabled && vendor.canPurchase)\n      .filter(([vendorHash, vendor]) => {\n        const parent = vendorsWithParent.find(\n          (v) => v.vendorHash.toString() == vendorHash\n        )?.parentHash;\n        if (parent == undefined) return true;\n        return allVendorsMap.get(parent.toString())?.enabled ?? false;\n      });\n    const vendors = enabledVendors\n      .filter(\n        ([vendorHash, vendor]) =>\n          Object.entries(vendorsResponse.Response.sales.data?.[vendorHash]?.saleItems ?? {}).find(\n            ([vendorItemIndex, saleItem]) =>\n              manifestItems[saleItem.itemHash]?.armorSystem == ArmorSystem.Armor2 ||\n              manifestItems[saleItem.itemHash]?.armorSystem == ArmorSystem.Armor3\n          ) !== undefined\n      )\n      .map(([vendorHash, vendor]) => ({\n        vendorHash: vendorHash,\n        refreshDate: new Date(vendor.nextRefreshDate).getTime(),\n      }));\n\n    const vendorArmorItems: IInventoryArmor[] = [];\n    const nextRefreshDate = Math.min(...vendors.map((v) => v.refreshDate));\n    const VendorPromises = vendors.map((vendor) => {\n      let vendorHash = vendor.vendorHash;\n      return getVendor((d) => this.http.$http(d, false), {\n        components: [DestinyComponentType.ItemStats],\n        characterId,\n        membershipType: destinyMembership.membershipType,\n        destinyMembershipId: destinyMembership.membershipId,\n        vendorHash: parseInt(vendorHash),\n      }).then(\n        (vendorResponse) => {\n          const saleItems = vendorsResponse.Response.sales.data?.[vendorHash]?.saleItems ?? {};\n          const vendorItemStats = vendorResponse.Response.itemComponents.stats.data ?? {};\n\n          for (const [vendorItemIndex, saleItem] of Object.entries(saleItems)) {\n            const manifestItem = manifestItems[saleItem.itemHash];\n            const itemStats = vendorItemStats[parseInt(vendorItemIndex)];\n\n            if (\n              (saleItem.augments & DestinyVendorItemState.Owned) ===\n              DestinyVendorItemState.Owned\n            ) {\n              continue;\n            }\n\n            if (!manifestItem || !itemStats) {\n              continue;\n            }\n\n            const statsOverride = Object.values(itemStats.stats).reduce(\n              (acc, { statHash, value }) => {\n                acc[statHash] = value;\n                return acc;\n              },\n              {} as Record<number, number>\n            );\n\n            let lastVendor = vendorHash;\n            let parentVendor = vendorsWithParent\n              .find((v) => v.vendorHash.toString() == lastVendor)\n              ?.parentHash?.toString();\n            while (parentVendor != undefined && lastVendor != parentVendor) {\n              lastVendor = parentVendor;\n              parentVendor = vendorsWithParent\n                .find((v) => v.vendorHash.toString() == lastVendor)\n                ?.parentHash?.toString();\n            }\n            parentVendor = lastVendor;\n            const r = createArmorItem(\n              manifestItem,\n              `v-${parentVendor}-${saleItem.itemHash}`,\n              InventoryArmorSource.Vendor\n            );\n            applyInvestmentStats(r, statsOverride);\n            vendorArmorItems.push(r);\n          }\n        },\n        (reason) => {\n          console.error(`Failed to get vendor: ${reason}`);\n        }\n      );\n    });\n\n    //const vendorArmorItems = vendorItems.flatMap(({ items }) => items);\n    await Promise.all(VendorPromises);\n    console.log(\n      `Collected ${vendorArmorItems.length} vendor armor items for character ${characterId}`\n    );\n\n    return {\n      items: vendorArmorItems,\n      nextRefreshDate,\n    };\n  }\n\n  isVendorCacheValid() {\n    const nextRefreshTimeStr = localStorage.getItem(VENDOR_NEXT_REFRESH_KEY);\n    if (!nextRefreshTimeStr) {\n      return false;\n    }\n\n    const nextVendorRefresh = new Date(nextRefreshTimeStr);\n    if (!isFinite(nextVendorRefresh.getTime())) {\n      return false;\n    }\n\n    console.debug(\"Vendor Cache\", {\n      information: {\n        nextVendorRefresh,\n        now: new Date(),\n        shouldRefresh: nextVendorRefresh > new Date(),\n      },\n    });\n    return nextVendorRefresh > new Date();\n  }\n\n  private async writeVendorCache(items: IInventoryArmor[], nextRefreshDate: Date) {\n    console.log(\n      `Writing new vendor cache (${\n        items.length\n      } items), valid until ${nextRefreshDate.toISOString()}`\n    );\n    await this.db.inventoryArmor.where({ source: InventoryArmorSource.Vendor }).delete();\n    await this.db.inventoryArmor.bulkPut(items);\n    localStorage.setItem(VENDOR_NEXT_REFRESH_KEY, nextRefreshDate.toISOString());\n  }\n\n  /**\n   * Updates the vendor armor items cache if it is invalid\n   * @returns true if the cache was updated, false if the cache is still valid\n   */\n  async updateVendorArmorItemsCache() {\n    if (this.isVendorCacheValid()) {\n      console.log(\"Using vendor items cache\");\n      return false;\n    }\n\n    const destinyMembership = await this.membership.getMembershipDataForCurrentUser();\n    const characters = await this.membership.getCharacters();\n\n    // This should contain a list of hashes for only the armor items which we are interested in\n    const manifestItems = (await this.db.manifestArmor.toArray())\n      .filter((a) => a.itemType == DestinyItemType.Armor)\n      .reduce(\n        (acc, item) => {\n          acc[item.hash] = item;\n          return acc;\n        },\n        {} as Record<number, IManifestArmor>\n      );\n\n    try {\n      const vendorArmorItems = await Promise.all(\n        characters.map(({ characterId }) =>\n          this.getVendorArmorItemsForCharacter(manifestItems, destinyMembership, characterId)\n        )\n      );\n\n      const allItems = vendorArmorItems.flatMap(({ items }) => items);\n      const nextRefreshDate = Math.max(\n        Math.min(...vendorArmorItems.map(({ nextRefreshDate }) => nextRefreshDate)),\n        Date.now() + 1000 * 60 * 10\n      );\n      this.writeVendorCache(allItems, new Date(nextRefreshDate));\n      return true;\n    } catch (e) {\n      console.error(\"Failed to update vendor armor items cache\", e);\n      // refresh sooner if we failed to update the cache\n      const nextRefreshDate = new Date();\n      nextRefreshDate.setMinutes(nextRefreshDate.getMinutes() + 5);\n      this.writeVendorCache([], new Date(nextRefreshDate));\n      return false;\n    }\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { DatabaseService } from \"./database.service\";\nimport { ArmorSystem, IManifestArmor } from \"../data/types/IManifestArmor\";\nimport { ConfigurationService } from \"./configuration.service\";\nimport { debounceTime } from \"rxjs/operators\";\nimport { BehaviorSubject, Observable, ReplaySubject, Subject } from \"rxjs\";\nimport { BuildConfiguration } from \"../data/buildConfiguration\";\nimport { STAT_MOD_VALUES, StatModifier } from \"../data/enum/armor-stat\";\nimport { StatusProviderService } from \"./status-provider.service\";\nimport { BungieApiService } from \"./bungie-api.service\";\nimport { AuthService } from \"./auth.service\";\nimport { ArmorSlot } from \"../data/enum/armor-slot\";\nimport { NavigationEnd, Router } from \"@angular/router\";\nimport {\n  ResultDefinition,\n  ResultItem,\n} from \"../components/authenticated-v2/results/results.component\";\nimport {\n  IInventoryArmor,\n  InventoryArmorSource,\n  isEqualItem,\n  totalStats,\n} from \"../data/types/IInventoryArmor\";\nimport { DestinyClass, TierType } from \"bungie-api-ts/destiny2\";\nimport { IPermutatorArmorSet } from \"../data/types/IPermutatorArmorSet\";\nimport { getSkillTier, getWaste } from \"./results-builder.worker\";\nimport { IPermutatorArmor } from \"../data/types/IPermutatorArmor\";\nimport { FORCE_USE_NO_EXOTIC, MAXIMUM_MASTERWORK_LEVEL } from \"../data/constants\";\nimport { VendorsService } from \"./vendors.service\";\nimport { ModOptimizationStrategy } from \"../data/enum/mod-optimization-strategy\";\nimport { isEqual as _isEqual } from \"lodash\";\nimport { getDifferences } from \"../data/commonFunctions\";\n\ntype info = {\n  results: ResultDefinition[];\n  totalResults: number;\n  maximumPossibleTiers: number[];\n  itemCount: number;\n  totalTime: number;\n};\n\nexport type ClassExoticInfo = {\n  inInventory: boolean;\n  inCollection: boolean;\n  inVendor: boolean;\n  items: IManifestArmor[];\n  instances: IInventoryArmor[];\n};\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class InventoryService {\n  /**\n   * An Int32Array that holds all permutations for the currently selected class, before filters are applied.\n   * It consists of N items of length 11:\n   * helmetHash, gauntletHash, chestHash, legHash, mobility, resilience, recovery, discipline, intellect, strength, exoticHash\n   * @private\n   */\n  private allArmorResults: ResultDefinition[] = [];\n  private currentClass: DestinyClass = DestinyClass.Unknown;\n\n  private _manifest: ReplaySubject<null>;\n  public readonly manifest: Observable<null>;\n  private _inventory: ReplaySubject<null>;\n  public readonly inventory: Observable<null>;\n\n  private _armorResults: BehaviorSubject<info>;\n  public readonly armorResults: Observable<info>;\n\n  private _reachableTiers: BehaviorSubject<number[]>;\n  public readonly reachableTiers: Observable<number[]>;\n\n  private _calculationProgress: Subject<number> = new Subject<number>();\n  public readonly calculationProgress: Observable<number> =\n    this._calculationProgress.asObservable();\n\n  private _config: BuildConfiguration = BuildConfiguration.buildEmptyConfiguration();\n  private workers: Worker[];\n\n  private results: IPermutatorArmorSet[] = [];\n  private totalPermutationCount = 0;\n  private resultMaximumTiers: number[][] = [];\n  private selectedExotics: IManifestArmor[] = [];\n  private inventoryArmorItems: IInventoryArmor[] = [];\n  private permutatorArmorItems: IPermutatorArmor[] = [];\n  private endResults: ResultDefinition[] = [];\n\n  constructor(\n    private db: DatabaseService,\n    private config: ConfigurationService,\n    private status: StatusProviderService,\n    private api: BungieApiService,\n    private auth: AuthService,\n    private router: Router,\n    private vendors: VendorsService\n  ) {\n    this._inventory = new ReplaySubject(1);\n    this.inventory = this._inventory.asObservable();\n    this._manifest = new ReplaySubject(1);\n    this.manifest = this._manifest.asObservable();\n\n    this._armorResults = new BehaviorSubject({\n      results: this.allArmorResults,\n    } as info);\n    this.armorResults = this._armorResults.asObservable();\n\n    this._reachableTiers = new BehaviorSubject([0, 0, 0, 0, 0, 0]);\n    this.reachableTiers = this._reachableTiers.asObservable();\n\n    this.workers = [];\n    let dataAlreadyFetched = false;\n\n    // TODO: This gives a race condition on some parts.\n    router.events.pipe(debounceTime(5)).subscribe(async (val) => {\n      if (this.auth.refreshTokenExpired || !(await this.auth.autoRegenerateTokens())) {\n        //await this.auth.logout();\n        //return;\n      }\n      if (!auth.isAuthenticated()) return;\n\n      if (val instanceof NavigationEnd) {\n        this.killWorkers();\n        this.clearResults();\n        console.debug(\"Trigger refreshAll due to router.events\");\n        await this.refreshAll(!dataAlreadyFetched);\n        dataAlreadyFetched = true;\n      }\n    });\n\n    this.config.configuration.pipe(debounceTime(500)).subscribe(async (c) => {\n      if (this.auth.refreshTokenExpired || !(await this.auth.autoRegenerateTokens())) {\n        //await this.auth.logout();\n        //return;\n      }\n      if (!auth.isAuthenticated()) return;\n\n      if (_isEqual(c, this._config)) return;\n      console.debug(\"Build configuration changed\", getDifferences(this._config, c));\n\n      this._config = structuredClone(c);\n      await this.refreshAll(!dataAlreadyFetched);\n      dataAlreadyFetched = true;\n    });\n  }\n\n  private clearResults() {\n    this.allArmorResults = [];\n    this._armorResults.next({\n      results: this.allArmorResults,\n      totalResults: 0,\n      totalTime: 0,\n      itemCount: 0,\n      maximumPossibleTiers: [0, 0, 0, 0, 0, 0],\n    });\n  }\n\n  shouldCalculateResults(): boolean {\n    return this.router.url == \"/\";\n  }\n\n  private refreshing: boolean = false;\n\n  async refreshAll(forceArmor: boolean = false, forceManifest = false) {\n    if (this.refreshing) return;\n    console.info(\"Refreshing User information\");\n    try {\n      this.refreshing = true;\n      if (this.auth.refreshTokenExpired && !(await this.auth.autoRegenerateTokens())) {\n        this.status.setAuthError(); // Better way to logout the user?\n        if (!this.status.getStatus().apiError) await this.auth.logout();\n        return;\n      }\n      let armorUpdated = false;\n      try {\n        let manifestUpdated = await this.updateManifest(forceManifest);\n        armorUpdated = await this.updateInventoryItems(manifestUpdated || forceArmor);\n        this.updateVendorsAsync();\n      } catch (e) {\n        console.error(e);\n      }\n\n      await this.triggerArmorUpdateAndUpdateResults(armorUpdated);\n    } finally {\n      this.refreshing = false;\n    }\n  }\n\n  private async triggerArmorUpdateAndUpdateResults(\n    triggerInventoryUpdate: boolean = false,\n    triggerResultsUpdate: boolean = true\n  ) {\n    // trigger armor update behaviour\n    if (triggerInventoryUpdate) this._inventory.next(null);\n\n    // Do not update results in Help and Cluster pages\n    if (this.shouldCalculateResults()) {\n      await this.updateResults();\n    }\n  }\n\n  private updateVendorsAsync() {\n    if (this.status.getStatus().updatingVendors) return;\n\n    if (!this.vendors.isVendorCacheValid()) {\n      this.status.modifyStatus((s) => (s.updatingVendors = true));\n      this.vendors\n        .updateVendorArmorItemsCache()\n        .then((success) => {\n          if (!success) return;\n          this.triggerArmorUpdateAndUpdateResults(success, this._config.includeVendorRolls);\n        })\n        .finally(() => {\n          this.status.modifyStatus((s) => (s.updatingVendors = false));\n        });\n    }\n  }\n\n  private killWorkers() {\n    console.debug(\"Terminating workers\");\n    this.workers.forEach((w) => {\n      w.terminate();\n    });\n    this.workers = [];\n  }\n\n  private estimateCombinationsToBeChecked(\n    helmets: IPermutatorArmor[],\n    gauntlets: IPermutatorArmor[],\n    chests: IPermutatorArmor[],\n    legs: IPermutatorArmor[]\n  ) {\n    let totalCalculations = 0;\n    const exoticHelmets = helmets.filter((d) => d.isExotic).length;\n    const legendaryHelmets = helmets.length - exoticHelmets;\n    const exoticGauntlets = gauntlets.filter((d) => d.isExotic).length;\n    const legendaryGauntlets = gauntlets.length - exoticGauntlets;\n    const exoticChests = chests.filter((d) => d.isExotic).length;\n    const legendaryChests = chests.length - exoticChests;\n    const exoticLegs = legs.filter((d) => d.isExotic).length;\n    const legendaryLegs = legs.length - exoticLegs;\n\n    totalCalculations += exoticHelmets * legendaryGauntlets * legendaryChests * legendaryLegs;\n    totalCalculations += legendaryHelmets * exoticGauntlets * legendaryChests * legendaryLegs;\n    totalCalculations += legendaryHelmets * legendaryGauntlets * exoticChests * legendaryLegs;\n    totalCalculations += legendaryHelmets * legendaryGauntlets * legendaryChests * exoticLegs;\n    totalCalculations += legendaryHelmets * legendaryGauntlets * legendaryChests * legendaryLegs;\n    return totalCalculations;\n  }\n\n  cancelCalculation() {\n    console.info(\"Cancelling calculation\");\n    this.killWorkers();\n    this.status.modifyStatus((s) => (s.calculatingResults = false));\n    this.status.modifyStatus((s) => (s.cancelledCalculation = true));\n\n    this._calculationProgress.next(0);\n    this.clearResults();\n  }\n\n  async updateResults(nthreads: number = 3) {\n    let config = this._config;\n    console.debug(\"Using config for Workers\", { configuration: config });\n    this.clearResults();\n    this.killWorkers();\n\n    try {\n      console.time(\"updateResults with WebWorker\");\n      this.status.modifyStatus((s) => (s.calculatingResults = true));\n      this.status.modifyStatus((s) => (s.cancelledCalculation = false));\n      let doneWorkerCount = 0;\n\n      this.results = [];\n      this.totalPermutationCount = 0;\n      this.resultMaximumTiers = [];\n      const startTime = Date.now();\n\n      this.selectedExotics = await Promise.all(\n        config.selectedExotics\n          .filter((hash) => hash != FORCE_USE_NO_EXOTIC)\n          .map(\n            async (hash) =>\n              (await this.db.manifestArmor.where(\"hash\").equals(hash).first()) as IManifestArmor\n          )\n      );\n      this.selectedExotics = this.selectedExotics.filter((i) => !!i);\n\n      this.inventoryArmorItems = (await this.db.inventoryArmor\n        .where(\"clazz\")\n        .equals(config.characterClass)\n        .distinct()\n        .toArray()) as IInventoryArmor[];\n\n      this.inventoryArmorItems = this.inventoryArmorItems\n        // only armor :)\n        .filter((item) => item.slot != ArmorSlot.ArmorSlotNone)\n        // filter disabled items\n        .filter((item) => config.disabledItems.indexOf(item.itemInstanceId) == -1)\n        // filter armor 3.0\n        .filter((item) => item.isExotic || !config.enforceFeaturedLegendaryArmor || item.isFeatured)\n        .filter((item) => !item.isExotic || !config.enforceFeaturedExoticArmor || item.isFeatured)\n        .filter(\n          (item) =>\n            item.armorSystem === ArmorSystem.Armor3 ||\n            item.isExotic ||\n            config.allowLegacyLegendaryArmor\n        )\n        .filter(\n          (item) =>\n            item.armorSystem === ArmorSystem.Armor3 ||\n            !item.isExotic ||\n            config.allowLegacyExoticArmor\n        )\n        // filter collection/vendor rolls if not allowed\n        .filter((item) => {\n          switch (item.source) {\n            case InventoryArmorSource.Collections:\n              return config.includeCollectionRolls;\n            case InventoryArmorSource.Vendor:\n              return config.includeVendorRolls;\n            default:\n              return true;\n          }\n        })\n        // filter the selected exotic right here\n        .filter(\n          (item) => config.selectedExotics.indexOf(FORCE_USE_NO_EXOTIC) == -1 || !item.isExotic\n        )\n        .filter(\n          (item) =>\n            this.selectedExotics.length === 0 ||\n            (item.isExotic && this.selectedExotics.some((exotic) => exotic.hash === item.hash)) ||\n            (!item.isExotic && this.selectedExotics.every((exotic) => exotic.slot !== item.slot))\n        )\n\n        // config.OnlyUseMasterworkedExotics - only keep exotics that are masterworked\n        .filter(\n          (item) =>\n            !config.onlyUseMasterworkedExotics ||\n            !(item.rarity == TierType.Exotic && item.masterworkLevel != MAXIMUM_MASTERWORK_LEVEL)\n        )\n\n        // config.OnlyUseMasterworkedLegendaries - only keep legendaries that are masterworked\n        .filter(\n          (item) =>\n            !config.onlyUseMasterworkedLegendaries ||\n            !(item.rarity == TierType.Superior && item.masterworkLevel != MAXIMUM_MASTERWORK_LEVEL)\n        )\n\n        // non-legendaries and non-exotics\n        .filter(\n          (item) =>\n            config.allowBlueArmorPieces ||\n            item.rarity == TierType.Exotic ||\n            item.rarity == TierType.Superior\n        )\n        // sunset armor\n        .filter((item) => !config.ignoreSunsetArmor || !item.isSunset);\n      // console.log(items.map(d => \"id:'\"+d.itemInstanceId+\"'\").join(\" or \"))\n\n      // Remove collection items if they are in inventory\n      this.inventoryArmorItems = this.inventoryArmorItems.filter((item) => {\n        if (item.source === InventoryArmorSource.Inventory) return true;\n\n        const purchasedItemInstance = this.inventoryArmorItems.find(\n          (rhs) => rhs.source === InventoryArmorSource.Inventory && isEqualItem(item, rhs)\n        );\n\n        // If this item is a collection/vendor item, ignore it if the player\n        // already has a real copy of the same item.\n        return purchasedItemInstance === undefined;\n      });\n      this.permutatorArmorItems = this.inventoryArmorItems.map((armor) => {\n        return {\n          id: armor.id,\n          hash: armor.hash,\n          slot: armor.slot,\n          clazz: armor.clazz,\n          perk: armor.perk,\n          isExotic: armor.isExotic,\n          rarity: armor.rarity,\n          isSunset: armor.isSunset,\n          masterworkLevel: armor.masterworkLevel,\n          archetypeStats: armor.archetypeStats,\n          mobility: armor.mobility,\n          resilience: armor.resilience,\n          recovery: armor.recovery,\n          discipline: armor.discipline,\n          intellect: armor.intellect,\n          strength: armor.strength,\n          source: armor.source,\n          exoticPerkHash: armor.exoticPerkHash,\n\n          gearSetHash: armor.gearSetHash ?? null,\n\n          icon: armor.icon,\n          watermarkIcon: armor.watermarkIcon,\n          name: armor.name,\n          energyLevel: armor.energyLevel,\n          tier: armor.tier,\n          armorSystem: armor.armorSystem,\n        };\n      });\n\n      nthreads = this.estimateRequiredThreads();\n\n      console.info(\"Threads for calculation\", nthreads);\n\n      // Values to calculate ETA\n      const threadCalculationAmountArr = [...Array(nthreads).keys()].map(() => 0);\n      const threadCalculationDoneArr = [...Array(nthreads).keys()].map(() => 0);\n      const threadCalculationReachableTiers: number[][] = [...Array(nthreads).keys()].map(() =>\n        Array(6).fill(0)\n      );\n      let oldProgressValue = 0;\n\n      // Improve per thread performance by shuffling the inventory\n      // sorting is a naive aproach that can be optimized\n      // in my test is better than the default order from the db\n      this.permutatorArmorItems = this.permutatorArmorItems.sort(\n        (a, b) => totalStats(b) - totalStats(a)\n      );\n      this._calculationProgress.next(0);\n\n      for (let n = 0; n < nthreads; n++) {\n        this.workers[n] = new Worker(new URL(\"./results-builder.worker\", import.meta.url), {\n          name: n.toString(),\n        });\n        this.workers[n].onmessage = async (ev) => {\n          let data = ev.data;\n          threadCalculationDoneArr[n] = data.checkedCalculations;\n          threadCalculationAmountArr[n] = data.estimatedCalculations;\n          threadCalculationReachableTiers[n] =\n            data.reachableTiers || data.runtime.maximumPossibleTiers;\n          const sumTotal = threadCalculationAmountArr.reduce((a, b) => a + b, 0);\n          const sumDone = threadCalculationDoneArr.reduce((a, b) => a + b, 0);\n          const minReachableTiers = threadCalculationReachableTiers\n            .reduce((minArr, currArr) => {\n              // Using MAX would be more accurate, but using min is more visually appealing as it leads to larger jumps\n              return minArr.map((val, idx) => Math.max(val, currArr[idx]));\n            })\n            .map((k) => Math.min(200, k) / 10);\n          this._reachableTiers.next(minReachableTiers);\n\n          if (\n            threadCalculationDoneArr[0] > 0 &&\n            threadCalculationDoneArr[1] > 0 &&\n            threadCalculationDoneArr[2] > 0\n          ) {\n            const newProgress = (sumDone / sumTotal) * 100;\n            if (newProgress > oldProgressValue + 0.25) {\n              oldProgressValue = newProgress;\n              this._calculationProgress.next(newProgress);\n            }\n          }\n          if (data.runtime == null) return;\n\n          this.results.push(...(data.results as IPermutatorArmorSet[]));\n          if (data.done == true) {\n            doneWorkerCount++;\n            this.totalPermutationCount += data.stats.permutationCount;\n            this.resultMaximumTiers.push(data.runtime.maximumPossibleTiers);\n          }\n          if (data.done == true && doneWorkerCount == nthreads) {\n            this.status.modifyStatus((s) => (s.calculatingResults = false));\n            this._calculationProgress.next(0);\n\n            this.endResults = [];\n\n            for (let armorSet of this.results) {\n              let items = armorSet.armor.map((x) =>\n                this.inventoryArmorItems.find((y) => y.id == x)\n              ) as IInventoryArmor[];\n              let exotic = items.find((x) => x.isExotic);\n              let v: ResultDefinition = {\n                exotic:\n                  exotic == null\n                    ? undefined\n                    : {\n                        icon: exotic?.icon,\n                        watermark: exotic?.watermarkIcon,\n                        name: exotic?.name,\n                        hash: exotic?.hash,\n                      },\n                artifice: armorSet.usedArtifice,\n                modCount: armorSet.usedMods.length,\n                modCost: armorSet.usedMods.reduce(\n                  (p, d: StatModifier) => p + STAT_MOD_VALUES[d][2],\n                  0\n                ),\n                mods: armorSet.usedMods,\n                stats: armorSet.statsWithMods,\n                statsNoMods: armorSet.statsWithoutMods,\n                tiers: getSkillTier(armorSet.statsWithMods),\n                waste: getWaste(armorSet.statsWithMods),\n                items: items.map(\n                  (instance): ResultItem => ({\n                    energyLevel: instance.energyLevel,\n                    hash: instance.hash,\n                    itemInstanceId: instance.itemInstanceId,\n                    name: instance.name,\n                    exotic: !!instance.isExotic,\n                    masterworked: instance.masterworkLevel == MAXIMUM_MASTERWORK_LEVEL,\n                    archetypeStats: instance.archetypeStats,\n                    armorSystem: instance.armorSystem, // 2 = Armor 2.0, 3 = Armor 3.0\n                    masterworkLevel: instance.masterworkLevel,\n                    slot: instance.slot,\n                    perk: instance.perk,\n                    transferState: 0, // TRANSFER_NONE\n                    tier: instance.tier,\n                    stats: [\n                      instance.mobility,\n                      instance.resilience,\n                      instance.recovery,\n                      instance.discipline,\n                      instance.intellect,\n                      instance.strength,\n                    ],\n                    source: instance.source,\n                    statsNoMods: [],\n                  })\n                ),\n                usesCollectionRoll: items.some(\n                  (y) => y.source === InventoryArmorSource.Collections\n                ),\n                usesVendorRoll: items.some((y) => y.source === InventoryArmorSource.Vendor),\n              } as ResultDefinition;\n              this.endResults.push(v);\n            }\n\n            this._armorResults.next({\n              results: this.endResults,\n              totalResults: this.totalPermutationCount, // Total amount of results, differs from the real amount if the memory save setting is active\n              itemCount: data.stats.itemCount,\n              totalTime: Date.now() - startTime,\n              maximumPossibleTiers: this.resultMaximumTiers\n                .reduce(\n                  (p, v) => {\n                    for (let k = 0; k < 6; k++) if (p[k] < v[k]) p[k] = v[k];\n                    return p;\n                  },\n                  [0, 0, 0, 0, 0, 0]\n                )\n                .map((k) => Math.min(200, k) / 10),\n            });\n            console.timeEnd(\"updateResults with WebWorker\");\n            this.workers[n].terminate();\n          } else if (data.done == true && doneWorkerCount != nthreads) this.workers[n].terminate();\n        };\n        this.workers[n].onerror = (ev) => {\n          this.workers[n].terminate();\n        };\n\n        this.workers[n].postMessage({\n          type: \"builderRequest\",\n          currentClass: this.currentClass,\n          config: this._config,\n          threadSplit: {\n            count: nthreads,\n            current: n,\n          },\n          items: this.permutatorArmorItems,\n          selectedExotics: this.selectedExotics,\n        });\n      }\n    } finally {\n    }\n  }\n\n  estimateRequiredThreads(): number {\n    const helmets = this.permutatorArmorItems.filter((d) => d.slot == ArmorSlot.ArmorSlotHelmet);\n    const gauntlets = this.permutatorArmorItems.filter(\n      (d) => d.slot == ArmorSlot.ArmorSlotGauntlet\n    );\n    const chests = this.permutatorArmorItems.filter((d) => d.slot == ArmorSlot.ArmorSlotChest);\n    const legs = this.permutatorArmorItems.filter((d) => d.slot == ArmorSlot.ArmorSlotLegs);\n    const estimatedCalculations = this.estimateCombinationsToBeChecked(\n      helmets,\n      gauntlets,\n      chests,\n      legs\n    );\n\n    const largestArmorBucket = Math.max(\n      helmets.length,\n      gauntlets.length,\n      chests.length,\n      legs.length\n    );\n\n    let calculationMultiplier = 1.0;\n    // very expensive calculations reduce the amount per thread\n    if (\n      this._config.tryLimitWastedStats &&\n      this._config.modOptimizationStrategy != ModOptimizationStrategy.None\n    ) {\n      calculationMultiplier = 0.7;\n    }\n\n    let minimumCalculationPerThread = calculationMultiplier * 5e4;\n    let maximumCalculationPerThread = calculationMultiplier * 2.5e5;\n\n    const nthreads = Math.max(\n      3, // Enforce a minimum of 3 threads\n      Math.min(\n        Math.max(1, Math.ceil(estimatedCalculations / minimumCalculationPerThread)),\n        Math.ceil(estimatedCalculations / maximumCalculationPerThread),\n        Math.floor((navigator.hardwareConcurrency || 2) * 0.75), // limit it to the amount of cores, and only use 75%\n        20, // limit it to a maximum of 20 threads\n        largestArmorBucket // limit it to the largest armor bucket, as we will split the work by this value\n      )\n    );\n\n    return nthreads;\n  }\n\n  async getItemCountForClass(clazz: DestinyClass, slot?: ArmorSlot) {\n    let pieces = await this.db.inventoryArmor.where(\"clazz\").equals(clazz).toArray();\n    if (!!slot) pieces = pieces.filter((i) => i.slot == slot);\n    //if (!this._config.includeVendorRolls) pieces = pieces.filter((i) => i.source != InventoryArmorSource.Vendor);\n    //if (!this._config.includeCollectionRolls) pieces = pieces.filter((i) => i.source != InventoryArmorSource.Collections);\n    pieces = pieces.filter((i) => i.source == InventoryArmorSource.Inventory);\n    return pieces.length;\n  }\n\n  async getExoticsForClass(clazz: DestinyClass, slot?: ArmorSlot): Promise<ClassExoticInfo[]> {\n    let inventory = await this.db.inventoryArmor.where(\"isExotic\").equals(1).toArray();\n    inventory = inventory.filter(\n      (d) =>\n        d.clazz == clazz &&\n        (d.armorSystem == ArmorSystem.Armor2 || d.armorSystem == ArmorSystem.Armor3) &&\n        (!slot || d.slot == slot)\n    );\n\n    let exotics = await this.db.manifestArmor.where(\"isExotic\").equals(1).toArray();\n    exotics = exotics.filter(\n      (d) =>\n        d.clazz == clazz &&\n        (d.armorSystem == ArmorSystem.Armor2 || d.armorSystem == ArmorSystem.Armor3) &&\n        (!slot || d.slot == slot)\n    );\n\n    return exotics\n      .map((ex) => {\n        const instances = inventory.filter((i) => i.hash == ex.hash);\n        return {\n          items: [ex],\n          instances: instances,\n          inCollection:\n            instances.find((i) => i.source === InventoryArmorSource.Collections) !== undefined,\n          inInventory:\n            instances.find((i) => i.source === InventoryArmorSource.Inventory) !== undefined,\n          inVendor: instances.find((i) => i.source === InventoryArmorSource.Vendor) !== undefined,\n        };\n      })\n      .reduce((acc: ClassExoticInfo[], curr: ClassExoticInfo) => {\n        const existing = acc.find((e) => e.items[0].name === curr.items[0].name);\n        if (existing) {\n          existing.items.push(curr.items[0]);\n          existing.instances.push(...curr.instances);\n          existing.inCollection = existing.inCollection || curr.inCollection;\n          existing.inInventory = existing.inInventory || curr.inInventory;\n          existing.inVendor = existing.inVendor || curr.inVendor;\n        } else {\n          acc.push({ ...curr, items: [curr.items[0]] });\n        }\n        return acc;\n      }, [] as ClassExoticInfo[])\n      .sort((x, y) => x.items[0].name.localeCompare(y.items[0].name));\n  }\n\n  async updateManifest(force: boolean = false): Promise<boolean> {\n    if (this.status.getStatus().updatingManifest) {\n      console.error(\"Already updating the manifest - abort\");\n      return false;\n    }\n    this.status.modifyStatus((s) => (s.updatingManifest = true));\n    let r = await this.api.updateManifest(force).finally(() => {\n      this.status.modifyStatus((s) => (s.updatingManifest = false));\n    });\n    if (!!r) this._manifest.next(null);\n    return !!r;\n  }\n\n  async updateInventoryItems(force: boolean = false, errorLoop = 0): Promise<boolean> {\n    this.status.modifyStatus((s) => (s.updatingInventory = true));\n\n    try {\n      let r = await this.api.updateArmorItems(force).finally(() => {\n        this.status.modifyStatus((s) => (s.updatingInventory = false));\n      });\n      return !!r;\n    } catch (e) {\n      // After three tries, call it a day.\n      if (errorLoop > 3) {\n        alert(\n          \"You encountered a strange error with the inventory update. Please log out and log in again. If that does not fix it, please message Mijago.\"\n        );\n        return false;\n      }\n\n      this.status.modifyStatus((s) => (s.updatingInventory = false));\n      console.error(e);\n\n      await this.status.setApiError();\n\n      //await this.updateManifest(true);\n      //return await this.updateInventoryItems(true, errorLoop++);\n      return false;\n    }\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { Observable, BehaviorSubject } from \"rxjs\";\n\nimport type { CharacterStats } from \"../data/character_stats/schema\";\nimport { InventoryService } from \"./inventory.service\";\n\nconst BASE_URL = \"https://Database-Clarity.github.io/Character-Stats\";\nexport const SUPPORTED_SCHEMA_VERSION = \"1.9\";\nexport const CHARACTER_STATS_URL = `${BASE_URL}/versions/${SUPPORTED_SCHEMA_VERSION}/CharacterStatInfo-NI.json`;\nexport const UPDATES_URL = `${BASE_URL}/update.json`;\n\nconst LOCAL_STORAGE_STATS_VERSION_KEY = \"clarity-character-stats-version\";\nconst LOCAL_STORAGE_STATS_KEY = \"clarity-character-stats\";\n\nexport type UpdateData = {\n  lastUpdate: number;\n  schemaVersion: string;\n};\n\n/**\n * TODO:\n * Currently this fetches and cached a single hardcoded data URL.\n * After the current clarity PR is merged this must implement periodic version fetching and updating.\n */\n@Injectable({\n  providedIn: \"root\",\n})\nexport class ClarityService {\n  private _characterStats: BehaviorSubject<CharacterStats | null> =\n    new BehaviorSubject<CharacterStats | null>(null);\n  public readonly characterStats: Observable<CharacterStats | null> =\n    this._characterStats.asObservable();\n\n  constructor(private http: HttpClient, private inv: InventoryService) {\n    // trigger a clarity reload on manifest change\n    this.inv.manifest.subscribe((_) => this.load());\n  }\n\n  async load() {\n    try {\n      await this.loadCharacterStats();\n    } catch (err) {\n      console.warn(\"Error loading Clarity data\", err);\n    }\n  }\n\n  private async fetchUpdateData() {\n    return this.http.get<UpdateData>(UPDATES_URL).toPromise();\n  }\n\n  // Load data from cache or fetch live data if necessary\n  private async loadCharacterStats() {\n    // If we have any stored data, we can just make it available right away\n    const storedData = localStorage.getItem(LOCAL_STORAGE_STATS_KEY);\n    if (storedData) {\n      this._characterStats.next(JSON.parse(storedData));\n    }\n\n    const liveVersion = await this.fetchUpdateData();\n    const storedVersion = parseInt(localStorage.getItem(LOCAL_STORAGE_STATS_VERSION_KEY) || \"0\");\n\n    // There’s new data available\n    if (liveVersion && liveVersion.lastUpdate > storedVersion) {\n      if (liveVersion.schemaVersion !== SUPPORTED_SCHEMA_VERSION) {\n        console.warn(\"Unsupported live character stats schema version\", liveVersion.schemaVersion);\n      } else if (liveVersion && liveVersion.lastUpdate !== undefined) {\n        await this.fetchLiveCharacterStats().then((data) => {\n          localStorage.setItem(LOCAL_STORAGE_STATS_KEY, JSON.stringify(data));\n          localStorage.setItem(LOCAL_STORAGE_STATS_VERSION_KEY, liveVersion.lastUpdate.toString());\n\n          this._characterStats.next(data);\n        });\n      }\n    }\n  }\n\n  private async fetchLiveCharacterStats() {\n    return this.http.get<CharacterStats>(CHARACTER_STATS_URL).toPromise();\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { ClarityService } from \"./clarity.service\";\nimport { ModifierType } from \"../data/enum/modifierType\";\nimport type { CharacterStats, Override } from \"../data/character_stats/schema\";\nimport { DestinyClass, DestinyInventoryItemDefinition } from \"bungie-api-ts/destiny2\";\n\nexport enum CharacterStatType {\n  Speed = 1,\n  Percentage = 2,\n  Time = 3,\n  TimeMMSS = 4,\n  PercentagePerSecond = 5,\n}\n\nexport interface CooldownEntry {\n  hash?: number;\n  name: string;\n  icon?: string;\n  values: number[];\n  description?: string;\n  valueType?: CharacterStatType;\n  characterClass?: DestinyClass;\n  element?: ModifierType;\n\n  // If any items are affecting this entry’s cooldown their hash will be added to this list\n  overrideIcons?: number[];\n}\n\n/**\n * This component takes the raw character stat data from Clarity’s database\n * and converts it to data for use in stat tooltips.\n */\n@Injectable({\n  providedIn: \"root\",\n})\nexport class CharacterStatsService {\n  private allStatEntries: Partial<Record<keyof CharacterStats, CooldownEntry[]>> = {};\n  private overrides: Override[] = [];\n\n  constructor(private clarity: ClarityService) {\n    this.clarity.characterStats.subscribe((data) => {\n      if (data) this.updateCharacterStats(data);\n    });\n  }\n\n  loadCharacterStats() {\n    this.clarity.load();\n  }\n\n  private updateCharacterStats(data: CharacterStats) {\n    const allAbilities = (\n      (JSON.parse(\n        window.localStorage.getItem(\"allAbilities\")!\n      ) as DestinyInventoryItemDefinition[]) || []\n    ).reduce((acc, ability) => {\n      acc.set(ability.hash, ability);\n      return acc;\n    }, new Map<number, DestinyInventoryItemDefinition>());\n\n    this.overrides = Object.values(data)\n      .map((stat) => stat.Overrides)\n      .flat();\n\n    this.allStatEntries = {\n      Mobility: this.generateEntries(data.Mobility, allAbilities, [\n        {\n          key: \"WalkSpeed\",\n          name: \"Walk Speed\",\n          valueType: CharacterStatType.Speed,\n        },\n        {\n          key: \"StrafeSpeed\",\n          name: \"Strafe Speed\",\n          valueType: CharacterStatType.Speed,\n        },\n        {\n          key: \"CrouchSpeed\",\n          name: \"Crouch Speed\",\n          valueType: CharacterStatType.Speed,\n        },\n      ]),\n      Resilience: this.generateEntries(data.Resilience, allAbilities, [\n        {\n          key: \"ShieldHP\",\n          name: \"Shield HP\",\n        },\n        {\n          key: \"PvEDamageResistance\",\n          name: \"PvE Damage Resistance\",\n          valueType: CharacterStatType.Percentage,\n        },\n        {\n          key: \"FlinchResistance\",\n          name: \"Flinch Resistance\",\n          valueType: CharacterStatType.Percentage,\n        },\n      ]),\n      Recovery: this.generateEntries(data.Recovery, allAbilities, [\n        {\n          key: \"TotalRegenTime\",\n          name: \"Total Regen Time\",\n          valueType: CharacterStatType.Time,\n        },\n        {\n          key: \"HealthRegenDelay\",\n          name: \"Health Regen Delay\",\n          valueType: CharacterStatType.Time,\n        },\n        {\n          key: \"HealthRegenSpeed\",\n          name: \"Health Regen Speed\",\n          valueType: CharacterStatType.PercentagePerSecond,\n        },\n        {\n          key: \"ShieldRegenDelay\",\n          name: \"Shield Regen Delay\",\n          valueType: CharacterStatType.Time,\n        },\n        {\n          key: \"ShieldRegenSpeed\",\n          name: \"Shield Regen Speed\",\n          valueType: CharacterStatType.PercentagePerSecond,\n        },\n      ]),\n      Discipline: this.generateEntries(data.Discipline, allAbilities),\n      Intellect: this.generateEntries(data.Intellect, allAbilities),\n      Strength: this.generateEntries(data.Strength, allAbilities),\n    };\n  }\n\n  /**\n   * Fetch all the cooldown entries for a given stat.\n   * If a class and/or subclass are provided the results\n   * will be filtered to only include matching abilities.\n   */\n  get(\n    statName: keyof CharacterStats,\n    characterClass?: DestinyClass,\n    element?: ModifierType,\n    exoticHashes: number[] = []\n  ): CooldownEntry[] {\n    const entries = this.allStatEntries[statName] ?? [];\n\n    const exoticOverrides = this.overrides.filter((o) => exoticHashes.includes(o.Hash));\n\n    return entries\n      .filter((entry) => {\n        if (\n          characterClass !== undefined &&\n          entry.characterClass !== undefined &&\n          entry.characterClass !== characterClass\n        ) {\n          return false;\n        }\n\n        if (element !== undefined && entry.element !== undefined && entry.element !== element) {\n          return false;\n        }\n\n        return true;\n      })\n      .map((entry) => {\n        return exoticOverrides.reduce(\n          (acc, override) => applyExoticArmorOverride(acc, override),\n          entry\n        );\n      });\n  }\n\n  private generateEntries<T extends CharacterStats[keyof CharacterStats]>(\n    base: T,\n    allAbilities: Map<number, DestinyInventoryItemDefinition>,\n    stats: Array<\n      Partial<CooldownEntry> & {\n        key: Exclude<keyof T, \"Description\" | \"Abilities\" | \"Overrides\">;\n        name: string;\n      }\n    > = []\n  ): CooldownEntry[] {\n    const result = stats.map<CooldownEntry>(({ key, ...rest }) => {\n      const entry = base[key] as any as {\n        Description: string;\n        Array: number[];\n      };\n\n      return {\n        values: entry.Array,\n        ...rest,\n      };\n    });\n\n    const abilityList =\n      \"Abilities\" in base ? base.Abilities : \"SuperAbilities\" in base ? base.SuperAbilities : [];\n\n    abilityList.forEach((entry) => {\n      const ability = allAbilities.get(entry.Hash);\n      if (!ability) {\n        return;\n      }\n\n      const { characterClass, element } = getClassAndElementForAbility(ability);\n\n      const abilityData: CooldownEntry = {\n        hash: ability.hash,\n        name: ability.displayProperties.name,\n        icon: ability.displayProperties.icon,\n        values: entry.Cooldowns,\n        valueType: CharacterStatType.TimeMMSS,\n        characterClass,\n        element,\n      };\n      result.push(abilityData);\n    });\n\n    return result;\n  }\n}\n\nfunction getClassAndElementForAbility(ability: DestinyInventoryItemDefinition): {\n  characterClass: DestinyClass | undefined;\n  element: ModifierType | undefined;\n} {\n  let characterClass: DestinyClass | undefined;\n  let element: ModifierType | undefined;\n\n  // e.g. \"hunter.arc.supers\", \"shared.arc.grenades\"\n  const parts = ability.plug?.plugCategoryIdentifier?.split(\".\");\n  if (parts?.length !== 3) {\n    return { characterClass, element };\n  }\n\n  const [className, elementName, _] = parts;\n\n  if (className === \"warlock\") {\n    characterClass = DestinyClass.Warlock;\n  } else if (className === \"hunter\") {\n    characterClass = DestinyClass.Hunter;\n  } else if (className === \"titan\") {\n    characterClass = DestinyClass.Titan;\n  }\n\n  if (elementName === \"arc\") {\n    element = ModifierType.Arc;\n  } else if (elementName === \"solar\") {\n    element = ModifierType.Solar;\n  } else if (elementName === \"void\") {\n    element = ModifierType.Void;\n  } else if (elementName === \"stasis\") {\n    element = ModifierType.Stasis;\n  } else if (elementName === \"strand\") {\n    element = ModifierType.Strand;\n  } else if (elementName === \"prism\") {\n    element = ModifierType.Prismatic;\n  }\n\n  return { characterClass, element };\n}\n\nfunction applyExoticArmorOverride(originalEntry: CooldownEntry, override: Override): CooldownEntry {\n  if (!originalEntry.hash || !override.Requirements.includes(originalEntry.hash)) {\n    return originalEntry;\n  }\n\n  const entry: CooldownEntry = {\n    ...originalEntry,\n    overrideIcons: [...(originalEntry.overrideIcons ?? []), override.Hash],\n  };\n\n  if (override.CooldownOverride) {\n    return {\n      ...entry,\n      values: override.CooldownOverride,\n    };\n  }\n\n  if (override.Scalar) {\n    const reqIndex = override.Requirements.indexOf(originalEntry.hash);\n    const scalar = override.Scalar[reqIndex];\n\n    return {\n      ...entry,\n      values: entry.values.map((value) => value * scalar),\n    };\n  }\n\n  console.log(\"Unhandled override\", override);\n  return originalEntry;\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Directive, Input, TemplateRef, ViewContainerRef } from \"@angular/core\";\n\n@Directive({\n  // we want to keep ngVar so it looks like ngFor and others\n  // eslint-disable-next-line @angular-eslint/directive-selector\n  selector: \"[ngVar]\",\n})\nexport class VarDirectiveDirective {\n  @Input()\n  set ngVar(context: unknown) {\n    this.context.$implicit = this.context.ngVar = context;\n\n    if (!this.hasView) {\n      this.vcRef.createEmbeddedView(this.templateRef, this.context);\n      this.hasView = true;\n    }\n  }\n\n  private context: {\n    $implicit: unknown;\n    ngVar: unknown;\n  } = {\n    $implicit: null,\n    ngVar: null,\n  };\n\n  private hasView: boolean = false;\n\n  constructor(private templateRef: TemplateRef<any>, private vcRef: ViewContainerRef) {}\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { AfterViewInit, Component } from \"@angular/core\";\nimport { ChangelogService } from \"../../../../services/changelog.service\";\n\n@Component({\n  selector: \"app-changelog-dialog-controller\",\n  templateUrl: \"./changelog-dialog-controller.component.html\",\n})\nexport class ChangelogDialogControllerComponent implements AfterViewInit {\n  constructor(public changelog: ChangelogService) {}\n  ngAfterViewInit(): void {\n    if (this.changelog.mustShowChangelog) this.changelog.openChangelogDialog();\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n<div *ngVar=\"status.status | async as stat\">\n  <mat-toolbar *ngIf=\"stat.apiError\" color=\"warn\" class=\"bar-api-warn\">\n    <span class=\"header-spacer\"></span>\n    The API is unavailable. The app will work with the data it has available right now.\n    <span class=\"header-spacer\"></span>\n  </mat-toolbar>\n  <div *ngVar=\"status.status | async as stat\">\n    <mat-toolbar *ngIf=\"stat.authError\" color=\"warn\" class=\"bar-api-warn\">\n      <span class=\"header-spacer\"></span>\n      There was an error with the authentication. The API may be down, or your session timed out.\n      <span class=\"header-spacer\"></span>\n      <!--You can either wait and try again later - the app will use the data it has available right now - or you can logout.-->\n    </mat-toolbar>\n  </div>\n\n  <mat-sidenav-container>\n    <mat-sidenav\n      #drawer\n      [attr.role]=\"(isHandset$ | async) ? 'dialog' : 'navigation'\"\n      [opened]=\"false\"\n      class=\"sidenav\"\n      fixedInViewport\n      mode=\"over\">\n      <mat-sidenav-content>\n        <mat-toolbar>\n          <button\n            (click)=\"drawer.toggle()\"\n            aria-label=\"Toggle sidenav\"\n            mat-stroked-button\n            type=\"button\">\n            <mat-icon aria-label=\"Side nav toggle icon\">menu</mat-icon>\n            Close Menu\n          </button>\n        </mat-toolbar>\n        <hr />\n        <mat-nav-list>\n          <a\n            (click)=\"drawer.toggle()\"\n            *ngFor=\"let link of navLinks; let idx = index\"\n            [class.active]=\"activeLinkIndex === idx\"\n            [routerLink]=\"link.link\"\n            mat-list-item>\n            {{ link.name }}\n          </a>\n          <hr />\n          <a href=\"https://ko-fi.com/mijago\" mat-list-item>\n            <a\n              color=\"primary\"\n              mat-raised-button\n              matTooltip=\"You like my work? This leads you to ko-fi.com, where you can easily support me!\"\n              target=\"_blank\">\n              <mat-icon inline>attach_money</mat-icon>\n              Buy me a coffee!\n            </a>\n          </a>\n          <a (click)=\"changelog.openChangelogDialog()\" mat-list-item>\n            <a mat-raised-button> Open changelog </a>\n          </a>\n          <hr />\n        </mat-nav-list>\n      </mat-sidenav-content>\n    </mat-sidenav>\n  </mat-sidenav-container>\n\n  <mat-toolbar id=\"header\" role=\"heading\">\n    <!-- Toggle Button for Sidenav -->\n    <button\n      (click)=\"drawer.toggle()\"\n      *ngIf=\"isHandset$ | async\"\n      aria-label=\"Toggle sidenav\"\n      mat-icon-button\n      type=\"button\">\n      <mat-icon>menu</mat-icon>\n    </button>\n\n    <!-- Header Title with Links -->\n    <span>\n      D2ArmorPicker <small>by Mijago</small>\n      <a\n        href=\"https://twitter.com/MijagoCoding/\"\n        matTooltip=\"Follow me on Twitter\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\">\n        <img alt=\"Twitter logo\" class=\"logo-twitter\" src=\"assets/logo-twitter.png\" />\n      </a>\n      <a\n        href=\"https://ko-fi.com/mijago\"\n        matTooltip=\"Buy me a coffee on Ko-Fi!\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\">\n        <img alt=\"Ko-Fi logo\" class=\"logo-kofi\" src=\"assets/logo-kofi.png\" />\n      </a>\n      <a\n        href=\"http://discord.d2armorpicker.com/\"\n        matTooltip=\"Join the Discord for support and development!\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\">\n        <img alt=\"Discord logo\" class=\"logo-discord\" src=\"assets/logo-discord.png\" />\n      </a>\n    </span>\n\n    <!-- Spacer for Flex Layout -->\n    <span class=\"header-spacer\"></span>\n\n    <!-- Navigation Links (Hidden on Small Screens) -->\n    <div class=\"hide-sm\">\n      <nav id=\"navbar\" mat-tab-nav-bar [tabPanel]=\"tabPanel\">\n        <a\n          *ngFor=\"let link of navLinks; let idx = index\"\n          [active]=\"activeLinkIndex === idx\"\n          [routerLink]=\"link.link\"\n          mat-tab-link>\n          {{ link.name }}\n        </a>\n      </nav>\n      <mat-tab-nav-panel #tabPanel></mat-tab-nav-panel>\n    </div>\n\n    <!-- Another Spacer -->\n    <span class=\"header-spacer\"></span>\n\n    <!-- Buttons on the Right -->\n    <div id=\"buttonContainer\">\n      <a\n        (click)=\"changelog.openChangelogDialog()\"\n        style=\"color: white\"\n        class=\"changelogText hide-sm\"\n        matTooltip=\"View the changelog dialog.\"\n        >v{{ version }}</a\n      >\n\n      <a\n        color=\"accent\"\n        class=\"hide-sm\"\n        href=\"https://ko-fi.com/mijago\"\n        mat-stroked-button\n        matTooltip=\"Support me on Ko-Fi!\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\">\n        <mat-icon inline>attach_money</mat-icon>\n        Buy me a coffee!\n      </a>\n\n      <button\n        (click)=\"refreshAll(true)\"\n        aria-label=\"Refresh\"\n        class=\"example-icon\"\n        mat-icon-button\n        matTooltip=\"Reload all items from the API.\">\n        <mat-icon>refresh</mat-icon>\n      </button>\n\n      <button\n        (click)=\"logout()\"\n        aria-label=\"Logout\"\n        class=\"example-icon\"\n        color=\"warn\"\n        mat-icon-button\n        matTooltip=\"Logout\">\n        <mat-icon>logout</mat-icon>\n      </button>\n    </div>\n  </mat-toolbar>\n\n  <router-outlet></router-outlet>\n\n  <span *ngVar=\"status.status | async as stat\">\n    <mat-progress-bar\n      *ngIf=\"\n        stat.updatingResultsTable ||\n        stat.calculatingResults ||\n        stat.calculatingPermutations ||\n        stat.updatingInventory ||\n        stat.updatingVendors ||\n        stat.updatingManifest\n      \"\n      id=\"loading\"\n      mode=\"indeterminate\"></mat-progress-bar>\n  </span>\n\n  <div *ngVar=\"status.status | async as stat\" class=\"info-container\">\n    <mat-card appearance=\"outlined\" *ngIf=\"stat.updatingVendors\" class=\"info info-updating-vendor\">\n      <mat-card-content>Updating vendor information inventory in the background.</mat-card-content>\n    </mat-card>\n    <mat-card\n      appearance=\"outlined\"\n      *ngIf=\"stat.updatingManifest\"\n      class=\"info info-updating-manifest\">\n      <mat-card-content\n        >Please wait:<br />\n        Updating the cached manifest.\n      </mat-card-content></mat-card\n    >\n    <mat-card\n      appearance=\"outlined\"\n      *ngIf=\"stat.updatingInventory\"\n      class=\"info info-updating-inventory\">\n      <mat-card-content>\n        Please wait:<br />\n        Updating the cached inventory.\n      </mat-card-content></mat-card\n    >\n    <mat-card\n      appearance=\"outlined\"\n      *ngIf=\"stat.calculatingResults\"\n      class=\"info info-calculating-results\">\n      <mat-card-content\n        >Please wait:<br />\n        Calculating possible results.\n        <mat-progress-bar [value]=\"computationProgress\"></mat-progress-bar>\n      </mat-card-content>\n    </mat-card>\n    <mat-card\n      appearance=\"outlined\"\n      *ngIf=\"stat.updatingResultsTable\"\n      class=\"info info-updating-results\">\n      <mat-card-content>Please wait:<br />Updating the result display table. </mat-card-content>\n    </mat-card>\n  </div>\n  <app-changelog-dialog-controller></app-changelog-dialog-controller>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnInit } from \"@angular/core\";\nimport { StatusProviderService } from \"../../../services/status-provider.service\";\nimport { Observable } from \"rxjs\";\nimport { BreakpointObserver, Breakpoints } from \"@angular/cdk/layout\";\nimport { map, shareReplay } from \"rxjs/operators\";\nimport { InventoryService } from \"../../../services/inventory.service\";\nimport { AuthService } from \"../../../services/auth.service\";\nimport { NavigationEnd, Router } from \"@angular/router\";\nimport { environment } from \"../../../../environments/environment\";\nimport { ChangelogService } from \"../../../services/changelog.service\";\nimport { CharacterStatsService } from \"../../../services/character-stats.service\";\n\n@Component({\n  selector: \"app-app-v2-core\",\n  templateUrl: \"./app-v2-core.component.html\",\n  styleUrls: [\"./app-v2-core.component.scss\"],\n})\nexport class AppV2CoreComponent implements OnInit {\n  version = environment.version;\n  activeLinkIndex = 0;\n  computationProgress = 0;\n  navLinks = [\n    {\n      link: \"/\",\n      name: \"Home\",\n    },\n    {\n      link: \"/help\",\n      name: \"Help\",\n    },\n    {\n      link: \"/account\",\n      name: \"Account\",\n    },\n  ];\n\n  constructor(\n    public status: StatusProviderService,\n    private breakpointObserver: BreakpointObserver,\n    private inv: InventoryService,\n    private auth: AuthService,\n    private router: Router,\n    private characterStats: CharacterStatsService,\n    public changelog: ChangelogService\n  ) {}\n\n  isHandset$: Observable<boolean> = this.breakpointObserver\n    .observe([Breakpoints.Handset, Breakpoints.Small, Breakpoints.XSmall])\n    .pipe(\n      map((result) => result.matches),\n      shareReplay()\n    );\n\n  ngOnInit(): void {\n    this.activeLinkIndex = this.navLinks.indexOf(\n      this.navLinks.find((tab) => tab.link === this.router.url) as any\n    );\n\n    this.router.events.subscribe((res) => {\n      if (res instanceof NavigationEnd)\n        this.activeLinkIndex = this.navLinks.indexOf(\n          this.navLinks.find((tab) => tab.link === this.router.url) as any\n        );\n    });\n\n    this.characterStats.loadCharacterStats();\n\n    this.inv.calculationProgress.subscribe((progress) => {\n      this.computationProgress = progress;\n    });\n  }\n\n  async refreshAll(b: boolean) {\n    console.debug(\"Trigger refreshAll due to button press\");\n    await this.inv.refreshAll(b);\n  }\n\n  logout() {\n    this.auth.logout();\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, Input } from \"@angular/core\";\nimport { ArmorStat, ArmorStatIconUrls, ArmorStatNames } from \"../../../../data/enum/armor-stat\";\n\n@Component({\n  selector: \"app-stat-icon\",\n  templateUrl: \"./stat-icon.component.html\",\n  styleUrls: [\"./stat-icon.component.css\"],\n})\nexport class StatIconComponent {\n  ArmorStatNames = ArmorStatNames;\n  ArmorStatIconUrls = ArmorStatIconUrls;\n  @Input()\n  stat: ArmorStat = ArmorStat.StatWeapon;\n\n  constructor() {}\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<span class=\"statContainerWrapper\">\n  <img [src]=\"ArmorStatIconUrls[stat]\" class=\"dialogStatIcon\" [alt]=\"ArmorStatNames[stat]\" />\n</span>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\ntype costEntry = { [id: string]: number };\nexport const MASTERWORK_COST_LEGENDARY: { [tier: number]: { [id: number]: costEntry } } = {\n  1: {\n    1: { glimmer: 300, core: 0, prism: 0, ascshard: 0 },\n    2: { glimmer: 500, core: 0, prism: 0, ascshard: 0 },\n    3: { glimmer: 1200, core: 0, prism: 0, ascshard: 0 },\n    4: { glimmer: 3500, core: 1, prism: 0, ascshard: 0 },\n    5: { glimmer: 4500, core: 2, prism: 0, ascshard: 0 },\n  },\n  2: {\n    1: { glimmer: 1200, core: 0, prism: 0, ascshard: 0 },\n    2: { glimmer: 2800, core: 1, prism: 0, ascshard: 0 },\n    3: { glimmer: 4000, core: 1, prism: 0, ascshard: 0 },\n    4: { glimmer: 5000, core: 2, prism: 0, ascshard: 0 },\n    5: { glimmer: 7000, core: 2, prism: 1, ascshard: 0 },\n  },\n  3: {\n    1: { glimmer: 1500, core: 1, prism: 0, ascshard: 0 },\n    2: { glimmer: 3000, core: 2, prism: 0, ascshard: 0 },\n    3: { glimmer: 5000, core: 3, prism: 0, ascshard: 0 },\n    4: { glimmer: 7000, core: 4, prism: 1, ascshard: 0 },\n    5: { glimmer: 8500, core: 5, prism: 2, ascshard: 1 },\n  },\n  4: {\n    1: { glimmer: 200, core: 2, prism: 0, ascshard: 0 },\n    2: { glimmer: 3300, core: 3, prism: 1, ascshard: 0 },\n    3: { glimmer: 6500, core: 4, prism: 1, ascshard: 0 },\n    4: { glimmer: 8200, core: 5, prism: 2, ascshard: 1 },\n    5: { glimmer: 10000, core: 7, prism: 3, ascshard: 1 },\n  },\n  5: {\n    1: { glimmer: 2400, core: 3, prism: 1, ascshard: 0 },\n    2: { glimmer: 3500, core: 5, prism: 2, ascshard: 0 },\n    3: { glimmer: 7500, core: 6, prism: 2, ascshard: 0 },\n    4: { glimmer: 9100, core: 7, prism: 3, ascshard: 1 },\n    5: { glimmer: 12500, core: 9, prism: 5, ascshard: 2 },\n  },\n};\nexport const MASTERWORK_COST_EXOTIC: { [id: number]: costEntry } = {\n  1: { glimmer: 1500, core: 1, prism: 0, ascshard: 0 },\n  2: { glimmer: 3000, core: 2, prism: 0, ascshard: 0 },\n  3: { glimmer: 5000, core: 3, prism: 1, ascshard: 0 },\n  4: { glimmer: 7000, core: 4, prism: 1, ascshard: 1 },\n  5: { glimmer: 8500, core: 5, prism: 2, ascshard: 2 },\n};\n\nexport function getMasterworkCostList(\n  isExotic: boolean,\n  tier: number\n): { [id: number]: costEntry } | undefined {\n  if (isExotic) {\n    return MASTERWORK_COST_EXOTIC;\n  }\n  return MASTERWORK_COST_LEGENDARY[tier];\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * Additional copyrighted lines in this file:\n *  bhollis (adaption of the DIM links)\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { ConfigurationService } from \"./configuration.service\";\nimport {\n  ArmorStat,\n  ARMORSTAT_ORDER,\n  ArmorStatHashes,\n  STAT_MOD_VALUES,\n  StatModifier,\n  SubclassHashes,\n} from \"../data/enum/armor-stat\";\nimport { ResultDefinition } from \"../components/authenticated-v2/results/results.component\";\nimport { ModInformation } from \"../data/ModInformation\";\nimport { ModifierType, Subclass, SubclassNames } from \"../data/enum/modifierType\";\nimport {\n  AssumeArmorMasterwork,\n  Loadout,\n  LoadoutParameters,\n} from \"@destinyitemmanager/dim-api-types\";\nimport { DestinyClass } from \"bungie-api-ts/destiny2\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class DimService {\n  private armorStatIds = ARMORSTAT_ORDER;\n\n  constructor(private configService: ConfigurationService) {}\n\n  /**\n   * Generate a DIM search query for the given result\n   */\n  generateDIMQuery(result: ResultDefinition): string {\n    let query = result.items.map((d) => `id:'${d.itemInstanceId}'`).join(\" OR \");\n\n    return query;\n  }\n\n  /**\n   * Copy DIM query to clipboard\n   */\n  async copyDIMQuery(result: ResultDefinition): Promise<boolean> {\n    try {\n      const query = this.generateDIMQuery(result);\n      await navigator.clipboard.writeText(query);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Generate a DIM loadout link for the given result\n   */\n  generateDIMLink(result: ResultDefinition): string {\n    const config = this.configService.readonlyConfigurationSnapshot;\n    const mods: number[] = [];\n    const fragments: number[] = [];\n\n    // Add selected mods\n    for (let mod of config.enabledMods) {\n      const modInfo = ModInformation[mod];\n      if (modInfo.type === ModifierType.CombatStyleMod) {\n        mods.push(modInfo.hash);\n      } else {\n        fragments.push(modInfo.hash);\n      }\n    }\n\n    // Add stat mods\n    for (let mod of result.mods || []) {\n      mods.push(STAT_MOD_VALUES[mod as StatModifier][3]);\n    }\n\n    // Add artifice mods\n    for (let artificemod of result.artifice || []) {\n      mods.push(STAT_MOD_VALUES[artificemod as StatModifier][3]);\n    }\n\n    const data: LoadoutParameters = {\n      statConstraints: [],\n      mods,\n      assumeArmorMasterwork: config.assumeLegendariesMasterworked\n        ? config.assumeExoticsMasterworked\n          ? AssumeArmorMasterwork.All\n          : AssumeArmorMasterwork.Legendary\n        : AssumeArmorMasterwork.None,\n    };\n\n    // Iterate over ArmorStat enum\n    for (let stat of this.armorStatIds) {\n      data.statConstraints!.push({\n        statHash: ArmorStatHashes[stat as ArmorStat],\n        minStat: config.minimumStatTiers[stat as ArmorStat].value * 10,\n        maxStat: config.minimumStatTiers[stat as ArmorStat].fixed\n          ? config.minimumStatTiers[stat as ArmorStat].value * 10\n          : 200,\n      } as any); // TODO: Remove the `as any` cast when the type is fixed in DIM API types\n    }\n\n    const exoticItem = result.items.find((item) => item.exotic);\n    if (exoticItem) {\n      data.exoticArmorHash = exoticItem.hash;\n    }\n\n    const loadout: Loadout = {\n      id: \"d2ap\",\n      name: `${SubclassNames[config.selectedModElement as Subclass]}: (${result.exotic?.name}) D2ArmorPicker Loadout`,\n      classType: config.characterClass as number,\n      parameters: data,\n      equipped: result.items.map((d) => ({\n        id: d.itemInstanceId,\n        hash: d.hash,\n      })),\n      unequipped: [],\n      clearSpace: false,\n    };\n\n    // Configure subclass\n    if (fragments.length) {\n      const socketOverrides = fragments.reduce<{\n        [socketIndex: number]: number;\n      }>((m, hash, i) => {\n        m[i + 7] = hash;\n        return m;\n      }, {});\n\n      if (\n        config.characterClass != DestinyClass.Unknown &&\n        config.selectedModElement != ModifierType.CombatStyleMod\n      ) {\n        const cl = SubclassHashes[config.characterClass];\n        const subclassHash = cl[config.selectedModElement];\n        if (subclassHash) {\n          loadout.equipped.push({\n            id: \"12345\",\n            hash: subclassHash,\n            socketOverrides,\n          });\n        }\n      }\n    }\n\n    return (\n      \"https://app.destinyitemmanager.com/loadouts?loadout=\" +\n      encodeURIComponent(JSON.stringify(loadout))\n    );\n  }\n\n  /**\n   * Open DIM in a new window/tab with the given result\n   */\n  openInDIM(result: ResultDefinition): void {\n    const url = this.generateDIMLink(result);\n    window.open(url, \"blank\");\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { EnumDictionary } from \"../types/EnumDictionary\";\nimport { InventoryArmorSource } from \"../types/IInventoryArmor\";\n\nexport const InventoryArmorSourceNames: EnumDictionary<InventoryArmorSource, string> = {\n  [InventoryArmorSource.Inventory]: \"Inventory\",\n  [InventoryArmorSource.Collections]: \"Collections\",\n  [InventoryArmorSource.Vendor]: \"Vendor\",\n};\n","import { Pipe, PipeTransform } from \"@angular/core\";\nimport { DatabaseService } from \"src/app/services/database.service\";\n\n@Pipe({\n  name: \"getVendorName\",\n  pure: true,\n})\nexport class VendorNamePipe implements PipeTransform {\n  constructor(private database: DatabaseService) {}\n\n  async transform(value: number): Promise<string> {\n    const vendor = await this.database.vendorNames.where(\"vendorId\").equals(value).first();\n    if (vendor?.vendorName) {\n      return vendor.vendorName;\n    }\n    if (vendor?.vendorIdentifier) {\n      return vendor.vendorIdentifier;\n    }\n    return \"Unknown Vendor\";\n  }\n}\n\n@Pipe({\n  name: \"getVendorIdFromItemId\",\n  pure: true,\n})\nexport class VendorIdFromItemIdPipe implements PipeTransform {\n  constructor() {}\n\n  transform(value: string): number {\n    if (!value || !value.startsWith(\"v-\")) return -1;\n    const vendorId = parseInt(value.substring(2).split(\"-\")[0]);\n    if (isNaN(vendorId)) return -1;\n    return vendorId;\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div>\n  <div class=\"tooltip-container\">\n    <table>\n      <tr>\n        <td colspan=\"3\">{{ itemTooltip?.name }}</td>\n      </tr>\n      <tr>\n        <td>Source</td>\n        <td colspan=\"2\">{{ getSourceText() }}</td>\n      </tr>\n      <tr *ngIf=\"isVendorItem && itemTooltip\">\n        <td>Vendor</td>\n        <td colspan=\"2\">{{\n          itemTooltip.itemInstanceId | getVendorIdFromItemId | getVendorName | async\n        }}</td>\n      </tr>\n      <tr>\n        <td>Current stats:</td>\n      </tr>\n      <tr *ngFor=\"let statId of armorStatIds\">\n        <td>{{ getArmorStatName(statId) }}</td>\n        <td>\n          <span>{{ getStatWithMasterwork(statId) }}</span>\n        </td>\n        <td>\n          <div class=\"stat-display\">\n            <div\n              class=\"stat-display-bar\"\n              [style.width]=\"getWidth((itemTooltip?.stats || [])[statId] || 0)\"\n              >&nbsp;</div\n            >\n            <div\n              class=\"stat-display-bar masterwork\"\n              [style.width]=\"getWidth(getMasterworkBonus(itemTooltip!)[statId])\"\n              *ngIf=\"itemTooltip && getMasterworkBonus(itemTooltip)[statId] > 0\"\n              >&nbsp;</div\n            >\n          </div>\n        </td>\n      </tr>\n      <tr>\n        <td>Total base stats:</td>\n        <td>\n          {{ getTotalStats() }}\n        </td>\n      </tr>\n    </table>\n  </div>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, Input } from \"@angular/core\";\nimport { ResultItem } from \"../../results/results.component\";\nimport { ArmorStat, ARMORSTAT_ORDER, ArmorStatNames } from \"../../../../data/enum/armor-stat\";\nimport { InventoryArmorSourceNames } from \"src/app/data/enum/armor-source\";\nimport { InventoryArmorSource } from \"src/app/data/types/IInventoryArmor\";\nimport { MAXIMUM_MASTERWORK_LEVEL } from \"src/app/data/constants\";\nimport { ArmorSystem } from \"src/app/data/types/IManifestArmor\";\n\n@Component({\n  selector: \"app-armor-tooltip-component\",\n  templateUrl: \"./armor-tooltip.component.html\",\n  styleUrls: [\"./armor-tooltip.component.css\"],\n})\nexport class ArmorTooltipComponent {\n  @Input() itemTooltip: ResultItem | undefined;\n\n  // Define the correct order of stats as used in the expanded-result-content component\n  armorStatIds = ARMORSTAT_ORDER;\n\n  getSourceText() {\n    if (!this.itemTooltip) {\n      return \"\";\n    }\n\n    return InventoryArmorSourceNames[this.itemTooltip.source];\n  }\n\n  getArmorStatName(statId: ArmorStat) {\n    return ArmorStatNames[statId];\n  }\n\n  getWidth(stat: number) {\n    return Math.min(100, (stat / 32) * 100) + \"%\";\n  }\n\n  getTotalStats() {\n    return this.itemTooltip?.stats.reduce((a, b) => a + b, 0) || 0;\n  }\n\n  getMasterworkBonus(item: ResultItem) {\n    const bonus = [0, 0, 0, 0, 0, 0];\n\n    if (item.armorSystem == ArmorSystem.Armor2) {\n      // Armor 2.0\n      if (item.masterworkLevel == MAXIMUM_MASTERWORK_LEVEL) {\n        // Armor 2.0 Masterworked items give +2 to all stats\n        for (let i = 0; i < 6; i++) {\n          bonus[i] += 2;\n        }\n      }\n      return bonus;\n    } else if (item.armorSystem == ArmorSystem.Armor3) {\n      // Armor 3.0\n      let multiplier = item.masterworkLevel;\n\n      if (multiplier == 0) return bonus;\n\n      // For Armor 1.0, assume the first three stats are the archetype stats and don't get masterwork bonus\n      // The OTHER THREE stats (3, 4, 5) get +1 per multiplier level\n      for (let i = 0; i < 6; i++) {\n        if (item.archetypeStats.indexOf(i) === -1) {\n          bonus[i] += multiplier;\n        }\n      }\n\n      return bonus;\n    }\n\n    return bonus;\n  }\n\n  getStatWithMasterwork(statId: ArmorStat): number {\n    if (!this.itemTooltip) return 0;\n\n    const baseValue = this.itemTooltip.stats[statId];\n    const masterworkBonus = this.getMasterworkBonus(this.itemTooltip);\n    return baseValue + masterworkBonus[statId];\n  }\n\n  get isVendorItem() {\n    return this.itemTooltip?.source === InventoryArmorSource.Vendor;\n  }\n  constructor() {}\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {\n  Directive,\n  Input,\n  TemplateRef,\n  ElementRef,\n  OnInit,\n  HostListener,\n  ComponentRef,\n  OnDestroy,\n} from \"@angular/core\";\nimport { Overlay, OverlayPositionBuilder, OverlayRef } from \"@angular/cdk/overlay\";\nimport { ComponentPortal } from \"@angular/cdk/portal\";\nimport { ArmorTooltipComponent } from \"./armor-tooltip.component\";\nimport { ResultItem } from \"../../results/results.component\";\n\n@Directive({\n  selector: \"[itemTooltip]\",\n})\nexport class ItemTooltipRendererDirective implements OnInit, OnDestroy {\n  /**\n   * This will be used to show tooltip or not\n   * This can be used to show the tooltip conditionally\n   */\n  @Input() showToolTip: boolean = true;\n\n  //If this is specified then specified text will be showin in the tooltip\n  @Input() itemTooltip: ResultItem | undefined;\n\n  //If this is specified then specified template will be rendered in the tooltip\n  @Input() contentTemplate: TemplateRef<any> | undefined;\n\n  private _overlayRef: OverlayRef | undefined;\n\n  constructor(\n    private _overlay: Overlay,\n    private _overlayPositionBuilder: OverlayPositionBuilder,\n    private _elementRef: ElementRef\n  ) {}\n\n  /**\n   * Init life cycle event handler\n   */\n  ngOnInit() {\n    if (!this.showToolTip) {\n      return;\n    }\n\n    const positionStrategy = this._overlayPositionBuilder\n      .flexibleConnectedTo(this._elementRef)\n      .withPositions([\n        {\n          originX: \"center\",\n          originY: \"bottom\",\n          overlayX: \"center\",\n          overlayY: \"top\",\n          offsetY: 5,\n        },\n        {\n          originX: \"center\",\n          originY: \"top\",\n          overlayX: \"center\",\n          overlayY: \"bottom\",\n          offsetY: -5,\n        },\n      ]);\n\n    this._overlayRef = this._overlay.create({ positionStrategy });\n    this._overlayRef.addPanelClass(\"overlay-no-pointer-event\");\n  }\n\n  /**\n   * This method will be called whenever mouse enters in the Host element\n   * i.e. where this directive is applied\n   * This method will show the tooltip by instantiating the McToolTipComponent and attaching to the overlay\n   */\n  @HostListener(\"mouseenter\")\n  show() {\n    //attach the component if it has not already attached to the overlay\n    if (this._overlayRef && !this._overlayRef.hasAttached()) {\n      const tooltipRef: ComponentRef<ArmorTooltipComponent> = this._overlayRef.attach(\n        new ComponentPortal(ArmorTooltipComponent)\n      );\n      tooltipRef.instance.itemTooltip = this.itemTooltip;\n    }\n  }\n\n  /**\n   * This method will be called when mouse goes out of the host element\n   * i.e. where this directive is applied\n   * This method will close the tooltip by detaching the overlay from the view\n   */\n  @HostListener(\"mouseleave\")\n  hide() {\n    this.closeToolTip();\n  }\n\n  /**\n   * Destroy lifecycle event handler\n   * This method will make sure to close the tooltip\n   * It will be needed in case when app is navigating to different page\n   * and user is still seeing the tooltip; In that case we do not want to hang around the\n   * tooltip after the page [on which tooltip visible] is destroyed\n   */\n  ngOnDestroy() {\n    this.closeToolTip();\n  }\n\n  /**\n   * This method will close the tooltip by detaching the component from the overlay\n   */\n  private closeToolTip() {\n    if (this._overlayRef) {\n      this._overlayRef.detach();\n    }\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { DatabaseService } from \"./database.service\";\nimport { IManifestArmor } from \"../data/types/IManifestArmor\";\nimport { DestinySandboxPerkDefinition } from \"bungie-api-ts/destiny2\";\n\nexport interface ItemIconData {\n  icon: string | undefined;\n  watermark: string | undefined;\n}\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class ItemIconServiceService {\n  private itemLookup = new Map<number, IManifestArmor | undefined>();\n\n  private sandboxperkIconLookup = new Map<number, DestinySandboxPerkDefinition | undefined>();\n  private gearsetIconLookup = new Map<string, DestinySandboxPerkDefinition | undefined>();\n\n  constructor(private db: DatabaseService) {}\n\n  async getItemCached(hash: number): Promise<IManifestArmor | undefined> {\n    if (this.itemLookup.has(hash)) return this.itemLookup.get(hash) || undefined;\n    const item = await this.db.manifestArmor.where(\"hash\").equals(hash).first();\n    this.itemLookup.set(hash, item);\n    return item;\n  }\n\n  async getExoticPerkDescription(exotic: IManifestArmor): Promise<IManifestArmor | null> {\n    if (!exotic.exoticPerkHash) return null;\n    let perk = await this.getItemCached(exotic.exoticPerkHash[0]);\n    return perk ?? null;\n  }\n  /**\n   * Returns the icon for a gearset (equipable set) by its gearSetHash, using a cache for performance.\n   * Finds the first armor item with the given gearSetHash and returns its icon.\n   */\n  async getSandboxPerkIconCached(hash: number): Promise<DestinySandboxPerkDefinition | undefined> {\n    if (this.sandboxperkIconLookup.has(hash)) {\n      return this.sandboxperkIconLookup.get(hash);\n    }\n    // Find the first armor item with this gearSetHash\n    const perk = await this.db.sandboxPerkDefinition.where(\"hash\").equals(hash).first();\n    this.sandboxperkIconLookup.set(hash, perk);\n    return perk;\n  }\n\n  /**\n   * Returns the icon for a gearset (equipable set) by its gearSetHash, using a cache for performance.\n   * Finds the first armor item with the given gearSetHash and returns its icon.\n   */\n  async getGearsetPerkCached(\n    hash: number,\n    amount: number\n  ): Promise<DestinySandboxPerkDefinition | undefined> {\n    if (amount <= 2) amount = 2;\n    else if (amount < 4) amount = 4;\n\n    const key = `${hash}-${amount}`;\n    if (this.gearsetIconLookup.has(key)) {\n      return this.gearsetIconLookup.get(key);\n    }\n\n    const equipableSet = await this.db.equipableItemSetDefinition\n      .where(\"hash\")\n      .equals(hash)\n      .first();\n    const perk = equipableSet?.setPerks.find((p) => p.requiredSetCount === amount);\n    if (perk) {\n      const perkIcon = await this.getSandboxPerkIconCached(perk.sandboxPerkHash);\n      this.gearsetIconLookup.set(key, perkIcon);\n      return perkIcon;\n    }\n    return undefined;\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div *ngIf=\"item\" class=\"item-icon-container\">\n  <img\n    class=\"item-icon\"\n    src=\"https://bungie.net/{{ item.icon }}\"\n    *ngIf=\"item.icon\"\n    #tooltip=\"matTooltip\"\n    matTooltip=\"{{ item.name }}\" />\n\n  <ng-container *ngIf=\"SpecialItemIconUrls[item.hash]\">\n    <img\n      class=\"item-icon-overlay\"\n      [src]=\"SpecialItemIconUrls[item.hash]\"\n      [matTooltip]=\"item.name\"\n      #tooltip=\"matTooltip\" />\n  </ng-container>\n\n  <img\n    class=\"item-icon-overlay\"\n    src=\"https://bungie.net/{{ item.watermarkIcon }}\"\n    *ngIf=\"item.watermarkIcon\" />\n  <div\n    class=\"item-source-overlay\"\n    *ngIf=\"isFromVendor || isFromCollection\"\n    [class.vendor-item]=\"isFromVendor\"\n    [class.collection-item]=\"isFromCollection\"></div>\n  <div *ngIf=\"masterworked\" class=\"item-icon-masterwork-overlay\"></div>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { AfterViewInit, Component, Input } from \"@angular/core\";\nimport { IManifestArmor } from \"../../../../data/types/IManifestArmor\";\nimport { ItemIconServiceService } from \"../../../../services/item-icon-service.service\";\nimport { InventoryArmorSource } from \"src/app/data/types/IInventoryArmor\";\nimport { SpecialItemIconUrls } from \"src/app/data/enum/armor-stat\";\n\n@Component({\n  selector: \"app-item-icon\",\n  templateUrl: \"./item-icon.component.html\",\n  styleUrls: [\"./item-icon.component.scss\"],\n})\nexport class ItemIconComponent implements AfterViewInit {\n  SpecialItemIconUrls = SpecialItemIconUrls;\n  @Input()\n  itemHash: number = 0;\n\n  @Input()\n  masterworked: boolean = false;\n\n  @Input()\n  source: InventoryArmorSource = InventoryArmorSource.Inventory;\n  isFromVendor: boolean = false;\n  isFromCollection: boolean = false;\n\n  item: IManifestArmor | undefined = undefined;\n\n  constructor(private iconService: ItemIconServiceService) {}\n\n  async ngAfterViewInit() {\n    this.item = await this.iconService.getItemCached(this.itemHash);\n    this.isFromVendor = this.source === InventoryArmorSource.Vendor;\n    this.isFromCollection = this.source === InventoryArmorSource.Collections;\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<span class=\"overlay-icon-container\">\n  <ng-container *ngIf=\"customIconMods.indexOf(perk) > -1\">\n    <img\n      #tooltip=\"matTooltip\"\n      class=\"element-icon\"\n      matTooltip=\"{{ name }}\"\n      src=\"assets/icons/empty_modslot.png\" />\n    <img class=\"overlay-icon\" *ngIf=\"customIconMods.indexOf(perk) > -1\" src=\"{{ url }}\" />\n  </ng-container>\n  <ng-container *ngIf=\"customIconMods.indexOf(perk) === -1\">\n    <img #tooltip=\"matTooltip\" class=\"element-icon\" matTooltip=\"{{ name }}\" src=\"{{ url }}\" />\n  </ng-container>\n</span>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, Input, OnChanges } from \"@angular/core\";\nimport {\n  ArmorPerkOrSlot,\n  ArmorPerkOrSlotIcons,\n  ArmorPerkOrSlotNames,\n} from \"../../../../data/enum/armor-stat\";\n\n@Component({\n  selector: \"app-armor-perk-icon\",\n  templateUrl: \"./armor-perk-icon.component.html\",\n  styleUrls: [\"./armor-perk-icon.component.scss\"],\n})\nexport class ArmorPerkIconComponent implements OnChanges {\n  ArmorPerkOrSlot = ArmorPerkOrSlot;\n\n  customIconMods = [\n    ArmorPerkOrSlot.SlotCrotasEnd,\n    ArmorPerkOrSlot.SlotRootOfNightmares,\n    ArmorPerkOrSlot.SlotKingsFall,\n    ArmorPerkOrSlot.SlotVowOfTheDisciple,\n    ArmorPerkOrSlot.SlotArtifice,\n  ];\n\n  @Input()\n  perk: ArmorPerkOrSlot = ArmorPerkOrSlot.Any;\n\n  constructor() {}\n\n  name: string = \"\";\n  url: string = \"\";\n\n  ngOnChanges() {\n    this.name = ArmorPerkOrSlotNames[this.perk];\n    this.url = ArmorPerkOrSlotIcons[this.perk];\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Pipe, PipeTransform } from \"@angular/core\";\n\n@Pipe({\n  name: \"count\",\n})\nexport class CountElementInListPipe implements PipeTransform {\n  transform(value: any[], searchItem: any = null): number {\n    return value.filter((d) => searchItem == null || d == searchItem).length;\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div>\n  This table shows you the expected stats of any item:\n  <table class=\"specificStatTable\">\n    <thead>\n      <tr>\n        <th>Name</th>\n        <th class=\"ability-column\">{{ ArmorStatNames[ArmorStat.StatHealth] }}</th>\n        <th class=\"ability-column\">{{ ArmorStatNames[ArmorStat.StatMelee] }}</th>\n        <th class=\"ability-column\">{{ ArmorStatNames[ArmorStat.StatGrenade] }}</th>\n        <th class=\"ability-column\">{{ ArmorStatNames[ArmorStat.StatSuper] }}</th>\n        <th class=\"ability-column\">{{ ArmorStatNames[ArmorStat.StatClass] }}</th>\n        <th class=\"ability-column\">{{ ArmorStatNames[ArmorStat.StatWeapon] }}</th>\n        <th></th>\n        <th></th>\n        <th>MW</th>\n        <th></th>\n      </tr>\n    </thead>\n    <!-- Items -->\n    <ng-container *ngFor=\"let i of ArmorItems\">\n      <tr>\n        <td>\n          <u\n            #tooltip=\"matTooltip\"\n            *ngIf=\"i.masterworked\"\n            class=\"item-name-mw\"\n            matTooltip=\"This item is already masterworked.\"\n            >{{ i.name }}</u\n          >\n          <span *ngIf=\"!i.masterworked\">{{ i.name }}</span>\n        </td>\n        <ng-container *ngVar=\"getMasterworkBonus(i) as bonus\">\n          <td class=\"item-stat-container\">\n            <span [class.text-mw]=\"i.masterworked\" class=\"item-stat-value\">{{\n              i.stats[ArmorStat.StatHealth] + bonus[1]\n            }}</span>\n          </td>\n          <td class=\"item-stat-container\">\n            <span [class.text-mw]=\"i.masterworked\" class=\"item-stat-value\">{{\n              i.stats[ArmorStat.StatMelee] + bonus[5]\n            }}</span>\n          </td>\n          <td class=\"item-stat-container\">\n            <span [class.text-mw]=\"i.masterworked\" class=\"item-stat-value\">{{\n              i.stats[ArmorStat.StatGrenade] + bonus[3]\n            }}</span>\n          </td>\n          <td class=\"item-stat-container\">\n            <span [class.text-mw]=\"i.masterworked\" class=\"item-stat-value\">{{\n              i.stats[ArmorStat.StatSuper] + bonus[4]\n            }}</span>\n          </td>\n          <td class=\"item-stat-container\">\n            <span [class.text-mw]=\"i.masterworked\" class=\"item-stat-value\">{{\n              i.stats[ArmorStat.StatClass] + bonus[2]\n            }}</span>\n          </td>\n          <td class=\"item-stat-container\">\n            <span [class.text-mw]=\"i.masterworked\" class=\"item-stat-value\">{{\n              i.stats[ArmorStat.StatWeapon] + bonus[0]\n            }}</span>\n          </td>\n        </ng-container>\n        <td class=\"icon-column\">\n          <!-- Item Icon -->\n          <div [itemTooltip]=\"i\" class=\"item-icon-container\">\n            <app-item-icon\n              [itemHash]=\"i.hash\"\n              [masterworked]=\"i.masterworked\"\n              [source]=\"i.source\"\n              class=\"item-icon\">\n            </app-item-icon>\n          </div>\n        </td>\n        <td class=\"icon-column\">\n          <div style=\"position: relative; width: 25px\">\n            <app-armor-perk-icon [perk]=\"i.perk || 0\"></app-armor-perk-icon>\n          </div>\n        </td>\n        <td style=\"text-align: center\">\n          <ng-container *ngIf=\"i.armorSystem === 2; else showLevel\">\n            <mat-icon aria-label=\"Masterworked\" *ngIf=\"i.masterworked\">check_circle</mat-icon>\n          </ng-container>\n          <ng-template #showLevel>\n            <span *ngIf=\"i.masterworkLevel !== undefined\">{{ i.masterworkLevel }}</span>\n          </ng-template>\n        </td>\n        <!-- Disable -->\n        <td class=\"icon-column\">\n          <button\n            (click)=\"disableItem(i.itemInstanceId)\"\n            style=\"padding: 0; top: 0; left: 0\"\n            class=\"item-info-menu-btn\"\n            mat-icon-button\n            matTooltip=\"Disable this item from the results. It will not be used to generate results anymore, but you can always undo this.\">\n            <mat-icon>block</mat-icon>\n          </button>\n        </td>\n\n        <!-- Moving to inventory -->\n        <td *ngIf=\"i.transferState === 1 || i.transferState === 2\" class=\"icon-column\">\n          <mat-progress-spinner\n            class=\"item-loading-spinner\"\n            color=\"primary\"\n            diameter=\"22\"\n            mode=\"indeterminate\">\n          </mat-progress-spinner>\n        </td>\n        <td *ngIf=\"i.transferState === 3\">\n          <mat-icon\n            #tooltip=\"matTooltip\"\n            aria-hidden=\"false\"\n            aria-label=\"Success\"\n            class=\"item-moved-icon\"\n            inline\n            matTooltip=\"Item successfully moved to inventory.\">\n            check_circle_outline\n          </mat-icon>\n        </td>\n        <td *ngIf=\"i.transferState === 4\">\n          <mat-icon\n            #tooltip=\"matTooltip\"\n            aria-hidden=\"false\"\n            aria-label=\"Error\"\n            class=\"report-problem-icon\"\n            inline\n            matTooltip=\"This item could not be moved. Make sure that there is enough space on your character. This tool will not move items out of your inventory.\">\n            error_outline\n          </mat-icon>\n        </td>\n        <!-- // Moving to inventory -->\n      </tr>\n    </ng-container>\n    <!--Sum line without mods-->\n    <tr *ngVar=\"element?.statsNoMods as stats\" class=\"result-total-gear result-total highlight-row\">\n      <td>Total (armor)</td>\n      <td *ngIf=\"!!stats\">\n        {{ stats[ArmorStat.StatHealth] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatHealth\" class=\"statIcon\"></app-stat-icon>\n      </td>\n      <td *ngIf=\"!!stats\">\n        {{ stats[ArmorStat.StatMelee] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatMelee\" class=\"statIcon\"></app-stat-icon>\n      </td>\n      <td *ngIf=\"!!stats\">\n        {{ stats[ArmorStat.StatGrenade] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatGrenade\" class=\"statIcon\"></app-stat-icon>\n      </td>\n      <td *ngIf=\"!!stats\">\n        {{ stats[ArmorStat.StatSuper] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatSuper\" class=\"statIcon\"></app-stat-icon>\n      </td>\n      <td *ngIf=\"!!stats\">\n        {{ stats[ArmorStat.StatClass] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatClass\" class=\"statIcon\"></app-stat-icon>\n      </td>\n      <td *ngIf=\"!!stats\">\n        {{ stats[ArmorStat.StatWeapon] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatWeapon\" class=\"statIcon\"></app-stat-icon>\n      </td>\n    </tr>\n    <!-- Config Mods -->\n    <tr class=\"result-config\">\n      <td>Configuration</td>\n      <td\n        ><span\n          *ngIf=\"this.configValues[ArmorStat.StatHealth] !== 0\"\n          [class]=\"this.configValues[ArmorStat.StatHealth] > 0 ? 'positive' : 'negative'\">\n          <span *ngIf=\"this.configValues[ArmorStat.StatHealth] > 0\">+</span\n          >{{ this.configValues[ArmorStat.StatHealth] }}\n        </span></td\n      >\n      <td\n        ><span\n          *ngIf=\"this.configValues[ArmorStat.StatMelee] !== 0\"\n          [class]=\"this.configValues[ArmorStat.StatMelee] > 0 ? 'positive' : 'negative'\">\n          <span *ngIf=\"this.configValues[ArmorStat.StatMelee] > 0\">+</span\n          >{{ this.configValues[ArmorStat.StatMelee] }}\n        </span></td\n      >\n      <td\n        ><span\n          *ngIf=\"this.configValues[ArmorStat.StatGrenade] !== 0\"\n          [class]=\"this.configValues[ArmorStat.StatGrenade] > 0 ? 'positive' : 'negative'\">\n          <span *ngIf=\"this.configValues[ArmorStat.StatGrenade] > 0\">+</span\n          >{{ this.configValues[ArmorStat.StatGrenade] }}\n        </span></td\n      >\n      <td\n        ><span\n          *ngIf=\"this.configValues[ArmorStat.StatSuper] !== 0\"\n          [class]=\"this.configValues[ArmorStat.StatSuper] > 0 ? 'positive' : 'negative'\">\n          <span *ngIf=\"this.configValues[ArmorStat.StatSuper] > 0\">+</span\n          >{{ this.configValues[ArmorStat.StatSuper] }}\n        </span></td\n      >\n      <td\n        ><span\n          *ngIf=\"this.configValues[ArmorStat.StatClass] !== 0\"\n          [class]=\"this.configValues[ArmorStat.StatClass] > 0 ? 'positive' : 'negative'\">\n          <span *ngIf=\"this.configValues[ArmorStat.StatClass] > 0\">+</span\n          >{{ this.configValues[ArmorStat.StatClass] }}\n        </span></td\n      >\n      <td\n        ><span\n          *ngIf=\"this.configValues[ArmorStat.StatWeapon] !== 0\"\n          [class]=\"this.configValues[ArmorStat.StatWeapon] > 0 ? 'positive' : 'negative'\">\n          <span *ngIf=\"this.configValues[ArmorStat.StatWeapon] > 0\">+</span\n          >{{ this.configValues[ArmorStat.StatWeapon] }}\n        </span></td\n      >\n    </tr>\n    <!-- +5 Mods -->\n    <tr *ngVar=\"element?.mods as mods\" class=\"highlight-row\">\n      <td>Minor Mods</td>\n      <td *ngVar=\"mods | count: StatModifier.MINOR_HEALTH as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×5</span>\n      </td>\n      <td *ngVar=\"mods | count: StatModifier.MINOR_MELEE as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×5</span>\n      </td>\n      <td *ngVar=\"mods | count: StatModifier.MINOR_GRENADE as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×5</span>\n      </td>\n      <td *ngVar=\"mods | count: StatModifier.MINOR_SUPER as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×5</span>\n      </td>\n      <td *ngVar=\"mods | count: StatModifier.MINOR_CLASS as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×5</span>\n      </td>\n      <td *ngVar=\"mods | count: StatModifier.MINOR_WEAPON as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×5</span>\n      </td>\n    </tr>\n    <!-- +10 Mods -->\n    <tr *ngVar=\"element?.mods as mods\">\n      <td>Major Mods</td>\n      <td *ngVar=\"mods | count: StatModifier.MAJOR_HEALTH as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×10</span>\n      </td>\n      <td *ngVar=\"mods | count: StatModifier.MAJOR_MELEE as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×10</span>\n      </td>\n      <td *ngVar=\"mods | count: StatModifier.MAJOR_GRENADE as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×10</span>\n      </td>\n      <td *ngVar=\"mods | count: StatModifier.MAJOR_SUPER as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×10</span>\n      </td>\n      <td *ngVar=\"mods | count: StatModifier.MAJOR_CLASS as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×10</span>\n      </td>\n      <td *ngVar=\"mods | count: StatModifier.MAJOR_WEAPON as count\">\n        <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×10</span>\n      </td>\n    </tr>\n    <ng-container *ngVar=\"element?.artifice as mods\">\n      <tr>\n        <td>Artifice Mods</td>\n        <td *ngVar=\"mods | count: StatModifier.ARTIFICE_HEALTH as count\">\n          <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×3</span>\n        </td>\n        <td *ngVar=\"mods | count: StatModifier.ARTIFICE_MELEE as count\">\n          <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×3</span>\n        </td>\n        <td *ngVar=\"mods | count: StatModifier.ARTIFICE_GRENADE as count\">\n          <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×3</span>\n        </td>\n        <td *ngVar=\"mods | count: StatModifier.ARTIFICE_SUPER as count\">\n          <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×3</span>\n        </td>\n        <td *ngVar=\"mods | count: StatModifier.ARTIFICE_CLASS as count\">\n          <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×3</span>\n        </td>\n        <td *ngVar=\"mods | count: StatModifier.ARTIFICE_WEAPON as count\">\n          <span *ngIf=\"count > 0\" class=\"positive\">{{ count }}×3</span>\n        </td>\n      </tr>\n    </ng-container>\n\n    <!-- Final sum line -->\n    <tr *ngVar=\"element?.stats as stats\" class=\"result-total-all result-total highlight-row\">\n      <td>Total</td>\n      <td>\n        {{ stats[ArmorStat.StatHealth] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatHealth\" class=\"statIcon\"></app-stat-icon>\n      </td>\n      <td>\n        {{ stats[ArmorStat.StatMelee] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatMelee\" class=\"statIcon\"></app-stat-icon>\n      </td>\n      <td>\n        {{ stats[ArmorStat.StatGrenade] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatGrenade\" class=\"statIcon\"></app-stat-icon>\n      </td>\n      <td>\n        {{ stats[ArmorStat.StatSuper] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatSuper\" class=\"statIcon\"></app-stat-icon>\n      </td>\n      <td>\n        {{ stats[ArmorStat.StatClass] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatClass\" class=\"statIcon\"></app-stat-icon>\n      </td>\n      <td>\n        {{ stats[ArmorStat.StatWeapon] }}\n        <app-stat-icon [stat]=\"ArmorStat.StatWeapon\" class=\"statIcon\"></app-stat-icon>\n      </td>\n    </tr>\n  </table>\n</div>\n<ng-container *ngVar=\"calculateRequiredMasterworkCost() as cost\">\n  <div *ngIf=\"cost['total'] > 0\" style=\"margin-top: 10px\">\n    Total material cost:\n    <span *ngIf=\"cost['glimmer'] > 0\" class=\"currency-icon-container\" matTooltip=\"Glimmer\">\n      <img\n        alt=\"Glimmer\"\n        class=\"currency-icon\"\n        src=\"https://www.bungie.net/common/destiny2_content/icons/88993eaeedad32f42072df6f77f47311.png\" />\n      {{ cost[\"glimmer\"] | number }}\n    </span>\n\n    <span *ngIf=\"cost['core'] > 0\" class=\"currency-icon-container\" matTooltip=\"Enhancement Cores\">\n      <img\n        alt=\"Enhancement Cores\"\n        class=\"currency-icon\"\n        src=\"https://www.bungie.net/common/destiny2_content/icons/0a4eb695ed55b4e720ddc401460cc0f9.jpg\" />\n      {{ cost[\"core\"] }}\n    </span>\n\n    <span *ngIf=\"cost['prism'] > 0\" class=\"currency-icon-container\" matTooltip=\"Enhancement Prism\">\n      <img\n        alt=\"Enhancement Prism\"\n        class=\"currency-icon\"\n        src=\"https://www.bungie.net/common/destiny2_content/icons/dea2a35badf7466d4c2c2697ce6e8d87.jpg\" />\n      {{ cost[\"prism\"] }}\n    </span>\n\n    <span *ngIf=\"cost['ascshard'] > 0\" class=\"currency-icon-container\" matTooltip=\"Ascendant Shard\">\n      <img\n        alt=\"Ascendant Shard\"\n        class=\"currency-icon\"\n        src=\"https://www.bungie.net/common/destiny2_content/icons/0271d214fc3ec91b3def799a4b286b46.jpg\" />\n      {{ cost[\"ascshard\"] }}\n    </span>\n  </div>\n</ng-container>\n\n<div style=\"display: flex; align-items: center; flex-direction: column\">\n  <div class=\"buttonContainer\">\n    <button\n      (click)=\"CopyDIMQuery()\"\n      color=\"primary\"\n      mat-raised-button\n      matTooltip=\"Use this button to copy a DIM search query to your clip board. It allows you to search the given items in DIM.\">\n      Copy DIM query to clipboard\n    </button>\n    <button\n      (click)=\"goToDIM()\"\n      color=\"primary\"\n      mat-raised-button\n      matTooltip=\"Use this button to open this build as a DIM Loadout.\">\n      Open Loadout in DIM\n    </button>\n    <br />\n    <small>The following two buttons may not work for some at the moment:</small><br />\n    <button\n      (click)=\"moveItems()\"\n      mat-stroked-button\n      matTooltip=\"Click this button to move Items to your inventory. Make sure that you have enough space in your inventory. This tool will not move any items out of your inventory.\">\n      Move items to inventory (beta)\n    </button>\n    <button\n      (click)=\"moveItems(true)\"\n      mat-stroked-button\n      matTooltip=\"Click this button to equip the Items. Make sure that you have enough space in your inventory. This tool will not move any items out of your inventory.\">\n      Equip Items (beta)\n    </button>\n  </div>\n</div>\n\n<br />\n<br />\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * Additional copyrighted lines in this file:\n *  bhollis (adaption of the DIM links)\n */\n\nimport { Component, Input, OnDestroy, OnInit } from \"@angular/core\";\nimport {\n  ArmorStat,\n  ArmorStatIconUrls,\n  ArmorStatNames,\n  SpecialArmorStat,\n  StatModifier,\n} from \"src/app/data/enum/armor-stat\";\nimport { ResultDefinition, ResultItem } from \"../results.component\";\nimport { ConfigurationService } from \"../../../../services/configuration.service\";\nimport { ModInformation } from \"../../../../data/ModInformation\";\nimport { ModifierValue } from \"../../../../data/modifier\";\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\nimport { BungieApiService } from \"../../../../services/bungie-api.service\";\nimport { ModOrAbility } from \"../../../../data/enum/modOrAbility\";\nimport { DestinyClass } from \"bungie-api-ts/destiny2\";\nimport { ModifierType } from \"../../../../data/enum/modifierType\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { Subject } from \"rxjs\";\nimport { getMasterworkCostList } from \"../../../../data/masterworkCost\";\nimport { DimService } from \"../../../../services/dim.service\";\nimport { MAXIMUM_MASTERWORK_LEVEL } from \"src/app/data/constants\";\nimport { ArmorSystem } from \"src/app/data/types/IManifestArmor\";\n\n@Component({\n  selector: \"app-expanded-result-content\",\n  templateUrl: \"./expanded-result-content.component.html\",\n  styleUrls: [\"./expanded-result-content.component.scss\"],\n})\nexport class ExpandedResultContentComponent implements OnInit, OnDestroy {\n  public MAXIMUM_MASTERWORK_LEVEL = MAXIMUM_MASTERWORK_LEVEL;\n  public ModifierType = ModifierType;\n  public ModInformation = ModInformation;\n  public ArmorStatNames = ArmorStatNames;\n  public ArmorStatIconUrls = ArmorStatIconUrls;\n  public ArmorStat = ArmorStat;\n  public StatModifier = StatModifier;\n  public config_characterClass = DestinyClass.Unknown;\n  public config_assumeLegendariesMasterworked = false;\n  public config_assumeExoticsMasterworked = false;\n  public config_enabledMods: ModOrAbility[] = [];\n  public DIMUrl: string = \"\";\n  configValues: [number, number, number, number, number, number] = [0, 0, 0, 0, 0, 0];\n\n  @Input()\n  element: ResultDefinition | null = null;\n  ArmorItems: ResultItem[] | null = null;\n  ExoticArmorItem: ResultItem | null = null;\n\n  constructor(\n    private config: ConfigurationService,\n    private _snackBar: MatSnackBar,\n    private bungieApi: BungieApiService,\n    private dimService: DimService\n  ) {}\n\n  public async CopyDIMQuery() {\n    if (!this.element) return;\n\n    const success = await this.dimService.copyDIMQuery(this.element);\n    if (success) {\n      this.openSnackBar(\"Copied the DIM search query to your clipboard.\");\n    } else {\n      this.openSnackBar(\"Failed to copy to clipboard.\");\n    }\n  }\n\n  openSnackBar(message: string) {\n    this._snackBar.open(message, \"\", {\n      duration: 2500,\n      politeness: \"polite\",\n    });\n  }\n\n  ngOnInit(): void {\n    // set this.showGenericClassItemRow to true if the number of non-empty elements in this.element.items is <= 4\n    this.ArmorItems = this.element?.items || null; //.filter((x) => x.slot != ArmorSlot.ArmorSlotClass) || null;\n    this.ExoticArmorItem = this.element?.items.filter((x) => x.exotic)[0] || null;\n\n    this.config.configuration.pipe(takeUntil(this.ngUnsubscribe)).subscribe((c) => {\n      this.config_characterClass = c.characterClass;\n      this.config_assumeLegendariesMasterworked = c.assumeLegendariesMasterworked;\n      this.config_assumeExoticsMasterworked = c.assumeExoticsMasterworked;\n      this.config_enabledMods = c.enabledMods;\n      this.configValues = c.enabledMods\n        .reduce((p, v) => {\n          p = p.concat(ModInformation[v].bonus);\n          return p;\n        }, [] as ModifierValue[])\n        .reduce(\n          (p, v) => {\n            if (v.stat == SpecialArmorStat.ClassAbilityRegenerationStat)\n              p[[1, 0, 2][c.characterClass]] += v.value;\n            else p[v.stat as number] += v.value;\n            return p;\n          },\n          [0, 0, 0, 0, 0, 0]\n        );\n\n      this.DIMUrl = this.element ? this.dimService.generateDIMLink(this.element) : \"\";\n    });\n  }\n\n  disableAllItems() {\n    this.config.modifyConfiguration((cb) => {\n      for (let item of this.element?.items.flat() as ResultItem[])\n        cb.disabledItems.push(item.itemInstanceId);\n    });\n  }\n\n  disableItem(itemInstanceId: string) {\n    this.config.modifyConfiguration((cb) => {\n      cb.disabledItems.push(itemInstanceId);\n    });\n  }\n\n  async moveItems(equip = false) {\n    if (!this.element) return;\n\n    const result = await this.bungieApi.moveResultItems(this.element, equip);\n\n    if (!result.success) {\n      this.openSnackBar(\"Error: Could not find a character to move the items to.\");\n      return;\n    }\n\n    if (result.allSuccessful) {\n      this.openSnackBar(\"Success! Moved all the items.\");\n    } else {\n      this.openSnackBar(\n        \"Some of the items could not be moved. Make sure that there is enough space in the specific slot. This tool will not move items out of your inventory.\"\n      );\n    }\n  }\n\n  calculateRequiredMasterworkCost() {\n    let cost: { [id: string]: number } = {\n      shards: 0,\n      glimmer: 0,\n      core: 0,\n      prism: 0,\n      ascshard: 0,\n      total: 0,\n    };\n    let items = this.element?.items.flat() || [];\n    items = items.filter(\n      (i) =>\n        i.energyLevel < 10 &&\n        ((i.exotic && this.config_assumeExoticsMasterworked) ||\n          (!i.exotic && this.config_assumeLegendariesMasterworked))\n    );\n    for (let item of items) {\n      let costList = getMasterworkCostList(item.exotic, item.tier);\n      if (!costList) {\n        console.warn(\"No cost list found for item\", item);\n        continue;\n      }\n      for (let n = item.energyLevel; n < 10; n++)\n        for (let entryName in costList[n + 1]) {\n          cost[entryName] += costList[n + 1][entryName];\n          cost[\"total\"]++;\n        }\n    }\n    return cost;\n  }\n\n  goToDIM() {\n    if (this.element) {\n      this.dimService.openInDIM(this.element);\n    }\n  }\n\n  getTiersForStat(statId: number) {\n    return Math.floor((this.element?.stats[statId] || 0) / 10);\n  }\n\n  getColumnForStat(statId: number) {\n    var configValueTiers = Math.floor(this.configValues[statId] / 10);\n    let d = [];\n    let total = 0;\n\n    let moddedTiersMinor = Math.ceil(\n      ((this.element?.mods.filter((k) => k == 1 + 2 * statId) || []).length * 5 +\n        (this.element?.mods.filter((k) => k == 2 + 2 * statId) || []).length * 10) /\n        10\n    );\n\n    var tiers = this.getTiersForStat(statId) - configValueTiers - moddedTiersMinor;\n    for (let n = 0; n < tiers; n++) {\n      d.push(\"normal\" + (++total > 10 ? \" over100\" : \"\"));\n    }\n\n    for (let cvt = 0; cvt < moddedTiersMinor; cvt++)\n      d.push(\"mod\" + (++total > 10 ? \" over100\" : \"\"));\n    for (let cvt = 0; cvt < configValueTiers; cvt++)\n      d.push(\"config\" + (++total > 10 ? \" over100\" : \"\"));\n\n    while (total++ < 10) d.push(\"\");\n    return d;\n  }\n\n  getRequiredMasterworkBonus() {\n    return (\n      (\n        this.element?.items.filter(\n          (i) =>\n            (!i.masterworked && !i.exotic && this.config_assumeLegendariesMasterworked) ||\n            (i.exotic && this.config_assumeExoticsMasterworked)\n        ) || []\n      ).length * 2\n    );\n  }\n\n  getMasterworkBonus(item: ResultItem) {\n    const bonus = [0, 0, 0, 0, 0, 0];\n\n    if (item.armorSystem == ArmorSystem.Armor2) {\n      // Armor 2.0\n      if (\n        item.masterworkLevel == MAXIMUM_MASTERWORK_LEVEL ||\n        (item.exotic && this.config_assumeExoticsMasterworked) ||\n        (!item.exotic && this.config_assumeLegendariesMasterworked)\n      ) {\n        // Armor 2.0 Masterworked items give +2 to all stats\n        for (let i = 0; i < 6; i++) {\n          bonus[i] += 2;\n        }\n      }\n      return bonus;\n    } else if (item.armorSystem == ArmorSystem.Armor3) {\n      // Armor 3.0\n      let multiplier = item.masterworkLevel;\n      if (\n        (item.exotic && this.config_assumeExoticsMasterworked) ||\n        (!item.exotic && this.config_assumeLegendariesMasterworked)\n      ) {\n        multiplier = 5;\n      }\n\n      if (multiplier == 0) return bonus;\n\n      // For Armor 1.0, assume the first three stats are the archetype stats and don't get masterwork bonus\n      // The OTHER THREE stats (3, 4, 5) get +1 per multiplier level\n      for (let i = 0; i < 6; i++) {\n        if (item.archetypeStats.indexOf(i) === -1) {\n          bonus[i] += multiplier;\n        }\n      }\n\n      return bonus;\n    }\n\n    return bonus;\n  }\n\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<mat-list>\n  <ng-container *ngFor=\"let log of changelog.changelogData\">\n    <span matSubheader class=\"title\">{{ log.version }}, released on {{ log.date }}</span>\n    <mat-list-item *ngFor=\"let entry of log.entries\">\n      <mat-icon\n        *ngIf=\"entry.type === 0\"\n        matTooltip=\"A new function has been added.\"\n        matListItemIcon>\n        add_circle_outline\n      </mat-icon>\n      <mat-icon *ngIf=\"entry.type === 1\" matTooltip=\"A function has been removed.\" matListItemIcon>\n        remove_circle_outline\n      </mat-icon>\n      <mat-icon *ngIf=\"entry.type === 2\" matTooltip=\"Something has been modified.\" matListItemIcon>\n        change_history\n      </mat-icon>\n      <span class=\"e\">\n        <p>{{ entry.text }}</p>\n      </span>\n    </mat-list-item>\n    <mat-divider></mat-divider>\n  </ng-container>\n</mat-list>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component } from \"@angular/core\";\nimport { ChangelogService } from \"../../../../services/changelog.service\";\n\n@Component({\n  selector: \"app-changelog-list\",\n  templateUrl: \"./changelog-list.component.html\",\n  styleUrls: [\"./changelog-list.component.scss\"],\n})\nexport class ChangelogListComponent {\n  constructor(public changelog: ChangelogService) {}\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div id=\"help-container\">\n  <a class=\"returnbutton hide-gt-sm\" color=\"primary\" mat-raised-button routerLink=\"/\">\n    Return to D2ArmorPicker\n  </a>\n\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>\n        <span\n          >About D2ArmorPicker <small> by Mijago</small>\n          <a href=\"https://twitter.com/MijagoCoding/\" target=\"_blank\" matTooltip=\"Birb App\">\n            <img alt=\"Me on twitter\" class=\"logo-twitter\" src=\"assets/logo-twitter.png\" />\n          </a>\n          <a\n            href=\"https://ko-fi.com/mijago\"\n            target=\"_blank\"\n            matTooltip=\"If you like my work, you can always buy me a coffee!\">\n            <img alt=\"Ko-Fi\" class=\"logo-twitter\" src=\"assets/logo-kofi.png\" />\n          </a>\n          <a\n            href=\"http://discord.d2armorpicker.com/\"\n            target=\"_blank\"\n            matTooltip=\"Visit me at the development & support discord.\">\n            <img alt=\"Discord\" class=\"logo-twitter\" src=\"assets/logo-discord.png\" />\n          </a>\n        </span>\n      </mat-card-title>\n    </mat-card-header>\n    <mat-card-content>\n      D2ArmorPicker (or short D2AP) is a small web-app to quickly find armor that fits your desired\n      stat requirements. It uses the armor in your vault, inventory and postmaster, calculates every\n      possible variation and shows only those that fulfill the given requirements.\n      <br />\n      <br />\n      As I raided a lot and I mainly play meme builds, I wanted to be able to switch exotics and\n      have decent stats without being a burden on my team. That's why I developed the\n      <a href=\"https://github.com/Mijago/D2-Gear-Calculator\" target=\"_blank\"\n        >first version of this tool</a\n      >\n      in Python. After a few days I started to translate this tool\n      <a href=\"https://mijago.github.io/D2GearCalculator/\" target=\"_blank\">into a webpage</a>. My\n      friends liked it, but it didn't have API access. Thus I created the first version of\n      D2ArmorPicker, and after people started using and liking it, I started to completely rewrite\n      it - that's Version&nbsp;2!\n      <br />\n      <br />\n      I keep updating and improving this tool, but beware that it takes a bit, as I work on it on my\n      spare time. Feel free to follow me on Twitter\n      <a href=\"https://twitter.com/MijagoCoding/\" target=\"_blank\"\n        ><img alt=\"Me on twitter\" class=\"logo-twitter\" src=\"assets/logo-twitter.png\" /></a\n      >, I occasionally post updates there. If you like my tools and want to support me, head to\n      <a href=\"https://ko-fi.com/mijago\" target=\"_blank\">ko-fi.com</a> and buy me a coffee! ❤\n    </mat-card-content>\n  </mat-card>\n\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title> How do I use D2ArmorPicker? </mat-card-title>\n    </mat-card-header>\n    <mat-card-content>\n      Follow these few steps:\n      <ol>\n        <li>Login. You already did this!</li>\n        <li>\n          [Optional] Pick an exotic you want to use. The tool will only display results for this\n          exotic. You can always undo this.\n        </li>\n        <li>\n          [Optional] Select additional mods/fragments that give a bonus (or penalty). These are\n          important if you want certain stat combinations even if you have penalties on your gear.\n        </li>\n        <li>\n          Select the stat distribution you seek. This is the heart of D2ArmorPicker. You just click\n          100 recovery and it will display you builds that have 100 recovery.\n          <i>Note that it automatically adds stat mods if necessary.</i>\n        </li>\n        <li>\n          Now look to the result table. On a normal desktop it should be on the right, on smaller\n          devices it might move below the configuration. The table lists multiple results and you\n          can sort it by your requirements.<br />\n          <b>Click</b> on an entry to open look the detailed view:\n          <div class=\"preview-image-container\">\n            <img\n              alt=\"Preview of the results table\"\n              class=\"preview-image\"\n              src=\"assets/armor-images/preview_result_details.png\" />\n          </div>\n          The example above shows a build that utilizes Dunemarchers and a zero-waste-build. To\n          achieve it, I have to move all the items in my inventory and equip them. After this, I\n          <i>masterwork</i> them and <i>add the mods</i> as the table displays them:\n          <ul>\n            <li><b>Discipline:</b> One major mod, one minor mod;</li>\n            <li><b>Intellect:</b> One major mod, one minor mod;</li>\n            <li><b>Strength:</b> One major mod;</li>\n            <li\n              >I also add Powerful Friends and Radiant Light, as I chose them in the\n              configuration.</li\n            >\n          </ul>\n        </li>\n      </ol>\n    </mat-card-content>\n  </mat-card>\n\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title> Where can I grind high stat armor? </mat-card-title>\n    </mat-card-header>\n    <mat-card-content>\n      There are many spots that give you mediocre armor, but for the really good builds you need the\n      correct armor. Here I provide a list of high-stat armor sources. It may not be complete, but a\n      good starting point.\n      <i>Last updated February 8, 2022.</i>\n\n      <ul>\n        <li> Farm legendary Dares!</li>\n        <li>\n          Clear Pit of Heresy Dungeon, the boss drop guarantees two stats to be 16 (or higher).</li\n        >\n        <li>\n          Farm a bunch of Spoils, go into Master Vault of Glass and buy armor at the final\n          chest.</li\n        >\n        <li> The list will be extended sometime in Witch Queen!</li>\n      </ul>\n      Some good armor rolls may look like these:\n      <div [style.display]=\"'flex'\" [style.flex-direction]=\"'row'\" id=\"armor-image-container\">\n        <img src=\"assets/armor-images/kabrs_battlecage.png\" />\n        <img src=\"assets/armor-images/lightkin_gauntlets.png\" />\n        <img src=\"assets/armor-images/phobos_warden_helm.png\" />\n        <img src=\"assets/armor-images/wild_hunt_vest.png\" />\n      </div>\n    </mat-card-content>\n  </mat-card>\n\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>Known Issues</mat-card-title>\n    </mat-card-header>\n    <mat-card-content>\n      <ul>\n        <li *ngFor=\"let text of knownIssues\">{{ text }}</li>\n      </ul>\n    </mat-card-content>\n  </mat-card>\n\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>Changelog</mat-card-title>\n    </mat-card-header>\n    <mat-card-content class=\"changelog-table-container\">\n      <app-changelog-list></app-changelog-list>\n    </mat-card-content>\n  </mat-card>\n\n  <a class=\"returnbutton hide-gt-sm\" color=\"primary\" mat-raised-button routerLink=\"/\">\n    Return to D2ArmorPicker\n  </a>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component } from \"@angular/core\";\nimport { CHANGELOG_DATA } from \"../../../../data/changelog\";\n\n@Component({\n  selector: \"app-help-page\",\n  templateUrl: \"./help-page.component.html\",\n  styleUrls: [\"./help-page.component.css\"],\n})\nexport class HelpPageComponent {\n  knownIssues: string[] = [\n    \"When you click buttons on the page too fast are able to select an invalid state with no results. Just undo your changed settings. And be patient - the calculation is an expensive task.\",\n    \"Sometimes duplicate results are given. This happens when the inventory got updated twice (Race Condition). Only reported once, and not really a problem.\",\n  ];\n\n  changelog = CHANGELOG_DATA;\n\n  constructor() {}\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div style=\"display: flex; align-items: center; gap: 12px\">\n  <div class=\"custom-stat-slider\" style=\"width: 350px; height: 30px\">\n    <div style=\"display: flex; align-items: center; height: 100%; width: 100%; gap: 0\">\n      <ng-container *ngFor=\"let value of statValues\">\n        <div\n          class=\"stat-line\"\n          [class.zero-line]=\"value === 0\"\n          [class.milestone-line]=\"value === 50 || value === 100 || value === 150 || value === 200\"\n          [class.selected]=\"value === selectedValue\"\n          [class.lower-than-selected]=\"value < selectedValue\"\n          [class.lower-than-hovered]=\"hoveredValue !== null && value < hoveredValue\"\n          [class.higher-than-hovered]=\"hoveredValue !== null && value >= hoveredValue\"\n          [class.disabled]=\"value > currentAnimatedMaxValue\"\n          [style.height]=\"\n            value === 0 || value === 50 || value === 100 || value === 150 || value === 200\n              ? '16px'\n              : '8px'\n          \"\n          [matTooltip]=\"'Value: ' + value + (value % 50 === 0 ? ' (Tier ' + value / 10 + ')' : '')\"\n          [matTooltipDisabled]=\"value > currentAnimatedMaxValue\"\n          matTooltipPosition=\"above\"\n          [matTooltipShowDelay]=\"0\"\n          (click)=\"value <= maximumAvailableTier * 10 && setValueMob(value)\"\n          (mouseenter)=\"handleHover(value)\"\n          (mouseleave)=\"clearHover()\">\n        </div>\n      </ng-container>\n    </div>\n    <div class=\"milestone-labels\">\n      <button\n        class=\"milestone-button zero-button\"\n        style=\"left: 0%\"\n        *ngIf=\"selectedValue < -12 || selectedValue > 12\"\n        (click)=\"setValueMob(0)\"\n        mat-flat-button\n        [attr.tabindex]=\"tabIndexOffset + 1\"\n        >0</button\n      >\n      <div\n        class=\"milestone-label\"\n        style=\"left: 25%\"\n        *ngIf=\"isSixthStat() && (selectedValue < 38 || selectedValue > 62)\"\n        >50</div\n      >\n      <div\n        class=\"milestone-label\"\n        style=\"left: 50%\"\n        *ngIf=\"isSixthStat() && (selectedValue < 88 || selectedValue > 112)\"\n        >100</div\n      >\n      <div\n        class=\"milestone-label\"\n        style=\"left: 75%\"\n        *ngIf=\"isSixthStat() && (selectedValue < 138 || selectedValue > 162)\"\n        >150</div\n      >\n      <button\n        class=\"milestone-button max-button\"\n        style=\"left: 100%\"\n        *ngIf=\"selectedValue < 188 || selectedValue > 212\"\n        (click)=\"setValueMob(maximumAvailableTier * 10)\"\n        mat-flat-button\n        [attr.tabindex]=\"tabIndexOffset + 2\">\n        <span class=\"max-text\">MAX</span>\n      </button>\n    </div>\n    <div class=\"selected-value-label\" [style.left.%]=\"getSelectedValuePosition()\">\n      {{ selectedValue }}\n    </div>\n  </div>\n  <div class=\"stat-tier-value\">\n    <div class=\"value-section\">\n      <span\n        *ngIf=\"!editingValue\"\n        (click)=\"startValueEdit()\"\n        class=\"clickable-value\"\n        style=\"cursor: pointer; display: inline-block\"\n        [attr.tabindex]=\"tabIndexOffset + 3\">\n        {{ selectedValue }}\n      </span>\n      <input\n        *ngIf=\"editingValue\"\n        #valueInput\n        type=\"number\"\n        class=\"value-input\"\n        [min]=\"0\"\n        [max]=\"maximumAvailableTier * 10\"\n        [value]=\"selectedValue\"\n        (blur)=\"commitValueEdit(valueInput.value)\"\n        (keydown.enter)=\"commitValueEdit(valueInput.value)\"\n        (keydown.escape)=\"cancelValueEdit()\"\n        [attr.tabindex]=\"tabIndexOffset + 3\" />\n    </div>\n    <div class=\"separator-section\">/</div>\n    <div class=\"max-value-section\">{{ maximumAvailableTier * 10 }}</div>\n    <!--\n    <div\n      *ngIf=\"hoveredValue !== null && hoveredValue <= maximumAvailableTier * 10\"\n      class=\"hover-value-indicator\">\n      Hovering: {{ hoveredValue }}\n    </div>\n    -->\n  </div>\n  <button\n    mat-icon-button\n    (click)=\"toggleLockState()\"\n    matTooltip=\"Locking a stat enforces this stat to have exactly this value. Use this for example to get exact T3 of Mobility on a Titan.\"\n    [attr.tabindex]=\"tabIndexOffset + 4\">\n    <mat-icon *ngIf=\"!locked\">lock_open</mat-icon>\n    <mat-icon *ngIf=\"locked\" class=\"lock-locked\">lock</mat-icon>\n  </button>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnInit,\n  OnDestroy,\n  Output,\n  ViewChild,\n  ElementRef,\n  AfterViewChecked,\n} from \"@angular/core\";\nimport { ArmorStat } from \"../../../../../data/enum/armor-stat\";\n\n@Component({\n  selector: \"app-stat-tier-selection\",\n  templateUrl: \"./stat-tier-selection.component.html\",\n  styleUrls: [\"./stat-tier-selection.component.scss\"],\n})\nexport class StatTierSelectionComponent implements OnInit, OnChanges, OnDestroy, AfterViewChecked {\n  readonly TierRange = new Array(11);\n  @Input() stat: ArmorStat = ArmorStat.StatWeapon;\n  @Input() statsByMods: number = 0;\n  @Input() maximumAvailableTier: number = 20;\n  @Input() selectedTier: number = 0;\n  @Input() locked: boolean = false;\n  @Input() tabIndexOffset: number = 0;\n  @Output() selectedTierChange = new EventEmitter<number>();\n  @Output() lockedChange = new EventEmitter<boolean>();\n\n  @ViewChild(\"valueInput\") valueInput!: ElementRef<HTMLInputElement>;\n\n  selectedValue: number = 0;\n  public hoveredValue: number | null = null;\n  public statValues: number[] = [];\n  public editingValue: boolean = false;\n  private shouldSelectText: boolean = false;\n\n  public currentAnimatedMaxValue: number = 0;\n  private animationTimeouts: Set<number> = new Set();\n\n  constructor() {}\n\n  ngOnInit(): void {\n    // Generate values from 0 to 200\n    this.statValues = Array.from({ length: 201 }, (_, i) => i);\n    this.currentAnimatedMaxValue = this.maximumAvailableTier * 10;\n  }\n\n  ngOnChanges() {\n    this.selectedValue = this.selectedTier * 10;\n    this.animateMaxTierChange();\n  }\n\n  ngOnDestroy(): void {\n    this.clearAnimationTimeouts();\n  }\n\n  ngAfterViewChecked() {\n    if (this.editingValue && this.valueInput) {\n      this.valueInput.nativeElement.focus();\n      const inputElem = this.valueInput.nativeElement;\n\n      if (this.shouldSelectText) {\n        inputElem.select();\n        this.shouldSelectText = false;\n      } else {\n        const valueLength = inputElem.value.length;\n        inputElem.setSelectionRange(valueLength, valueLength);\n      }\n    }\n  }\n\n  setValue(newValue: number) {\n    if (newValue <= this.maximumAvailableTier) {\n      console.log(\"Setting value to: \" + newValue);\n      this.selectedTier = newValue;\n      this.selectedTierChange.emit(newValue);\n    }\n  }\n\n  setValueMob(inputEvent: any) {\n    let newValue = parseInt(inputEvent);\n    newValue = Math.min(Math.max(newValue, 0), 200);\n    this.setValue(newValue / 10);\n  }\n\n  isAddedByConfigMods(index: number) {\n    return (\n      index > 0 &&\n      ((this.selectedTier - index >= 0 && this.selectedTier - index < this.statsByMods) || // on the right\n        // ( index <= this.statsByMods) // on the left\n        (this.selectedTier < this.statsByMods && index <= this.statsByMods))\n    );\n  }\n\n  toggleLockState() {\n    this.locked = !this.locked;\n    this.lockedChange.emit(this.locked);\n  }\n\n  /**\n   * Optimized hover handling for immediate response\n   */\n  handleHover(value: number): void {\n    if (value <= this.maximumAvailableTier * 10) {\n      // Use requestAnimationFrame for smoother UI updates\n      requestAnimationFrame(() => {\n        this.hoveredValue = value;\n      });\n    }\n  }\n\n  /**\n   * Clear hover state immediately\n   */\n  clearHover(): void {\n    this.hoveredValue = null;\n  }\n\n  commitValueEdit(value: string | number) {\n    let num = Number(value);\n    if (isNaN(num)) {\n      num = this.selectedValue;\n    }\n    num = Math.round(num);\n    num = Math.max(0, Math.min(num, this.maximumAvailableTier * 10));\n    this.selectedValue = num;\n    this.selectedTier = num / 10;\n    this.selectedTierChange.emit(this.selectedTier);\n    this.editingValue = false;\n    this.shouldSelectText = false;\n  }\n\n  cancelValueEdit() {\n    this.editingValue = false;\n    this.shouldSelectText = false;\n  }\n\n  startValueEdit() {\n    this.editingValue = true;\n    this.shouldSelectText = true;\n  }\n\n  /**\n   * Check if this is the sixth stat (weapon stat)\n   */\n  isSixthStat(): boolean {\n    return this.stat === ArmorStat.StatMelee;\n  }\n\n  /**\n   * Get the position percentage for the selected value label\n   */\n  getSelectedValuePosition(): number {\n    // Calculate percentage position based on selectedValue (0-200 range)\n    return (this.selectedValue / 200) * 100;\n  }\n\n  /**\n   * Animate the maximum tier change with cascading effect\n   */\n  private animateMaxTierChange(): void {\n    // Clear any existing animation timeouts\n    this.clearAnimationTimeouts();\n\n    const targetMaxValue = this.maximumAvailableTier * 10;\n    const startValue = this.currentAnimatedMaxValue;\n\n    if (startValue === targetMaxValue) {\n      return; // No change needed\n    }\n\n    // Skip animation if going from 0 to initial value (e.g., 0->200)\n    if (startValue === 0) {\n      this.currentAnimatedMaxValue = targetMaxValue;\n      return;\n    }\n\n    const direction = targetMaxValue > startValue ? 1 : -1;\n    const steps = Math.abs(targetMaxValue - startValue);\n\n    // Animation delay between each step (in milliseconds)\n    const stepDelay = 10; // Fast animation\n\n    for (let i = 1; i <= steps; i++) {\n      const timeout = window.setTimeout(() => {\n        this.currentAnimatedMaxValue = startValue + direction * i;\n\n        // Force change detection to update the UI\n        // This will trigger the CSS class updates through the template bindings\n      }, stepDelay * i);\n\n      this.animationTimeouts.add(timeout);\n    }\n  }\n\n  /**\n   * Clear all pending animation timeouts\n   */\n  private clearAnimationTimeouts(): void {\n    this.animationTimeouts.forEach((timeout) => window.clearTimeout(timeout));\n    this.animationTimeouts.clear();\n  }\n\n  /**\n   * Check if a stat value is currently animating (for smooth transitions)\n   */\n  isStatValueAnimating(value: number): boolean {\n    const currentMax = this.currentAnimatedMaxValue;\n    const targetMax = this.maximumAvailableTier * 10;\n\n    if (currentMax === targetMax) {\n      return false;\n    }\n\n    // Value is in the range being animated\n    const minRange = Math.min(currentMax, targetMax);\n    const maxRange = Math.max(currentMax, targetMax);\n\n    return value > minRange && value <= maxRange;\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<table>\n  <tr *ngFor=\"let enum of stats; let i = index\">\n    <td>\n      {{ enum.name }}\n    </td>\n    <td><app-stat-icon [stat]=\"enum.value\"></app-stat-icon></td>\n    <td>\n      <app-stat-tier-selection\n        [stat]=\"enum.value\"\n        [statsByMods]=\"statsByMods[enum.value]\"\n        [maximumAvailableTier]=\"maximumPossibleTiers[enum.value]\"\n        [selectedTier]=\"minimumStatTiers[enum.value].value\"\n        [locked]=\"minimumStatTiers[enum.value].fixed\"\n        (selectedTierChange)=\"setSelectedTier(enum.value, $event)\"\n        (lockedChange)=\"setLockState(enum.value, $event)\"\n        [tabIndexOffset]=\"i * 10\"></app-stat-tier-selection>\n    </td>\n  </tr>\n</table>\n\n<span id=\"tierSelectButtonContainer\">\n  <span class=\"tierSelectButton\">\n    <button mat-stroked-button color=\"warn\" id=\"clearStatButton\" (click)=\"clearStatSelection()\"\n      >Clear</button\n    >\n  </span>\n</span>\n\n<br />\n<br />\n<!-- modOptimizationStrategy -->\n<div>\n  <div><b>Mod optimization strategy:</b></div>\n  <div>You can choose if the algorithm should keep an eye on amount or the cost of mods.</div>\n  <div>These settings are extremely expensive when paired with the reduced waste feature.</div>\n  <mat-button-toggle-group\n    [(ngModel)]=\"config_mod_strategy\"\n    (change)=\"setModOptimizationStrategy()\">\n    <mat-button-toggle\n      [value]=\"0\"\n      matTooltip=\"Fast. Will result in good and fast results. Some better results *may* be skipped.\"\n      >No extra logic (fast)</mat-button-toggle\n    >\n    <mat-button-toggle\n      [value]=\"1\"\n      matTooltip=\"Slower. Reduces the amount of used mods. This means that it will try to give you 4 mods instead of 5 whenever possible.\"\n      >Fewer mods, high cost (slow)</mat-button-toggle\n    >\n    <mat-button-toggle\n      [value]=\"2\"\n      matTooltip=\"Slower. Reduces the total cost of mods. This will result in less Super mods, for example.\"\n      >Many mods, low cost (slow)</mat-button-toggle\n    >\n  </mat-button-toggle-group>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { ArmorStat, ArmorStatNames, ARMORSTAT_ORDER } from \"../../../../data/enum/armor-stat\";\nimport { ConfigurationService } from \"../../../../services/configuration.service\";\nimport { EnumDictionary } from \"../../../../data/types/EnumDictionary\";\nimport { FixableSelection, getDefaultStatDict } from \"../../../../data/buildConfiguration\";\nimport { InventoryService } from \"../../../../services/inventory.service\";\nimport { ModInformation } from \"../../../../data/ModInformation\";\nimport { Subject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { ModOptimizationStrategy } from \"../../../../data/enum/mod-optimization-strategy\";\n\n@Component({\n  selector: \"app-desired-stat-selection\",\n  templateUrl: \"./desired-stat-selection.component.html\",\n  styleUrls: [\"./desired-stat-selection.component.css\"],\n})\nexport class DesiredStatSelectionComponent implements OnInit, OnDestroy {\n  readonly stats: { name: string; value: ArmorStat }[];\n  minimumStatTiers: EnumDictionary<ArmorStat, FixableSelection<number>> = getDefaultStatDict(1);\n  maximumPossibleTiers: number[] = [20, 20, 20, 20, 20, 20];\n  statsByMods: number[] = [0, 0, 0, 0, 0, 0];\n  config_zero_waste = false;\n  config_mod_strategy = ModOptimizationStrategy.None;\n  config_reduce_waste = false;\n\n  constructor(\n    public config: ConfigurationService,\n    private inventory: InventoryService\n  ) {\n    this.stats = ARMORSTAT_ORDER.map((value) => {\n      return { name: (ArmorStatNames as any)[+value], value: +value };\n    });\n  }\n\n  ngOnInit(): void {\n    this.config.configuration.pipe(takeUntil(this.ngUnsubscribe)).subscribe((c) => {\n      const tmpStatsByMods = [0, 0, 0, 0, 0, 0];\n      for (let enabledMod of c.enabledMods) {\n        for (let bonus of ModInformation[enabledMod].bonus) {\n          tmpStatsByMods[bonus.stat] += bonus.value / 10;\n        }\n      }\n      this.statsByMods = tmpStatsByMods;\n      this.minimumStatTiers = c.minimumStatTiers;\n      this.config_zero_waste = c.onlyShowResultsWithNoWastedStats;\n      this.config_mod_strategy = c.modOptimizationStrategy;\n      this.config_reduce_waste = c.tryLimitWastedStats;\n    });\n\n    this.inventory.reachableTiers.pipe(takeUntil(this.ngUnsubscribe)).subscribe((d) => {\n      // Do not update if we get 0 results\n      const tiers = d || [20, 20, 20, 20, 20, 20];\n      if (tiers.filter((d) => d == 0).length < 6) {\n        this.maximumPossibleTiers = tiers;\n      }\n    });\n\n    this.inventory.armorResults.pipe(takeUntil(this.ngUnsubscribe)).subscribe((d) => {\n      // Do not update if we get 0 results\n      const tiers = d.maximumPossibleTiers || [20, 20, 20, 20, 20, 20];\n      if (tiers.filter((d) => d == 0).length < 6) {\n        this.maximumPossibleTiers = tiers;\n      }\n    });\n  }\n\n  setSelectedTier(stat: ArmorStat, value: number) {\n    //if (this.config.readonlyConfigurationSnapshot.minimumStatTiers[stat].value == value)\n    //return;\n\n    this.config.modifyConfiguration((c) => {\n      c.minimumStatTiers[stat].value = value;\n    });\n  }\n\n  clearStatSelection() {\n    this.config.modifyConfiguration((c) => {\n      for (let stat of ARMORSTAT_ORDER) {\n        c.minimumStatTiers[stat] = { fixed: false, value: 0 };\n      }\n    });\n  }\n\n  useStatPreset(d: ArmorStat[]) {\n    if (\n      d.filter((k) => this.config.readonlyConfigurationSnapshot.minimumStatTiers[k].value != 10)\n        .length == 0\n    )\n      return;\n\n    this.config.modifyConfiguration((c) => {\n      for (let armorStat of d) {\n        c.minimumStatTiers[armorStat].value = 10;\n      }\n    });\n  }\n\n  setLockState(stat: ArmorStat, value: boolean) {\n    this.config.modifyConfiguration((c) => {\n      c.minimumStatTiers[stat].fixed = value;\n    });\n  }\n\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n\n  setModOptimizationStrategy() {\n    this.config.modifyConfiguration((c) => {\n      c.modOptimizationStrategy = this.config_mod_strategy;\n    });\n  }\n\n  toggleReduceWaste() {\n    this.config.modifyConfiguration((c) => {\n      c.tryLimitWastedStats = !this.config_reduce_waste;\n    });\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div>\n  <div class=\"tooltip-container\">\n    <table>\n      <tr *ngIf=\"gearset\">\n        <td class=\"perk-icon-col\" rowspan=\"2\">\n          <img\n            alt=\"{{ gearset.displayProperties.name }}\"\n            class=\"perk-icon\"\n            src=\"https://bungie.net/{{ gearset.displayProperties.icon }}\" />\n        </td>\n      </tr>\n      <tr *ngIf=\"gearset\">\n        <td>\n          <span>{{ gearset.displayProperties.name }}</span>\n        </td>\n      </tr>\n      <tr *ngIf=\"gearset\">\n        <td colspan=\"2\">\n          {{ gearset.displayProperties.description }}\n        </td>\n      </tr>\n    </table>\n  </div>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, Input, OnInit } from \"@angular/core\";\nimport { InventoryService } from \"../../../../services/inventory.service\";\nimport { ItemIconServiceService } from \"../../../../services/item-icon-service.service\";\nimport { DestinySandboxPerkDefinition } from \"bungie-api-ts/destiny2\";\n\n@Component({\n  selector: \"app-gearset-tooltip\",\n  templateUrl: \"./gearset-tooltip.component.html\",\n  styleUrls: [\"./gearset-tooltip.component.css\"],\n})\nexport class GearsetTooltipComponent implements OnInit {\n  @Input() gearset: DestinySandboxPerkDefinition | undefined;\n\n  iconUrl: string | undefined;\n\n  constructor(\n    public inv: InventoryService,\n    public iconService: ItemIconServiceService\n  ) {}\n\n  async ngOnInit() {\n    this.iconUrl = this.gearset?.displayProperties?.icon;\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {\n  Directive,\n  Input,\n  TemplateRef,\n  ElementRef,\n  OnInit,\n  HostListener,\n  ComponentRef,\n  OnDestroy,\n} from \"@angular/core\";\nimport { Overlay, OverlayPositionBuilder, OverlayRef } from \"@angular/cdk/overlay\";\nimport { ComponentPortal } from \"@angular/cdk/portal\";\nimport { GearsetTooltipComponent } from \"./gearset-tooltip.component\";\nimport { DestinySandboxPerkDefinition } from \"bungie-api-ts/destiny2\";\n\n@Directive({\n  selector: \"[gearsetTooltip]\",\n})\nexport class GearsetcTooltipDirective implements OnInit, OnDestroy {\n  /**\n   * This will be used to show tooltip or not\n   * This can be used to show the tooltip conditionally\n   */\n  @Input() showToolTip: boolean = true;\n\n  //If this is specified then specified text will be show in in the tooltip\n  @Input() gearsetTooltip: DestinySandboxPerkDefinition | undefined;\n\n  //If this is specified then specified template will be rendered in the tooltip\n  @Input() contentTemplate: TemplateRef<any> | undefined;\n\n  private _overlayRef: OverlayRef | undefined;\n\n  constructor(\n    private _overlay: Overlay,\n    private _overlayPositionBuilder: OverlayPositionBuilder,\n    private _elementRef: ElementRef\n  ) {}\n\n  /**\n   * Init life cycle event handler\n   */\n  ngOnInit() {\n    if (!this.showToolTip) {\n      return;\n    }\n\n    const positionStrategy = this._overlayPositionBuilder\n      .flexibleConnectedTo(this._elementRef)\n      .withPositions([\n        {\n          originX: \"center\",\n          originY: \"bottom\",\n          overlayX: \"center\",\n          overlayY: \"top\",\n          offsetY: 5,\n        },\n        {\n          originX: \"center\",\n          originY: \"top\",\n          overlayX: \"center\",\n          overlayY: \"bottom\",\n          offsetY: -5,\n        },\n      ]);\n\n    this._overlayRef = this._overlay.create({ positionStrategy });\n    this._overlayRef.addPanelClass(\"overlay-no-pointer-event\");\n  }\n\n  /**\n   * This method will be called whenever mouse enters in the Host element\n   * i.e. where this directive is applied\n   * This method will show the tooltip by instantiating the McToolTipComponent and attaching to the overlay\n   */\n  @HostListener(\"mouseenter\")\n  show() {\n    //attach the component if it has not already attached to the overlay\n    if (this._overlayRef && !this._overlayRef.hasAttached()) {\n      const tooltipRef: ComponentRef<GearsetTooltipComponent> = this._overlayRef.attach(\n        new ComponentPortal(GearsetTooltipComponent)\n      );\n      tooltipRef.instance.gearset = this.gearsetTooltip;\n    }\n  }\n\n  /**\n   * This method will be called when mouse goes out of the host element\n   * i.e. where this directive is applied\n   * This method will close the tooltip by detaching the overlay from the view\n   */\n  @HostListener(\"mouseleave\")\n  hide() {\n    this.closeToolTip();\n  }\n\n  /**\n   * Destroy lifecycle event handler\n   * This method will make sure to close the tooltip\n   * It will be needed in case when app is navigating to different page\n   * and user is still seeing the tooltip; In that case we do not want to hang around the\n   * tooltip after the page [on which tooltip visible] is destroyed\n   */\n  ngOnDestroy() {\n    this.closeToolTip();\n  }\n\n  /**\n   * This method will close the tooltip by detaching the component from the overlay\n   */\n  private closeToolTip() {\n    if (this._overlayRef) {\n      this._overlayRef.detach();\n    }\n  }\n}\n","<div class=\"gearset-selection-container\">\n  <table class=\"gearset-table\">\n    <thead>\n      <tr>\n        <th class=\"gear-set-name\">Gear Set</th>\n        <th class=\"two-piece-bonuses\">2 Piece Bonuses</th>\n        <th class=\"four-piece-bonuses\">4 Piece Bonuses</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let gearSet of gearSets; let i = index\">\n        <td class=\"gear-set-name\">\n          {{ gearSet.name }}\n        </td>\n        <td class=\"two-piece-bonuses\">\n          <div\n            class=\"bonus-toggle\"\n            *ngVar=\"gearSet.twoPieceBonus as bonus\"\n            (click)=\"onTwoPieceBonusChange(i)\"\n            [class.disabled]=\"!bonus.available\"\n            [gearsetTooltip]=\"bonus.perk\">\n            <mat-slide-toggle\n              color=\"primary\"\n              [id]=\"'two-piece-' + i\"\n              [checked]=\"bonus.enabled\"\n              [disabled]=\"(selectedTwoPieceCount >= 2 && !bonus.enabled) || !bonus.available\">\n            </mat-slide-toggle>\n            <span class=\"bonus-icon\">\n              <img\n                *ngIf=\"bonus.perk.displayProperties.hasIcon\"\n                [src]=\"'https://bungie.net/' + bonus.perk.displayProperties.icon\"\n                alt=\"{{ bonus.perk.displayProperties.name }} icon\"\n                class=\"bonus-icon-image\" />\n            </span>\n            <span class=\"bonus-name\">{{ bonus.perk.displayProperties.name }}</span>\n          </div>\n        </td>\n        <td class=\"four-piece-bonuses\">\n          <div\n            class=\"bonus-toggle\"\n            *ngVar=\"gearSet.fourPieceBonus as bonus\"\n            (click)=\"onFourPieceBonusChange(i)\"\n            [class.disabled]=\"!bonus.available\"\n            [gearsetTooltip]=\"bonus.perk\">\n            <mat-slide-toggle\n              color=\"primary\"\n              [id]=\"'four-piece-' + i\"\n              [checked]=\"bonus.enabled\"\n              [disabled]=\"!bonus.available\">\n            </mat-slide-toggle>\n            <span class=\"bonus-icon\">\n              <img\n                *ngIf=\"bonus.perk.displayProperties.hasIcon\"\n                [src]=\"'https://bungie.net/' + bonus.perk.displayProperties.icon\"\n                alt=\"{{ bonus.perk.displayProperties.name }} icon\"\n                class=\"bonus-icon-image\" />\n            </span>\n            <span class=\"bonus-name\">{{ bonus.perk.displayProperties.name }}</span>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnInit, OnDestroy } from \"@angular/core\";\nimport { DestinySandboxPerkDefinition } from \"bungie-api-ts/destiny2\";\nimport { Subject } from \"rxjs\";\nimport { distinctUntilChanged, takeUntil } from \"rxjs/operators\";\nimport { FORCE_USE_NO_EXOTIC } from \"src/app/data/constants\";\nimport { ConfigurationService } from \"src/app/services/configuration.service\";\nimport { DatabaseService } from \"src/app/services/database.service\";\nimport { InventoryService } from \"src/app/services/inventory.service\";\n\ninterface GearSetBonus {\n  perk: DestinySandboxPerkDefinition | undefined;\n  enabled: boolean;\n  available: boolean; // Indicates if the user has enough items to enable this bonus\n}\n\ninterface GearSet {\n  name: string;\n  hash: number;\n  twoPieceBonus: GearSetBonus;\n  fourPieceBonus: GearSetBonus;\n}\n\n@Component({\n  selector: \"app-gearset-selection\",\n  templateUrl: \"./gearset-selection.component.html\",\n  styleUrls: [\"./gearset-selection.component.scss\"],\n})\nexport class GearsetSelectionComponent implements OnInit, OnDestroy {\n  private refreshingGearsets = false;\n  public gearSets: GearSet[] = [];\n  constructor(\n    private inventoryService: InventoryService,\n    private db: DatabaseService,\n    private config: ConfigurationService\n  ) {}\n  ngOnInit(): void {\n    this.inventoryService.inventory.pipe(takeUntil(this.ngUnsubscribe)).subscribe(async () => {\n      await this.refreshGearSets();\n      await this.refreshGearsetAvailability();\n    });\n\n    this.config.configuration\n      .pipe(\n        takeUntil(this.ngUnsubscribe),\n        distinctUntilChanged((a, b) => {\n          return a.characterClass === b.characterClass;\n        })\n      )\n      .subscribe(async () => {\n        await this.refreshGearSets();\n        await this.refreshGearsetAvailability();\n      });\n  }\n\n  async refreshGearsetAvailability(): Promise<void> {\n    console.log(\"Refreshing gear set availability\");\n    if (this.gearSets.length === 0) {\n      return;\n    }\n\n    // Check if the current character class has gear sets available\n    const currentClass = this.config.readonlyConfigurationSnapshot.characterClass;\n\n    for (const gearSet of this.gearSets) {\n      // Get all inventory items for this class and gear set\n      const items = await this.db.inventoryArmor\n        .where({\n          clazz: currentClass,\n          gearSetHash: gearSet.hash,\n        })\n        .toArray();\n\n      // Count how many unique slots are represented by these items\n      const uniqueSlots = new Set(items.map((item) => item.slot));\n      gearSet.twoPieceBonus.available = uniqueSlots.size >= 2;\n      gearSet.fourPieceBonus.available = uniqueSlots.size >= 4;\n\n      if (!gearSet.twoPieceBonus.available) gearSet.twoPieceBonus.enabled = false;\n      if (!gearSet.fourPieceBonus.available) gearSet.fourPieceBonus.enabled = false;\n    }\n    this.updateConfiguration();\n  }\n\n  /**\n   * Refreshes the gearSets array from the database and sorts them by name.\n   */\n  private async refreshGearSets(): Promise<void> {\n    if (this.refreshingGearsets) return;\n    this.refreshingGearsets = true;\n\n    const gearsets = await this.db.equipableItemSetDefinition.toArray();\n    gearsets.sort((a, b) => {\n      // Sort by name, case-insensitive\n      const nameA = a.displayProperties.name?.toLowerCase() || \"\";\n      const nameB = b.displayProperties.name?.toLowerCase() || \"\";\n      return nameA.localeCompare(nameB);\n    });\n    for (const gearset of gearsets) {\n      if (this.gearSets.some((gs) => gs.hash === gearset.hash)) {\n        // If the gearset is already in the list, skip it\n        continue;\n      }\n\n      const twoPieceBonusInfo =\n        gearset.setPerks.find((perk) => perk.requiredSetCount == 2)?.sandboxPerkHash || 0;\n      const twoPieceBonusData = await this.db.sandboxPerkDefinition\n        .where({ hash: twoPieceBonusInfo })\n        .first();\n\n      const fourPieceBonusInfo =\n        gearset.setPerks.find((perk) => perk.requiredSetCount == 4)?.sandboxPerkHash || 0;\n      const fourPieceBonusData = await this.db.sandboxPerkDefinition\n        .where({ hash: fourPieceBonusInfo })\n        .first();\n\n      const configCount = this.config.readonlyConfigurationSnapshot.armorRequirements.filter(\n        (req) => \"gearSetHash\" in req && req.gearSetHash === gearset.hash\n      ).length;\n\n      const newEntry = {\n        name: gearset.displayProperties.name || \"Unknown Gear Set\",\n        hash: gearset.hash,\n        twoPieceBonus: {\n          perk: twoPieceBonusData,\n          enabled: configCount == 2,\n          available: false,\n        },\n        fourPieceBonus: {\n          perk: fourPieceBonusData,\n          enabled: configCount == 4,\n          available: false,\n        },\n      };\n\n      let insertIndex = this.gearSets.findIndex((gs) => gs.name.localeCompare(newEntry.name) > 0);\n      if (insertIndex === -1) {\n        this.gearSets.push(newEntry);\n      } else {\n        this.gearSets.splice(insertIndex, 0, newEntry);\n      }\n    }\n    this.refreshingGearsets = false;\n  }\n\n  get hasTwoPieceSelected(): boolean {\n    return this.gearSets.some((gearSet) => gearSet.twoPieceBonus.enabled);\n  }\n\n  get selectedTwoPieceCount(): number {\n    return this.gearSets.reduce(\n      (count, gearSet) => count + (gearSet.twoPieceBonus.enabled ? 1 : 0),\n      0\n    );\n  }\n\n  onTwoPieceBonusChange(gearSetIndex: number, enabled?: boolean) {\n    if (this.gearSets[gearSetIndex].twoPieceBonus.available === false) {\n      this.gearSets[gearSetIndex].twoPieceBonus.enabled = false;\n      return;\n    }\n\n    if (enabled === undefined) enabled = !this.gearSets[gearSetIndex].twoPieceBonus.enabled;\n    if (this.selectedTwoPieceCount >= 2 && enabled) {\n      return;\n    }\n    this.gearSets[gearSetIndex].twoPieceBonus.enabled = enabled;\n\n    // If we now have 2 two-piece bonuses selected, disable all 4-piece bonuses\n    if (this.selectedTwoPieceCount > 0) {\n      this.gearSets.forEach((gearSet) => {\n        gearSet.fourPieceBonus.enabled = false;\n      });\n    }\n    this.updateConfiguration();\n  }\n\n  onFourPieceBonusChange(gearSetIndex: number, enabled?: boolean) {\n    if (this.gearSets[gearSetIndex].fourPieceBonus.available === false) {\n      this.gearSets[gearSetIndex].fourPieceBonus.enabled = false;\n      return;\n    }\n\n    if (enabled === undefined) enabled = !this.gearSets[gearSetIndex].fourPieceBonus.enabled;\n\n    this.gearSets[gearSetIndex].fourPieceBonus.enabled = enabled;\n\n    // If enabling a 4-piece bonus, disable all other 4-piece bonuses and all 2-piece bonuses\n    if (enabled) {\n      this.gearSets.forEach((gearSet, gsIndex) => {\n        gearSet.twoPieceBonus.enabled = false;\n        if (gsIndex !== gearSetIndex) gearSet.fourPieceBonus.enabled = false;\n      });\n    }\n    this.updateConfiguration();\n  }\n\n  private updateConfiguration() {\n    this.config.modifyConfiguration((c) => {\n      this.gearSets.forEach((gearSet) => {\n        // remove existing requirements for this gear set\n        c.armorRequirements = c.armorRequirements.filter(\n          (req) => !(\"gearSetHash\" in req && req.gearSetHash === gearSet.hash)\n        );\n\n        let amount = 0;\n        if (gearSet.twoPieceBonus.enabled) {\n          amount = 2;\n        } else if (gearSet.fourPieceBonus.enabled) {\n          amount = 4;\n        }\n        for (let i = 0; i < amount; i++) {\n          c.armorRequirements.unshift({ gearSetHash: gearSet.hash });\n        }\n      });\n\n      let maximumModSlots = 5;\n      if (c.selectedExotics.length > 0 && c.selectedExotics[0] !== FORCE_USE_NO_EXOTIC)\n        maximumModSlots = 4;\n\n      c.armorRequirements = c.armorRequirements.slice(0, maximumModSlots);\n    });\n  }\n\n  isFourPieceDisabled(): boolean {\n    return this.hasTwoPieceSelected;\n  }\n\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n}\n","<div class=\"modslot-visualization-flex\">\n  <div class=\"modslot-visualization-description\">\n    <div class=\"modslot-title\">Mod Slot Configuration</div>\n    <div class=\"modslot-desc\"\n      >Shows your currently selected exotic, gearset, and perk slots. Click a slot to remove it or\n      add a new perk.</div\n    >\n  </div>\n  <div class=\"modslot-row\">\n    <ng-container *ngFor=\"let slot of slots; let i = index\">\n      <div class=\"modslot\" [ngClass]=\"{ blocked: slot.type !== SlotType.SlotTypeEmpty }\">\n        <ng-container [ngSwitch]=\"slot.type\">\n          <ng-container *ngSwitchCase=\"SlotType.SlotTypeExotic\">\n            <app-item-icon [itemHash]=\"slot.hash\" class=\"modslot-icon exotic\"></app-item-icon>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"SlotType.SlotTypeGearset\">\n            <img\n              [src]=\"'https://bungie.net/' + slot.icon\"\n              class=\"modslot-icon gearset\"\n              alt=\"Gearset\"\n              [matTooltip]=\"slot.name || ''\" />\n          </ng-container>\n          <ng-container *ngSwitchCase=\"SlotType.SlotTypePerk\">\n            <div\n              class=\"perk-slot-wrapper\"\n              (mouseenter)=\"hoveredPerkIndex = i\"\n              (mouseleave)=\"hoveredPerkIndex = null\"\n              [matTooltip]=\"getPerkName(slot.hash)\"\n              (click)=\"removePerk(slot)\">\n              <app-item-icon [itemHash]=\"slot.hash\" class=\"modslot-icon perk\"></app-item-icon>\n              <div *ngIf=\"hoveredPerkIndex === i\" class=\"perk-x-overlay\">\n                <span class=\"perk-x\">&#10006;</span>\n              </div>\n            </div>\n          </ng-container>\n          <ng-container *ngSwitchDefault>\n            <img\n              src=\"assets/icons/empty_modslot.png\"\n              class=\"modslot-icon empty\"\n              alt=\"Empty Modslot\" />\n            <ng-container *ngIf=\"slot.type === SlotType.SlotTypeEmpty\">\n              <ng-container *ngIf=\"i === firstEmptySlotIndex\">\n                <button mat-stroked-button [matMenuTriggerFor]=\"perkMenu\" class=\"perk-menu-btn\">\n                  <span style=\"display: flex; align-items: center\">\n                    <mat-icon>add</mat-icon>\n                  </span>\n                </button>\n                <mat-menu #perkMenu=\"matMenu\" class=\"modslot-select-scroll-menu\">\n                  <button\n                    mat-menu-item\n                    *ngFor=\"let perk of availablePerks\"\n                    (click)=\"onPerkSelect(i, perk)\">\n                    <span style=\"display: flex; align-items: center\">\n                      <app-item-icon\n                        [itemHash]=\"perk\"\n                        style=\"width: 24px; height: 24px; margin-right: 8px\"></app-item-icon>\n                      <span>{{ getPerkName(perk) }}</span>\n                    </span>\n                  </button>\n                </mat-menu>\n              </ng-container>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n      </div>\n    </ng-container>\n  </div>\n</div>\n","import { Component, OnInit, OnDestroy } from \"@angular/core\";\nimport {\n  ArmorPerkOrSlot,\n  ArmorPerkSocketHashes,\n  ArmorPerkOrSlotNames,\n} from \"../../../../../data/enum/armor-stat\";\nimport { ConfigurationService } from \"../../../../../services/configuration.service\";\nimport { Subject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { FORCE_USE_NO_EXOTIC } from \"src/app/data/constants\";\nimport { ItemIconServiceService } from \"src/app/services/item-icon-service.service\";\n\nenum SlotType {\n  SlotTypeEmpty,\n  SlotTypeExotic,\n  SlotTypeGearset,\n  SlotTypePerk,\n}\n\nexport interface SlotInformation {\n  type: SlotType;\n  hash: number;\n  icon?: string; // Optional icon URL for the slot, if applicable\n  name?: string; // Optional name for the slot, if applicable\n}\n\n@Component({\n  selector: \"app-modslot-visualization\",\n  templateUrl: \"./modslot-visualization.component.html\",\n  styleUrls: [\"./modslot-visualization.component.scss\"],\n})\nexport class ModslotVisualizationComponent implements OnInit, OnDestroy {\n  hoveredPerkIndex: number | null = null;\n  SlotType = SlotType;\n  slots: SlotInformation[] = [];\n  availablePerks: number[] = [];\n\n  constructor(\n    private configService: ConfigurationService,\n    private itemIconService: ItemIconServiceService\n  ) {}\n\n  // Returns the index of the first empty slot, or -1 if none\n  get firstEmptySlotIndex(): number {\n    return this.slots.findIndex((slot) => slot.type === SlotType.SlotTypeEmpty);\n  }\n\n  ngOnInit() {\n    for (const k in [\n      ArmorPerkOrSlot.SlotArtifice,\n      ArmorPerkOrSlot.PerkOverflowingCorruption,\n      ArmorPerkOrSlot.SlotEidosApprentice,\n      ArmorPerkOrSlot.SlotSalvationsEdge,\n      ArmorPerkOrSlot.SlotCrotasEnd,\n      ArmorPerkOrSlot.SlotRootOfNightmares,\n      ArmorPerkOrSlot.SlotKingsFall,\n      ArmorPerkOrSlot.SlotVowOfTheDisciple,\n      ArmorPerkOrSlot.SlotVaultOfGlass,\n      ArmorPerkOrSlot.SlotDeepStoneCrypt,\n      ArmorPerkOrSlot.SlotGardenOfSalvation,\n      ArmorPerkOrSlot.SlotLastWish,\n      ArmorPerkOrSlot.PerkEchoesOfGlory,\n      ArmorPerkOrSlot.PerkIronBanner,\n      ArmorPerkOrSlot.SlotNightmare,\n    ]) {\n      if (Object.prototype.hasOwnProperty.call(ArmorPerkSocketHashes, k)) {\n        this.availablePerks.push((ArmorPerkSocketHashes as any)[k]);\n      }\n    }\n    this.availablePerks.sort((a, b) => {\n      const nameA = this.getPerkName(a);\n      const nameB = this.getPerkName(b);\n      return nameA.localeCompare(nameB);\n    });\n\n    this.configService.configuration.pipe(takeUntil(this.ngUnsubscribe)).subscribe((config) => {\n      const isExoticSelectionEnabled =\n        config.selectedExotics.length > 0 && config.selectedExotics[0] !== FORCE_USE_NO_EXOTIC;\n      if (config.armorRequirements.length > 4 && isExoticSelectionEnabled) {\n        this.configService.modifyConfiguration((cb) => {\n          // If there are more than 4 armor requirements and an exotic is selected, trim the requirements to 4\n          cb.armorRequirements = cb.armorRequirements.slice(0, 4);\n        });\n        return;\n      }\n\n      const newSlots: SlotInformation[] = [];\n      if (config.selectedExotics && config.selectedExotics.length > 0) {\n        if (config.selectedExotics[0] != FORCE_USE_NO_EXOTIC) {\n          newSlots.push({\n            type: SlotType.SlotTypeExotic,\n            hash: config.selectedExotics[0],\n          });\n        }\n      }\n\n      config.armorRequirements.forEach(async (req) => {\n        if (\"perk\" in req) {\n          newSlots.push({\n            type: SlotType.SlotTypePerk,\n            hash: req.perk,\n          });\n        } else if (\"gearSetHash\" in req) {\n          const enabledAmount = config.armorRequirements.filter(\n            (r) => \"gearSetHash\" in r && r.gearSetHash === req.gearSetHash\n          ).length;\n          const entry: SlotInformation = {\n            type: SlotType.SlotTypeGearset,\n            hash: req.gearSetHash,\n          };\n          newSlots.push(entry);\n\n          const gsData = await this.itemIconService.getGearsetPerkCached(\n            req.gearSetHash,\n            enabledAmount\n          );\n          entry.icon = gsData?.displayProperties.icon;\n          entry.name = gsData?.displayProperties.name;\n        }\n      });\n\n      while (newSlots.length < 5) {\n        newSlots.push({\n          type: SlotType.SlotTypeEmpty,\n          hash: 0, // Placeholder for empty slot\n        });\n      }\n\n      this.slots = newSlots;\n    });\n  }\n\n  onPerkSelect(slotIndex: number, selectedPerk: ArmorPerkOrSlot) {\n    this.configService.modifyConfiguration((cb) => {\n      if (cb.armorRequirements.length < 5) {\n        cb.armorRequirements.push({ perk: selectedPerk });\n      }\n    });\n  }\n\n  removePerk(slot: SlotInformation) {\n    this.hoveredPerkIndex = null;\n    this.configService.modifyConfiguration((cb) => {\n      const index = cb.armorRequirements.findIndex(\n        (req) => \"perk\" in req && req.perk === slot.hash\n      );\n      cb.armorRequirements.splice(index, 1);\n    });\n  }\n\n  getPerkName(hash: number): string {\n    let idx: ArmorPerkOrSlot | undefined = undefined;\n    // Find the key in ArmorPerkSocketHashes whose value matches the hash\n    for (const key in ArmorPerkSocketHashes) {\n      if ((ArmorPerkSocketHashes as any)[key] === hash) {\n        idx = key as any as ArmorPerkOrSlot;\n        break;\n      }\n    }\n    if (idx === undefined) {\n      return \"Unknown\";\n    }\n    if (ArmorPerkOrSlotNames[idx]) {\n      return ArmorPerkOrSlotNames[idx];\n    }\n\n    return \"Unknown\";\n  }\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n}\n","<div class=\"mod-limit-segmented\">\n  <div class=\"segmented-group\">\n    <label>Stat mods to be placed:</label>\n    <mat-button-toggle-group\n      [value]=\"total\"\n      (change)=\"onTotalChange($event.source.value)\"\n      exclusive>\n      <mat-button-toggle *ngFor=\"let n of [0, 1, 2, 3, 4, 5]\" [value]=\"n\">{{\n        n\n      }}</mat-button-toggle>\n    </mat-button-toggle-group>\n  </div>\n  <div class=\"segmented-group\">\n    <label>Maxmimum amount of Major Mods:</label>\n    <mat-button-toggle-group\n      [value]=\"major\"\n      (change)=\"onMajorChange($event.source.value)\"\n      exclusive>\n      <mat-button-toggle *ngFor=\"let n of [0, 1, 2, 3, 4, 5]\" [value]=\"n\" [disabled]=\"n > total\">{{\n        n\n      }}</mat-button-toggle>\n    </mat-button-toggle-group>\n  </div>\n  <div *ngIf=\"major > total\" class=\"error\">Major mods cannot exceed total mods.</div>\n</div>\n","import { Component } from \"@angular/core\";\nimport { ConfigurationService } from \"../../../../../services/configuration.service\";\n\n@Component({\n  selector: \"app-mod-limit-segmented\",\n  templateUrl: \"./mod-limit-segmented.component.html\",\n  styleUrls: [\"./mod-limit-segmented.component.scss\"],\n})\nexport class ModLimitSegmentedComponent {\n  get total() {\n    return this.config.readonlyConfigurationSnapshot.statModLimits.maxMods;\n  }\n  set total(value: number) {\n    value = Math.max(0, Math.min(5, value));\n    this.config.modifyConfiguration((c) => {\n      c.statModLimits.maxMods = value;\n      if (c.statModLimits.maxMajorMods > value) c.statModLimits.maxMajorMods = value;\n    });\n  }\n  get major() {\n    return this.config.readonlyConfigurationSnapshot.statModLimits.maxMajorMods;\n  }\n  set major(value: number) {\n    value = Math.max(0, Math.min(this.total, value));\n    this.config.modifyConfiguration((c) => {\n      c.statModLimits.maxMajorMods = value;\n    });\n  }\n\n  constructor(public config: ConfigurationService) {}\n\n  onTotalChange(value: number) {\n    this.total = value;\n  }\n  onMajorChange(value: number) {\n    this.major = value;\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component } from \"@angular/core\";\n\nimport { ConfigurationService } from \"../../../../services/configuration.service\";\n\n@Component({\n  selector: \"app-desired-mod-selection\",\n  templateUrl: \"./desired-mod-limit-selection.component.html\",\n  styleUrls: [\"./desired-mod-limit-selection.component.scss\"],\n})\nexport class DesiredModLimitSelectionComponent {\n  constructor(public config: ConfigurationService) {}\n\n  // New clear for statModLimits\n  clear() {\n    this.config.modifyConfiguration((c) => {\n      c.statModLimits = { maxMods: 5, maxMajorMods: 5 };\n      c.armorRequirements = [];\n    });\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div class=\"container\">\n  <div class=\"section-spacing\">\n    <!-- Gearset Selection -->\n    <app-gearset-selection></app-gearset-selection>\n  </div>\n  <div class=\"section-spacing\">\n    <!-- Modslot Visualization -->\n    <app-modslot-visualization></app-modslot-visualization>\n  </div>\n  <div class=\"section-spacing\">\n    <!-- Mod Limit Selection -->\n    <app-mod-limit-segmented></app-mod-limit-segmented>\n  </div>\n</div>\n\n<div id=\"clear-container\">\n  <button (click)=\"clear()\" color=\"warn\" mat-stroked-button>Clear the whole selection</button>\n</div>\n<div class=\"minispace\"></div>\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div>\n  <div class=\"tooltip-container\">\n    <table>\n      <tr>\n        <td class=\"perk-icon-col\" rowspan=\"2\">\n          <img\n            *ngIf=\"exoticPerk\"\n            alt=\"{{ exoticPerk.name }}\"\n            class=\"perk-icon\"\n            src=\"https://bungie.net/{{ exoticPerk.icon }}\" />\n        </td>\n        <td class=\"exotic-name\">{{ armor?.name }}</td>\n      </tr>\n      <tr *ngIf=\"!exoticPerk && !exoticPerkNotThere\">\n        <td>Loading exotic perk..</td>\n      </tr>\n      <tr *ngIf=\"!exoticPerk && exoticPerkNotThere\">\n        <td>No (fixed) exotic perk available.</td>\n      </tr>\n      <tr *ngIf=\"exoticPerk\">\n        <td>\n          <span>{{ exoticPerk.name }}</span>\n        </td>\n      </tr>\n      <tr *ngIf=\"exoticPerk\">\n        <td colspan=\"2\">\n          {{ exoticPerk.description }}\n        </td>\n      </tr>\n\n      <tr *ngIf=\"collection || vendor\" class=\"collection-roll-info\">\n        <td colspan=\"2\">\n          This exotic is not in your inventory but it is\n          <ng-container *ngIf=\"collection\">\n            in your collection\n            <ng-container *ngIf=\"vendor\"> and </ng-container>\n          </ng-container>\n          <ng-container *ngIf=\"vendor\">available at a vendor</ng-container>. You can still generate\n          a loadout with this exotic, but you will have to grab it by yourself.\n        </td>\n      </tr>\n    </table>\n  </div>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, Input, OnInit } from \"@angular/core\";\nimport { IManifestArmor } from \"../../../../data/types/IManifestArmor\";\nimport { InventoryService } from \"../../../../services/inventory.service\";\nimport { ItemIconServiceService } from \"../../../../services/item-icon-service.service\";\n\n@Component({\n  selector: \"app-exotic-perk-tooltip\",\n  templateUrl: \"./exotic-perk-tooltip.component.html\",\n  styleUrls: [\"./exotic-perk-tooltip.component.css\"],\n})\nexport class ExoticPerkTooltipComponent implements OnInit {\n  @Input() armor: IManifestArmor | undefined;\n  @Input() vendor: boolean = false;\n  @Input() collection: boolean = false;\n\n  exoticPerk: IManifestArmor | undefined;\n  exoticPerkNotThere: boolean = false;\n\n  constructor(\n    public inv: InventoryService,\n    public iconService: ItemIconServiceService\n  ) {}\n\n  async ngOnInit() {\n    const perk = (this.armor?.exoticPerkHash ?? [])[0];\n    this.exoticPerk = !!perk ? await this.iconService.getItemCached(perk) : undefined;\n    this.exoticPerkNotThere = this.exoticPerk === undefined;\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {\n  Directive,\n  Input,\n  TemplateRef,\n  ElementRef,\n  OnInit,\n  HostListener,\n  ComponentRef,\n  OnDestroy,\n} from \"@angular/core\";\nimport { Overlay, OverlayPositionBuilder, OverlayRef } from \"@angular/cdk/overlay\";\nimport { ComponentPortal } from \"@angular/cdk/portal\";\nimport { ExoticPerkTooltipComponent } from \"./exotic-perk-tooltip.component\";\nimport { IManifestArmor } from \"../../../../data/types/IManifestArmor\";\n\n@Directive({\n  selector: \"[exoticTooltip]\",\n})\nexport class ExoticTooltipDirective implements OnInit, OnDestroy {\n  /**\n   * This will be used to show tooltip or not\n   * This can be used to show the tooltip conditionally\n   */\n  @Input() showToolTip: boolean = true;\n\n  //If this is specified then specified text will be show in in the tooltip\n  @Input() exoticTooltip: IManifestArmor | undefined;\n\n  @Input() exoticTooltipInVendor: boolean = false;\n\n  @Input() exoticTooltipInCollection: boolean = false;\n\n  //If this is specified then specified template will be rendered in the tooltip\n  @Input() contentTemplate: TemplateRef<any> | undefined;\n\n  private _overlayRef: OverlayRef | undefined;\n\n  constructor(\n    private _overlay: Overlay,\n    private _overlayPositionBuilder: OverlayPositionBuilder,\n    private _elementRef: ElementRef\n  ) {}\n\n  /**\n   * Init life cycle event handler\n   */\n  ngOnInit() {\n    if (!this.showToolTip) {\n      return;\n    }\n\n    const positionStrategy = this._overlayPositionBuilder\n      .flexibleConnectedTo(this._elementRef)\n      .withPositions([\n        {\n          originX: \"center\",\n          originY: \"bottom\",\n          overlayX: \"center\",\n          overlayY: \"top\",\n          offsetY: 5,\n        },\n        {\n          originX: \"center\",\n          originY: \"top\",\n          overlayX: \"center\",\n          overlayY: \"bottom\",\n          offsetY: -5,\n        },\n      ]);\n\n    this._overlayRef = this._overlay.create({ positionStrategy });\n    this._overlayRef.addPanelClass(\"overlay-no-pointer-event\");\n  }\n\n  /**\n   * This method will be called whenever mouse enters in the Host element\n   * i.e. where this directive is applied\n   * This method will show the tooltip by instantiating the McToolTipComponent and attaching to the overlay\n   */\n  @HostListener(\"mouseenter\")\n  show() {\n    //attach the component if it has not already attached to the overlay\n    if (this._overlayRef && !this._overlayRef.hasAttached()) {\n      const tooltipRef: ComponentRef<ExoticPerkTooltipComponent> = this._overlayRef.attach(\n        new ComponentPortal(ExoticPerkTooltipComponent)\n      );\n      tooltipRef.instance.collection = this.exoticTooltipInCollection;\n      tooltipRef.instance.vendor = this.exoticTooltipInVendor;\n      tooltipRef.instance.armor = this.exoticTooltip;\n    }\n  }\n\n  /**\n   * This method will be called when mouse goes out of the host element\n   * i.e. where this directive is applied\n   * This method will close the tooltip by detaching the overlay from the view\n   */\n  @HostListener(\"mouseleave\")\n  hide() {\n    this.closeToolTip();\n  }\n\n  /**\n   * Destroy lifecycle event handler\n   * This method will make sure to close the tooltip\n   * It will be needed in case when app is navigating to different page\n   * and user is still seeing the tooltip; In that case we do not want to hang around the\n   * tooltip after the page [on which tooltip visible] is destroyed\n   */\n  ngOnDestroy() {\n    this.closeToolTip();\n  }\n\n  /**\n   * This method will close the tooltip by detaching the component from the overlay\n   */\n  private closeToolTip() {\n    if (this._overlayRef) {\n      this._overlayRef.detach();\n    }\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n<div *ngFor=\"let itemGroup of exotics; let i = index\" [@listAnimation]=\"itemGroup.length\">\n  <img\n    class=\"exoticIcon {{ selectedExotics.indexOf(-2) > -1 ? 'selected' : '' }}\"\n    *ngIf=\"i === 0\"\n    src=\"assets/icons/exotic_helmet.jpg\"\n    matTooltip=\"Force to use ANY exotic (that is NOT a class item)\"\n    #tooltip=\"matTooltip\"\n    (click)=\"selectExotic([-2], $event)\" />\n  <img\n    class=\"exoticIcon {{ selectedExotics.indexOf(-1) > -1 ? 'selected' : '' }}\"\n    *ngIf=\"i === 0\"\n    src=\"assets/icons/empty_modslot.png\"\n    matTooltip=\"Force to use NO exotic at all\"\n    #tooltip=\"matTooltip\"\n    (click)=\"selectExotic([-1], $event)\" />\n  <span class=\"container\" *ngFor=\"let exotic of itemGroup\">\n    <app-item-icon\n      [itemHash]=\"exotic.items[0].hash\"\n      [ngClass]=\"{\n        exoticIcon: true,\n        selected: selectedExotics.indexOf(exotic.items[0].hash) > -1,\n        'vendor-item': !exotic.inInventory && includeVendorRolls && exotic.inVendor,\n        'collection-item': !exotic.inInventory && includeCollectionRolls && exotic.inCollection,\n        disabled: !(\n          exotic.inInventory ||\n          (includeCollectionRolls && exotic.inCollection) ||\n          (includeVendorRolls && exotic.inVendor)\n        ),\n      }\"\n      [exoticTooltip]=\"exotic.items[0]\"\n      [exoticTooltipInVendor]=\"!exotic.inInventory && includeVendorRolls && exotic.inVendor\"\n      [exoticTooltipInCollection]=\"\n        !exotic.inInventory && includeCollectionRolls && exotic.inCollection\n      \"\n      (click)=\"\n        (exotic.inInventory || (includeCollectionRolls && exotic.inCollection)) &&\n          selectExotic(getHashesForExotic(exotic), $event)\n      \"></app-item-icon>\n    <div\n      class=\"item-source-overlay\"\n      *ngIf=\"!exotic.inInventory\"\n      [class.vendor-item]=\"includeVendorRolls && exotic.inVendor\"\n      [class.collection-item]=\"includeCollectionRolls && exotic.inCollection\"></div>\n  </span>\n</div>\n\n<!-- Exotic Class Item Perk Selection -->\n<div *ngIf=\"hasSelectedExoticClassItem()\" class=\"exotic-class-item-perks\">\n  <h4>Exotic Class Item Perks</h4>\n  <div class=\"perk-selectors\">\n    <mat-form-field appearance=\"outline\">\n      <mat-label>First Perk</mat-label>\n      <mat-select\n        [value]=\"selectedExoticPerks[0]\"\n        (selectionChange)=\"setExoticPerk(0, $event.value)\">\n        <mat-option [value]=\"anyPerkValue\">Any</mat-option>\n        <mat-option *ngFor=\"let perk of availableFirstPerks\" [value]=\"perk.value\">\n          {{ perk.name }}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n\n    <mat-form-field appearance=\"outline\">\n      <mat-label>Second Perk</mat-label>\n      <mat-select\n        [value]=\"selectedExoticPerks[1]\"\n        (selectionChange)=\"setExoticPerk(1, $event.value)\">\n        <mat-option [value]=\"anyPerkValue\">Any</mat-option>\n        <mat-option *ngFor=\"let perk of availableSecondPerks\" [value]=\"perk.value\">\n          {{ perk.name }}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n  </div>\n</div>\n\n<div>\n  <button\n    *ngIf=\"exotics.length === 0 || exotics[0].length === 0\"\n    mat-raised-button\n    color=\"warn\"\n    (click)=\"refreshAll()\">\n    Manually refresh manifest and inventory\n  </button>\n</div>\n\n<div>\n  <button\n    mat-raised-button\n    color=\"primary\"\n    [disabled]=\"importEquippedExoticInProgress\"\n    (click)=\"importEquippedExotic()\">\n    Import Equipped Exotic\n  </button>\n  <mat-spinner\n    *ngIf=\"importEquippedExoticInProgress\"\n    diameter=\"20\"\n    class=\"inline-spinner\"></mat-spinner>\n</div>\n<br />\n<div>\n  <mat-slide-toggle\n    color=\"warn\"\n    [checked]=\"enforceFeaturedLegendaryArmor\"\n    (change)=\"setEnforceFeaturedLegendaryArmor($event.checked)\">\n    Enforce featured <span class=\"legendary-label\">legendary</span> armor only\n  </mat-slide-toggle>\n</div>\n\n<div>\n  <mat-slide-toggle\n    color=\"warn\"\n    [checked]=\"enforceFeaturedExoticArmor\"\n    (change)=\"setEnforceFeaturedExoticArmor($event.checked)\">\n    Enforce featured <span class=\"exotic-label\">exotic</span> armor only\n  </mat-slide-toggle>\n</div>\n\n<div class=\"minispace\"></div>\n\n<div>\n  <mat-slide-toggle\n    color=\"primary\"\n    [checked]=\"includeCollectionRolls\"\n    (change)=\"setAllowCollectionRolls($event.checked)\">\n    Include <u>exotic</u> collection rolls\n  </mat-slide-toggle>\n</div>\n<div>\n  <mat-slide-toggle\n    color=\"primary\"\n    [checked]=\"includeVendorRolls\"\n    (change)=\"setAllowVendorItems($event.checked)\">\n    Include <u>legendary and exotic</u> vendor armor (slower)\n  </mat-slide-toggle>\n</div>\n\n<div class=\"minispace\"></div>\n<div>\n  <mat-slide-toggle\n    color=\"primary\"\n    [checked]=\"allowLegacyLegendaryArmor\"\n    (change)=\"setAllowLegacyLegendaryArmor($event.checked)\">\n    Include legacy (Armor 2.0) <span class=\"legendary-label\">legendary</span> armor\n  </mat-slide-toggle>\n</div>\n<div>\n  <mat-slide-toggle\n    color=\"primary\"\n    [checked]=\"allowLegacyExoticArmor\"\n    (change)=\"setAllowLegacyExoticArmor($event.checked)\">\n    Include legacy (Armor 2.0) <span class=\"exotic-label\">exotic</span> armor\n  </mat-slide-toggle>\n</div>\n<div>\n  <mat-slide-toggle\n    color=\"primary\"\n    [checked]=\"allowBlueArmorPieces\"\n    (change)=\"setAllowBlueArmorPieces($event.checked)\">\n    Include white, blue and green items\n  </mat-slide-toggle>\n</div>\n<div>\n  <mat-slide-toggle\n    color=\"primary\"\n    [checked]=\"!ignoreSunsetArmor\"\n    (change)=\"setIgnoreSunsetArmor(!$event.checked)\">\n    Include sunset armor\n  </mat-slide-toggle>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { ClassExoticInfo, InventoryService } from \"../../../../services/inventory.service\";\nimport { ConfigurationService } from \"../../../../services/configuration.service\";\nimport { BungieApiService } from \"../../../../services/bungie-api.service\";\nimport { animate, query, stagger, style, transition, trigger } from \"@angular/animations\";\nimport { ArmorSlot } from \"../../../../data/enum/armor-slot\";\nimport { FORCE_USE_NO_EXOTIC } from \"../../../../data/constants\";\nimport { debounceTime, takeUntil } from \"rxjs/operators\";\nimport { Subject } from \"rxjs\";\nimport { DestinyClass } from \"bungie-api-ts/destiny2\";\nimport { ArmorPerkOrSlot } from \"../../../../data/enum/armor-stat\";\nimport {\n  ExoticClassItemPerkNames,\n  ExoticClassItemSpirits,\n} from \"../../../../data/exotic-class-item-spirits\";\n\nexport const listAnimation = trigger(\"listAnimation\", [\n  transition(\"* <=> *\", [\n    query(\n      \":enter\",\n      [style({ opacity: 0 }), stagger(\"30ms\", animate(\"350ms ease-out\", style({ opacity: 1 })))],\n      { optional: true }\n    ),\n  ]),\n]);\n\n@Component({\n  selector: \"app-desired-exotic-selection\",\n  templateUrl: \"./desired-exotic-selection.component.html\",\n  styleUrls: [\"./desired-exotic-selection.component.scss\"],\n  animations: [listAnimation],\n})\nexport class DesiredExoticSelectionComponent implements OnInit, OnDestroy {\n  selectedExotics: number[] = [];\n  selectedExoticPerks: ArmorPerkOrSlot[] = [ArmorPerkOrSlot.Any, ArmorPerkOrSlot.Any];\n  includeCollectionRolls = false;\n  includeVendorRolls = false;\n  ignoreSunsetArmor = false;\n  allowBlueArmorPieces = false;\n  allowLegacyLegendaryArmor = false;\n  allowLegacyExoticArmor: boolean = false;\n  enforceFeaturedLegendaryArmor = false;\n  enforceFeaturedExoticArmor: boolean = false;\n  currentClass: DestinyClass = DestinyClass.Unknown;\n  exotics: ClassExoticInfo[][] = [];\n  importEquippedExoticInProgress = false;\n\n  anyPerkValue = ArmorPerkOrSlot.Any;\n  availableFirstPerks: { name: string; value: ArmorPerkOrSlot }[] = [];\n  availableSecondPerks: { name: string; value: ArmorPerkOrSlot }[] = [];\n\n  constructor(\n    public inventory: InventoryService,\n    public config: ConfigurationService,\n    private bungieApi: BungieApiService\n  ) {}\n\n  ngOnInit(): void {\n    this.config.configuration.pipe(takeUntil(this.ngUnsubscribe)).subscribe(async (c) => {\n      if (c.characterClass != this.currentClass || this.exotics.length == 0) {\n        this.currentClass = c.characterClass;\n        await this.updateExoticsForClass();\n      }\n      this.includeCollectionRolls = c.includeCollectionRolls;\n      this.includeVendorRolls = c.includeVendorRolls;\n      this.selectedExotics = c.selectedExotics;\n      this.selectedExoticPerks = c.selectedExoticPerks;\n      this.ignoreSunsetArmor = c.ignoreSunsetArmor;\n      this.allowBlueArmorPieces = c.allowBlueArmorPieces;\n      this.allowLegacyLegendaryArmor = c.allowLegacyLegendaryArmor;\n      this.allowLegacyExoticArmor = c.allowLegacyExoticArmor;\n      this.enforceFeaturedLegendaryArmor = c.enforceFeaturedLegendaryArmor;\n      this.enforceFeaturedExoticArmor = c.enforceFeaturedExoticArmor;\n    });\n\n    this.inventory.manifest\n      .pipe(debounceTime(10), takeUntil(this.ngUnsubscribe))\n      .subscribe(async () => {\n        await this.updateExoticsForClass();\n      });\n    this.inventory.inventory\n      .pipe(debounceTime(10), takeUntil(this.ngUnsubscribe))\n      .subscribe(async () => {\n        await this.updateExoticsForClass();\n      });\n  }\n\n  private async updateExoticsForClass() {\n    const armors = await this.inventory.getExoticsForClass(this.currentClass);\n\n    this.exotics = [\n      armors.filter((a) => a.items[0].slot == ArmorSlot.ArmorSlotHelmet),\n      armors.filter((a) => a.items[0].slot == ArmorSlot.ArmorSlotGauntlet),\n      armors.filter((a) => a.items[0].slot == ArmorSlot.ArmorSlotChest),\n      armors.filter((a) => a.items[0].slot == ArmorSlot.ArmorSlotLegs),\n      armors.filter((a) => a.items[0].slot == ArmorSlot.ArmorSlotClass),\n    ];\n\n    // Update available exotic class item perks\n    this.updateAvailableExoticClassItemPerks();\n  }\n\n  private updateAvailableExoticClassItemPerks() {\n    const classItemExotics = this.exotics[4]; // Class items are at index 4\n    const firstPerks = new Set<number>();\n    const secondPerks = new Set<number>();\n\n    // Collect first and second perks separately from exotic class items\n    classItemExotics.forEach((exotic) => {\n      exotic.instances.forEach((item) => {\n        // Exotic class items have exactly two perks in exoticPerkHash array\n        if (item.exoticPerkHash && item.exoticPerkHash.length >= 2) {\n          // Add first perk (left dropdown)\n          firstPerks.add(item.exoticPerkHash[0]);\n          // Add second perk (right dropdown)\n          secondPerks.add(item.exoticPerkHash[1]);\n        }\n      });\n    });\n\n    // Convert first perk hashes to display format\n    this.availableFirstPerks = Array.from(firstPerks)\n      .map((perkHash) => ({\n        name:\n          ExoticClassItemPerkNames[perkHash as ExoticClassItemSpirits] ||\n          `Unknown Perk ${perkHash}`,\n        value: perkHash as ArmorPerkOrSlot,\n      }))\n      .sort((a, b) => a.name.localeCompare(b.name));\n\n    // Convert second perk hashes to display format\n    this.availableSecondPerks = Array.from(secondPerks)\n      .map((perkHash) => ({\n        name:\n          ExoticClassItemPerkNames[perkHash as ExoticClassItemSpirits] ||\n          `Unknown Perk ${perkHash}`,\n        value: perkHash as ArmorPerkOrSlot,\n      }))\n      .sort((a, b) => a.name.localeCompare(b.name));\n\n    console.debug(\"Available first perks:\", this.availableFirstPerks);\n    console.debug(\"Available second perks:\", this.availableSecondPerks);\n  }\n\n  hasSelectedExoticClassItem(): boolean {\n    const classItemExotics = this.exotics[4] || [];\n    return classItemExotics.some((exotic) =>\n      exotic.items.some((item) => this.selectedExotics.includes(item.hash))\n    );\n  }\n\n  setExoticPerk(index: number, perk: ArmorPerkOrSlot) {\n    this.config.modifyConfiguration((c) => {\n      c.selectedExoticPerks[index] = perk;\n    });\n  }\n\n  setAllowCollectionRolls(allow: boolean) {\n    this.config.modifyConfiguration((c) => {\n      c.includeCollectionRolls = allow;\n    });\n  }\n\n  setAllowVendorItems(allow: boolean) {\n    this.config.modifyConfiguration((c) => {\n      c.includeVendorRolls = allow;\n    });\n  }\n\n  setAllowBlueArmorPieces(allow: boolean) {\n    this.config.modifyConfiguration((c) => {\n      c.allowBlueArmorPieces = allow;\n    });\n  }\n\n  setAllowLegacyLegendaryArmor(allow: boolean) {\n    this.config.modifyConfiguration((c) => {\n      c.allowLegacyLegendaryArmor = allow;\n    });\n  }\n\n  setAllowLegacyExoticArmor(allow: boolean) {\n    this.config.modifyConfiguration((c) => {\n      c.allowLegacyExoticArmor = allow;\n    });\n  }\n\n  setIgnoreSunsetArmor(ignore: boolean) {\n    this.config.modifyConfiguration((c) => {\n      c.ignoreSunsetArmor = ignore;\n    });\n  }\n\n  setEnforceFeaturedLegendaryArmor(enforce: boolean) {\n    this.config.modifyConfiguration((c) => {\n      c.enforceFeaturedLegendaryArmor = enforce;\n    });\n  }\n\n  setEnforceFeaturedExoticArmor(enforce: boolean) {\n    this.config.modifyConfiguration((c) => {\n      c.enforceFeaturedExoticArmor = enforce;\n    });\n  }\n\n  getHashesForExotic(exotic: ClassExoticInfo): number[] {\n    if (exotic.items.length == 0) return [];\n    if (exotic.items[0].hash == FORCE_USE_NO_EXOTIC) return [FORCE_USE_NO_EXOTIC];\n    return exotic.items.map((x) => x.hash);\n  }\n\n  selectExotic(hashes: number[], $event: any) {\n    const anyHashSelected = hashes.some((hash) => this.selectedExotics.indexOf(hash) > -1);\n    if (anyHashSelected) {\n      // remove all of them\n      this.selectedExotics = this.selectedExotics.filter((x) => hashes.indexOf(x) == -1);\n    } else if (hashes.length > 0 && hashes[0] == FORCE_USE_NO_EXOTIC) {\n      // Otherwise, add the hashes to the selection\n      this.selectedExotics = hashes;\n    } else {\n      this.selectedExotics = hashes;\n    }\n    this.config.modifyConfiguration((c) => {\n      c.selectedExotics = this.selectedExotics;\n\n      // Reset exotic perks to Any when no exotic class item is selected\n      if (!this.hasSelectedExoticClassItem()) {\n        c.selectedExoticPerks = [ArmorPerkOrSlot.Any, ArmorPerkOrSlot.Any];\n        this.selectedExoticPerks = [ArmorPerkOrSlot.Any, ArmorPerkOrSlot.Any];\n      }\n    });\n  }\n\n  async refreshAll() {\n    await this.inventory.refreshAll(true, true);\n  }\n\n  async importEquippedExotic() {\n    this.importEquippedExoticInProgress = true;\n    try {\n      await this.bungieApi.importCurrentlyEquippedExotic();\n    } catch (error) {\n      console.error(\"Error importing equipped exotic:\", error);\n    } finally {\n      this.importEquippedExoticInProgress = false;\n    }\n  }\n\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Injectable } from \"@angular/core\";\nimport { AuthService } from \"./auth.service\";\nimport { InventoryService } from \"./inventory.service\";\nimport { DestinyClass } from \"bungie-api-ts/destiny2/interfaces\";\nimport { MembershipService } from \"./membership.service\";\nimport { ConfigurationService } from \"./configuration.service\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class UserdataService {\n  public characters:\n    | any[]\n    | { emblemUrl: string; characterId: string; clazz: DestinyClass; lastPlayed: number }[] = [];\n\n  constructor(\n    private auth: AuthService,\n    private config: ConfigurationService,\n    private membership: MembershipService,\n    private inventory: InventoryService\n  ) {\n    this.loadCachedData();\n\n    this.auth.logoutEvent.subscribe((k) => this.clearCachedData());\n\n    this.inventory.inventory.subscribe(async () => {\n      await this.updateCharacterData();\n    });\n  }\n\n  public clearCachedData() {\n    this.characters = [];\n    localStorage.removeItem(\"cachedCharacters\");\n  }\n\n  private loadCachedData() {\n    let item = localStorage.getItem(\"cachedCharacters\") || \"[]\";\n    this.characters = JSON.parse(item);\n  }\n\n  private async updateCharacterData() {\n    this.characters = await this.membership.getCharacters();\n    this.config.modifyConfiguration((d) => {\n      if (d.characterClass == DestinyClass.Unknown) d.characterClass = this.characters[0].clazz;\n    });\n    localStorage.setItem(\"cachedCharacters\", JSON.stringify(this.characters));\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div class=\"character-container\">\n  <div *ngIf=\"userdata.characters.length === 0\" class=\"character-entry\"> Loading characters.. </div>\n  <div\n    (click)=\"selectClass(char.clazz)\"\n    *ngFor=\"let char of userdata.characters; let idx = index\"\n    [class.selected]=\"selectedClass === char.clazz\"\n    [style.background-image]=\"'url(https://bungie.net/' + char.emblemUrl + ')'\"\n    class=\"character-entry\"\n    style=\"float: left\">\n    <div class=\"class-text\">\n      <span *ngIf=\"char.clazz === 0\">Titan</span>\n      <span *ngIf=\"char.clazz === 1\">Hunter</span>\n      <span *ngIf=\"char.clazz === 2\">Warlock</span>\n    </div>\n    <div *ngIf=\"!!itemCounts[idx]\">\n      <img\n        class=\"head-icon\"\n        matTooltip=\"Amount of armor pieces for this class.\"\n        src=\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 51 51'%3e%3cpath d='M24.77 7.03c-8.15.38-14.42 7.41-14.42 15.57v16.06c0 .23.13.44.34.53l10.33 4.68c.78.35 1.66-.22 1.66-1.07V31.9c0-.39-.19-.75-.52-.97l-5.39-3.64c-.87-.52-1.43-1.5-1.34-2.61.13-1.46 1.46-2.52 2.93-2.52h4.36c.65 0 1.17.53 1.17 1.17v6.71s0 .61 1.61.61 1.61-.61 1.61-.61v-6.71c0-.65.52-1.17 1.17-1.17h4.36c1.47 0 2.8 1.06 2.93 2.52.1 1.11-.47 2.09-1.34 2.61l-5.39 3.64c-.32.22-.52.58-.52.97v10.91c0 .85.88 1.42 1.66 1.07l10.33-4.68c.21-.1.34-.3.34-.53v-16.5c.01-8.61-7.18-15.55-15.88-15.14z'/%3e%3c/svg%3e\" />\n      <span class=\"armor-text\" matTooltip=\"Amount of armor pieces for this class.\"\n        >×{{ itemCounts[char.clazz] }}</span\n      >\n    </div>\n  </div>\n</div>\n\n<div *ngIf=\"storedMaterials !== null\">\n  <span class=\"material-listing\" matTooltip=\"Exotic Cipher: {{ storedMaterials['3467984096'] }}\">\n    <img\n      src=\"https://www.bungie.net/common/destiny2_content/icons/9970631fe1052642c268132dfc30e16b.jpg\"\n      alt=\"Exotic Cipher\" />\n    {{ storedMaterials[\"3467984096\"] | number: \"1.0-0\" }}\n  </span>\n  <span class=\"material-listing\" matTooltip=\"Ascendant Shards: {{ storedMaterials['4257549985'] }}\">\n    <img\n      src=\"https://www.bungie.net/common/destiny2_content/icons/0271d214fc3ec91b3def799a4b286b46.jpg\"\n      alt=\"Ascendant Shard\" />\n    {{ storedMaterials[\"4257549985\"] | number: \"1.0-0\" }}\n  </span>\n  <span\n    class=\"material-listing\"\n    matTooltip=\"Enhancement Prisms: {{ storedMaterials['4257549984'] }}\">\n    <img\n      src=\"https://www.bungie.net/common/destiny2_content/icons/dea2a35badf7466d4c2c2697ce6e8d87.jpg\"\n      alt=\"Enhancement Prism\" />\n    {{ storedMaterials[\"4257549984\"] | number: \"1.0-0\" }}\n  </span>\n  <span\n    class=\"material-listing\"\n    matTooltip=\"Enhancement Cores: {{ storedMaterials['3853748946'] }}\">\n    <img\n      src=\"https://www.bungie.net/common/destiny2_content/icons/0a4eb695ed55b4e720ddc401460cc0f9.jpg\"\n      alt=\"Enhancement Core\" />\n    {{ storedMaterials[\"3853748946\"] | number: \"1.0-0\" }}\n  </span>\n  <span class=\"material-listing\" matTooltip=\"Glimmer: {{ storedMaterials['3159615086'] }}\">\n    <img\n      src=\"https://www.bungie.net/common/destiny2_content/icons/88993eaeedad32f42072df6f77f47311.png\"\n      alt=\"Glimmer\" />\n    {{ storedMaterials[\"3159615086\"] | number: \"1.0-0\" }}\n  </span>\n</div>\n\n<a color=\"primary\" class=\"hide-gt-xs\" mat-flat-button routerLink=\"/help\" style=\"margin-left: 15px\">\n  <mat-icon>help</mat-icon>\n  Help and Information about D2ArmorPicker\n</a>\n\n<div>\n  If you like my work, you can\n  <a\n    color=\"accent\"\n    href=\"https://ko-fi.com/mijago\"\n    matTooltip=\"You like my work? This leads you to ko-fi.com, where you can easily support me!\"\n    target=\"_blank\">\n    support me here.</a\n  >\n  You can also\n  <a color=\"accent\" href=\"http://discord.d2armorpicker.com\" target=\"_blank\">\n    join my dev Discord!\n  </a>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { Subject } from \"rxjs\";\nimport { ConfigurationService } from \"../../../../services/configuration.service\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { UserdataService } from \"../../../../services/userdata.service\";\nimport { InventoryService } from \"../../../../services/inventory.service\";\n\n@Component({\n  selector: \"app-desired-class-selection\",\n  templateUrl: \"./desired-class-selection.component.html\",\n  styleUrls: [\"./desired-class-selection.component.scss\"],\n})\nexport class DesiredClassSelectionComponent implements OnInit, OnDestroy {\n  itemCounts: (null | number)[] = [null, null, null];\n  selectedClass = -1;\n  public storedMaterials: {\n    \"3853748946\": number;\n    \"4257549985\": number;\n    \"4257549984\": number;\n    \"3159615086\": number;\n    \"3467984096\": number;\n  } | null = null;\n\n  constructor(\n    public config: ConfigurationService,\n    public userdata: UserdataService,\n    public inv: InventoryService\n  ) {}\n\n  ngOnInit(): void {\n    this.config.configuration.pipe(takeUntil(this.ngUnsubscribe)).subscribe((c) => {\n      this.selectedClass = c.characterClass;\n\n      // find valid\n      const classAvailable =\n        this.userdata.characters.findIndex((chr) => chr.clazz == c.characterClass) != -1;\n      if (this.userdata.characters.length > 0 && !classAvailable) {\n        this.config.modifyConfiguration((d) => {\n          d.characterClass = this.userdata.characters[0].clazz;\n          d.selectedExotics = [];\n        });\n      }\n    });\n    this.inv.inventory.pipe(takeUntil(this.ngUnsubscribe)).subscribe(async (k) => {\n      await this.loadStoredMaterials();\n      await this.updateItemCount();\n    });\n  }\n\n  selectClass(clazz: number) {\n    if (this.config.readonlyConfigurationSnapshot.characterClass == clazz) return;\n\n    this.config.modifyConfiguration((d) => {\n      d.characterClass = clazz;\n      d.selectedExotics = [];\n    });\n  }\n\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n\n  private async updateItemCount() {\n    for (let n = 0; n < 3; n++) this.itemCounts[n] = await this.inv.getItemCountForClass(n);\n  }\n\n  private async loadStoredMaterials() {\n    var k: {\n      \"3853748946\": number;\n      \"4257549985\": number;\n      \"4257549984\": number;\n      \"3159615086\": number;\n      \"3467984096\": number;\n    } = JSON.parse(localStorage.getItem(\"stored-materials\") || \"{}\");\n\n    this.storedMaterials = {\n      \"3853748946\": k[\"3853748946\"] ?? 0,\n      \"4257549985\": k[\"4257549985\"] ?? 0,\n      \"4257549984\": k[\"4257549984\"] ?? 0,\n      \"3159615086\": k[\"3159615086\"] ?? 0,\n      \"3467984096\": k[\"3467984096\"] ?? 0,\n    };\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, Input } from \"@angular/core\";\nimport { Modifier } from \"../../../../data/modifier\";\n\n@Component({\n  selector: \"app-mod-description-tooltip\",\n  templateUrl: \"./mod-description-tooltip.component.html\",\n  styleUrls: [\"./mod-description-tooltip.component.css\"],\n})\nexport class ModDescriptionTooltipComponent {\n  @Input() mod: Modifier | undefined;\n\n  constructor() {}\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div>\n  <div class=\"tooltip-container\">\n    <table>\n      <tr>\n        <td class=\"exotic-name\">{{ mod?.name }}</td>\n      </tr>\n      <tr>\n        <td>{{ mod?.description }}</td>\n      </tr>\n    </table>\n  </div>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {\n  Directive,\n  Input,\n  ElementRef,\n  OnInit,\n  HostListener,\n  ComponentRef,\n  OnDestroy,\n} from \"@angular/core\";\nimport { Overlay, OverlayPositionBuilder, OverlayRef } from \"@angular/cdk/overlay\";\nimport { ComponentPortal } from \"@angular/cdk/portal\";\nimport { Modifier } from \"../../../../data/modifier\";\nimport { ModDescriptionTooltipComponent } from \"./mod-description-tooltip.component\";\n\n@Directive({\n  selector: \"[modTooltip]\",\n})\nexport class ModTooltipDirective implements OnInit, OnDestroy {\n  //If this is specified then specified text will be show in in the tooltip\n  @Input(`modTooltip`) mod: Modifier | undefined;\n\n  private _overlayRef: OverlayRef | undefined;\n\n  constructor(\n    private _overlay: Overlay,\n    private _overlayPositionBuilder: OverlayPositionBuilder,\n    private _elementRef: ElementRef\n  ) {}\n\n  /**\n   * Init life cycle event handler\n   */\n  ngOnInit() {\n    const positionStrategy = this._overlayPositionBuilder\n      .flexibleConnectedTo(this._elementRef)\n      .withPositions([\n        {\n          originX: \"center\",\n          originY: \"bottom\",\n          overlayX: \"center\",\n          overlayY: \"top\",\n          offsetY: 5,\n        },\n        {\n          originX: \"center\",\n          originY: \"top\",\n          overlayX: \"center\",\n          overlayY: \"bottom\",\n          offsetY: -5,\n        },\n      ]);\n\n    this._overlayRef = this._overlay.create({ positionStrategy });\n    this._overlayRef.addPanelClass(\"overlay-no-pointer-event\");\n  }\n\n  /**\n   * This method will be called whenever mouse enters in the Host element\n   * i.e. where this directive is applied\n   * This method will show the tooltip by instantiating the McToolTipComponent and attaching to the overlay\n   */\n  @HostListener(\"mouseenter\")\n  show() {\n    //attach the component if it has not already attached to the overlay\n    if (this._overlayRef && !this._overlayRef.hasAttached()) {\n      const tooltipRef: ComponentRef<ModDescriptionTooltipComponent> = this._overlayRef.attach(\n        new ComponentPortal(ModDescriptionTooltipComponent)\n      );\n      tooltipRef.instance.mod = this.mod;\n    }\n  }\n\n  /**\n   * This method will be called when mouse goes out of the host element\n   * i.e. where this directive is applied\n   * This method will close the tooltip by detaching the overlay from the view\n   */\n  @HostListener(\"mouseleave\")\n  hide() {\n    this.closeToolTip();\n  }\n\n  /**\n   * Destroy lifecycle event handler\n   * This method will make sure to close the tooltip\n   * It will be needed in case when app is navigating to different page\n   * and user is still seeing the tooltip; In that case we do not want to hang around the\n   * tooltip after the page [on which tooltip visible] is destroyed\n   */\n  ngOnDestroy() {\n    this.closeToolTip();\n  }\n\n  /**\n   * This method will close the tooltip by detaching the component from the overlay\n   */\n  private closeToolTip() {\n    if (this._overlayRef) {\n      this._overlayRef.detach();\n    }\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<span *ngFor=\"let d of data; let idx = index\">\n  <ng-container *ngIf=\"idx === 0\">\n    <br />\n    <mat-button-toggle-group [value]=\"selectedElement\" class=\"mat-primary\">\n      <mat-button-toggle (click)=\"setElement(ModifierType.Arc)\" [value]=\"ModifierType.Arc\">\n        Arc\n      </mat-button-toggle>\n      <mat-button-toggle (click)=\"setElement(ModifierType.Solar)\" [value]=\"ModifierType.Solar\">\n        Solar\n      </mat-button-toggle>\n      <mat-button-toggle (click)=\"setElement(ModifierType.Void)\" [value]=\"ModifierType.Void\">\n        Void\n      </mat-button-toggle>\n      <mat-button-toggle (click)=\"setElement(ModifierType.Stasis)\" [value]=\"ModifierType.Stasis\">\n        Stasis\n      </mat-button-toggle>\n      <mat-button-toggle (click)=\"setElement(ModifierType.Strand)\" [value]=\"ModifierType.Strand\">\n        Strand\n      </mat-button-toggle>\n      <mat-button-toggle\n        (click)=\"setElement(ModifierType.Prismatic)\"\n        [value]=\"ModifierType.Prismatic\">\n        Prismatic\n      </mat-button-toggle>\n    </mat-button-toggle-group>\n  </ng-container>\n  <ng-container *ngIf=\"!d.group || d.type === selectedElement\">\n    <h3 class=\"stat-part-title\" *ngIf=\"!d.group\">{{ d.name }}</h3>\n    <span *ngIf=\"d.data.length === 0\"\n      >There are no fragments configured yet. Please be patient.</span\n    >\n    <table [dataSource]=\"d.data\" mat-table *ngIf=\"d.data.length > 0\" class=\"tSubclassFragments\">\n      <!-- Position Column -->\n      <ng-container matColumnDef=\"name\">\n        <th *matHeaderCellDef mat-header-cell>Name</th>\n        <td *matCellDef=\"let element\" mat-cell [modTooltip]=\"element\">\n          <mat-slide-toggle\n            [checked]=\"selectedMods.indexOf(element.id) > -1\"\n            color=\"primary\"\n            style=\"cursor: pointer !important; user-select: none\">\n            <app-item-icon [itemHash]=\"element.hash\"></app-item-icon>\n            {{ element.name }}\n          </mat-slide-toggle>\n        </td>\n      </ng-container>\n\n      <ng-container *ngFor=\"let stat of ARMORSTAT_ORDER; let i = index\">\n        <ng-container [matColumnDef]=\"ArmorStatNames[stat]\">\n          <th *matHeaderCellDef mat-header-cell [matTooltip]=\"ArmorStatNames[stat]\">\n            <app-stat-icon [stat]=\"stat\"></app-stat-icon>\n          </th>\n          <td *matCellDef=\"let element\" mat-cell>\n            <span *ngVar=\"getModifierTextForValue(element.bonus, stat) as value\">\n              <span\n                *ngIf=\"value > 0\"\n                class=\"stat-positive\"\n                [matTooltip]=\"'+' + value + ' ' + ArmorStatNames[stat]\"\n                >+{{ value }}</span\n              >\n              <span\n                *ngIf=\"value < 0\"\n                class=\"stat-negative\"\n                [matTooltip]=\"value + ' ' + ArmorStatNames[stat]\"\n                >{{ value }}</span\n              >\n            </span>\n          </td>\n        </ng-container>\n      </ng-container>\n\n      <tr *matHeaderRowDef=\"displayedColumns\" mat-header-row></tr>\n      <tr\n        (click)=\"handleRowClick(row)\"\n        *matRowDef=\"let row; columns: displayedColumns\"\n        [class.selected]=\"selectedMods.indexOf(row.id) > -1\"\n        mat-row></tr>\n    </table>\n  </ng-container>\n</span>\n\n<div id=\"clear-container\">\n  <button\n    (click)=\"importEquippedSubclass()\"\n    [disabled]=\"isLoadingSubclass\"\n    color=\"primary\"\n    mat-raised-button\n    style=\"margin-right: 10px\">\n    Import equipped Subclass & Fragments\n  </button>\n\n  <mat-spinner\n    *ngIf=\"isLoadingSubclass\"\n    diameter=\"20\"\n    style=\"margin-right: 8px; display: inline-block\"></mat-spinner>\n  <button (click)=\"clear()\" [disabled]=\"isLoadingSubclass\" color=\"warn\" mat-stroked-button>\n    Clear the whole selection\n  </button>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { ModInformation } from \"../../../../data/ModInformation\";\nimport { ModifierType } from \"../../../../data/enum/modifierType\";\nimport { Modifier, ModifierValue } from \"../../../../data/modifier\";\nimport {\n  ArmorStat,\n  ARMORSTAT_ORDER,\n  ArmorStatNames,\n  SpecialArmorStat,\n} from \"../../../../data/enum/armor-stat\";\nimport { ConfigurationService } from \"../../../../services/configuration.service\";\nimport { BungieApiService } from \"../../../../services/bungie-api.service\";\nimport { ModOrAbility } from \"../../../../data/enum/modOrAbility\";\nimport { MAT_SLIDE_TOGGLE_DEFAULT_OPTIONS } from \"@angular/material/slide-toggle\";\nimport { DestinyClass } from \"bungie-api-ts/destiny2\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { Subject } from \"rxjs\";\n\n@Component({\n  selector: \"app-desired-mods-selection\",\n  templateUrl: \"./desired-mods-selection.component.html\",\n  styleUrls: [\"./desired-mods-selection.component.scss\"],\n  providers: [\n    {\n      provide: MAT_SLIDE_TOGGLE_DEFAULT_OPTIONS,\n      useValue: { disableToggleValue: false, disableDragValue: true },\n    },\n  ],\n})\nexport class DesiredModsSelectionComponent implements OnInit, OnDestroy {\n  ARMORSTAT_ORDER = ARMORSTAT_ORDER;\n  ArmorStatNames = ArmorStatNames;\n  ModifierType = ModifierType;\n  ModOrAbility = ModOrAbility;\n  dataSource: Modifier[];\n  displayedColumns = [\"name\"].concat(\n    ARMORSTAT_ORDER.map((stat) => {\n      return ArmorStatNames[stat];\n    })\n  );\n  private selectedClass: DestinyClass = DestinyClass.Unknown;\n  data: { data: Modifier[]; name: string; group: boolean; type: ModifierType }[];\n  selectedMods: ModOrAbility[] = [];\n  selectedElement: ModifierType = ModifierType.Solar;\n  isLoadingSubclass: boolean = false;\n\n  constructor(\n    private config: ConfigurationService,\n    private bungieApi: BungieApiService\n  ) {\n    const modifiers = Object.values(ModInformation).sort((a, b) => {\n      if (a.name.toLowerCase() < b.name.toLowerCase()) {\n        return -1;\n      }\n      if (a.name.toLowerCase() > b.name.toLowerCase()) {\n        return 1;\n      }\n      return 0;\n    });\n\n    this.data = [\n      {\n        name: \"Stasis Fragments\",\n        data: modifiers.filter((value) => value.type == ModifierType.Stasis),\n        group: true,\n        type: ModifierType.Stasis,\n      },\n      {\n        name: \"Void Fragments\",\n        data: modifiers.filter((value) => value.type == ModifierType.Void),\n        group: true,\n        type: ModifierType.Void,\n      },\n      {\n        name: \"Solar Fragments\",\n        data: modifiers.filter((value) => value.type == ModifierType.Solar),\n        group: true,\n        type: ModifierType.Solar,\n      },\n      {\n        name: \"Arc Fragments\",\n        data: modifiers.filter((value) => value.type == ModifierType.Arc),\n        group: true,\n        type: ModifierType.Arc,\n      },\n      {\n        name: \"Strand Fragments\",\n        data: modifiers.filter((value) => value.type == ModifierType.Strand),\n        group: true,\n        type: ModifierType.Strand,\n      },\n      {\n        name: \"Prismatic Fragments\",\n        data: modifiers.filter((value) => value.type == ModifierType.Prismatic),\n        group: true,\n        type: ModifierType.Prismatic,\n      },\n    ];\n\n    this.dataSource = modifiers;\n  }\n\n  ngOnInit(): void {\n    this.config.configuration.pipe(takeUntil(this.ngUnsubscribe)).subscribe((c) => {\n      this.selectedMods = c.enabledMods;\n      this.selectedClass = c.characterClass;\n      this.selectedElement = c.selectedModElement;\n    });\n  }\n\n  getModifierTextForValue(value: ModifierValue[], type: ArmorStat | SpecialArmorStat) {\n    return value\n      .filter((v) => {\n        if (v.stat == type) return true;\n        if (v.stat == SpecialArmorStat.ClassAbilityRegenerationStat) {\n          if (this.selectedClass == DestinyClass.Titan && type == ArmorStat.StatHealth) return true;\n          if (this.selectedClass == DestinyClass.Hunter && type == ArmorStat.StatWeapon)\n            return true;\n          if (this.selectedClass == DestinyClass.Warlock && type == ArmorStat.StatClass)\n            return true;\n        }\n        return false;\n      })\n      .reduce((p, v) => p + v.value, 0);\n  }\n\n  handleRowClick(row: Modifier) {\n    this.config.modifyConfiguration((c) => {\n      const pos = c.enabledMods.indexOf(row.id);\n      if (pos > -1) {\n        c.enabledMods.splice(pos, 1);\n      } else {\n        c.enabledMods.push(row.id);\n      }\n    });\n  }\n\n  clear() {\n    this.config.modifyConfiguration((c) => {\n      c.enabledMods = [];\n    });\n  }\n\n  setElement(element: ModifierType) {\n    if (this.selectedElement == element) return;\n    this.config.modifyConfiguration((c) => {\n      const pos = c.enabledMods.filter(\n        (m) =>\n          ModInformation[m].type != ModifierType.CombatStyleMod && ModInformation[m].type != element\n      );\n\n      c.selectedModElement = element;\n\n      for (let toDisableMods of pos) {\n        const position = c.enabledMods.indexOf(toDisableMods);\n        c.enabledMods.splice(position, 1);\n      }\n    });\n  }\n\n  async importEquippedSubclass() {\n    this.isLoadingSubclass = true;\n    try {\n      const success = await this.bungieApi.importCurrentlyEquippedSubclass();\n      if (success) {\n        console.log(\"Successfully imported equipped subclass and fragments\");\n      } else {\n        console.log(\"No subclass found or no changes were made\");\n      }\n    } catch (error) {\n      console.error(\"Failed to import equipped subclass:\", error);\n    } finally {\n      this.isLoadingSubclass = false;\n    }\n  }\n\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div *ngFor=\"let category of fieldKeys\">\n  <span class=\"category-header\">{{ category }}</span>\n  <div *ngFor=\"let f of fields2[category]\" class=\"adv-settings\">\n    <!-- Boolean toggle setting -->\n    <div *ngIf=\"f.type === 'boolean'\">\n      <mat-slide-toggle\n        color=\"primary\"\n        [disabled]=\"f.disabled\"\n        [checked]=\"f.value\"\n        (change)=\"f.onToggle($event.checked)\">\n        {{ f.name }}\n      </mat-slide-toggle>\n      <mat-icon\n        inline\n        aria-hidden=\"false\"\n        aria-label=\"Help\"\n        *ngIf=\"f.help\"\n        matTooltip=\"{{ f.help }}\"\n        #tooltip=\"matTooltip\">\n        help\n      </mat-icon>\n      <mat-icon\n        inline\n        aria-hidden=\"false\"\n        aria-label=\"Help\"\n        *ngIf=\"f.impactsResultCount\"\n        class=\"report-problem-icon\"\n        matTooltip=\"This setting might impact the amount of results. It may happen that you won't get any results if you change this setting. In this case, simply switch it back to its default state.\"\n        #tooltip=\"matTooltip\">\n        report_problem\n      </mat-icon>\n    </div>\n\n    <!-- Dropdown setting -->\n    <div *ngIf=\"f.type === 'dropdown'\" class=\"dropdown-setting\">\n      <!-- Toggleable dropdown -->\n      <div class=\"dropdown-header\">\n        <mat-slide-toggle\n          color=\"primary\"\n          [disabled]=\"f.disabled\"\n          [checked]=\"f.isEnabled\"\n          (change)=\"f.onToggle && f.onToggle($event.checked)\">\n          <span class=\"dropdown-label\">{{ f.name }}</span>\n        </mat-slide-toggle>\n        <mat-select\n          [value]=\"f.value\"\n          [disabled]=\"f.disabled || !f.isEnabled\"\n          (selectionChange)=\"f.onSelect($event.value)\"\n          class=\"dropdown-inline\"\n          placeholder=\"Select option\">\n          <mat-option *ngFor=\"let option of f.options\" [value]=\"option.value\">\n            {{ option.label }}\n          </mat-option>\n        </mat-select>\n        <mat-icon\n          inline\n          aria-hidden=\"false\"\n          aria-label=\"Help\"\n          *ngIf=\"f.help\"\n          matTooltip=\"{{ f.help }}\"\n          #tooltip=\"matTooltip\">\n          help\n        </mat-icon>\n        <mat-icon\n          inline\n          aria-hidden=\"false\"\n          aria-label=\"Help\"\n          *ngIf=\"f.impactsResultCount\"\n          class=\"report-problem-icon\"\n          matTooltip=\"This setting might impact the amount of results. It may happen that you won't get any results if you change this setting. In this case, simply switch it back to its default state.\"\n          #tooltip=\"matTooltip\">\n          report_problem\n        </mat-icon>\n      </div>\n    </div>\n  </div>\n  <div class=\"category-spacer\"></div>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { ConfigurationService } from \"../../../../services/configuration.service\";\nimport { Subject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { environment } from \"../../../../../environments/environment\";\n\ninterface AdvancedSettingFieldBase {\n  name: string;\n  help: string | undefined;\n  disabled: boolean;\n  impactsResultCount: boolean;\n  onToggle: (v: boolean) => void;\n}\n\ninterface BooleanSettingField extends AdvancedSettingFieldBase {\n  type: \"boolean\";\n  value: boolean;\n}\n\ninterface DropdownSettingField extends AdvancedSettingFieldBase {\n  type: \"dropdown\";\n  value: any;\n  onSelect: (v: any) => void;\n  options: { value: any; label: string }[];\n  isEnabled: boolean;\n}\n\ntype AdvancedSettingField = BooleanSettingField | DropdownSettingField;\n\n@Component({\n  selector: \"app-advanced-settings\",\n  templateUrl: \"./advanced-settings.component.html\",\n  styleUrls: [\"./advanced-settings.component.scss\"],\n})\nexport class AdvancedSettingsComponent implements OnInit, OnDestroy {\n  fields2: { [id: string]: AdvancedSettingField[] } = {};\n  fieldKeys: string[] = [];\n\n  constructor(private config: ConfigurationService) {}\n\n  ngOnInit(): void {\n    this.config.configuration.pipe(takeUntil(this.ngUnsubscribe)).subscribe((c) => {\n      this.fields2 = {\n        Events: [\n          {\n            name: \"Enforce the usage of a Festival of the Lost Mask.\",\n            type: \"boolean\",\n            onToggle: (v: boolean) => this.config.modifyConfiguration((c) => (c.useFotlArmor = v)),\n            value: c.useFotlArmor,\n            disabled: false,\n            impactsResultCount: true,\n            help: \"Only use a FotL masks. You will not get results if you do not own the mask.\",\n          },\n        ],\n        Masterwork: [\n          {\n            name: \"Assume all legendary items are masterworked\",\n            type: \"boolean\",\n            onToggle: (v: boolean) =>\n              this.config.modifyConfiguration((c) => (c.assumeLegendariesMasterworked = v)),\n            value: c.assumeLegendariesMasterworked,\n            disabled: false,\n            impactsResultCount: false,\n            help: undefined,\n          },\n          {\n            name: \"Assume all exotic items are masterworked\",\n            type: \"boolean\",\n            onToggle: (v: boolean) =>\n              this.config.modifyConfiguration((c) => (c.assumeExoticsMasterworked = v)),\n            value: c.assumeExoticsMasterworked,\n            disabled: false,\n            impactsResultCount: false,\n            help: \"If this setting is enabled, the tool will treat non-masterworked exotic armor as if it were masterworked-.\",\n          },\n          {\n            name: \"Only use already masterworked exotic items\",\n            type: \"boolean\",\n            onToggle: (v: boolean) =>\n              this.config.modifyConfiguration((c) => (c.onlyUseMasterworkedExotics = v)),\n            value: c.onlyUseMasterworkedExotics,\n            disabled: false,\n            impactsResultCount: true,\n            help: undefined,\n          },\n          {\n            name: \"Only use already masterworked legendary items\",\n            type: \"boolean\",\n            onToggle: (v: boolean) =>\n              this.config.modifyConfiguration((c) => (c.onlyUseMasterworkedLegendaries = v)),\n            value: c.onlyUseMasterworkedLegendaries,\n            disabled: false,\n            impactsResultCount: true,\n            help: undefined,\n          },\n        ],\n        \"Artifice Slots (for legacy armor 2.0)\": [\n          {\n            name: \"Assume every legacy legendary class item is an artifice armor.\",\n            type: \"boolean\",\n            onToggle: (v: boolean) =>\n              this.config.modifyConfiguration((c) => (c.assumeClassItemIsArtifice = v)),\n            value: c.assumeClassItemIsArtifice || c.assumeEveryLegendaryIsArtifice,\n            disabled: c.assumeEveryLegendaryIsArtifice || !c.allowLegacyLegendaryArmor,\n            impactsResultCount: true,\n            help: \"This is for debugging purposes. No support if you enable this.\",\n          },\n          {\n            name: \"Assume every legacy legendary is an artifice armor.\",\n            type: \"boolean\",\n            onToggle: (v: boolean) =>\n              this.config.modifyConfiguration((c) => (c.assumeEveryLegendaryIsArtifice = v)),\n            value: c.assumeEveryLegendaryIsArtifice,\n            disabled: !c.allowLegacyLegendaryArmor,\n            impactsResultCount: true,\n            help: \"This is for debugging purposes. No support if you enable this.\",\n          },\n          {\n            name: \"Assume every legacy exotic has an artifice slot.\",\n            type: \"boolean\",\n            onToggle: (v: boolean) =>\n              this.config.modifyConfiguration((c) => (c.assumeEveryExoticIsArtifice = v)),\n            value: c.assumeEveryExoticIsArtifice,\n            disabled: !c.allowLegacyExoticArmor,\n            impactsResultCount: true,\n            help: \"Preparation for the upcoming Artifice Mod Slot for exotics.\",\n          },\n        ],\n        \"Performance Optimization\": [\n          {\n            name: \"Use security features to prevent app crashes (resets on reload).\",\n            type: \"boolean\",\n            onToggle: (v: boolean) =>\n              this.config.modifyConfiguration((c) => (c.limitParsedResults = v)),\n            value: c.limitParsedResults,\n            disabled: false,\n            impactsResultCount: true,\n            help: \"Only parse the first 30,000 results. Deactivating this may crash your browser. The results will still be limited to 1,000,000 entries. Note that you will not miss any significant results by leaving this enabled.\",\n          },\n        ],\n        \"Wasted Stats\": [\n          {\n            name: \"Try to optimize wasted stats (slower)\",\n            type: \"boolean\",\n            onToggle: (v: boolean) =>\n              this.config.modifyConfiguration((c) => (c.tryLimitWastedStats = v)),\n            value: c.tryLimitWastedStats,\n            disabled: false,\n            impactsResultCount: false,\n            help: \"The tool will try to add minor stat mods to minimize wasted stats. This only works for combinations that fulfill your desired stat combination with enough mods so at least one mod slot is still open.\",\n          },\n          {\n            name: \"Only show builds with no wasted stats\",\n            type: \"boolean\",\n            onToggle: (v: boolean) =>\n              this.config.modifyConfiguration((c) => (c.onlyShowResultsWithNoWastedStats = v)),\n            value: environment.featureFlags.enableZeroWaste && c.onlyShowResultsWithNoWastedStats,\n            disabled: !environment.featureFlags.enableZeroWaste,\n            impactsResultCount: true,\n            help: \"Only show builds with zero wasted stats - this means, its highly likely that you won't get any results.\",\n          },\n        ],\n        \"Data-Science\": [\n          {\n            name: \"Add a constant +1 resilience to the results with non-exotic chests (resets on reload).\",\n            type: \"boolean\",\n            onToggle: (v: boolean) =>\n              this.config.modifyConfiguration((c) => (c.addConstent1Health = v)),\n            value: c.addConstent1Health,\n            disabled: false,\n            impactsResultCount: false,\n            help: \"You usually do not want to use this.\",\n          },\n          /*\n          {\n            name: \"Assume the player has all Tier X class items.\",\n            type: 'dropdown',\n            onSelect: (v: number) => {\n              this.config.modifyConfiguration((config) => (config.assumePlayerHasAllMaxClassItemsForTier = v));\n            },\n            value: 'option1',\n            disabled: false,\n            impactsResultCount: true,\n            help: \"The tool will assume that the player has all class items of a certain tier. This is useful for testing purposes.\",\n            isEnabled: c.assumePlayerHasAllMaxClassItemsForTierEnabled,\n            onToggle: (v: boolean) => {\n              this.config.modifyConfiguration((config) => (config.assumePlayerHasAllMaxClassItemsForTierEnabled = v));\n            },\n            options: [\n              { value: 1, label: 'Tier 1' },\n              { value: 2, label: 'Tier 2' },\n              { value: 3, label: 'Tier 3' },\n              { value: 4, label: 'Tier 4' },\n              { value: 5, label: 'Tier 5' },\n            ]\n          },\n          //*/\n        ],\n      };\n      this.fieldKeys = Object.keys(this.fields2);\n    });\n  }\n\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, Inject } from \"@angular/core\";\nimport { MAT_DIALOG_DATA, MatDialogRef } from \"@angular/material/dialog\";\n\nexport interface ConfirmDialogData {\n  description: string;\n}\n\n@Component({\n  selector: \"app-confirm-dialog\",\n  templateUrl: \"./confirm-dialog.component.html\",\n  styleUrls: [\"./confirm-dialog.component.css\"],\n})\nexport class ConfirmDialogComponent {\n  constructor(\n    public dialogRef: MatDialogRef<ConfirmDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: ConfirmDialogData\n  ) {}\n\n  onNoClick() {\n    this.dialogRef.close();\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<h1 mat-dialog-title>Confirm</h1>\n<div mat-dialog-content>\n  <p>{{ data.description }}</p>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onNoClick()\">No Thanks</button>\n  <button mat-raised-button color=\"primary\" [mat-dialog-close]=\"true\">Ok</button>\n</div>\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<form (submit)=\"submit()\" [formGroup]=\"settingsNameForm\">\n  <table id=\"settings\">\n    <tr>\n      <td>\n        <mat-form-field appearance=\"outline\" subscriptSizing=\"dynamic\" subscriptSizing=\"dynamic\">\n          <mat-label>Name to save the configuration</mat-label>\n          <input\n            formControlName=\"name\"\n            matInput\n            maxlength=\"30\"\n            minlength=\"4\"\n            placeholder=\"Awesome Grenade Build 4\" />\n        </mat-form-field>\n      </td>\n      <td>\n        <button\n          [disabled]=\"\n            !this.settingsNameForm.get('name')?.value ||\n            this.settingsNameForm.get('name')?.value.length < 4 ||\n            this.settingsNameForm.get('name')?.value.length > 30\n          \"\n          color=\"primary\"\n          mat-raised-button\n          type=\"submit\"\n          >Save current\n        </button>\n      </td>\n      <td>\n        <button\n          (click)=\"clearEverything()\"\n          color=\"warn\"\n          mat-raised-button\n          matTooltip=\"Clears the ENTIRE configuration and uses the default settings. Use with caution.\"\n          >Clear everything\n        </button>\n      </td>\n      <td>\n        <button\n          (click)=\"\n            openSnackBar(\n              'Copied the configuration to your clipboard. You can share it with your friends.'\n            )\n          \"\n          [cdkCopyToClipboard]=\"config.getCurrentConfigBase64Compressed()\"\n          color=\"primary\"\n          mat-raised-button\n          matTooltip=\"Copy your current configuration into your clipboard. You will be able to share it with others and import it later.\"\n          >Copy Current\n        </button>\n      </td>\n    </tr>\n    <tr style=\"display: none\">\n      <td>\n        <mat-form-field appearance=\"outline\" subscriptSizing=\"dynamic\">\n          <mat-label>Load saved configuration</mat-label>\n          <mat-select [(value)]=\"selectedEntry\" [disabled]=\"storedConfigs.length === 0\">\n            <mat-option *ngFor=\"let element of storedConfigs\" [value]=\"element.name\">\n              <span\n                >(<span *ngIf=\"element.configuration.characterClass === 0\">Titan</span>\n                <span *ngIf=\"element.configuration.characterClass === 1\">Hunter</span>\n                <span *ngIf=\"element.configuration.characterClass === 2\">Warlock</span>)\n              </span>\n              <span> {{ element.name }}</span>\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n      </td>\n      <td>\n        <button\n          (click)=\"load(selectedEntry)\"\n          [disabled]=\"!selectedEntry || storedConfigs.length === 0\"\n          color=\"primary\"\n          mat-raised-button\n          matTooltip=\"Load the currently selected configuration.\"\n          >Load\n        </button>\n      </td>\n      <td>\n        <button\n          (click)=\"delete(selectedEntry)\"\n          [disabled]=\"!selectedEntry || storedConfigs.length === 0\"\n          color=\"warn\"\n          mat-stroked-button\n          matTooltip=\"Delete the currently selected configuration. Can not be undone.\"\n          >Delete\n        </button>\n      </td>\n    </tr>\n  </table>\n</form>\n<br />\n\n<table [dataSource]=\"storedConfigs\" mat-table>\n  <!-- Position Column -->\n  <ng-container matColumnDef=\"name\">\n    <th *matHeaderCellDef mat-header-cell>Name</th>\n    <td *matCellDef=\"let element\" mat-cell>{{ element.name }} </td>\n  </ng-container>\n\n  <!-- Position Column -->\n  <ng-container matColumnDef=\"class\">\n    <th *matHeaderCellDef mat-header-cell> Class </th>\n    <td *matCellDef=\"let element\" mat-cell>\n      <span *ngIf=\"element.configuration.characterClass === 0\">Titan</span>\n      <span *ngIf=\"element.configuration.characterClass === 1\">Hunter</span>\n      <span *ngIf=\"element.configuration.characterClass === 2\">Warlock</span>\n    </td>\n  </ng-container>\n\n  <!-- Position Column -->\n  <ng-container matColumnDef=\"mobility\">\n    <th *matHeaderCellDef mat-header-cell>\n      <app-stat-icon [stat]=\"0\"></app-stat-icon>\n    </th>\n    <td *matCellDef=\"let element\" mat-cell>\n      {{ element.configuration.minimumStatTiers[0].value * 10 }}\n    </td>\n  </ng-container>\n\n  <!-- Position Column -->\n  <ng-container matColumnDef=\"resilience\">\n    <th *matHeaderCellDef mat-header-cell>\n      <app-stat-icon [stat]=\"1\"></app-stat-icon>\n    </th>\n    <td *matCellDef=\"let element\" mat-cell>\n      {{ element.configuration.minimumStatTiers[1].value * 10 }}\n    </td>\n  </ng-container>\n\n  <!-- Position Column -->\n  <ng-container matColumnDef=\"recovery\">\n    <th *matHeaderCellDef mat-header-cell>\n      <app-stat-icon [stat]=\"2\"></app-stat-icon>\n    </th>\n    <td *matCellDef=\"let element\" mat-cell>\n      {{ element.configuration.minimumStatTiers[2].value * 10 }}\n    </td>\n  </ng-container>\n\n  <!-- Position Column -->\n  <ng-container matColumnDef=\"discipline\">\n    <th *matHeaderCellDef mat-header-cell>\n      <app-stat-icon [stat]=\"3\"></app-stat-icon>\n    </th>\n    <td *matCellDef=\"let element\" mat-cell>\n      {{ element.configuration.minimumStatTiers[3].value * 10 }}\n    </td>\n  </ng-container>\n\n  <!-- Position Column -->\n  <ng-container matColumnDef=\"intellect\">\n    <th *matHeaderCellDef mat-header-cell>\n      <app-stat-icon [stat]=\"4\"></app-stat-icon>\n    </th>\n    <td *matCellDef=\"let element\" mat-cell>\n      {{ element.configuration.minimumStatTiers[4].value * 10 }}\n    </td>\n  </ng-container>\n\n  <!-- Position Column -->\n  <ng-container matColumnDef=\"strength\">\n    <th *matHeaderCellDef mat-header-cell>\n      <app-stat-icon [stat]=\"5\"></app-stat-icon>\n    </th>\n    <td *matCellDef=\"let element\" mat-cell>\n      {{ element.configuration.minimumStatTiers[5].value * 10 }}\n    </td>\n  </ng-container>\n\n  <!-- Position Column -->\n  <ng-container matColumnDef=\"delete\">\n    <th *matHeaderCellDef mat-header-cell> </th>\n    <td *matCellDef=\"let element\" mat-cell>\n      <button\n        (click)=\"delete(element.name)\"\n        color=\"warn\"\n        mat-icon-button\n        matTooltip=\"Delete this configuration permanently.\">\n        <mat-icon>delete_forever</mat-icon>\n      </button>\n      <button\n        (click)=\"load(element.name)\"\n        color=\"primary\"\n        mat-icon-button\n        matTooltip=\"Load this configuration. Your current settings will be overwritten.\">\n        <mat-icon>check_circle_outline</mat-icon>\n      </button>\n      <button\n        (click)=\"copySingleSettingToClipboard(element)\"\n        color=\"primary\"\n        mat-icon-button\n        matTooltip=\"Copy this configuration into your clipboard. You will be able to share it with others and import it later.\">\n        <mat-icon>get_app</mat-icon>\n      </button>\n    </td>\n  </ng-container>\n\n  <tr *matHeaderRowDef=\"displayedColumns\" mat-header-row></tr>\n  <tr *matRowDef=\"let row; columns: displayedColumns\" mat-row></tr>\n</table>\n\n<ng-container *ngIf=\"storedConfigs.length > 0\">\n  <br />\n  <button\n    color=\"primary\"\n    mat-raised-button\n    (click)=\"copyAllSettingsToClipboard()\"\n    matTooltip=\"Export all configurations to the clipboard. You can then save and share them.\">\n    Copy all saved configurations to the clipboard\n  </button>\n</ng-container>\n\n<!-- import -->\n<br />\n<div>\n  <hr />\n  <h2>Import a previously exported configuration</h2>\n  <form [formGroup]=\"importTextForm\">\n    <table>\n      <tr>\n        <td>\n          <mat-form-field appearance=\"outline\" subscriptSizing=\"dynamic\">\n            <mat-label>Copied configuration</mat-label>\n            <input formControlName=\"content\" matInput />\n          </mat-form-field>\n        </td>\n        <td>\n          <button\n            (click)=\"runImport()\"\n            color=\"primary\"\n            mat-raised-button\n            matTooltip=\"Import the given configuration\">\n            Start the import\n          </button>\n        </td>\n      </tr>\n    </table>\n  </form>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport {\n  ConfigurationService,\n  StoredConfiguration,\n} from \"../../../../services/configuration.service\";\nimport { UntypedFormBuilder, UntypedFormGroup } from \"@angular/forms\";\nimport { MatDialog } from \"@angular/material/dialog\";\nimport {\n  ConfirmDialogComponent,\n  ConfirmDialogData,\n} from \"../../components/confirm-dialog/confirm-dialog.component\";\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\nimport * as lzutf8 from \"lzutf8\";\nimport { Subject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { Clipboard } from \"@angular/cdk/clipboard\";\n\n@Component({\n  selector: \"app-load-and-save-settings\",\n  templateUrl: \"./load-and-save-settings.component.html\",\n  styleUrls: [\"./load-and-save-settings.component.css\"],\n})\nexport class LoadAndSaveSettingsComponent implements OnInit, OnDestroy {\n  selectedEntry: string = \"\";\n  storedConfigs: StoredConfiguration[] = [];\n  displayedColumns = [\n    \"name\",\n    \"class\",\n    \"mobility\",\n    \"resilience\",\n    \"recovery\",\n    \"discipline\",\n    \"intellect\",\n    \"strength\",\n    \"delete\",\n  ];\n\n  settingsNameForm: UntypedFormGroup;\n  importTextForm: UntypedFormGroup;\n\n  constructor(\n    public config: ConfigurationService,\n    private formBuilder: UntypedFormBuilder,\n    public dialog: MatDialog,\n    private _snackBar: MatSnackBar,\n    private clipboard: Clipboard\n  ) {\n    this.settingsNameForm = this.formBuilder.group({ name: [null] });\n    this.importTextForm = this.formBuilder.group({ content: [null] });\n  }\n\n  ngOnInit(): void {\n    this.config.storedConfigurations\n      .pipe(takeUntil(this.ngUnsubscribe))\n      .subscribe((d) => (this.storedConfigs = d));\n  }\n\n  submit() {\n    const name = this.settingsNameForm.get(\"name\")?.value;\n    if (!name) return; // TODO LOG ERROR\n\n    if (this.config.doesSavedConfigurationExist(name)) {\n      const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n        width: \"300px\",\n        data: {\n          description: \"Do you want to overwrite this configuration?\",\n        } as ConfirmDialogData,\n      });\n\n      dialogRef.afterClosed().subscribe((result) => {\n        if (result) {\n          this.config.saveCurrentConfigurationToName(name);\n          this.settingsNameForm.reset();\n          this.selectedEntry = name;\n        }\n      });\n    } else {\n      this.config.saveCurrentConfigurationToName(name);\n      this.settingsNameForm.reset();\n      this.selectedEntry = name;\n    }\n  }\n\n  delete(element: string) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: \"300px\",\n      data: { description: \"Do you want to delete this configuration?\" } as ConfirmDialogData,\n    });\n\n    dialogRef.afterClosed().subscribe((result) => {\n      if (result) this.config.deleteStoredConfiguration(element);\n    });\n  }\n\n  clearEverything() {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: \"300px\",\n      data: { description: \"Do you want to clear all settings?\" } as ConfirmDialogData,\n    });\n\n    dialogRef.afterClosed().subscribe((result) => {\n      if (result) this.config.resetCurrentConfiguration();\n    });\n  }\n\n  load(element: string) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: \"300px\",\n      data: { description: \"Do you want to load this preset?\" } as ConfirmDialogData,\n    });\n\n    dialogRef.afterClosed().subscribe((result) => {\n      if (result) this.config.loadSavedConfiguration(element);\n    });\n  }\n\n  runImport() {\n    const content = this.importTextForm.get(\"content\")?.value;\n    if (!content) return this.openSnackBar(\"Invalid input.\");\n    try {\n      const jsonText = lzutf8.decompress(content, { inputEncoding: \"Base64\" });\n      const isArray = jsonText.substr(0, 1) == \"[\";\n      let jsonData = JSON.parse(jsonText);\n      if (!isArray) jsonData = [jsonData];\n\n      console.log(\"Incoming json:\", jsonData);\n      for (let jsonDatum of jsonData) {\n        this.config.checkAndFixOldSavedConfigurations(jsonDatum);\n        if (jsonDatum.hasOwnProperty(\"name\")) {\n          if (isArray) this.config.saveConfiguration(jsonDatum.name, jsonDatum.configuration);\n          else this.config.saveCurrentConfiguration(jsonDatum.configuration);\n        } else {\n          this.config.saveCurrentConfiguration(jsonDatum);\n        }\n      }\n      this.openSnackBar(\"Successfully loaded this configuration\");\n      this.importTextForm.get(\"content\")?.reset();\n    } catch (e) {\n      this.openSnackBar(\"Invalid input.\");\n      console.error(e);\n    }\n  }\n\n  copySingleSettingToClipboard(element: any) {\n    this.clipboard.copy(this.config.getStoredConfigurationBase64Compressed(element.name));\n    this.openSnackBar(\n      \"Copied the configuration to your clipboard. You can share it with your friends.\"\n    );\n  }\n\n  copyAllSettingsToClipboard() {\n    this.clipboard.copy(this.config.getAllStoredConfigurationsBase64Compressed());\n    this.openSnackBar(\n      \"Exported all configurations to the clipboard. You can then save and share them.\"\n    );\n  }\n\n  openSnackBar(message: string) {\n    this._snackBar.open(message, \"\", {\n      duration: 2500,\n      politeness: \"polite\",\n    });\n  }\n\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div class=\"item-icon-container\" *ngIf=\"characterClass !== null\">\n  <div *ngFor=\"let entries of disabledItems; let idx = index\">\n    <div *ngIf=\"idx === 1 && entries.length > 0\">Helmets</div>\n    <div *ngIf=\"idx === 2 && entries.length > 0\">Gauntlets</div>\n    <div *ngIf=\"idx === 3 && entries.length > 0\">Chest Pieces</div>\n    <div *ngIf=\"idx === 4 && entries.length > 0\">Legs</div>\n    <div *ngIf=\"idx === 5 && entries.length > 0\">Class Items</div>\n\n    <span *ngFor=\"let i of entries; let idx = index\" class=\"item-sub\">\n      <img\n        class=\"item-icon\"\n        src=\"https://bungie.net/{{ i.icon }}\"\n        (click)=\"enableItem(i.itemInstanceId)\"\n        matTooltipClass=\"allow-cr\"\n        [matTooltip]=\"generateTooltip(i)\" />\n      <br *ngIf=\"(idx + 1) % 10 === 0\" />\n    </span>\n  </div>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { ConfigurationService } from \"../../../../services/configuration.service\";\nimport { DatabaseService } from \"../../../../services/database.service\";\nimport {\n  IDisplayInventoryArmor,\n  InventoryArmorSource,\n} from \"../../../../data/types/IInventoryArmor\";\nimport { Subject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { DestinyClass, TierType } from \"bungie-api-ts/destiny2\";\nimport { ArmorSlot } from \"src/app/data/enum/armor-slot\";\n\n@Component({\n  selector: \"app-ignored-items-list\",\n  templateUrl: \"./ignored-items-list.component.html\",\n  styleUrls: [\"./ignored-items-list.component.scss\"],\n})\nexport class IgnoredItemsListComponent implements OnInit, OnDestroy {\n  disabledItems: IDisplayInventoryArmor[][] = [];\n  characterClass: DestinyClass | null = null;\n\n  constructor(\n    private config: ConfigurationService,\n    private db: DatabaseService\n  ) {}\n\n  enableItem(instanceId: string) {\n    this.config.modifyConfiguration((cb) => {\n      cb.disabledItems.splice(cb.disabledItems.indexOf(instanceId), 1);\n    });\n  }\n\n  generateTooltip(armor: IDisplayInventoryArmor) {\n    return (\n      \"Click this icon to activate this item again.\\r\\n\" +\n      \"\" +\n      armor.name +\n      \"  \" +\n      \"Base: \" +\n      armor.mobility +\n      \"/\" +\n      \"\" +\n      armor.resilience +\n      \"/\" +\n      \"\" +\n      armor.recovery +\n      \"/\" +\n      \"\" +\n      armor.discipline +\n      \"/\" +\n      \"\" +\n      armor.intellect +\n      \"/\" +\n      \"\" +\n      armor.strength\n    );\n  }\n\n  ngOnInit(): void {\n    this.config.configuration.pipe(takeUntil(this.ngUnsubscribe)).subscribe(async (cb) => {\n      this.characterClass = null;\n      const newDisabledItems: IDisplayInventoryArmor[][] = [[], [], [], [], [], []];\n\n      let items = [];\n      for (let hash of cb.disabledItems) {\n        let itemInstance = (await this.db.inventoryArmor\n          .where(\"itemInstanceId\")\n          .equals(hash)\n          .first()) as IDisplayInventoryArmor;\n        if (!itemInstance)\n          itemInstance = {\n            id: 0,\n            hash: 0,\n            tier: 1,\n            itemInstanceId: hash,\n            energyLevel: 0,\n            armorSystem: 3, // Default to Armor 3.0\n            name: \"Missing Armor\",\n            icon: \"/common/destiny2_content/icons/763634b78eb22168ac707500588b7333.jpg\",\n            description: \"This armor has been deleted\",\n            masterworkLevel: 0,\n            archetypeStats: [],\n            clazz: DestinyClass.Unknown,\n            slot: ArmorSlot.ArmorSlotNone,\n            isExotic: 0,\n            isFeatured: false,\n            rarity: TierType.Unknown,\n            source: InventoryArmorSource.Inventory,\n            gearSetHash: null,\n            mobility: 0,\n            resilience: 0,\n            recovery: 0,\n            discipline: 0,\n            intellect: 0,\n            strength: 0,\n          };\n        items.push(itemInstance);\n      }\n\n      for (let item of items) {\n        //if (item.clazz != this.characterClass) continue;\n        newDisabledItems[item.slot].push(item);\n      }\n\n      this.characterClass = cb.characterClass;\n\n      for (let row of newDisabledItems) {\n        row.sort((a, b) => a.hash - b.hash);\n      }\n      this.disabledItems = newDisabledItems;\n    });\n  }\n\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component } from \"@angular/core\";\n\n@Component({\n  selector: \"app-settings\",\n  templateUrl: \"./settings.component.html\",\n  styleUrls: [\"./settings.component.css\"],\n})\nexport class SettingsComponent {\n  constructor() {}\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div id=\"card-config\">\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>Character Selection</mat-card-title>\n    </mat-card-header>\n    <mat-card-content id=\"content-char-selection\">\n      <app-desired-class-selection></app-desired-class-selection>\n    </mat-card-content>\n  </mat-card>\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>Select your desired stat distribution</mat-card-title>\n      <mat-card-subtitle> Select the stats one by one using the sliders below. </mat-card-subtitle>\n    </mat-card-header>\n    <mat-card-content>\n      <app-desired-stat-selection></app-desired-stat-selection>\n    </mat-card-content>\n  </mat-card>\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>Armor Selection</mat-card-title>\n      <mat-card-subtitle>\n        This section allows you to limit the armor pieces that are used in the buildcrafting\n        process.<br />\n        If you want, limit all results to one exotic. <br />\n        Exotics you do not have in the inventory or vault are grayed out.\n      </mat-card-subtitle>\n    </mat-card-header>\n    <mat-card-content>\n      <app-desired-exotic-selection></app-desired-exotic-selection>\n    </mat-card-content>\n  </mat-card>\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>Gearset selection and Mod limitation</mat-card-title>\n      <mat-card-subtitle>\n        This section allows you to further specify what kind of armor and mods you want.\n      </mat-card-subtitle>\n    </mat-card-header>\n    <mat-card-content>\n      <app-desired-mod-selection></app-desired-mod-selection>\n    </mat-card-content>\n  </mat-card>\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>Stat-Boost Selection</mat-card-title>\n      <mat-card-subtitle>\n        Select Mods and Skills that affect your overall stats.<br />\n        Please note that D2AP also allows theoretical, but impossible input.<br />\n        <b>Only fragments that affect stats are shown.</b>\n      </mat-card-subtitle>\n    </mat-card-header>\n    <mat-card-content>\n      <app-desired-mods-selection></app-desired-mods-selection>\n    </mat-card-content>\n  </mat-card>\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>Advanced Settings</mat-card-title>\n      <mat-card-subtitle>\n        More settings! Use them to fine-tune your buildcrafting process.\n      </mat-card-subtitle>\n    </mat-card-header>\n    <mat-card-content>\n      <app-advanced-settings></app-advanced-settings>\n    </mat-card-content>\n  </mat-card>\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>Disabled Armor Pieces</mat-card-title>\n      <mat-card-subtitle>\n        These armor pieces are disabled. Click them to enable them again.<br />\n        They won't show up in any results.<br />\n        You can disable items in the detailed result overview.\n      </mat-card-subtitle>\n    </mat-card-header>\n    <mat-card-content>\n      <app-ignored-items-list></app-ignored-items-list>\n    </mat-card-content>\n  </mat-card>\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>Configuration Management</mat-card-title>\n      <mat-card-subtitle>\n        Save and load your buildcrafting settings for another day!\n      </mat-card-subtitle>\n    </mat-card-header>\n    <mat-card-content>\n      <app-load-and-save-settings></app-load-and-save-settings>\n    </mat-card-content>\n  </mat-card>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component } from \"@angular/core\";\n\n@Component({\n  selector: \"app-armor-picker-page\",\n  templateUrl: \"./armor-picker-page.component.html\",\n  styleUrls: [\"./armor-picker-page.component.css\"],\n})\nexport class ArmorPickerPageComponent {\n  constructor() {}\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div id=\"container\">\n  <app-settings></app-settings>\n  <app-results></app-results>\n</div>\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div id=\"cluster-container\">\n  <a class=\"returnbutton hide-gt-sm\" color=\"primary\" mat-raised-button routerLink=\"/\">\n    Return to D2ArmorPicker\n  </a>\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title> About this page </mat-card-title>\n    </mat-card-header>\n    <mat-card-content>\n      This page <i>can</i> help you to sort out your vault a bit. It takes all your armor entries\n      and tries to sort them into {{ clusterInformation.length }} clusters. It then gives you a DIM\n      search query for each cluster. You can use this to look at similar rolls in your vault and to\n      clean out some of them.\n      <br />\n      <br />\n      Please note that it will cluster all armor for all characters. Make sure to use \"is:titan\",\n      \"is:warlock\" or \"is:hunter\" in DIM.\n      <br />\n      <br />\n      Please also note that this feature is new and may have some inaccuracy for some items.\n    </mat-card-content>\n    <mat-card-header>\n      <mat-card-title> How do I use this page? </mat-card-title>\n    </mat-card-header>\n\n    <mat-card-content>\n      <ol>\n        <li>Pick one of the clusters below.</li>\n        <li>Copy the DIM search query and insert it in the search bar in DIM.</li>\n        <li>\n          If you want, add one of the following to the search query: \"is:titan\", \"is:warlock\",\n          \"is:hunter\" (without \" of course);<br />\n          You can also use \"not:masterwork\", \"not:exotic\" or other filters.\n        </li>\n        <li\n          >Look at all the armor. Just look at it. If you see duplicates, you can look at them and\n          decide which ones to keep.\n        </li>\n      </ol>\n    </mat-card-content>\n  </mat-card>\n\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title>Options</mat-card-title>\n      <mat-card-subtitle> Additional options for the clustering results. </mat-card-subtitle>\n    </mat-card-header>\n\n    <mat-card-content>\n      <div class=\"settings-container\">\n        <span><b>Exotics</b><br />Decide whether you want to see or hide exotics.</span>\n        <span>\n          <mat-button-toggle-group (valueChange)=\"Update()\" [(value)]=\"exoticFilter\">\n            <mat-button-toggle\n              class=\"red\"\n              matTooltip=\"Only select non-exotic armor pieces.\"\n              value=\"-1\"\n              ><mat-icon>visibility_off</mat-icon></mat-button-toggle\n            >\n            <mat-button-toggle\n              class=\"green\"\n              matTooltip=\"Only select exotic  armor pieces.\"\n              value=\"1\"\n              ><mat-icon>visibility</mat-icon></mat-button-toggle\n            >\n            <mat-button-toggle checked value=\"0\">All</mat-button-toggle>\n          </mat-button-toggle-group>\n        </span>\n      </div>\n      <div class=\"settings-container\">\n        <span\n          ><b>Masterwork</b><br />Decide whether you want to see or hide masterworked armor.</span\n        >\n        <span>\n          <mat-button-toggle-group (valueChange)=\"Update()\" [(value)]=\"masterworkFilter\">\n            <mat-button-toggle\n              class=\"red\"\n              matTooltip=\"Only select non-masterworked armor pieces.\"\n              value=\"-1\"\n              ><mat-icon>visibility_off</mat-icon></mat-button-toggle\n            >\n            <mat-button-toggle\n              class=\"green\"\n              matTooltip=\"Only select masterworked armor pieces.\"\n              value=\"1\"\n              ><mat-icon>visibility</mat-icon></mat-button-toggle\n            >\n            <mat-button-toggle checked value=\"0\">All</mat-button-toggle>\n          </mat-button-toggle-group>\n        </span>\n      </div>\n      <div class=\"settings-container\">\n        <span><b>Class</b><br />Decide which class you want to see.</span>\n        <span>\n          <mat-button-toggle-group (valueChange)=\"Update()\" [(value)]=\"classFilter\">\n            <mat-button-toggle matTooltip=\"Titan\" value=\"0\">\n              <svg\n                aria-hidden=\"true\"\n                class=\"svgClassIcon\"\n                focusable=\"false\"\n                viewBox=\"0 0 32 32\"\n                xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"m14.839 15.979-13.178-7.609v15.218zm2.322 0 13.178 7.609v-15.218zm5.485-12.175-6.589-3.804-13.178 7.609 13.178 7.609 13.179-7.609zm0 16.784-6.589-3.805-13.178 7.609 13.178 7.608 13.179-7.608-6.59-3.805z\"\n                  fill=\"currentColor\"></path>\n              </svg>\n            </mat-button-toggle>\n            <mat-button-toggle matTooltip=\"Hunter\" value=\"1\">\n              <svg\n                aria-hidden=\"true\"\n                class=\"svgClassIcon\"\n                focusable=\"false\"\n                viewBox=\"0 0 32 32\"\n                xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"m9.055 10.446 6.945-.023-6.948 10.451 6.948-.024-7.412 11.15h-7.045l7.036-10.428h-7.036l7.032-10.422h-7.032l7.507-11.126 6.95-.024zm13.89 0-6.945-10.446 6.95.024 7.507 11.126h-7.032l7.032 10.422h-7.036l7.036 10.428h-7.045l-7.412-11.15 6.948.024-6.948-10.451z\"\n                  fill=\"currentColor\"></path>\n              </svg>\n            </mat-button-toggle>\n            <mat-button-toggle matTooltip=\"Warlock\" value=\"2\">\n              <svg\n                aria-hidden=\"true\"\n                class=\"svgClassIcon\"\n                focusable=\"false\"\n                viewBox=\"0 0 32 32\"\n                xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"m5.442 23.986 7.255-11.65-2.71-4.322-9.987 15.972zm5.986 0 4.28-6.849-2.717-4.333-6.992 11.182zm7.83-11.611 7.316 11.611h5.426l-10.015-15.972zm-7.26 11.611h8.004l-4.008-6.392zm6.991-11.182-2.703 4.324 4.302 6.858h5.413zm-5.707-.459 2.71-4.331 2.71 4.331-2.703 4.326z\"\n                  fill=\"currentColor\"></path>\n              </svg>\n            </mat-button-toggle>\n\n            <mat-button-toggle checked value=\"-1\">All</mat-button-toggle>\n          </mat-button-toggle-group>\n        </span>\n      </div>\n    </mat-card-content>\n  </mat-card>\n\n  <div\n    class=\"cluster-container\"\n    [style.display]=\"'flex'\"\n    [style.flex-direction]=\"'row'\"\n    [style.gap]=\"'5px'\"\n    [style.flex-fill]=\"1\">\n    <ng-container *ngFor=\"let cluster of clusters; let idx = index\">\n      <mat-card appearance=\"outlined\" *ngIf=\"cluster.length > 0\" class=\"cluster-item\">\n        <mat-card-header>\n          <mat-card-title> Cluster {{ idx + 1 }} </mat-card-title>\n          <mat-card-subtitle>\n            Contains {{ cluster.length }} item{{ cluster.length > 1 ? \"s\" : \"\" }}\n          </mat-card-subtitle>\n        </mat-card-header>\n        <mat-card-content>\n          <div>\n            <table width=\"100%\">\n              <ng-container *ngFor=\"let entry of clusterInformation[idx].mean; let idx1 = index\">\n                <tr\n                  *ngIf=\"idx1 > 0\"\n                  [matTooltip]=\"\n                    ['', 'Weapon', 'Health', 'Class', 'Grenade', 'Super', 'Melee'][idx1]\n                  \">\n                  <td>\n                    {{ [\"\", \"Weapon\", \"Health\", \"Class\", \"Grenade\", \"Super\", \"Melee\"][idx1] }}\n                  </td>\n                  <td width=\"100%\">\n                    <div class=\"stat-range\">\n                      <div\n                        class=\"stat-range-bar\"\n                        [style.width]=\"(clusterInformation[idx].mean[idx1] / 32) * 100 + '%'\"></div>\n                      <span class=\"avg-stat-value\">\n                        {{ clusterInformation[idx].mean[idx1] | number: \"1.0-0\" }}\n                      </span>\n                    </div>\n                  </td>\n                </tr>\n              </ng-container>\n            </table>\n          </div>\n          <mat-form-field appearance=\"fill\" class=\"searchQueryField\">\n            <mat-label>DIM Search Query</mat-label>\n            <input [value]=\"getDIMStringForCluster(cluster)\" matInput readonly type=\"text\" />\n          </mat-form-field>\n          <button\n            (click)=\"openSnackBar('Copied the DIM search query to your clipboard.')\"\n            [cdkCopyToClipboard]=\"getDIMStringForCluster(cluster)\"\n            class=\"copyButton\"\n            color=\"primary\"\n            mat-raised-button\n            matTooltip=\"Use this button to copy a DIM search query to your clip board. It allows you to search the given items in DIM.\">\n            Copy DIM query to clipboard\n          </button>\n        </mat-card-content>\n      </mat-card>\n    </ng-container>\n  </div>\n\n  <a class=\"returnbutton hide-gt-sm\" color=\"primary\" mat-raised-button routerLink=\"/\">\n    Return to D2ArmorPicker\n  </a>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { AfterViewInit, Component } from \"@angular/core\";\nimport { IInventoryArmor, InventoryArmorSource } from \"../../../../data/types/IInventoryArmor\";\nimport { DatabaseService } from \"../../../../services/database.service\";\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\nimport { InventoryService } from \"../../../../services/inventory.service\";\nimport { debounceTime } from \"rxjs/operators\";\nimport { ArmorSlot } from \"../../../../data/enum/armor-slot\";\nimport { MAXIMUM_MASTERWORK_LEVEL } from \"src/app/data/constants\";\n\nvar clusterData = [\n  {\n    id: 0,\n    size: 214,\n    centroids: [\n      5.242990654205609, 3.4392523364485994, 23.074766355140188, 4.52336448598131,\n      17.99532710280374, 8.074766355140188,\n    ],\n    std: [\n      3.262185500658884, 3.137958193527344, 2.0745611905196912, 3.223158380401712,\n      2.6478649185881147, 3.356022774004607, 3.3823650213485315,\n    ],\n    mean: [\n      62.350467289719624, 5.242990654205608, 3.439252336448598, 23.074766355140188,\n      4.5233644859813085, 17.99532710280374, 8.074766355140186,\n    ],\n  },\n  {\n    id: 1,\n    size: 264,\n    centroids: [\n      13.613636363636365, 3.060606060606063, 14.431818181818182, 6.731060606060606,\n      12.575757575757574, 10.575757575757576,\n    ],\n    std: [\n      4.915624932359143, 2.735897756946947, 1.897597343200423, 3.036390647550984,\n      3.2253188618447473, 3.0097969617389406, 3.1372197425220545,\n    ],\n    mean: [\n      60.98863636363637, 13.613636363636363, 3.0606060606060606, 14.431818181818182,\n      6.731060606060606, 12.575757575757576, 10.575757575757576,\n    ],\n  },\n  {\n    id: 2,\n    size: 220,\n    centroids: [\n      5.209090909090909, 15.586363636363636, 10.936363636363636, 13.281818181818181,\n      13.604545454545452, 3.8818181818181836,\n    ],\n    std: [\n      3.3631090204013643, 2.931782865076046, 2.9200605883727038, 3.289049973803757,\n      2.6349662061268395, 2.6591750828428204, 2.395703224398619,\n    ],\n    mean: [\n      62.5, 5.209090909090909, 15.586363636363636, 10.936363636363636, 13.281818181818181,\n      13.604545454545455, 3.881818181818182,\n    ],\n  },\n  {\n    id: 3,\n    size: 230,\n    centroids: [\n      8.6, 15.330434782608698, 6.943478260869563, 6.408695652173913, 5.578260869565216,\n      18.26086956521739,\n    ],\n    std: [\n      4.27370926113142, 3.855014315301441, 3.2487061290912984, 3.5081098914433078,\n      3.559587955581114, 3.1761194803539676, 3.596667444705349,\n    ],\n    mean: [\n      61.12173913043478, 8.6, 15.330434782608696, 6.943478260869565, 6.408695652173913,\n      5.578260869565217, 18.26086956521739,\n    ],\n  },\n  {\n    id: 4,\n    size: 261,\n    centroids: [\n      11.74712643678161, 5.655172413793104, 13.873563218390803, 11.022988505747126,\n      16.57088122605364, 3.0038314176245224,\n    ],\n    std: [\n      3.5878146263573103, 2.8197860971981994, 2.9890605143791737, 2.9825309245974925,\n      2.7497287061744258, 2.8324620286123516, 1.8428616632651005,\n    ],\n    mean: [\n      61.87356321839081, 11.74712643678161, 5.655172413793103, 13.873563218390805,\n      11.022988505747126, 16.57088122605364, 3.003831417624521,\n    ],\n  },\n  {\n    id: 5,\n    size: 249,\n    centroids: [\n      6.598393574297189, 7.2289156626506035, 7.674698795180722, 6.831325301204822,\n      5.995983935742974, 7.425702811244981,\n    ],\n    std: [\n      12.188382924990831, 3.7780346472852226, 3.7855581933977014, 3.9659084518463055,\n      3.2508780840166134, 2.4288222155150856, 3.23718036285365,\n    ],\n    mean: [\n      41.75502008032129, 6.598393574297189, 7.228915662650603, 7.674698795180723, 6.831325301204819,\n      5.995983935742972, 7.42570281124498,\n    ],\n  },\n  {\n    id: 6,\n    size: 241,\n    centroids: [\n      4.580912863070541, 10.62655601659751, 15.72199170124481, 20.186721991701248,\n      5.7634854771784205, 4.8672199170124495,\n    ],\n    std: [\n      4.0360666526825675, 2.5776864620318327, 2.726712032141287, 2.7236414380869185,\n      3.4135743182998106, 3.164594939982558, 2.8952195061747896,\n    ],\n    mean: [\n      61.74688796680498, 4.580912863070539, 10.62655601659751, 15.721991701244812,\n      20.186721991701244, 5.763485477178423, 4.867219917012448,\n    ],\n  },\n  {\n    id: 7,\n    size: 352,\n    centroids: [\n      4.96875, 10.849431818181818, 15.676136363636362, 5.085227272727275, 13.079545454545453,\n      12.113636363636365,\n    ],\n    std: [\n      3.864447558701623, 2.876694966732471, 2.825917840642513, 2.8500410080793133,\n      2.604753041986593, 2.753797030174534, 3.084495990290069,\n    ],\n    mean: [\n      61.77272727272727, 4.96875, 10.849431818181818, 15.676136363636363, 5.0852272727272725,\n      13.079545454545455, 12.113636363636363,\n    ],\n  },\n  {\n    id: 8,\n    size: 219,\n    centroids: [\n      21.401826484018265, 4.529680365296804, 4.954337899543379, 14.022831050228312,\n      7.168949771689496, 6.8036529680365305,\n    ],\n    std: [\n      7.654498360234386, 3.856746305047457, 3.0774088630224354, 3.486239910130717,\n      4.509361233853425, 3.691515724130434, 3.433882092856456,\n    ],\n    mean: [\n      58.881278538812786, 21.401826484018265, 4.529680365296803, 4.954337899543379,\n      14.02283105022831, 7.168949771689498, 6.80365296803653,\n    ],\n  },\n  {\n    id: 9,\n    size: 183,\n    centroids: [\n      4.448087431693989, 22.114754098360656, 4.868852459016392, 7.459016393442623,\n      11.240437158469945, 9.765027322404372,\n    ],\n    std: [\n      7.900837110469869, 3.265921971202623, 3.896032191192026, 3.424902708986657,\n      3.3556927380910535, 3.7206143627650876, 3.9564220813839577,\n    ],\n    mean: [\n      59.89617486338798, 4.448087431693989, 22.114754098360656, 4.868852459016393,\n      7.459016393442623, 11.240437158469945, 9.765027322404372,\n    ],\n  },\n  {\n    id: 10,\n    size: 197,\n    centroids: [\n      13.563451776649746, 10.761421319796954, 6.527918781725887, 20.654822335025383,\n      4.934010152284262, 5.18274111675127,\n    ],\n    std: [\n      4.239153654030002, 3.3077343290831713, 2.8924486501981233, 2.9338771160608355,\n      3.5098461495889413, 3.192898794854312, 2.920215710334156,\n    ],\n    mean: [\n      61.6243654822335, 13.563451776649746, 10.761421319796954, 6.527918781725888,\n      20.65482233502538, 4.934010152284264, 5.182741116751269,\n    ],\n  },\n  {\n    id: 11,\n    size: 176,\n    centroids: [\n      8.255681818181818, 16.181818181818183, 7.11931818181818, 4.619318181818182, 21.0625,\n      5.505681818181819,\n    ],\n    std: [\n      3.349621998445128, 3.4620343467651815, 3.3296776490755446, 2.945693532873097,\n      2.7583580190103967, 3.126214049887545, 3.078027492852078,\n    ],\n    mean: [\n      62.74431818181818, 8.255681818181818, 16.181818181818183, 7.119318181818182,\n      4.619318181818182, 21.0625, 5.505681818181818,\n    ],\n  },\n  {\n    id: 12,\n    size: 194,\n    centroids: [\n      3.5670103092783503, 14.773195876288659, 13.036082474226804, 13.185567010309278,\n      4.979381443298967, 12.144329896907218,\n    ],\n    std: [\n      3.89886364980042, 2.255251632823776, 2.5893570716174388, 3.248552824613239,\n      3.1004926799108317, 2.8845824993776903, 2.8864151735009584,\n    ],\n    mean: [\n      61.68556701030928, 3.5670103092783507, 14.77319587628866, 13.036082474226804,\n      13.185567010309278, 4.979381443298969, 12.144329896907216,\n    ],\n  },\n  {\n    id: 13,\n    size: 302,\n    centroids: [\n      5.311258278145695, 4.4701986754966905, 21.897350993377486, 10.688741721854305,\n      6.834437086092715, 12.605960264900663,\n    ],\n    std: [\n      5.1142628152416245, 2.9920946350614983, 2.6882491851253567, 3.071581172564087,\n      2.99431450280505, 3.116626644660552, 2.58548804104293,\n    ],\n    mean: [\n      61.80794701986755, 5.311258278145695, 4.470198675496689, 21.897350993377483,\n      10.688741721854305, 6.8344370860927155, 12.605960264900663,\n    ],\n  },\n  {\n    id: 14,\n    size: 364,\n    centroids: [\n      12.263736263736265, 11.32967032967033, 5.936813186813188, 8.524725274725274,\n      12.07142857142857, 7.782967032967034,\n    ],\n    std: [\n      6.666392881793753, 2.8942239993391565, 2.947866371540881, 3.041289192757803,\n      3.0876888182534996, 2.4540644069260296, 2.6803305558675676,\n    ],\n    mean: [\n      57.90934065934066, 12.263736263736265, 11.32967032967033, 5.936813186813187,\n      8.524725274725276, 12.071428571428571, 7.782967032967033,\n    ],\n  },\n  {\n    id: 15,\n    size: 219,\n    centroids: [\n      6.981735159817351, 5.9908675799086755, 18.127853881278536, 4.97716894977169,\n      5.182648401826483, 20.89041095890411,\n    ],\n    std: [\n      4.3335830659244685, 3.5503759593138464, 3.5270785628911785, 4.123339305032141,\n      2.7998081886699646, 3.283747903424203, 2.8311584355558064,\n    ],\n    mean: [\n      62.15068493150685, 6.981735159817352, 5.9908675799086755, 18.12785388127854,\n      4.9771689497716896, 5.1826484018264845, 20.89041095890411,\n    ],\n  },\n  {\n    id: 16,\n    size: 147,\n    centroids: [\n      6.285714285714285, 20.836734693877553, 4.8639455782312915, 17.510204081632654,\n      5.897959183673469, 7.394557823129253,\n    ],\n    std: [\n      3.358145469360083, 3.4877476344546254, 3.2245649941865486, 3.0557367019327,\n      4.0937094190209065, 3.1136788219952605, 3.842013283457479,\n    ],\n    mean: [\n      62.7891156462585, 6.285714285714286, 20.836734693877553, 4.863945578231292,\n      17.510204081632654, 5.8979591836734695, 7.394557823129252,\n    ],\n  },\n  {\n    id: 17,\n    size: 202,\n    centroids: [\n      18.425742574257423, 6.871287128712871, 6.678217821782177, 5.06930693069307, 20.40594059405941,\n      5.876237623762377,\n    ],\n    std: [\n      3.0226636827682554, 3.292828132097339, 3.518715749263091, 3.4627255810748356,\n      3.075363266145594, 3.5804283293104753, 3.315804113390658,\n    ],\n    mean: [\n      63.32673267326733, 18.425742574257427, 6.871287128712871, 6.678217821782178,\n      5.069306930693069, 20.405940594059405, 5.876237623762377,\n    ],\n  },\n  {\n    id: 18,\n    size: 286,\n    centroids: [\n      11.22027972027972, 7.073426573426573, 12.65034965034965, 12.594405594405593,\n      4.209790209790211, 13.220279720279722,\n    ],\n    std: [\n      4.720510224882134, 2.8685361372318168, 2.6005789112305338, 3.052197922484291,\n      2.451602446915686, 2.7244266014541174, 2.7638787756329526,\n    ],\n    mean: [\n      60.96853146853147, 11.22027972027972, 7.073426573426573, 12.65034965034965,\n      12.594405594405595, 4.20979020979021, 13.22027972027972,\n    ],\n  },\n  {\n    id: 19,\n    size: 197,\n    centroids: [\n      6.263959390862944, 8.568527918781726, 16.80710659898477, 4.000000000000003,\n      22.593908629441625, 4.883248730964468,\n    ],\n    std: [\n      2.7333118141791917, 3.3626657547151964, 3.4540163497542435, 2.646397291854302,\n      2.565469285152567, 3.018237668617547, 2.8287109641017594,\n    ],\n    mean: [\n      63.11675126903553, 6.2639593908629445, 8.568527918781726, 16.80710659898477, 4.0,\n      22.593908629441625, 4.883248730964467,\n    ],\n  },\n  {\n    id: 20,\n    size: 279,\n    centroids: [\n      18.025089605734767, 6.150537634408602, 6.161290322580646, 5.767025089605736,\n      7.999999999999998, 15.602150537634408,\n    ],\n    std: [\n      6.590788110639117, 3.6436721401086296, 3.165505073725202, 3.13700467469825,\n      2.7769973891540207, 3.4672154149710614, 4.017425492621824,\n    ],\n    mean: [\n      59.70609318996416, 18.025089605734767, 6.150537634408602, 6.161290322580645,\n      5.767025089605735, 8.0, 15.602150537634408,\n    ],\n  },\n  {\n    id: 21,\n    size: 78,\n    centroids: [\n      15.96153846153846, 16.85897435897436, 16.807692307692307, 3.552713678800501e-15,\n      5.329070518200751e-15, -5.329070518200751e-15,\n    ],\n    std: [2.095815090231219, 7.438828122504502, 7.482836393563639, 8.12413063050432, 0.0, 0.0, 0.0],\n    mean: [\n      49.62820512820513, 15.961538461538462, 16.858974358974358, 16.807692307692307, 0.0, 0.0, 0.0,\n    ],\n  },\n  {\n    id: 22,\n    size: 137,\n    centroids: [\n      4.525547445255475, 3.583941605839417, 23.532846715328468, 19.948905109489054,\n      4.3576642335766405, 6.248175182481752,\n    ],\n    std: [\n      2.9351806639916567, 2.7575572416084317, 2.2707939003224227, 2.908029186302962,\n      3.3306093063017315, 2.6644092885703916, 3.4848010785869454,\n    ],\n    mean: [\n      62.197080291970806, 4.525547445255475, 3.5839416058394162, 23.532846715328468,\n      19.94890510948905, 4.357664233576642, 6.248175182481752,\n    ],\n  },\n  {\n    id: 23,\n    size: 194,\n    centroids: [\n      13.242268041237114, 3.5103092783505163, 14.675257731958762, 19.55154639175258,\n      6.139175257731957, 5.092783505154641,\n    ],\n    std: [\n      3.810494814771566, 2.886105181640385, 2.0818477512276696, 2.6197152448917316,\n      3.409818599464837, 3.0311357231629183, 2.9733966349516936,\n    ],\n    mean: [\n      62.21134020618557, 13.242268041237113, 3.5103092783505154, 14.675257731958762,\n      19.551546391752577, 6.139175257731959, 5.092783505154639,\n    ],\n  },\n  {\n    id: 24,\n    size: 239,\n    centroids: [\n      5.569037656903766, 5.401673640167365, 20.92468619246862, 13.09205020920502,\n      13.497907949790793, 4.096234309623432,\n    ],\n    std: [\n      3.8502204432228733, 3.071015816571908, 3.081143061480697, 2.79904271710946, 2.169280265760518,\n      2.62802363192924, 2.3450167178621983,\n    ],\n    mean: [\n      62.58158995815899, 5.569037656903766, 5.401673640167364, 20.92468619246862,\n      13.092050209205022, 13.497907949790795, 4.096234309623431,\n    ],\n  },\n];\n\n@Component({\n  selector: \"app-armor-cluster-page\",\n  templateUrl: \"./armor-cluster-page.component.html\",\n  styleUrls: [\"./armor-cluster-page.component.css\"],\n})\nexport class ArmorClusterPageComponent implements AfterViewInit {\n  clusterInformation = clusterData;\n  items: Array<IInventoryArmor> = [];\n  clusters: IInventoryArmor[][] = [];\n\n  exoticFilter: number = 0;\n  masterworkFilter: number = 0;\n  classFilter: number = -1;\n\n  constructor(\n    private db: DatabaseService,\n    private _snackBar: MatSnackBar,\n    private inventory: InventoryService\n  ) {\n    this.clusterInformation = clusterData.sort((a, b) => {\n      return b.mean[3] - a.mean[3];\n    });\n  }\n\n  async ngAfterViewInit(): Promise<void> {\n    this.inventory.inventory.pipe(debounceTime(200)).subscribe(async () => {\n      await this.Update();\n      this.openSnackBar(\"Clusters were updated.\");\n    });\n  }\n\n  public async Update() {\n    var items = (await this.db.inventoryArmor.toArray()).filter(\n      (item) => item.source === InventoryArmorSource.Inventory\n    );\n\n    var clusters: IInventoryArmor[][] = [];\n    for (let i = 0; i < this.clusterInformation.length; i++) {\n      clusters.push([]);\n    }\n\n    for (let item of items) {\n      if (item.slot == ArmorSlot.ArmorSlotClass) continue;\n      if (item.slot == ArmorSlot.ArmorSlotNone) continue; // ignores stasis and halloween masks.\n\n      if (this.classFilter != -1 && item.clazz != this.classFilter) continue;\n      if (this.exoticFilter == -1 && item.isExotic) continue;\n      if (this.exoticFilter == 1 && !item.isExotic) continue;\n      if (this.masterworkFilter == -1 && item.masterworkLevel == MAXIMUM_MASTERWORK_LEVEL) continue;\n      if (this.masterworkFilter == 1 && item.masterworkLevel != MAXIMUM_MASTERWORK_LEVEL) continue;\n\n      var clusterId = this.getClusterid(item);\n      clusters[clusterId].push(item);\n    }\n    this.clusters = clusters;\n  }\n\n  openSnackBar(message: string) {\n    this._snackBar.open(message, \"\", {\n      duration: 2500,\n      politeness: \"polite\",\n    });\n  }\n\n  public getDIMStringForCluster(cluster: IInventoryArmor[]) {\n    return cluster.map((d) => `id:'${d.itemInstanceId}'`).join(\" or \");\n  }\n\n  vectorDistance(x: number[], y: number[]) {\n    return Math.sqrt(x.reduce((acc, val, i) => acc + Math.pow(val - y[i], 2), 0));\n  }\n\n  public getClusterid(item: IInventoryArmor): number {\n    var currentDist = Number.MAX_VALUE;\n    var currentId = -1;\n    for (let i = 0; i < this.clusterInformation.length; i++) {\n      const clusterDatum = this.clusterInformation[i];\n      var dist = this.vectorDistance(clusterDatum.mean, [\n        item.mobility +\n          item.resilience +\n          item.recovery +\n          item.discipline +\n          item.intellect +\n          item.strength,\n        item.mobility,\n        item.resilience,\n        item.recovery,\n        item.discipline,\n        item.intellect,\n        item.strength,\n      ]);\n      if (dist < currentDist) {\n        currentDist = dist;\n        currentId = i;\n      }\n    }\n\n    return currentId;\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<!--<div class=\"container\" [matTooltip]=\"statName\" #tooltip=\"matTooltip\">\n  <img class=\"modIcon\" [class.minor]=\"true\" [src]=\"ModUrl[1+3*stat]\">\n  <span class=\"modText\" [class.minor]=\"true\">×{{amountMinor}}</span>\n</div>\n-->\n\n<div class=\"row-mod\">\n  <ng-container *ngVar=\"artifice | count as artificeCount\">\n    <div class=\"container\" *ngIf=\"artificeCount > 0\" matTooltip=\"Artifice\" #tooltip=\"matTooltip\">\n      <img class=\"artificeIcon artifice\" [src]=\"artificeUrl\" />\n      <span class=\"modText artifice\">×{{ artificeCount }}</span>\n    </div>\n  </ng-container>\n\n  <ng-container *ngFor=\"let stat of modIndex\">\n    <ng-container *ngFor=\"let modType of modTypeIndex\">\n      <ng-container *ngVar=\"mods | count : modType + 3 * stat as count\">\n        <div\n          class=\"container\"\n          *ngIf=\"count > 0\"\n          [matTooltip]=\"getStatName(stat)\"\n          #tooltip=\"matTooltip\">\n          <img\n            class=\"modIcon modIcon_{{ getStatName(stat) }}\"\n            [class.minor]=\"modType === 1\"\n            [src]=\"ModUrl[modType + 3 * stat]\" />\n          <span class=\"modText\" [class.minor]=\"modType === 1\">×{{ count }}</span>\n        </div>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, Input } from \"@angular/core\";\nimport {\n  ArmorPerkOrSlot,\n  ArmorPerkOrSlotIcons,\n  ArmorStat,\n  ARMORSTAT_ORDER,\n  ArmorStatNames,\n  StatModifier,\n} from \"src/app/data/enum/armor-stat\";\n\nexport const ModUrl: { [k: number]: string } = {\n  [StatModifier.MINOR_WEAPON]:\n    \"https://www.bungie.net/common/destiny2_content/icons/e82d4e305e0023d2db21339f10bba477.png\",\n  [StatModifier.MAJOR_WEAPON]:\n    \"https://www.bungie.net/common/destiny2_content/icons/4f970366cc18cab100e849926a927b6f.png\",\n  [StatModifier.ARTIFICE_WEAPON]:\n    \"https://www.bungie.net/common/destiny2_content/icons/e82d4e305e0023d2db21339f10bba477.png\",\n  [StatModifier.MINOR_HEALTH]:\n    \"https://www.bungie.net/common/destiny2_content/icons/85f956602980f8fd2480a9908029256c.png\",\n  [StatModifier.MAJOR_HEALTH]:\n    \"https://www.bungie.net/common/destiny2_content/icons/c1328c7351bc775eb277454c393ac858.png\",\n  [StatModifier.ARTIFICE_HEALTH]:\n    \"https://www.bungie.net/common/destiny2_content/icons/85f956602980f8fd2480a9908029256c.png\",\n  [StatModifier.MINOR_CLASS]:\n    \"https://www.bungie.net/common/destiny2_content/icons/234a96c207a03c8f3bf213e7447f78d4.png\",\n  [StatModifier.MAJOR_CLASS]:\n    \"https://www.bungie.net/common/destiny2_content/icons/033f50a1d44a2cef3727b8aa98d9cd83.png\",\n  [StatModifier.ARTIFICE_CLASS]:\n    \"https://www.bungie.net/common/destiny2_content/icons/234a96c207a03c8f3bf213e7447f78d4.png\",\n  [StatModifier.MINOR_GRENADE]:\n    \"https://www.bungie.net/common/destiny2_content/icons/e8b5cabcee36d609239a508097ac5773.png\",\n  [StatModifier.MAJOR_GRENADE]:\n    \"https://www.bungie.net/common/destiny2_content/icons/774854aa449ce8053f708b88d10d35c5.png\",\n  [StatModifier.ARTIFICE_GRENADE]:\n    \"https://www.bungie.net/common/destiny2_content/icons/e8b5cabcee36d609239a508097ac5773.png\",\n  [StatModifier.MINOR_SUPER]:\n    \"https://www.bungie.net/common/destiny2_content/icons/77a99f4c2306652ec53324600f2d7f62.png\",\n  [StatModifier.MAJOR_SUPER]:\n    \"https://www.bungie.net/common/destiny2_content/icons/acccc4fe0cd51007278f1559065e0b12.png\",\n  [StatModifier.ARTIFICE_SUPER]:\n    \"https://www.bungie.net/common/destiny2_content/icons/77a99f4c2306652ec53324600f2d7f62.png\",\n  [StatModifier.MINOR_MELEE]:\n    \"https://www.bungie.net/common/destiny2_content/icons/6b45221fccade87ee39f3a03efc6e9b9.png\",\n  [StatModifier.MAJOR_MELEE]:\n    \"https://www.bungie.net/common/destiny2_content/icons/66714f030b79a1517c657f1378216cca.png\",\n  [StatModifier.ARTIFICE_MELEE]:\n    \"https://www.bungie.net/common/destiny2_content/icons/6b45221fccade87ee39f3a03efc6e9b9.png\",\n};\n\n@Component({\n  selector: \"app-table-mod-display\",\n  templateUrl: \"./table-mod-display.component.html\",\n  styleUrls: [\"./table-mod-display.component.css\"],\n})\nexport class TableModDisplayComponent {\n  artificeUrl = ArmorPerkOrSlotIcons[ArmorPerkOrSlot.SlotArtifice];\n  modIndex = ARMORSTAT_ORDER;\n  modTypeIndex = [1, 2];\n  ModUrl = ModUrl;\n  @Input()\n  mods: number[] = [];\n\n  @Input()\n  artifice: number[] = [];\n\n  constructor() {}\n\n  getStatName(stat: number) {\n    return ArmorStatNames[stat as ArmorStat];\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<mat-card appearance=\"outlined\" id=\"description\">\n  <mat-card-header>\n    <mat-card-title> Armor Investigation </mat-card-title>\n    <mat-card-subtitle> A visualization tool for data scientists. </mat-card-subtitle>\n  </mat-card-header>\n\n  <mat-card-content>\n    This part of the D2ArmorPicker lists all of your armor items. For each armor it shows how it is\n    generated. It shows every used <i>\"plug\"</i>, as well as the intrinsic stats of exotics. For\n    more information about plugs, see\n    <a\n      href=\"https://www.reddit.com/r/DestinyTheGame/comments/mpaopq/how_armor_stats_roll_an_advanced_insight_into/\"\n      target=\"_blank\"\n      >here</a\n    >. Make sure to give the author an upvote for the hard work! <br /><br />\n    Please note that this feature is mainly targeted for data nerds and people interested in the\n    basic stats of armor. It is just a data visualization. Mobile layout and a search function\n    <i>may</i> happen in the future.\n  </mat-card-content>\n  <mat-card-header>\n    <mat-card-title> Filters </mat-card-title>\n    <mat-card-subtitle> Some filters. Nothing fancy but it works. Sorry ;) </mat-card-subtitle>\n  </mat-card-header>\n\n  <mat-card-content>\n    <table>\n      <tr>\n        <td colspan=\"3\">\n          <mat-form-field appearance=\"outline\" subscriptSizing=\"dynamic\">\n            <mat-label>Item Name</mat-label>\n            <input matInput placeholder=\"Stronghold\" [(ngModel)]=\"armorName\" />\n          </mat-form-field>\n        </td>\n        <td colspan=\"3\">\n          <mat-form-field appearance=\"outline\" subscriptSizing=\"dynamic\">\n            <mat-label>Item Hash</mat-label>\n            <input matInput [(ngModel)]=\"armorHash\" />\n          </mat-form-field>\n        </td>\n        <td colspan=\"3\">\n          <mat-form-field appearance=\"outline\" subscriptSizing=\"dynamic\">\n            <mat-label>Item ID</mat-label>\n            <input matInput [(ngModel)]=\"armorId\" />\n          </mat-form-field>\n        </td>\n      </tr>\n      <tr>\n        <td> Weapon: </td>\n        <td> {{ minWeapon }}</td>\n        <td>\n          <!-- TODO: The 'tickInterval' property no longer exists -->\n          <mat-slider max=\"32\" min=\"0\" step=\"1\" thumbLabel\n            ><input matSliderThumb [(value)]=\"minWeapon\"\n          /></mat-slider>\n        </td>\n\n        <td> Health: </td>\n        <td> {{ minHealth }}</td>\n        <td>\n          <!-- TODO: The 'tickInterval' property no longer exists -->\n          <mat-slider max=\"32\" min=\"0\" step=\"1\" thumbLabel\n            ><input matSliderThumb [(value)]=\"minHealth\"\n          /></mat-slider>\n        </td>\n\n        <td> Class: </td>\n        <td> {{ minClass }}</td>\n        <td>\n          <!-- TODO: The 'tickInterval' property no longer exists -->\n          <mat-slider max=\"32\" min=\"0\" step=\"1\" thumbLabel\n            ><input matSliderThumb [(value)]=\"minClass\"\n          /></mat-slider>\n        </td>\n      </tr>\n      <tr>\n        <td> Grenade: </td>\n        <td> {{ minGrenade }}</td>\n        <td>\n          <!-- TODO: The 'tickInterval' property no longer exists -->\n          <mat-slider max=\"32\" min=\"0\" step=\"1\" thumbLabel\n            ><input matSliderThumb [(value)]=\"minGrenade\"\n          /></mat-slider>\n        </td>\n        <td> Super: </td>\n        <td> {{ minSuper }}</td>\n        <td>\n          <!-- TODO: The 'tickInterval' property no longer exists -->\n          <mat-slider max=\"32\" min=\"0\" step=\"1\" thumbLabel\n            ><input matSliderThumb [(value)]=\"minSuper\"\n          /></mat-slider>\n        </td>\n        <td> Melee: </td>\n        <td>{{ minMelee }}</td>\n        <td>\n          <!-- TODO: The 'tickInterval' property no longer exists -->\n          <mat-slider max=\"32\" min=\"0\" step=\"1\" thumbLabel\n            ><input matSliderThumb [(value)]=\"minMelee\"\n          /></mat-slider>\n        </td>\n      </tr>\n      <tr>\n        <td> Any plug >=: </td>\n        <td>{{ anyPlugWithN }}</td>\n        <td>\n          <!-- TODO: The 'tickInterval' property no longer exists -->\n          <mat-slider max=\"17\" min=\"0\" step=\"1\" thumbLabel\n            ><input matSliderThumb [(value)]=\"anyPlugWithN\"\n          /></mat-slider>\n        </td>\n        <td> Any Plug <=: </td>\n        <td>{{ anyPlugBelowN }}</td>\n        <td>\n          <!-- TODO: The 'tickInterval' property no longer exists -->\n          <mat-slider max=\"17\" min=\"0\" step=\"1\" thumbLabel\n            ><input matSliderThumb [(value)]=\"anyPlugBelowN\"\n          /></mat-slider>\n        </td>\n      </tr>\n      <tr>\n        <td> All plugs >=: </td>\n        <td>{{ allPlugsWithN }}</td>\n        <td>\n          <!-- TODO: The 'tickInterval' property no longer exists -->\n          <mat-slider max=\"17\" min=\"0\" step=\"1\" thumbLabel\n            ><input matSliderThumb [(value)]=\"allPlugsWithN\"\n          /></mat-slider>\n        </td>\n        <td> All Plugs <=: </td>\n        <td>{{ allPlugsBelowN }}</td>\n        <td>\n          <!-- TODO: The 'tickInterval' property no longer exists -->\n          <mat-slider max=\"17\" min=\"0\" step=\"1\" thumbLabel\n            ><input matSliderThumb [(value)]=\"allPlugsBelowN\"\n          /></mat-slider>\n        </td>\n      </tr>\n      <tr>\n        <td colspan=\"3\">\n          <mat-form-field appearance=\"outline\" subscriptSizing=\"dynamic\">\n            <mat-label>Armor System</mat-label>\n            <mat-select [(ngModel)]=\"armorSystemFilter\">\n              <mat-option [value]=\"0\">Any</mat-option>\n              <mat-option [value]=\"2\">Armor 2.0</mat-option>\n              <mat-option [value]=\"3\">Armor 3.0</mat-option>\n            </mat-select>\n          </mat-form-field>\n        </td>\n      </tr>\n    </table>\n\n    <a mat-raised-button color=\"primary\" (click)=\"updateItems()\">Update</a>&nbsp;\n    <a mat-raised-button color=\"warn\" (click)=\"clear()\">Clear</a>\n  </mat-card-content>\n</mat-card>\n\n<ng-container *ngFor=\"let armorItems of armorItemsPerSlot | keyvalue\">\n  <mat-toolbar>\n    {{ getCategoryName(armorItems.key) }}\n  </mat-toolbar>\n  <br />\n\n  <div\n    class=\"armor-container\"\n    [style.display]=\"'flex'\"\n    [style.display]=\"'flex'\"\n    [style.flex-direction]=\"'row'\"\n    [style.gap]=\"'10px'\">\n    <ng-container *ngFor=\"let armor of armorItems.value; let idx = index\">\n      <mat-card appearance=\"outlined\" class=\"cluster-item\">\n        <mat-card-header>\n          <mat-card-title>\n            {{ armor.name }}\n          </mat-card-title>\n        </mat-card-header>\n        <mat-card-content>\n          <table>\n            <tr>\n              <td colspan=\"2\">Hash:</td>\n              <td>\n                <a\n                  alt=\"This armor on data.destinysets.com\"\n                  href=\"https://data.destinysets.com/i/InventoryItem:{{ armor.hash }}\"\n                  target=\"_blank\">\n                  <img\n                    src=\"https://data.destinysets.com/static/media/logo.556bd7bd.svg\"\n                    style=\"width: 15px\" />\n                </a>\n                {{ armor.hash }}</td\n              >\n            </tr>\n            <tr>\n              <td colspan=\"2\">ItemInstanceId:</td>\n              <td>{{ armor.itemInstanceId }}</td>\n            </tr>\n            <tr>\n              <td colspan=\"2\">Sunset?</td>\n              <td>{{ armor.isSunset }}</td>\n            </tr>\n            <tr>\n              <td>Total</td>\n              <td>{{ armor.totalSum }}</td>\n            </tr>\n            <ng-container\n              *ngFor=\"\n                let entry of [\n                  armor.mobility,\n                  armor.resilience,\n                  armor.recovery,\n                  armor.discipline,\n                  armor.intellect,\n                  armor.strength,\n                ];\n                let idx1 = index\n              \">\n              <tr [matTooltip]=\"['Weapon', 'Health', 'Class', 'Grenade', 'Super', 'Melee'][idx1]\">\n                <td>\n                  {{ [\"Weapon\", \"Health\", \"Class\", \"Grenade\", \"Super\", \"Melee\"][idx1] }}\n                </td>\n                <td>{{ armor.totalStats[idx1] | number: \"1.0-0\" }}</td>\n                <td width=\"100%\">\n                  <div class=\"stat-range\">\n                    <div\n                      *ngFor=\"let ci of entry; let id2 = index\"\n                      class=\"stat-range-bar stat-range-bar{{ id2 + (idx1 >= 3 ? 3 : 0) }}\"\n                      [style.width]=\"(ci / 32) * 100 + '%'\"></div>\n                  </div>\n                </td>\n              </tr>\n            </ng-container>\n          </table>\n        </mat-card-content>\n        <mat-card-content>\n          Plugs:\n          <table>\n            <tr>\n              <td>Plug</td>\n              <td>Total</td>\n              <td>Values</td>\n            </tr>\n            <tr *ngFor=\"let plug of armor.statPlugHashes\">\n              <td>\n                <a\n                  alt=\"This plug on data.destinysets.com\"\n                  href=\"https://data.destinysets.com/i/InventoryItem:{{ plug }}\"\n                  target=\"_blank\">\n                  <img\n                    src=\"https://data.destinysets.com/static/media/logo.556bd7bd.svg\"\n                    style=\"width: 15px\" />\n                </a>\n                {{ plug }}</td\n              >\n              <td class=\"plug-sum-col\">{{ getPlugSum(plug) }}</td>\n              <td>{{ getPlugString(plug) }}</td>\n            </tr>\n          </table>\n        </mat-card-content>\n      </mat-card>\n    </ng-container>\n  </div>\n</ng-container>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { Subject } from \"rxjs\";\nimport { debounceTime, takeUntil } from \"rxjs/operators\";\nimport { InventoryService } from \"../../../../services/inventory.service\";\nimport { IInventoryArmor, InventoryArmorSource } from \"../../../../data/types/IInventoryArmor\";\nimport { DatabaseService } from \"../../../../services/database.service\";\nimport { ArmorSystem, IManifestArmor } from \"../../../../data/types/IManifestArmor\";\nimport { ArmorSlot } from \"../../../../data/enum/armor-slot\";\n\ntype LocalArmorInfo = {\n  isSunset: boolean;\n  slot: ArmorSlot;\n  totalSum: number;\n  totalStats: number[];\n  itemInstanceId: string;\n  mobility: number[];\n  intellect: number[];\n  strength: number[];\n  statPlugHashes: number[];\n  name: string;\n  recovery: number[];\n  discipline: number[];\n  resilience: number[];\n  hash: number;\n  armorSystem: ArmorSystem;\n};\n\n@Component({\n  selector: \"app-armor-investigation-page\",\n  templateUrl: \"./armor-investigation-page.component.html\",\n  styleUrls: [\"./armor-investigation-page.component.css\"],\n})\nexport class ArmorInvestigationPageComponent implements OnInit, OnDestroy {\n  minWeapon: number | null = 0;\n  minHealth: number | null = 0;\n  minClass: number | null = 0;\n  minGrenade: number | null = 0;\n  minSuper: number | null = 0;\n  minMelee: number | null = 0;\n  anyPlugWithN: number | null = 0;\n  anyPlugBelowN: number | null = 17;\n  allPlugsWithN: number | null = 0;\n  allPlugsBelowN: number | null = 17;\n\n  armorName: string | null = \"\";\n  armorHash: string | null = \"\";\n  armorId: string | null = \"\";\n\n  armorSystemFilter: number = 0; // 0 = Any, 2 = Armor 2.0, 3 = Armor 3.0\n\n  armorItemsPerSlot: Map<ArmorSlot, LocalArmorInfo[]> = new Map();\n\n  plugData: { [p: string]: IManifestArmor } = {};\n\n  constructor(\n    public inventory: InventoryService,\n    private db: DatabaseService\n  ) {}\n\n  ngOnInit(): void {\n    this.inventory.inventory\n      .pipe(debounceTime(10), takeUntil(this.ngUnsubscribe))\n      .subscribe(async () => {\n        this.updateItems();\n      });\n  }\n\n  getPlugString(plugId: number) {\n    var plugInfo = this.plugData[plugId];\n    if (!plugInfo) {\n      return \"No Plug\";\n    }\n\n    let info = [0, 0, 0, 0, 0, 0];\n    for (let stat of plugInfo.investmentStats) {\n      switch (stat.statTypeHash) {\n        case 2996146975:\n          info[0] += stat.value;\n          break;\n        case 392767087:\n          info[1] += stat.value;\n          break;\n        case 1943323491:\n          info[2] += stat.value;\n          break;\n        case 1735777505:\n          info[3] += stat.value;\n          break;\n        case 144602215:\n          info[4] += stat.value;\n          break;\n        case 4244567218:\n          info[5] += stat.value;\n          break;\n      }\n    }\n\n    let r = \"[\" + info.join(\" \") + \"]\";\n    if (plugInfo.name) {\n      r += \" \" + plugInfo.name;\n    }\n\n    return r;\n  }\n\n  async updateItems() {\n    let manifestArmor = await this.db.manifestArmor.toArray();\n    const modsData = manifestArmor.filter((d) => d.itemType == 19);\n    let plugData = Object.fromEntries(modsData.map((_) => [_.hash, _]));\n    this.plugData = plugData;\n\n    let armorItems = ((await this.db.inventoryArmor.toArray()) as IInventoryArmor[])\n      .filter((i) => i.source === InventoryArmorSource.Inventory)\n      .sort((a, b) => (\"\" + a.name).localeCompare(b.name))\n      .map((i: IInventoryArmor) => {\n        var result = {\n          name: i.name,\n          hash: i.hash,\n          isSunset: i.isSunset,\n          itemInstanceId: i.itemInstanceId,\n          statPlugHashes: i.statPlugHashes as number[],\n          mobility: [] as number[],\n          resilience: [] as number[],\n          recovery: [] as number[],\n          discipline: [] as number[],\n          intellect: [] as number[],\n          strength: [] as number[],\n          totalStats: [0, 0, 0, 0, 0, 0],\n          totalSum: 0,\n          slot: i.slot,\n          armorSystem: (i as any).armorSystem, // falls vorhanden\n        } as LocalArmorInfo;\n        // add stat plugs\n        if (i.statPlugHashes)\n          for (let p of i.statPlugHashes) {\n            if (p == undefined || p == null) continue; // skip undefined plugs\n            var plugInfo = plugData[p as number];\n            if (!plugInfo) {\n              continue;\n            }\n            for (let stat of plugInfo.investmentStats) {\n              switch (stat.statTypeHash) {\n                case 2996146975:\n                  result.mobility.push(stat.value);\n                  result.totalStats[0] += stat.value;\n                  break;\n                case 392767087:\n                  result.resilience.push(stat.value);\n                  result.totalStats[1] += stat.value;\n                  break;\n                case 1943323491:\n                  result.recovery.push(stat.value);\n                  result.totalStats[2] += stat.value;\n                  break;\n                case 1735777505:\n                  result.discipline.push(stat.value);\n                  result.totalStats[3] += stat.value;\n                  break;\n                case 144602215:\n                  result.intellect.push(stat.value);\n                  result.totalStats[4] += stat.value;\n                  break;\n                case 4244567218:\n                  result.strength.push(stat.value);\n                  result.totalStats[5] += stat.value;\n                  break;\n              }\n            }\n          }\n\n        // Intrinsics\n        if (i.investmentStats) {\n          for (let stat of i.investmentStats) {\n            switch (stat.statTypeHash) {\n              case 2996146975:\n                result.mobility.push(stat.value);\n                result.totalStats[0] += stat.value;\n                break;\n              case 392767087:\n                result.resilience.push(stat.value);\n                result.totalStats[1] += stat.value;\n                break;\n              case 1943323491:\n                result.recovery.push(stat.value);\n                result.totalStats[2] += stat.value;\n                break;\n              case 1735777505:\n                result.discipline.push(stat.value);\n                result.totalStats[3] += stat.value;\n                break;\n              case 144602215:\n                result.intellect.push(stat.value);\n                result.totalStats[4] += stat.value;\n                break;\n              case 4244567218:\n                result.strength.push(stat.value);\n                result.totalStats[5] += stat.value;\n                break;\n            }\n          }\n        }\n\n        for (let s of result.totalStats) result.totalSum += s;\n\n        return result;\n      });\n\n    // Filter nach armorSystem\n    if (\n      this.armorSystemFilter === ArmorSystem.Armor2 ||\n      this.armorSystemFilter === ArmorSystem.Armor3\n    ) {\n      armorItems = armorItems.filter((i) => i.armorSystem === this.armorSystemFilter);\n    }\n\n    armorItems = this.filterItems(armorItems);\n\n    this.armorItemsPerSlot = armorItems.reduce((p, v) => {\n      const slot = !v.slot ? 10 : v.slot;\n      if (!p.has(slot)) p.set(slot, []);\n      p.get(slot)?.push(v);\n\n      return p;\n    }, new Map<ArmorSlot, LocalArmorInfo[]>());\n  }\n\n  private ngUnsubscribe = new Subject();\n\n  ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n\n  getCategoryName(id: number): string {\n    switch (id) {\n      case 1:\n        return \"Helmets\";\n      case 2:\n        return \"Gauntlets\";\n      case 3:\n        return \"Chest Pieces\";\n      case 4:\n        return \"Legs\";\n      case 5:\n        return \"Class Items\";\n    }\n    return \"Unknown Category\";\n  }\n\n  getPlugSum(plugId: number) {\n    var plugInfo = this.plugData[plugId];\n    if (!plugInfo) {\n      console.warn(`Plug info not found for hash: ${plugId}`);\n      return 0;\n    }\n    var total = 0;\n    for (let stat of plugInfo.investmentStats) {\n      switch (stat.statTypeHash) {\n        case 2996146975:\n        case 392767087:\n        case 1943323491:\n        case 1735777505:\n        case 144602215:\n        case 4244567218:\n          total += stat.value;\n          break;\n      }\n    }\n    return total;\n  }\n\n  clear() {\n    this.armorName = \"\";\n    this.armorHash = \"\";\n    this.armorId = \"\";\n\n    this.minWeapon = 0;\n    this.minHealth = 0;\n    this.minClass = 0;\n    this.minGrenade = 0;\n    this.minSuper = 0;\n    this.minMelee = 0;\n\n    this.anyPlugWithN = 0;\n    this.anyPlugBelowN = 17;\n    this.armorSystemFilter = 0;\n  }\n\n  private filterItems(armorItems: LocalArmorInfo[]) {\n    if (!!this.armorName)\n      armorItems = armorItems.filter((i) => i.name.toLowerCase().indexOf(this.armorName!) > -1);\n    if (!!this.armorHash)\n      armorItems = armorItems.filter((i) => (i.hash || 0).toString().indexOf(this.armorHash!) > -1);\n    if (!!this.armorId)\n      armorItems = armorItems.filter(\n        (i) => (i.itemInstanceId || 0).toString().indexOf(this.armorId!) > -1\n      );\n\n    armorItems = armorItems.filter((i) => i.totalStats[0] >= (this.minWeapon || 0));\n    armorItems = armorItems.filter((i) => i.totalStats[1] >= (this.minHealth || 0));\n    armorItems = armorItems.filter((i) => i.totalStats[2] >= (this.minClass || 0));\n    armorItems = armorItems.filter((i) => i.totalStats[3] >= (this.minGrenade || 0));\n    armorItems = armorItems.filter((i) => i.totalStats[4] >= (this.minSuper || 0));\n    armorItems = armorItems.filter((i) => i.totalStats[5] >= (this.minMelee || 0));\n    if ((this.anyPlugWithN ?? 0) > 0)\n      armorItems = armorItems.filter(\n        (i) =>\n          (i.statPlugHashes || []).filter((pl) => this.getPlugSum(pl) >= (this.anyPlugWithN || 0))\n            .length > 0\n      );\n\n    if ((this.anyPlugBelowN ?? 0) < 17)\n      armorItems = armorItems.filter(\n        (i) =>\n          (i.statPlugHashes || []).filter((pl) => this.getPlugSum(pl) <= (this.anyPlugBelowN || 0))\n            .length > 0\n      );\n\n    if ((this.allPlugsWithN ?? 0) > 0)\n      armorItems = armorItems.filter(\n        (i) =>\n          (i.statPlugHashes || []).filter((pl) => this.getPlugSum(pl) < (this.allPlugsWithN || 0))\n            .length == 0\n      );\n    if ((this.allPlugsBelowN ?? 0) < 17)\n      armorItems = armorItems.filter(\n        (i) =>\n          (i.statPlugHashes || []).filter((pl) => this.getPlugSum(pl) > (this.allPlugsBelowN || 0))\n            .length == 0\n      );\n\n    return armorItems;\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component } from \"@angular/core\";\nimport { DatabaseService } from \"../../../../services/database.service\";\nimport { InventoryService } from \"../../../../services/inventory.service\";\nimport { AuthService } from \"../../../../services/auth.service\";\n\n@Component({\n  selector: \"app-account-config-page\",\n  templateUrl: \"./account-config-page.component.html\",\n  styleUrls: [\"./account-config-page.component.css\"],\n})\nexport class AccountConfigPageComponent {\n  constructor(\n    private db: DatabaseService,\n    public inv: InventoryService,\n    private loginService: AuthService\n  ) {}\n\n  async downloadArmorInformation() {\n    const armor = await this.db.inventoryArmor.toArray();\n\n    const url = window.URL.createObjectURL(new Blob([JSON.stringify(armor, null, 2)]));\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.setAttribute(\"download\", \"d2ap_armor.json\");\n    document.body.appendChild(link);\n    link.click();\n  }\n\n  async downloadManifestInformation() {\n    const data = await this.db.manifestArmor.toArray();\n\n    const url = window.URL.createObjectURL(new Blob([JSON.stringify(data, null, 1)]));\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.setAttribute(\"download\", \"d2ap_manifest.json\");\n    document.body.appendChild(link);\n    link.click();\n  }\n\n  async resetDatabase() {\n    await this.db.resetDatabase();\n    await this.inv.refreshAll(true, true);\n  }\n\n  async resetEverything() {\n    localStorage.clear();\n    await this.db.resetDatabase();\n    await this.loginService.logout();\n  }\n}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div id=\"account-config-container\">\n  <a class=\"returnbutton hide-gt-sm\" color=\"primary\" mat-raised-button routerLink=\"/\">\n    Return to D2ArmorPicker\n  </a>\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title> Account Configuration </mat-card-title>\n      <mat-card-subtitle>\n        The configuration on this page will not be reset when you reset your build settings.\n      </mat-card-subtitle>\n    </mat-card-header>\n\n    <mat-card-content>\n      This will come in a future update. Right now, I just wanted to push the \"Debugging\" section\n      out.\n    </mat-card-content>\n  </mat-card>\n\n  <mat-card appearance=\"outlined\">\n    <mat-card-header>\n      <mat-card-title> Debugging </mat-card-title>\n      <mat-card-subtitle> Some options for debugging purposes. </mat-card-subtitle>\n    </mat-card-header>\n\n    <mat-card-content>\n      If the team asks you to send some specific data, you can find it here:<br />\n      <a\n        (click)=\"downloadArmorInformation()\"\n        class=\"btn-download\"\n        color=\"primary\"\n        mat-raised-button>\n        Download armor information (d2ap_armor.json)\n      </a>\n      <a\n        (click)=\"downloadManifestInformation()\"\n        class=\"btn-download\"\n        color=\"primary\"\n        mat-raised-button>\n        Download manifest information (d2ap_manifest.json)\n      </a>\n      <br />\n      <br />\n\n      If you experience issues with the local database - for example, exotics not being found, try\n      this:<br />\n      <a (click)=\"resetDatabase()\" class=\"btn-download\" color=\"warn\" mat-raised-button>\n        Delete Database </a\n      ><br />\n      If you really want to reset EVERYTHING, use this: <br />\n      <a (click)=\"resetEverything()\" class=\"btn-download\" color=\"warn\" mat-raised-button>\n        Reset the whole application\n      </a>\n    </mat-card-content>\n  </mat-card>\n\n  <a class=\"returnbutton hide-gt-sm\" color=\"primary\" mat-raised-button routerLink=\"/\">\n    Return to D2ArmorPicker\n  </a>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { NgModule } from \"@angular/core\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatFormFieldModule } from \"@angular/material/form-field\";\nimport { MatSelectModule } from \"@angular/material/select\";\nimport { MatOptionModule } from \"@angular/material/core\";\nimport { MatSliderModule } from \"@angular/material/slider\";\nimport { MatInputModule } from \"@angular/material/input\";\nimport { MatSlideToggleModule } from \"@angular/material/slide-toggle\";\nimport { MatTableModule } from \"@angular/material/table\";\nimport { MatCardModule } from \"@angular/material/card\";\nimport { MatTooltipModule } from \"@angular/material/tooltip\";\nimport { MatProgressBarModule } from \"@angular/material/progress-bar\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatSortModule } from \"@angular/material/sort\";\nimport { MatPaginatorModule } from \"@angular/material/paginator\";\nimport { MatToolbarModule } from \"@angular/material/toolbar\";\nimport { MatMenuModule } from \"@angular/material/menu\";\nimport { MatButtonToggleModule } from \"@angular/material/button-toggle\";\nimport { MatListModule } from \"@angular/material/list\";\nimport { MatExpansionModule } from \"@angular/material/expansion\";\nimport { MatDialogModule } from \"@angular/material/dialog\";\nimport { MatSnackBarModule } from \"@angular/material/snack-bar\";\nimport { MatProgressSpinnerModule } from \"@angular/material/progress-spinner\";\nimport { MatTabsModule } from \"@angular/material/tabs\";\nimport { MatChipsModule } from \"@angular/material/chips\";\nimport { MatSidenavModule } from \"@angular/material/sidenav\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\n@NgModule({\n  declarations: [],\n  imports: [\n    MatButtonModule,\n    MatFormFieldModule,\n    MatSelectModule,\n    MatOptionModule,\n    MatSliderModule,\n    MatInputModule,\n    MatSlideToggleModule,\n    MatTableModule,\n    MatCardModule,\n    MatTooltipModule,\n    MatProgressBarModule,\n    MatIconModule,\n    MatSortModule,\n    MatPaginatorModule,\n    MatToolbarModule,\n    MatMenuModule,\n    MatButtonToggleModule,\n    MatListModule,\n    MatExpansionModule,\n    MatDialogModule,\n    MatSnackBarModule,\n    MatProgressSpinnerModule,\n    MatTabsModule,\n    MatChipsModule,\n    MatSidenavModule,\n    ReactiveFormsModule,\n    FormsModule,\n  ],\n  exports: [\n    ReactiveFormsModule,\n    FormsModule,\n    MatButtonModule,\n    MatFormFieldModule,\n    MatSelectModule,\n    MatOptionModule,\n    MatSliderModule,\n    MatInputModule,\n    MatSlideToggleModule,\n    MatTableModule,\n    MatCardModule,\n    MatTooltipModule,\n    MatProgressBarModule,\n    MatIconModule,\n    MatSortModule,\n    MatPaginatorModule,\n    MatToolbarModule,\n    MatMenuModule,\n    MatButtonToggleModule,\n    MatListModule,\n    MatExpansionModule,\n    MatDialogModule,\n    MatSnackBarModule,\n    MatProgressSpinnerModule,\n    MatTabsModule,\n    MatChipsModule,\n    MatSidenavModule,\n  ],\n})\nexport class CommonMaterialModule {}\n","<!--\n  ~ Copyright (c) 2023 D2ArmorPicker by Mijago.\n  ~\n  ~ This program is free software: you can redistribute it and/or modify\n  ~ it under the terms of the GNU Affero General Public License as published\n  ~ by the Free Software Foundation, either version 3 of the License, or\n  ~ (at your option) any later version.\n  ~\n  ~ This program is distributed in the hope that it will be useful,\n  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  ~ GNU Affero General Public License for more details.\n  ~\n  ~ You should have received a copy of the GNU Affero General Public License\n  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<div class=\"card-view-container\">\n  <!-- Filters and Sort Controls -->\n  <div class=\"filters-container\" *ngIf=\"filteredResults.length > 0\">\n    <div class=\"results-count\">\n      Showing {{ displayedResults.length }} of {{ filteredResults.length }} results\n    </div>\n\n    <div class=\"sort-controls\">\n      <span class=\"sort-label\">Sort by:</span>\n\n      <button\n        mat-icon-button\n        class=\"sort-button\"\n        [class.active]=\"activeSortField === 'total'\"\n        (click)=\"toggleSort('total')\"\n        matTooltip=\"Sort by Total Stats\">\n        <span class=\"sort-text\">Total</span>\n        <mat-icon class=\"sort-icon\">{{ getSortIcon(\"total\") }}</mat-icon>\n      </button>\n\n      <button\n        mat-icon-button\n        class=\"sort-button\"\n        [class.active]=\"activeSortField === 'mods'\"\n        (click)=\"toggleSort('mods')\"\n        matTooltip=\"Sort by Mod Cost\">\n        <span class=\"sort-text\">Mods</span>\n        <mat-icon class=\"sort-icon\">{{ getSortIcon(\"mods\") }}</mat-icon>\n      </button>\n\n      <button\n        mat-icon-button\n        class=\"sort-button\"\n        [class.active]=\"activeSortField === 'health'\"\n        (click)=\"toggleSort('health')\"\n        matTooltip=\"Sort by Health\">\n        <img [src]=\"getStatIcon(1)\" alt=\"Health\" class=\"sort-stat-icon\" />\n        <mat-icon class=\"sort-icon\">{{ getSortIcon(\"health\") }}</mat-icon>\n      </button>\n\n      <button\n        mat-icon-button\n        class=\"sort-button\"\n        [class.active]=\"activeSortField === 'melee'\"\n        (click)=\"toggleSort('melee')\"\n        matTooltip=\"Sort by Melee\">\n        <img [src]=\"getStatIcon(5)\" alt=\"Melee\" class=\"sort-stat-icon\" />\n        <mat-icon class=\"sort-icon\">{{ getSortIcon(\"melee\") }}</mat-icon>\n      </button>\n\n      <button\n        mat-icon-button\n        class=\"sort-button\"\n        [class.active]=\"activeSortField === 'grenade'\"\n        (click)=\"toggleSort('grenade')\"\n        matTooltip=\"Sort by Grenade\">\n        <img [src]=\"getStatIcon(3)\" alt=\"Grenade\" class=\"sort-stat-icon\" />\n        <mat-icon class=\"sort-icon\">{{ getSortIcon(\"grenade\") }}</mat-icon>\n      </button>\n\n      <button\n        mat-icon-button\n        class=\"sort-button\"\n        [class.active]=\"activeSortField === 'super'\"\n        (click)=\"toggleSort('super')\"\n        matTooltip=\"Sort by Super\">\n        <img [src]=\"getStatIcon(4)\" alt=\"Super\" class=\"sort-stat-icon\" />\n        <mat-icon class=\"sort-icon\">{{ getSortIcon(\"super\") }}</mat-icon>\n      </button>\n\n      <button\n        mat-icon-button\n        class=\"sort-button\"\n        [class.active]=\"activeSortField === 'class'\"\n        (click)=\"toggleSort('class')\"\n        matTooltip=\"Sort by Class\">\n        <img [src]=\"getStatIcon(2)\" alt=\"Class\" class=\"sort-stat-icon\" />\n        <mat-icon class=\"sort-icon\">{{ getSortIcon(\"class\") }}</mat-icon>\n      </button>\n\n      <button\n        mat-icon-button\n        class=\"sort-button\"\n        [class.active]=\"activeSortField === 'weapon'\"\n        (click)=\"toggleSort('weapon')\"\n        matTooltip=\"Sort by Weapon\">\n        <img [src]=\"getStatIcon(0)\" alt=\"Weapon\" class=\"sort-stat-icon\" />\n        <mat-icon class=\"sort-icon\">{{ getSortIcon(\"weapon\") }}</mat-icon>\n      </button>\n    </div>\n  </div>\n\n  <!-- Cards Container -->\n  <div class=\"cards-container\" (scroll)=\"onScroll($event)\">\n    <div class=\"card-grid\">\n      <mat-card\n        *ngFor=\"let result of displayedResults; let i = index; trackBy: trackByFn\"\n        class=\"result-card\"\n        [class.expanded]=\"expandedCard === i\"\n        (click)=\"toggleCard(i)\"\n        appearance=\"outlined\">\n        <!-- Compact View -->\n        <div class=\"card-compact\" [class.hidden]=\"expandedCard === i\">\n          <!-- First Row: Exotic, Stats, Mods, Total -->\n          <div class=\"card-header\">\n            <div class=\"exotic-section\">\n              <div class=\"exotic-icon\">\n                <img\n                  *ngIf=\"result.exotic\"\n                  [src]=\"'https://bungie.net/' + result.exotic.icon\"\n                  [alt]=\"result.exotic.name\"\n                  class=\"exotic-img\" />\n                <img\n                  *ngIf=\"!result.exotic\"\n                  src=\"https://www.bungie.net/common/destiny2_content/icons/b4d05ef69d0c3227a7d4f7f35bbc2848.png\"\n                  alt=\"No Exotic\"\n                  class=\"exotic-img\" />\n              </div>\n              <span\n                class=\"exotic-name\"\n                [matTooltip]=\"result.exotic?.name || 'No Exotic'\"\n                [matTooltipDisabled]=\"!shouldShowTooltip(result.exotic?.name || 'No Exotic')\">\n                {{ result.exotic?.name || \"No Exotic\" }}\n              </span>\n            </div>\n\n            <div class=\"stats-section\">\n              <div\n                class=\"stat-item-compact\"\n                *ngFor=\"let stat of STAT_ORDER; let statIndex = index\"\n                [matTooltip]=\"getStatName(stat)\">\n                <img\n                  [src]=\"getStatIcon(stat)\"\n                  [alt]=\"getStatName(stat)\"\n                  class=\"stat-icon-compact\" />\n                <span class=\"stat-value-compact\">{{ result.stats[stat] }}</span>\n              </div>\n            </div>\n\n            <div class=\"mods-section\">\n              <app-table-mod-display\n                [mods]=\"result.mods\"\n                [artifice]=\"result.artifice\"\n                class=\"mods-display\">\n              </app-table-mod-display>\n            </div>\n\n            <div class=\"tiers-section\">\n              <span class=\"total-stats\">{{ getTotalStats(result) }}</span>\n              <span class=\"tiers-label\">Total</span>\n            </div>\n          </div>\n\n          <!-- Sources Row -->\n          <div class=\"sources-row\" *ngIf=\"result.usesCollectionRoll || result.usesVendorRoll\">\n            <mat-chip-listbox>\n              <mat-chip-option *ngIf=\"result.usesCollectionRoll\" disabled>\n                <mat-icon>collections_bookmark</mat-icon>\n                Collection\n              </mat-chip-option>\n              <mat-chip-option *ngIf=\"result.usesVendorRoll\" disabled>\n                <mat-icon>store</mat-icon>\n                Vendor\n              </mat-chip-option>\n            </mat-chip-listbox>\n          </div>\n        </div>\n\n        <!-- Expanded View -->\n        <div class=\"card-expanded\" [class.hidden]=\"expandedCard !== i\">\n          <div class=\"expanded-content\">\n            <!-- Left Side: Summary -->\n            <div class=\"left-summary\">\n              <div class=\"exotic-section-expanded\">\n                <img\n                  *ngIf=\"result.exotic\"\n                  [src]=\"'https://bungie.net/' + result.exotic.icon\"\n                  [alt]=\"result.exotic.name\"\n                  class=\"exotic-img-large\" />\n                <div class=\"exotic-info\">\n                  <h3>{{ result.exotic?.name || \"No Exotic\" }}</h3>\n                  <div class=\"total-stats-large\">{{ getTotalStats(result) }} Total</div>\n                </div>\n              </div>\n\n              <div class=\"mods-section-expanded\">\n                <h4>Required Mods</h4>\n                <app-table-mod-display [mods]=\"result.mods\" [artifice]=\"result.artifice\">\n                </app-table-mod-display>\n              </div>\n\n              <div class=\"stats-summary\">\n                <h4>Final Stats</h4>\n                <div class=\"stats-grid\">\n                  <div\n                    class=\"stat-item-large\"\n                    *ngFor=\"let stat of STAT_ORDER\"\n                    [matTooltip]=\"getStatName(stat)\">\n                    <img\n                      [src]=\"getStatIcon(stat)\"\n                      [alt]=\"getStatName(stat)\"\n                      class=\"stat-icon-large\" />\n                    <div class=\"stat-info\">\n                      <span class=\"stat-value-large\">{{ result.stats[stat] }}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <!-- Right Side: Detailed Breakdown -->\n            <div class=\"right-details\">\n              <h4>Armor Breakdown</h4>\n              <div class=\"armor-table\">\n                <table class=\"breakdown-table\">\n                  <thead>\n                    <tr>\n                      <th>Piece</th>\n                      <th *ngFor=\"let stat of STAT_ORDER\">\n                        {{ ArmorStatNames[stat] }}\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr *ngFor=\"let item of result.items\" class=\"armor-row\">\n                      <td class=\"item-name\">\n                        <div class=\"item-info\">\n                          <app-item-icon\n                            [itemHash]=\"item.hash\"\n                            [masterworked]=\"item.masterworked\"\n                            [source]=\"item.source\">\n                          </app-item-icon>\n                          <span\n                            class=\"item-name-text\"\n                            [matTooltip]=\"item.name\"\n                            [matTooltipDisabled]=\"!shouldShowTooltip(item.name)\">\n                            {{ getShortItemName(item.name) }}\n                          </span>\n\n                          <!-- Masterwork level indicator -->\n                          <span\n                            *ngIf=\"getMasterworkDisplay(item)\"\n                            class=\"masterwork-level\"\n                            [class.armor-v3]=\"item.armorSystem === 3\"\n                            [class.armor-legacy]=\"item.armorSystem < 3\"\n                            [class.fully-masterworked]=\"\n                              item.armorSystem === 3 && item.masterworkLevel === 5\n                            \"\n                            [matTooltip]=\"getMasterworkTooltip(item)\">\n                            {{ getMasterworkDisplay(item) }}\n                          </span>\n\n                          <!-- Socket/Perk indicator -->\n                          <div class=\"socket-container\" *ngIf=\"item.perk\">\n                            <app-armor-perk-icon [perk]=\"item.perk || 0\"></app-armor-perk-icon>\n                          </div>\n\n                          <!-- Transfer state indicators -->\n                          <div class=\"transfer-state-indicators\">\n                            <!-- Loading spinner for waiting/transferring states -->\n                            <mat-progress-spinner\n                              *ngIf=\"item.transferState === 1 || item.transferState === 2\"\n                              class=\"transfer-spinner\"\n                              color=\"primary\"\n                              diameter=\"16\"\n                              mode=\"indeterminate\">\n                            </mat-progress-spinner>\n\n                            <!-- Success icon -->\n                            <mat-icon\n                              *ngIf=\"item.transferState === 3\"\n                              class=\"transfer-success\"\n                              matTooltip=\"Item successfully moved to inventory.\">\n                              check_circle_outline\n                            </mat-icon>\n\n                            <!-- Error icon -->\n                            <mat-icon\n                              *ngIf=\"item.transferState === 4\"\n                              class=\"transfer-error\"\n                              matTooltip=\"This item could not be moved. Make sure that there is enough space on your character.\">\n                              error_outline\n                            </mat-icon>\n                          </div>\n                        </div>\n                      </td>\n                      <td *ngFor=\"let stat of STAT_ORDER\">{{\n                        getItemStatWithMasterwork(item, stat)\n                      }}</td>\n                    </tr>\n\n                    <!-- Total armor stats row -->\n                    <tr class=\"total-row\" *ngIf=\"result.statsNoMods\">\n                      <td\n                        class=\"total-label expandable-row\"\n                        [class.expanded]=\"isBreakdownExpanded(i)\"\n                        (click)=\"toggleBreakdown(i); $event.stopPropagation()\"\n                        *ngIf=\"hasBreakdownRows(result)\">\n                        <div class=\"expandable-content\">\n                          <strong>Total (armor)</strong>\n                          <mat-icon class=\"expand-icon\">{{\n                            isBreakdownExpanded(i) ? \"expand_less\" : \"expand_more\"\n                          }}</mat-icon>\n                        </div>\n                      </td>\n                      <td class=\"total-label\" *ngIf=\"!hasBreakdownRows(result)\">\n                        <strong>Total (armor)</strong>\n                      </td>\n                      <td *ngFor=\"let stat of STAT_ORDER\">\n                        <strong>{{ result.statsNoMods[stat] }}</strong>\n                      </td>\n                    </tr>\n\n                    <!-- Configuration bonus row -->\n                    <tr class=\"config-row\" *ngIf=\"hasConfigBonus() && isBreakdownExpanded(i)\">\n                      <td class=\"config-label\">Configuration</td>\n                      <td *ngFor=\"let stat of STAT_ORDER\"\n                        ><span\n                          *ngIf=\"getConfigValue(stat) !== 0\"\n                          [class]=\"getConfigValue(stat) > 0 ? 'positive' : 'negative'\"\n                          >{{ getConfigValue(stat) > 0 ? \"+\" : \"\" }}{{ getConfigValue(stat) }}</span\n                        ></td\n                      >\n                    </tr>\n\n                    <!-- Minor mods row -->\n                    <tr\n                      class=\"minor-mods-row\"\n                      *ngIf=\"hasMinorMods(result) && isBreakdownExpanded(i)\">\n                      <td class=\"mods-label\">Minor Mods</td>\n                      <td *ngFor=\"let stat of STAT_ORDER\"\n                        ><span *ngIf=\"getMinorModCount(result, stat) > 0\" class=\"positive\"\n                          >{{ getMinorModCount(result, stat) }}×5</span\n                        ></td\n                      >\n                    </tr>\n\n                    <!-- Major mods row -->\n                    <tr\n                      class=\"major-mods-row\"\n                      *ngIf=\"hasMajorMods(result) && isBreakdownExpanded(i)\">\n                      <td class=\"mods-label\">Major Mods</td>\n                      <td *ngFor=\"let stat of STAT_ORDER\"\n                        ><span *ngIf=\"getMajorModCount(result, stat) > 0\" class=\"positive\"\n                          >{{ getMajorModCount(result, stat) }}×10</span\n                        ></td\n                      >\n                    </tr>\n\n                    <!-- Artifice mods row -->\n                    <tr\n                      class=\"artifice-mods-row\"\n                      *ngIf=\"hasArtificeMods(result) && isBreakdownExpanded(i)\">\n                      <td class=\"mods-label\">Artifice Mods</td>\n                      <td *ngFor=\"let stat of STAT_ORDER\"\n                        ><span *ngIf=\"getArtificeModCount(result, stat) > 0\" class=\"positive\"\n                          >{{ getArtificeModCount(result, stat) }}×3</span\n                        ></td\n                      >\n                    </tr>\n\n                    <!-- Final total row -->\n                    <tr class=\"final-total-row\">\n                      <td class=\"total-label\" style=\"text-align: left\"\n                        ><strong>Total (with Mods)</strong></td\n                      >\n                      <td *ngFor=\"let stat of STAT_ORDER\"\n                        ><strong>{{ result.stats[stat] }}</strong></td\n                      >\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n\n              <!-- Actions -->\n              <div class=\"card-actions\">\n                <button mat-stroked-button (click)=\"copyDIMQuery(result); $event.stopPropagation()\">\n                  <mat-icon>content_copy</mat-icon>\n                  Copy DIM Query\n                </button>\n                <button mat-stroked-button (click)=\"openInDIM(result); $event.stopPropagation()\">\n                  <mat-icon>open_in_new</mat-icon>\n                  Open in DIM\n                </button>\n                <button\n                  mat-stroked-button\n                  matTooltip=\"Warning: Does not move items out of your inventory.\"\n                  (click)=\"moveItems(result); $event.stopPropagation()\">\n                  <mat-icon>move_down</mat-icon>\n                  Move Items\n                </button>\n                <button\n                  mat-stroked-button\n                  matTooltip=\"Warning: Does not move items out of your inventory.\"\n                  (click)=\"moveItems(result, true); $event.stopPropagation()\">\n                  <mat-icon>upload</mat-icon>\n                  Equip Items\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </mat-card>\n    </div>\n\n    <!-- Loading indicator -->\n    <div class=\"loading-indicator\" *ngIf=\"isLoading\">\n      <mat-spinner diameter=\"32\"></mat-spinner>\n      <span>Loading more results...</span>\n    </div>\n  </div>\n</div>\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, Input, OnChanges, OnDestroy, SimpleChanges } from \"@angular/core\";\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\nimport { Subject } from \"rxjs\";\nimport { ResultDefinition, ResultItem } from \"../results.component\";\nimport { ConfigurationService } from \"../../../../services/configuration.service\";\nimport {\n  ArmorStat,\n  ArmorStatNames,\n  ArmorStatIconUrls,\n  StatModifier,\n  ARMORSTAT_ORDER,\n} from \"../../../../data/enum/armor-stat\";\nimport { ModInformation } from \"src/app/data/ModInformation\";\nimport { DimService } from \"../../../../services/dim.service\";\nimport { BungieApiService } from \"../../../../services/bungie-api.service\";\nimport { ArmorSystem } from \"src/app/data/types/IManifestArmor\";\n\n@Component({\n  selector: \"app-results-card-view\",\n  templateUrl: \"./results-card-view.component.html\",\n  styleUrls: [\"./results-card-view.component.scss\"],\n})\nexport class ResultsCardViewComponent implements OnChanges, OnDestroy {\n  STAT_ORDER = ARMORSTAT_ORDER;\n  ArmorStatNames = ArmorStatNames;\n  @Input() results: ResultDefinition[] = [];\n\n  filteredResults: ResultDefinition[] = [];\n  displayedResults: ResultDefinition[] = [];\n\n  // Sorting state\n  activeSortField: string | null = null;\n  sortDirection: \"asc\" | \"desc\" = \"desc\";\n\n  expandedCard: number | null = null;\n  expandedBreakdown: number | null = null;\n  isLoading = false;\n\n  // Infinite scroll settings\n  private readonly PAGE_SIZE = 25;\n  private currentPage = 0;\n  Math = Math;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private snackBar: MatSnackBar,\n    private configService: ConfigurationService,\n    private dimService: DimService,\n    private bungieApiService: BungieApiService\n  ) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes[\"results\"] && this.results) {\n      this.expandedBreakdown = null; // Reset breakdown expansion on new results\n      this.initializeData();\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  private initializeData() {\n    this.filteredResults = [...this.results];\n    this.applyFiltersAndSort();\n    this.resetPagination();\n    this.loadNextPage();\n  }\n\n  toggleSort(field: string) {\n    if (this.activeSortField === field) {\n      // Toggle through: desc -> asc -> none -> desc...\n      if (this.sortDirection === \"desc\") {\n        this.sortDirection = \"asc\";\n      } else {\n        // Reset sorting (no sort)\n        this.activeSortField = null;\n        this.sortDirection = \"desc\";\n      }\n    } else {\n      // New field, start with desc\n      this.activeSortField = field;\n      this.sortDirection = \"desc\";\n    }\n\n    this.applyFiltersAndSort();\n    this.resetPagination();\n    this.loadNextPage();\n  }\n\n  getSortIcon(field: string): string {\n    if (this.activeSortField !== field) {\n      return \"remove\"; // dash for inactive\n    }\n    return this.sortDirection === \"desc\" ? \"keyboard_arrow_down\" : \"keyboard_arrow_up\";\n  }\n\n  private applyFiltersAndSort() {\n    // No filters anymore, just copy results\n    this.filteredResults = [...this.results];\n\n    // Apply sorting only if a sort field is active\n    if (this.activeSortField) {\n      this.filteredResults.sort((a, b) => {\n        let aValue: number;\n        let bValue: number;\n\n        switch (this.activeSortField) {\n          case \"total\":\n            aValue = this.getTotalStats(a);\n            bValue = this.getTotalStats(b);\n            break;\n          case \"mods\":\n            aValue = this.getModSortValue(a);\n            bValue = this.getModSortValue(b);\n            break;\n          case \"weapon\":\n            aValue = a.stats[ArmorStat.StatWeapon];\n            bValue = b.stats[ArmorStat.StatWeapon];\n            break;\n          case \"health\":\n            aValue = a.stats[ArmorStat.StatHealth];\n            bValue = b.stats[ArmorStat.StatHealth];\n            break;\n          case \"class\":\n            aValue = a.stats[ArmorStat.StatClass];\n            bValue = b.stats[ArmorStat.StatClass];\n            break;\n          case \"grenade\":\n            aValue = a.stats[ArmorStat.StatGrenade];\n            bValue = b.stats[ArmorStat.StatGrenade];\n            break;\n          case \"super\":\n            aValue = a.stats[ArmorStat.StatSuper];\n            bValue = b.stats[ArmorStat.StatSuper];\n            break;\n          case \"melee\":\n            aValue = a.stats[ArmorStat.StatMelee];\n            bValue = b.stats[ArmorStat.StatMelee];\n            break;\n          default:\n            aValue = this.getTotalStats(a);\n            bValue = this.getTotalStats(b);\n        }\n\n        return this.sortDirection === \"desc\" ? bValue - aValue : aValue - bValue;\n      });\n    }\n  }\n\n  private resetPagination() {\n    this.currentPage = 0;\n    this.displayedResults = [];\n    this.expandedCard = null;\n  }\n\n  private loadNextPage() {\n    const startIndex = this.currentPage * this.PAGE_SIZE;\n    const endIndex = startIndex + this.PAGE_SIZE;\n    const newResults = this.filteredResults.slice(startIndex, endIndex);\n\n    this.displayedResults.push(...newResults);\n    this.currentPage++;\n  }\n\n  onScroll(event: any) {\n    const element = event.target;\n    if (element.scrollTop + element.clientHeight >= element.scrollHeight - 100) {\n      if (!this.isLoading && this.displayedResults.length < this.filteredResults.length) {\n        this.isLoading = true;\n        // Simulate loading delay for better UX\n        setTimeout(() => {\n          this.loadNextPage();\n          this.isLoading = false;\n        }, 200);\n      }\n    }\n  }\n\n  toggleCard(index: number) {\n    this.expandedCard = this.expandedCard === index ? null : index;\n    // Reset breakdown expansion when card is collapsed\n    if (this.expandedCard !== index) {\n      this.expandedBreakdown = null;\n    }\n  }\n\n  toggleBreakdown(index: number) {\n    this.expandedBreakdown = this.expandedBreakdown === index ? null : index;\n  }\n\n  isBreakdownExpanded(index: number): boolean {\n    return this.expandedBreakdown === index;\n  }\n\n  hasBreakdownRows(result: ResultDefinition): boolean {\n    return (\n      this.hasConfigBonus() ||\n      this.hasMinorMods(result) ||\n      this.hasMajorMods(result) ||\n      this.hasArtificeMods(result)\n    );\n  }\n\n  trackByFn(index: number, item: ResultDefinition): any {\n    return item.stats.join(\"-\") + item.mods.join(\"-\") + (item.exotic?.hash || \"none\");\n  }\n\n  getTotalStats(result: ResultDefinition): number {\n    return result.stats.reduce((sum, stat) => sum + stat, 0);\n  }\n\n  getModCost(result: ResultDefinition): number {\n    // Calculate mod cost based on the number and types of mods needed\n    const modCost = (result.mods || []).reduce((cost, mod) => {\n      // Minor mods (5-point) cost 1 energy, major mods (10-point) cost 3 energy\n      const isMinorMod = mod % 2 === 1; // odd numbers are minor mods in the enum\n      return cost + (isMinorMod ? 1 : 3);\n    }, 0);\n\n    const artificeCost = (result.artifice || []).reduce((cost, mod) => {\n      return cost + 1; // Artifice mods cost 1 energy each\n    }, 0);\n\n    return modCost + artificeCost;\n  }\n\n  getModSortValue(result: ResultDefinition): number {\n    // Use the same sorting logic as results.component.ts:\n    // Primary sort by mod count (weighted by 100), then by mod cost\n    return +100 * result.modCount + result.modCost;\n  }\n\n  getStatIcon(statIndex: number): string {\n    return ArmorStatIconUrls[statIndex as ArmorStat];\n  }\n\n  getStatName(statIndex: number): string {\n    return ArmorStatNames[statIndex as ArmorStat];\n  }\n\n  getItemStatWithMasterwork(item: ResultItem, statIndex: number): number {\n    let baseStat = item.stats[statIndex];\n\n    // Add masterwork bonus using the same logic as expanded-result-content\n    const masterworkBonus = this.getMasterworkBonus(item);\n    baseStat += masterworkBonus[statIndex];\n\n    return baseStat;\n  }\n\n  getMasterworkBonus(item: ResultItem): number[] {\n    const bonus = [0, 0, 0, 0, 0, 0];\n    const config = this.configService.readonlyConfigurationSnapshot;\n\n    if (item.armorSystem == ArmorSystem.Armor2) {\n      // Armor 2.0\n      if (\n        item.masterworkLevel == 10 ||\n        (item.exotic && config.assumeExoticsMasterworked) ||\n        (!item.exotic && config.assumeLegendariesMasterworked)\n      ) {\n        // Armor 2.0 Masterworked items give +2 to all stats\n        for (let i = 0; i < 6; i++) {\n          bonus[i] += 2;\n        }\n      }\n      return bonus;\n    } else if (item.armorSystem == ArmorSystem.Armor3) {\n      // Armor 3.0\n      let multiplier = item.masterworkLevel || 0;\n      if (\n        (item.exotic && config.assumeExoticsMasterworked) ||\n        (!item.exotic && config.assumeLegendariesMasterworked)\n      ) {\n        multiplier = 5;\n      }\n\n      if (multiplier == 0) return bonus;\n\n      // For Armor 3.0, assume the first three stats are the archetype stats and don't get masterwork bonus\n      // The OTHER THREE stats (3, 4, 5) get +1 per multiplier level\n      for (let i = 0; i < 6; i++) {\n        if (item.archetypeStats && item.archetypeStats.indexOf(i) === -1) {\n          bonus[i] += multiplier;\n        }\n      }\n\n      return bonus;\n    }\n\n    return bonus;\n  }\n\n  getShortItemName(fullName: string): string {\n    // Remove common prefixes and suffixes to make names shorter\n    return fullName\n      .replace(/^(Exotic|Legendary)\\s+/, \"\")\n      .replace(/\\s+(Helmet|Gauntlets|Chest Armor|Leg Armor|Class Item)$/, \"\")\n      .substring(0, 20);\n  }\n\n  getItemColor(item: ResultItem): string {\n    if (item.masterworked) return \"#ffeb3b\";\n    if (item.exotic) return \"#ff9800\";\n    return \"#9e9e9e\";\n  }\n\n  getMasterworkDisplay(item: ResultItem): string {\n    // For armor system 3 (Armor 2.0), show masterwork level\n    if (item.armorSystem === 3 && item.masterworkLevel !== undefined) {\n      if (item.masterworkLevel < 5) {\n        return `${item.masterworkLevel}/5`;\n      } else if (item.masterworkLevel === 5) {\n        return \"MW\"; // Fully masterworked\n      }\n    }\n    // For other systems or when masterworked is true, show MW indicator\n    if (item.masterworked) {\n      return \"MW\";\n    }\n    return \"\";\n  }\n\n  getMasterworkTooltip(item: ResultItem): string {\n    if (item.armorSystem === 3 && item.masterworkLevel !== undefined) {\n      if (item.masterworkLevel < 5) {\n        return `Armor 3.0 - Masterwork Level ${item.masterworkLevel}/5`;\n      } else {\n        return \"Armor 3.0 - Fully Masterworked\";\n      }\n    }\n    if (item.masterworked) {\n      return \"Armor 2.0 - Masterworked\";\n    }\n    return \"\";\n  }\n\n  shouldShowTooltip(text: string): boolean {\n    // Show tooltip if text is longer than what we typically display\n    return text != null && text.length > 20;\n  }\n\n  async copyDIMQuery(result: ResultDefinition) {\n    const success = await this.dimService.copyDIMQuery(result);\n    if (success) {\n      this.snackBar.open(\"DIM query copied to clipboard\", \"\", { duration: 2000 });\n    } else {\n      this.snackBar.open(\"Failed to copy to clipboard\", \"\", { duration: 2000 });\n    }\n  }\n\n  openInDIM(result: ResultDefinition) {\n    this.dimService.openInDIM(result);\n  }\n\n  // Configuration values (fragments, subclass bonuses, etc.)\n  hasConfigBonus(): boolean {\n    // Check if any stat has a non-zero configuration value\n    for (let i = 0; i < 6; i++) {\n      if (this.getConfigValue(i) !== 0) return true;\n    }\n    return false;\n  }\n\n  getConfigValue(statIndex: number): number {\n    let configValue = 0;\n    const config = this.configService.readonlyConfigurationSnapshot;\n\n    // Check for enabled mods and add their stat bonuses if present\n    if (config.enabledMods && Array.isArray(config.enabledMods)) {\n      for (const modifierId of config.enabledMods) {\n        const modInfo = ModInformation[modifierId];\n        if (!modInfo || !modInfo.bonus || !Array.isArray(modInfo.bonus)) continue;\n        const bonus = modInfo.bonus.find((b) => b.stat === statIndex);\n        if (bonus) {\n          configValue += bonus.value;\n        }\n      }\n    }\n\n    // You can add other config-based bonuses here if needed\n\n    return configValue;\n  }\n\n  // Minor mods methods\n  hasMinorMods(result: ResultDefinition): boolean {\n    if (!result.mods) return false;\n    const minorMods = [\n      StatModifier.MINOR_WEAPON,\n      StatModifier.MINOR_HEALTH,\n      StatModifier.MINOR_CLASS,\n      StatModifier.MINOR_GRENADE,\n      StatModifier.MINOR_SUPER,\n      StatModifier.MINOR_MELEE,\n    ];\n    return result.mods.some((mod) => minorMods.includes(mod));\n  }\n\n  getMinorModCount(result: ResultDefinition, statIndex: number): number {\n    if (!result.mods) return 0;\n    const minorModForStat = [\n      StatModifier.MINOR_WEAPON,\n      StatModifier.MINOR_HEALTH,\n      StatModifier.MINOR_CLASS,\n      StatModifier.MINOR_GRENADE,\n      StatModifier.MINOR_SUPER,\n      StatModifier.MINOR_MELEE,\n    ][statIndex];\n    return result.mods.filter((mod) => mod === minorModForStat).length;\n  }\n\n  // Major mods methods\n  hasMajorMods(result: ResultDefinition): boolean {\n    if (!result.mods) return false;\n    const majorMods = [\n      StatModifier.MAJOR_WEAPON,\n      StatModifier.MAJOR_HEALTH,\n      StatModifier.MAJOR_CLASS,\n      StatModifier.MAJOR_GRENADE,\n      StatModifier.MAJOR_SUPER,\n      StatModifier.MAJOR_MELEE,\n    ];\n    return result.mods.some((mod) => majorMods.includes(mod));\n  }\n\n  getMajorModCount(result: ResultDefinition, statIndex: number): number {\n    if (!result.mods) return 0;\n    const majorModForStat = [\n      StatModifier.MAJOR_WEAPON,\n      StatModifier.MAJOR_HEALTH,\n      StatModifier.MAJOR_CLASS,\n      StatModifier.MAJOR_GRENADE,\n      StatModifier.MAJOR_SUPER,\n      StatModifier.MAJOR_MELEE,\n    ][statIndex];\n    return result.mods.filter((mod) => mod === majorModForStat).length;\n  }\n\n  // Artifice mods methods\n  hasArtificeMods(result: ResultDefinition): boolean {\n    if (!result.artifice) return false;\n    return result.artifice.length > 0;\n  }\n\n  getArtificeModCount(result: ResultDefinition, statIndex: number): number {\n    if (!result.artifice) return 0;\n    const artificeModForStat = [\n      StatModifier.ARTIFICE_WEAPON,\n      StatModifier.ARTIFICE_HEALTH,\n      StatModifier.ARTIFICE_CLASS,\n      StatModifier.ARTIFICE_GRENADE,\n      StatModifier.ARTIFICE_SUPER,\n      StatModifier.ARTIFICE_MELEE,\n    ][statIndex];\n    return result.artifice.filter((mod) => mod === artificeModForStat).length;\n  }\n\n  // Inventory management methods\n  async moveItems(result: ResultDefinition, equip = false) {\n    const moveResult = await this.bungieApiService.moveResultItems(result, equip);\n\n    if (!moveResult.success) {\n      this.snackBar.open(\"Error: Could not find a character to move the items to.\", \"\", {\n        duration: 3000,\n      });\n      return;\n    }\n\n    if (moveResult.allSuccessful) {\n      this.snackBar.open(\"Success! Moved all the items.\", \"\", { duration: 2000 });\n    } else {\n      this.snackBar.open(\n        \"Some of the items could not be moved. Make sure that there is enough space in the specific slot. This tool will not move items out of your inventory.\",\n        \"\",\n        { duration: 4000 }\n      );\n    }\n  }\n}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { NgModule } from \"@angular/core\";\nimport { BrowserModule } from \"@angular/platform-browser\";\n\nimport { AppComponent } from \"./app.component\";\nimport { LoginComponent } from \"./components/login/login.component\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport { HttpClientModule } from \"@angular/common/http\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { HandleBungieLoginComponent } from \"./components/handle-bungie-login/handle-bungie-login.component\";\nimport { AuthenticatedGuard } from \"./guards/authenticated.guard\";\nimport { NotAuthenticatedGuard } from \"./guards/not-authenticated.guard\";\nimport { AppV2CoreComponent } from \"./components/authenticated-v2/app-v2-core/app-v2-core.component\";\nimport { SettingsComponent } from \"./components/authenticated-v2/settings/settings.component\";\nimport { ResultsComponent } from \"./components/authenticated-v2/results/results.component\";\nimport { DesiredStatSelectionComponent } from \"./components/authenticated-v2/settings/desired-stat-selection/desired-stat-selection.component\";\nimport { StatTierSelectionComponent } from \"./components/authenticated-v2/settings/desired-stat-selection/stat-tier-selection/stat-tier-selection.component\";\nimport { DesiredExoticSelectionComponent } from \"./components/authenticated-v2/settings/desired-exotic-selection/desired-exotic-selection.component\";\nimport { DesiredClassSelectionComponent } from \"./components/authenticated-v2/settings/desired-class-selection/desired-class-selection.component\";\nimport { StatIconComponent } from \"./components/authenticated-v2/components/stat-icon/stat-icon.component\";\nimport { DesiredModLimitSelectionComponent } from \"./components/authenticated-v2/settings/desired-mod-limit-selection/desired-mod-limit-selection.component\";\nimport { DesiredModsSelectionComponent } from \"./components/authenticated-v2/settings/desired-mods-selection/desired-mods-selection.component\";\nimport { VarDirectiveDirective } from \"./components/authenticated-v2/components/var-directive.directive\";\nimport { AdvancedSettingsComponent } from \"./components/authenticated-v2/settings/advanced-settings/advanced-settings.component\";\nimport { LoadAndSaveSettingsComponent } from \"./components/authenticated-v2/settings/load-and-save-settings/load-and-save-settings.component\";\nimport { ConfirmDialogComponent } from \"./components/authenticated-v2/components/confirm-dialog/confirm-dialog.component\";\nimport { ExpandedResultContentComponent } from \"./components/authenticated-v2/results/expanded-result-content/expanded-result-content.component\";\nimport { CountElementInListPipe } from \"./components/authenticated-v2/results/expanded-result-content/count-element-in-list.pipe\";\nimport { ClipboardModule } from \"@angular/cdk/clipboard\";\nimport { IgnoredItemsListComponent } from \"./components/authenticated-v2/settings/ignored-items-list/ignored-items-list.component\";\nimport { HelpPageComponent } from \"./components/authenticated-v2/subpages/help-page/help-page.component\";\nimport { ArmorPickerPageComponent } from \"./components/authenticated-v2/subpages/armor-picker-page/armor-picker-page.component\";\nimport { ArmorClusterPageComponent } from \"./components/authenticated-v2/subpages/armor-cluster-page/armor-cluster-page.component\";\nimport { TableModDisplayComponent } from \"./components/authenticated-v2/results/table-mod-display/table-mod-display.component\";\nimport { ArmorTooltipComponent } from \"./components/authenticated-v2/overlays/armor-tooltip-component/armor-tooltip.component\";\nimport { ItemTooltipRendererDirective } from \"./components/authenticated-v2/overlays/armor-tooltip-component/item-tooltip-renderer.directive\";\nimport { ItemIconComponent } from \"./components/authenticated-v2/components/item-icon/item-icon.component\";\nimport { ArmorInvestigationPageComponent } from \"./components/authenticated-v2/subpages/armor-investigation-page/armor-investigation-page.component\";\nimport { ChangelogDialogComponent } from \"./components/authenticated-v2/components/changelog-dialog/changelog-dialog.component\";\nimport { ChangelogDialogControllerComponent } from \"./components/authenticated-v2/components/changelog-dialog-controller/changelog-dialog-controller.component\";\nimport { ChangelogListComponent } from \"./components/authenticated-v2/components/changelog-list/changelog-list.component\";\nimport { LayoutModule } from \"@angular/cdk/layout\";\nimport { ArmorPerkIconComponent } from \"./components/authenticated-v2/components/armor-perk-icon/armor-perk-icon.component\";\nimport { ExoticPerkTooltipComponent } from \"./components/authenticated-v2/overlays/exotic-perk-tooltip/exotic-perk-tooltip.component\";\nimport { ExoticTooltipDirective } from \"./components/authenticated-v2/overlays/exotic-perk-tooltip/exotic-tooltip.directive\";\nimport { AccountConfigPageComponent } from \"./components/authenticated-v2/subpages/account-config-page/account-config-page.component\";\nimport { ModDescriptionTooltipComponent } from \"./components/authenticated-v2/overlays/mod-description-tooltip/mod-description-tooltip.component\";\nimport { ModTooltipDirective } from \"./components/authenticated-v2/overlays/mod-description-tooltip/mod-tooltip.directive\";\nimport { StatCooldownTooltipComponent } from \"./components/authenticated-v2/overlays/stat-cooldown-tooltip/stat-cooldown-tooltip.component\";\nimport { StatCooldownTooltipDirective } from \"./components/authenticated-v2/overlays/stat-cooldown-tooltip/stat-cooldown-tooltip.directive\";\nimport { SlotLimitationTitleComponent } from \"./components/authenticated-v2/settings/desired-mod-limit-selection/slot-limitation-title/slot-limitation-title.component\";\nimport { CommonMaterialModule } from \"./modules/common-material/common-material.module\";\nimport { CommonModule } from \"@angular/common\";\nimport {\n  VendorIdFromItemIdPipe,\n  VendorNamePipe,\n} from \"./components/authenticated-v2/pipes/vendor-name-pipe\";\n\nimport { environment } from \"../environments/environment\";\nimport { H } from \"highlight.run\";\nimport { ResultsCardViewComponent } from \"./components/authenticated-v2/results/results-card-view/results-card-view.component\";\nimport { GearsetSelectionComponent } from \"./components/authenticated-v2/settings/desired-mod-limit-selection/gearset-selection/gearset-selection.component\";\nimport { GearsetcTooltipDirective as GearsetTooltipDirective } from \"./components/authenticated-v2/overlays/gearset-tooltip/gearset-tooltip.directive\";\nimport { GearsetTooltipComponent } from \"./components/authenticated-v2/overlays/gearset-tooltip/gearset-tooltip.component\";\n\nif (!!environment.highlight_project_id) {\n  H.init(environment.highlight_project_id, {\n    environment: environment.production\n      ? \"production\"\n      : environment.beta\n        ? \"beta\"\n        : environment.canary\n          ? \"canary\"\n          : \"dev\",\n    tracingOrigins: true,\n    inlineImages: false,\n    version: environment.version,\n    networkRecording: {\n      enabled: true,\n      recordHeadersAndBody: false,\n      urlBlocklist: [\n        \"https://bungie.net/common/destiny2_content/icons/\",\n        \"https://www.bungie.net/img/\",\n      ],\n    },\n  });\n}\n\nimport { ModslotVisualizationComponent } from \"./components/authenticated-v2/settings/desired-mod-limit-selection/modslot-visualization/modslot-visualization.component\";\nimport { ModLimitSegmentedComponent } from \"./components/authenticated-v2/settings/desired-mod-limit-selection/mod-limit-segmented/mod-limit-segmented.component\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: AppV2CoreComponent,\n    canActivate: [AuthenticatedGuard],\n    children: [\n      {\n        path: \"\",\n        component: ArmorPickerPageComponent,\n      },\n      {\n        path: \"help\",\n        component: HelpPageComponent,\n      },\n      {\n        path: \"cluster\",\n        component: ArmorClusterPageComponent,\n      },\n      {\n        path: \"investigate\",\n        component: ArmorInvestigationPageComponent,\n      },\n      {\n        path: \"account\",\n        component: AccountConfigPageComponent,\n      },\n    ],\n  },\n  //{path: '', component: MainComponent, canActivate: [AuthenticatedGuard]},\n  { path: \"login\", component: LoginComponent, canActivate: [NotAuthenticatedGuard] },\n  { path: \"login-bungie\", component: HandleBungieLoginComponent },\n  { path: \"**\", redirectTo: \"/\" },\n];\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    LoginComponent,\n    HandleBungieLoginComponent,\n    AppV2CoreComponent,\n    SettingsComponent,\n    ResultsComponent,\n    DesiredStatSelectionComponent,\n    StatTierSelectionComponent,\n    DesiredModLimitSelectionComponent,\n    DesiredExoticSelectionComponent,\n    DesiredClassSelectionComponent,\n    StatIconComponent,\n    DesiredModsSelectionComponent,\n    VarDirectiveDirective,\n    GearsetTooltipDirective,\n    GearsetTooltipComponent,\n    AdvancedSettingsComponent,\n    LoadAndSaveSettingsComponent,\n    ConfirmDialogComponent,\n    ExpandedResultContentComponent,\n    CountElementInListPipe,\n    VendorIdFromItemIdPipe,\n    VendorNamePipe,\n    IgnoredItemsListComponent,\n    HelpPageComponent,\n    ArmorPickerPageComponent,\n    ArmorClusterPageComponent,\n    TableModDisplayComponent,\n    ArmorTooltipComponent,\n    ItemTooltipRendererDirective,\n    ItemIconComponent,\n    ArmorInvestigationPageComponent,\n    ChangelogDialogComponent,\n    ChangelogDialogControllerComponent,\n    ChangelogListComponent,\n    ArmorPerkIconComponent,\n    ExoticPerkTooltipComponent,\n    ExoticTooltipDirective,\n    ModTooltipDirective,\n    StatCooldownTooltipDirective,\n    ModDescriptionTooltipComponent,\n    AccountConfigPageComponent,\n    ModDescriptionTooltipComponent,\n    StatCooldownTooltipComponent,\n    SlotLimitationTitleComponent,\n    ResultsCardViewComponent,\n    GearsetSelectionComponent,\n    ModslotVisualizationComponent,\n    ModLimitSegmentedComponent,\n  ],\n  imports: [\n    CommonModule,\n    CommonMaterialModule,\n\n    BrowserModule,\n    BrowserAnimationsModule,\n    HttpClientModule,\n    RouterModule.forRoot(routes, { useHash: true }),\n    ClipboardModule,\n    LayoutModule,\n  ],\n  providers: [],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","/*\n * Copyright (c) 2023 D2ArmorPicker by Mijago.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { enableProdMode } from \"@angular/core\";\nimport { platformBrowserDynamic } from \"@angular/platform-browser-dynamic\";\n\nimport { AppModule } from \"./app/app.module\";\nimport { environment } from \"./environments/environment\";\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.error(err));\n"],"x_google_ignoreList":[]}